[{"path":".env.local","fileType":"local","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"ENV\u003dLOCAL"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"DB_LOCAL_URI\u003dmongodb://mongo:27017/peerprep"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"REFRESH_TOKEN_SECRET\u003dd094b5d45a93e9b1f9bc6dee9aff27e26bf7a875333db0df955415e87151c16a49a72b6ee85ce483e6a243a0fbf8b93989dc150cacdd970c29053a650d4fb908"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"REDIS_HOST\u003dredis"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"POSTGRES_HOST\u003d\u0027postgres_db\u0027"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"POSTGRES_USER\u003d\u0027postgres\u0027"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"POSTGRES_DB\u003d\u0027postgres_db\u0027"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"POSTGRES_PASSWORD\u003d\u0027postgres\u0027"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"POSTGRES_PORT\u003d5432"}],"authorContributionMap":{"Hzxin":6,"tlylt":4,"uyencfi":1}},{"path":".github/PULL_REQUEST_TEMPLATE","fileType":"PULL_REQUEST_TEMPLATE","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"**What is the purpose of this pull request?**"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"- [ ] Documentation update"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"- [ ] Bug fix"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"- [ ] Feature addition or enhancement"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"- [ ] Code maintenance or refactor"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"- [ ] Test"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"- [ ] DevOps"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"- [ ] Others:"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"**Overview of changes**"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"**How it was tested/How to test**"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"**Service(s) Touched**"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"- [ ] Frontend"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"- [ ] User Service"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"- [ ] Matching Service"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"- [ ] Question Service"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"- [ ] Collaboration Service"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"- [ ] History Service"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"- [ ] Room Service"}],"authorContributionMap":{"MarcusTXK":2,"tlylt":20,"uyencfi":1}},{"path":".github/workflows/contributions.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"name: Deploy RepoSense report"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"on:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  # For active deployment on push to main branch"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  push:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    branches:"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"      - main"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"jobs:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"  deploy:"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    steps:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      - uses: tlylt/reposense-action@v1"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        with:"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"          token: ${{ secrets.GITHUB_TOKEN }} # Required"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"          cliArgs: \u0027--since d1\u0027"}],"authorContributionMap":{"tlylt":15}},{"path":".github/workflows/deploy.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"name: Deploy To Production"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"on:"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"  push:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"    branches:"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"      - production"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"env:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"  SHA: $(git rev-parse HEAD)"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"jobs:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"  build:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    steps:"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"      - uses: actions/checkout@v3"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"      - name: Login to Docker"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"        run: |-"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"          # docker login -u ${{ secrets.DOCKER_USERNAME }} -p ${{ secrets.DOCKER_PASSWORD }}"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"          echo ${{ secrets.DOCKER_PASSWORD }} | docker login -u ${{ secrets.DOCKER_USERNAME }} --password-stdin"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"      - name: Set Service Key"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"        uses: \u0027google-github-actions/auth@v0\u0027"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"        with:"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"          credentials_json: \u0027${{ secrets.GKE_SA_KEY }}\u0027"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"      - name: Set Project"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"        uses: google-github-actions/setup-gcloud@v0"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"        with:"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"          project_id: cs3219-365909 # from google cloud console"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"      - name: Auth"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"        run: |-"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"          gcloud --quiet auth configure-docker"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"      - name: Get Credentials"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"        uses: google-github-actions/get-gke-credentials@v0"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"        with:"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"          cluster_name: cs3219-cluster"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"          location: asia-southeast1-a"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"      - name: Build new Docker image"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"        run: |-"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"          docker build -t b9jmthkk/frontend:latest -t b9jmthkk/frontend:${{ env.SHA }} -f ./frontend/Dockerfile.production ./frontend"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"          docker build -t b9jmthkk/user:latest -t b9jmthkk/user:${{ env.SHA }} -f ./user-service/Dockerfile ./user-service"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"          docker build -t b9jmthkk/question:latest -t b9jmthkk/question:${{ env.SHA }} -f ./question-service/Dockerfile ./question-service"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"          docker build -t b9jmthkk/matching:latest -t b9jmthkk/matching:${{ env.SHA }} -f ./matching-service/Dockerfile ./matching-service"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"          docker build -t b9jmthkk/room:latest -t b9jmthkk/room:${{ env.SHA }} -f ./room-service/Dockerfile ./room-service"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"          docker build -t b9jmthkk/history:latest -t b9jmthkk/history:${{ env.SHA }} -f ./history-service/Dockerfile ./history-service"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"      - name: Push to Docker Hub"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"        run: |-"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"          docker push b9jmthkk/frontend:latest"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"          docker push b9jmthkk/user:latest"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"          docker push b9jmthkk/question:latest"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"          docker push b9jmthkk/matching:latest"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"          docker push b9jmthkk/room:latest"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"          docker push b9jmthkk/history:latest"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"          docker push b9jmthkk/frontend:${{ env.SHA }}"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"          docker push b9jmthkk/user:${{ env.SHA }}"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"          docker push b9jmthkk/question:${{ env.SHA }}"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"          docker push b9jmthkk/matching:${{ env.SHA }}"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"          docker push b9jmthkk/room:${{ env.SHA }}"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"          docker push b9jmthkk/history:${{ env.SHA }}"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"      - name: Re-Apply K8s Config and update image"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"        run: |-"},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"          kubectl apply -f k8s/manifests"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"          kubectl set image deployments/frontend-deployment frontend\u003db9jmthkk/frontend:${{ env.SHA }}"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"          kubectl set image deployments/user-deployment user\u003db9jmthkk/user:${{ env.SHA }}"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"          kubectl set image deployments/question-deployment question\u003db9jmthkk/question:${{ env.SHA }}"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"          kubectl set image deployments/matching-deployment matching\u003db9jmthkk/matching:${{ env.SHA }}"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"          kubectl set image deployments/room-deployment room\u003db9jmthkk/room:${{ env.SHA }}"},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"          kubectl set image deployments/history-deployment history\u003db9jmthkk/history:${{ env.SHA }}"}],"authorContributionMap":{"tlylt":75}},{"path":".github/workflows/frontend.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"name: Frontend"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"on:"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"  push:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"    branches:"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"      - main"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    tags:"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"      - \u0027v[0-9]+.[0-9]+.[0-9]+\u0027"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"  pull_request:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"jobs:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"  Frontend:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    defaults:"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"      run:"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"        shell: bash"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        working-directory: frontend"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    steps:"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"      - uses: actions/checkout@v2"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"      - uses: actions/setup-node@v2"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"        with:"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"          node-version: \u002714\u0027"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"      - name: Install dependencies"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"        run: npm ci"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"      - name: Lint"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"        run: npm run lint"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"      - name: Build"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"        run: npm run build"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"      - name: Test"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"        run: docker-compose -f docker-compose.test.yml up"}],"authorContributionMap":{"tlylt":29}},{"path":".github/workflows/history-service.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"name: History Service Test"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"on:"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"  push:"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"    branches:"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"      - main"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"    tags:"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"      - \u0027v[0-9]+.[0-9]+.[0-9]+\u0027"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"  pull_request:"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"jobs:"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"  Test:"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"    defaults:"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"      run:"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"        shell: bash"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"        working-directory: history-service"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"    steps:"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"      - uses: actions/checkout@v2"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"      - name: Test via docker-compose"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"        run: docker-compose -f docker-compose.test.yml up --exit-code-from web --build"}],"authorContributionMap":{"uyencfi":20}},{"path":".github/workflows/matching-service.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"name: Matching Service Test"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"on:"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"  push:"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"    branches:"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"      - main"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"    tags:"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"      - \"v[0-9]+.[0-9]+.[0-9]+\""},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"  pull_request:"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"jobs:"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"  Test:"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"    defaults:"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"      run:"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"        shell: bash"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"        working-directory: matching-service"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"    steps:"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"      - uses: actions/checkout@v2"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"      - name: Run lint \u0026 test via docker-compose"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"        run: docker-compose -f docker-compose.test.yml up --exit-code-from nodeserver --build"}],"authorContributionMap":{"MarcusTXK":20}},{"path":".github/workflows/question-service.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"name: Question Service Test"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"on:"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"  push:"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"    branches:"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"      - main"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"    tags:"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"      - \u0027v[0-9]+.[0-9]+.[0-9]+\u0027"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"  pull_request:"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"jobs:"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"  Test:"},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"    defaults:"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"      run:"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"        shell: bash"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"        working-directory: question-service"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"    steps:"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"      - uses: actions/checkout@v2"},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"      - name: Run lint \u0026 test via docker-compose"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"        run: docker-compose -f docker-compose.test.yml up --exit-code-from web --build"}],"authorContributionMap":{"Hzxin":20}},{"path":".github/workflows/room-service.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"name: Room Service Test"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"on:"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"  push:"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"    branches:"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"      - main"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"    tags:"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"      - \"v[0-9]+.[0-9]+.[0-9]+\""},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"  pull_request:"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"jobs:"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"  Test:"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"    defaults:"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"      run:"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"        shell: bash"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"        working-directory: room-service"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"    steps:"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"      - uses: actions/checkout@v2"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"      - name: Run lint \u0026 test via docker-compose"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"        run: docker-compose -f docker-compose.test.yml up --exit-code-from nodeserver --build"}],"authorContributionMap":{"MarcusTXK":20}},{"path":".github/workflows/user-service.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"name: User Service Test"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"on:"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"  push:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"    branches:"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"      - main"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    tags:"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"      - \u0027v[0-9]+.[0-9]+.[0-9]+\u0027"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"  pull_request:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"jobs:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"  Test:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    defaults:"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"      run:"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"        shell: bash"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        working-directory: user-service"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    steps:"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"      - uses: actions/checkout@v2"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"      - name: Run lint \u0026 test via docker-compose"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"        run: docker-compose -f docker-compose.test.yml up --exit-code-from web --build"}],"authorContributionMap":{"tlylt":20}},{"path":"README.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"# CS3219-AY22-23-Project-Group-58"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"LeetWithFriend at https://leetwithfriend.com/"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"- An interview preparation platform and peer matching system, where students can find peers to practice whiteboard-style interview questions together."},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"## Development"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"Spin up all the services for local manual testing"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"```bash"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"docker-compose -f docker-compose.local.yml up --build -d"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"```"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"Visit the frontend at http://localhost:80"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"To stop the services"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"```bash"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"docker-compose -f docker-compose.local.yml stop"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"```"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"Available seeded users for testing:"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"| Username | Password |"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"|----------|----------|"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"| qwe      | qwe      |"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"| asd      | asd      |"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"| zxc      | zxc      |"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"## User Service"},{"lineNumber":32,"author":{"gitId":"-"},"content":"1. Rename `.env.sample` file to `.env`."},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"1. Create a Cloud DB URL using Mongo Atlas."},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"1. Enter the DB URL created as `DB_CLOUD_URI` in `.env` file."},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"1. Setup dependencies via `npm ci`"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"1. Install npm packages using `npm i`."},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"1. Run User Service using `npm run dev`."},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"## Frontend"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"1. Setup dependencies via `npm ci`"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"1. Install new npm packages using `npm i`."},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"1. Run Frontend using `npm start`."}],"authorContributionMap":{"tlylt":36,"-":6}},{"path":"configs/author-config.csv","fileType":"csv","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"Repository\u0027s Location,Branch,Author\u0027s GitHub ID, Author\u0027s Emails, Author\u0027s Display Name,Author\u0027s Git Author Name,Ignore Glob List"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"https://github.com/CS3219-AY2223S1/cs3219-project-ay2223s1-g58.git,main,Hzxin,,Huang ZhenXin,,"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"https://github.com/CS3219-AY2223S1/cs3219-project-ay2223s1-g58.git,main,tlylt,,Liu Yongliang,tlylt,"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"https://github.com/CS3219-AY2223S1/cs3219-project-ay2223s1-g58.git,main,MarcusTXK,,Marcus Tang Xin Kye,,"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"https://github.com/CS3219-AY2223S1/cs3219-project-ay2223s1-g58.git,main,uyencfi,,Ngo Ngoc Phuong Uyen,,"}],"authorContributionMap":{"tlylt":5}},{"path":"configs/repo-config.csv","fileType":"csv","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"Repository\u0027s Location,Branch,File formats,Ignore Glob List,Ignore standalone config,Ignore Commits List,Ignore Authors List,Skip Ignored File Analysis"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"https://github.com/CS3219-AY2223S1/cs3219-project-ay2223s1-g58.git,main,,**.json,,,dependabot[bot];github-classroom[bot],yes"}],"authorContributionMap":{"tlylt":2}},{"path":"docker-compose.frontend.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"version: \"3.3\""},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"services:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  mongo:"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"    image: mongo"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    ports:"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"      - \"27017:27017\""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"  redis:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    image: redis:alpine"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    ports:"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"      - \"6379:6379\""},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"  user-service:"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    build:"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"      context: ./user-service"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"    ports:"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"      - \"8000:8000\""},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    links:"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"      - mongo"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"      - redis"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"    depends_on:"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"      - mongo"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"      - redis"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"    env_file:"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"      - .env.local"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"    environment:"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"      - PORT\u003d3000"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"  matching-service:"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"    build:"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"      context: ./matching-service"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"    ports:"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"      - \"8001:8001\""},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"    depends_on:"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"      postgres_db:"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"        condition: service_healthy"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"    links:"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"      - postgres_db"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"    environment:"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"      - PORT\u003d3000"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"      - URI_ROOM_SERVICE\u003dhttp://room-service:8022"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"      - URI_HISTORY_SERVICE\u003dhttp://history-service:8080"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"      - ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_PASSWORD\u003dpostgres"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_DB\u003dpostgres_db"},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_USER\u003dpostgres"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_HOST\u003dpostgres_db"},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_PORT\u003d5432"},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"      - ENV\u003dproduction"},{"lineNumber":49,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":50,"author":{"gitId":"MarcusTXK"},"content":"  room-service:"},{"lineNumber":51,"author":{"gitId":"MarcusTXK"},"content":"    build:"},{"lineNumber":52,"author":{"gitId":"MarcusTXK"},"content":"      context: ./room-service"},{"lineNumber":53,"author":{"gitId":"MarcusTXK"},"content":"    ports:"},{"lineNumber":54,"author":{"gitId":"MarcusTXK"},"content":"      - \"8022:8022\""},{"lineNumber":55,"author":{"gitId":"MarcusTXK"},"content":"    depends_on:"},{"lineNumber":56,"author":{"gitId":"MarcusTXK"},"content":"      postgres_db:"},{"lineNumber":57,"author":{"gitId":"MarcusTXK"},"content":"        condition: service_healthy"},{"lineNumber":58,"author":{"gitId":"MarcusTXK"},"content":"    links:"},{"lineNumber":59,"author":{"gitId":"MarcusTXK"},"content":"      - postgres_db"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"    environment:"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"      - PORT\u003d3000"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"      - URI_QUESTION_SERVICE\u003dhttp://question-service:8500"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"      - ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"},{"lineNumber":64,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_PASSWORD\u003dpostgres"},{"lineNumber":65,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_DB\u003dpostgres_db"},{"lineNumber":66,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_USER\u003dpostgres"},{"lineNumber":67,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_HOST\u003dpostgres_db"},{"lineNumber":68,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_PORT\u003d5432"},{"lineNumber":69,"author":{"gitId":"MarcusTXK"},"content":"      - ENV\u003dproduction"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":71,"author":{"gitId":"MarcusTXK"},"content":"  peerjs-server:"},{"lineNumber":72,"author":{"gitId":"MarcusTXK"},"content":"    image: peerjs/peerjs-server"},{"lineNumber":73,"author":{"gitId":"MarcusTXK"},"content":"    ports:"},{"lineNumber":74,"author":{"gitId":"MarcusTXK"},"content":"      - \"9000:9000\""},{"lineNumber":75,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"  postgres_db:"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"    image: postgres:latest"},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"    restart: always"},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"    ports:"},{"lineNumber":80,"author":{"gitId":"MarcusTXK"},"content":"      - \"5432:5432\""},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"    environment:"},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":"      POSTGRES_PASSWORD: postgres"},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"      POSTGRES_DB: postgres_db"},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":"      POSTGRES_USER: postgres"},{"lineNumber":85,"author":{"gitId":"tlylt"},"content":"      POSTGRES_HOST: postgres_db"},{"lineNumber":86,"author":{"gitId":"tlylt"},"content":"      POSTGRES_PORT: 5432"},{"lineNumber":87,"author":{"gitId":"tlylt"},"content":"    healthcheck:"},{"lineNumber":88,"author":{"gitId":"MarcusTXK"},"content":"      test: [\"CMD\", \"pg_isready\", \"-q\", \"-d\", \"postgres_db\", \"-U\", \"postgres\"]"},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"      interval: 5s"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"      timeout: 5s"},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":"      retries: 5"},{"lineNumber":92,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":"  question-service:"},{"lineNumber":94,"author":{"gitId":"tlylt"},"content":"    build:"},{"lineNumber":95,"author":{"gitId":"tlylt"},"content":"      context: ./question-service"},{"lineNumber":96,"author":{"gitId":"tlylt"},"content":"    ports:"},{"lineNumber":97,"author":{"gitId":"MarcusTXK"},"content":"      - \"8500:8500\""},{"lineNumber":98,"author":{"gitId":"tlylt"},"content":"    depends_on:"},{"lineNumber":99,"author":{"gitId":"tlylt"},"content":"      postgres_db:"},{"lineNumber":100,"author":{"gitId":"tlylt"},"content":"        condition: service_healthy"},{"lineNumber":101,"author":{"gitId":"tlylt"},"content":"    environment:"},{"lineNumber":102,"author":{"gitId":"tlylt"},"content":"      - PORT\u003d3000"},{"lineNumber":103,"author":{"gitId":"Hzxin"},"content":"    env_file:"},{"lineNumber":104,"author":{"gitId":"Hzxin"},"content":"      - .env.local"},{"lineNumber":105,"author":{"gitId":"tlylt"},"content":"    links:"},{"lineNumber":106,"author":{"gitId":"tlylt"},"content":"      - postgres_db"},{"lineNumber":107,"author":{"gitId":"tlylt"},"content":"    restart: on-failure"},{"lineNumber":108,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":109,"author":{"gitId":"uyencfi"},"content":"  history-service:"},{"lineNumber":110,"author":{"gitId":"uyencfi"},"content":"    build:"},{"lineNumber":111,"author":{"gitId":"uyencfi"},"content":"      context: ./history-service"},{"lineNumber":112,"author":{"gitId":"uyencfi"},"content":"    ports:"},{"lineNumber":113,"author":{"gitId":"uyencfi"},"content":"      - \"8080:8080\""},{"lineNumber":114,"author":{"gitId":"uyencfi"},"content":"    links:"},{"lineNumber":115,"author":{"gitId":"uyencfi"},"content":"      - mongo"},{"lineNumber":116,"author":{"gitId":"uyencfi"},"content":"    depends_on:"},{"lineNumber":117,"author":{"gitId":"uyencfi"},"content":"      - mongo"},{"lineNumber":118,"author":{"gitId":"uyencfi"},"content":"    env_file:"},{"lineNumber":119,"author":{"gitId":"uyencfi"},"content":"      - .env.local"},{"lineNumber":120,"author":{"gitId":"uyencfi"},"content":"    environment:"},{"lineNumber":121,"author":{"gitId":"uyencfi"},"content":"      - PORT\u003d3000"},{"lineNumber":122,"author":{"gitId":"uyencfi"},"content":"      - URI_QUESTION_SERVICE\u003dhttp://question-service:8500"}],"authorContributionMap":{"MarcusTXK":46,"Hzxin":2,"tlylt":58,"uyencfi":16}},{"path":"docker-compose.local.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"version: \"3.3\""},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"services:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  mongo:"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"    image: mongo"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    ports:"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"      - \"27017:27017\""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"  redis:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    image: redis:alpine"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    ports:"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"      - \"6379:6379\""},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"  user-service:"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    build:"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"      context: ./user-service"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"    ports:"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"      - \"8000:8000\""},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    links:"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"      - mongo"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"      - redis"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"    depends_on:"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"      - mongo"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"      - redis"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"    env_file:"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"      - .env.local"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"    environment:"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"      - PORT\u003d80"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"  matching-service:"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"    build:"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"      context: ./matching-service"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"    ports:"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"      - \"8001:8001\""},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"    depends_on:"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"      postgres_db:"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"        condition: service_healthy"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"    links:"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"      - postgres_db"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"    environment:"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"      - PORT\u003d80"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"      - URI_HISTORY_SERVICE\u003dhttp://history-service:8080"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"      - URI_ROOM_SERVICE\u003dhttp://room-service:8022"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"      - ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_PASSWORD\u003dpostgres"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_DB\u003dpostgres_db"},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_USER\u003dpostgres"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_HOST\u003dpostgres_db"},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_PORT\u003d5432"},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"      - ENV\u003dproduction"},{"lineNumber":49,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":50,"author":{"gitId":"MarcusTXK"},"content":"  room-service:"},{"lineNumber":51,"author":{"gitId":"MarcusTXK"},"content":"    build:"},{"lineNumber":52,"author":{"gitId":"MarcusTXK"},"content":"      context: ./room-service"},{"lineNumber":53,"author":{"gitId":"MarcusTXK"},"content":"    ports:"},{"lineNumber":54,"author":{"gitId":"MarcusTXK"},"content":"      - \"8022:8022\""},{"lineNumber":55,"author":{"gitId":"MarcusTXK"},"content":"    depends_on:"},{"lineNumber":56,"author":{"gitId":"MarcusTXK"},"content":"      postgres_db:"},{"lineNumber":57,"author":{"gitId":"MarcusTXK"},"content":"        condition: service_healthy"},{"lineNumber":58,"author":{"gitId":"MarcusTXK"},"content":"    links:"},{"lineNumber":59,"author":{"gitId":"MarcusTXK"},"content":"      - postgres_db"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"    environment:"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"      - PORT\u003d80"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"      - URI_QUESTION_SERVICE\u003dhttp://question-service:8500"},{"lineNumber":63,"author":{"gitId":"MarcusTXK"},"content":"      - ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"},{"lineNumber":64,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_PASSWORD\u003dpostgres"},{"lineNumber":65,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_DB\u003dpostgres_db"},{"lineNumber":66,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_USER\u003dpostgres"},{"lineNumber":67,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_HOST\u003dpostgres_db"},{"lineNumber":68,"author":{"gitId":"MarcusTXK"},"content":"      - POSTGRES_PORT\u003d5432"},{"lineNumber":69,"author":{"gitId":"MarcusTXK"},"content":"      - ENV\u003dproduction"},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":71,"author":{"gitId":"MarcusTXK"},"content":"  peerjs-server:"},{"lineNumber":72,"author":{"gitId":"MarcusTXK"},"content":"    image: peerjs/peerjs-server"},{"lineNumber":73,"author":{"gitId":"MarcusTXK"},"content":"    ports:"},{"lineNumber":74,"author":{"gitId":"MarcusTXK"},"content":"      - \"9000:9000\""},{"lineNumber":75,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":76,"author":{"gitId":"uyencfi"},"content":"  postgres_db:"},{"lineNumber":77,"author":{"gitId":"uyencfi"},"content":"    image: postgres:latest"},{"lineNumber":78,"author":{"gitId":"uyencfi"},"content":"    restart: always"},{"lineNumber":79,"author":{"gitId":"uyencfi"},"content":"    ports:"},{"lineNumber":80,"author":{"gitId":"MarcusTXK"},"content":"      - \"5432:5432\""},{"lineNumber":81,"author":{"gitId":"uyencfi"},"content":"    environment:"},{"lineNumber":82,"author":{"gitId":"uyencfi"},"content":"      POSTGRES_PASSWORD: postgres"},{"lineNumber":83,"author":{"gitId":"uyencfi"},"content":"      POSTGRES_DB: postgres_db"},{"lineNumber":84,"author":{"gitId":"uyencfi"},"content":"      POSTGRES_USER: postgres"},{"lineNumber":85,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_HOST: postgres_db"},{"lineNumber":86,"author":{"gitId":"uyencfi"},"content":"      POSTGRES_PORT: 5432"},{"lineNumber":87,"author":{"gitId":"uyencfi"},"content":"    healthcheck:"},{"lineNumber":88,"author":{"gitId":"uyencfi"},"content":"      test: [\"CMD\", \"pg_isready\", \"-q\", \"-d\", \"postgres_db\", \"-U\", \"postgres\"]"},{"lineNumber":89,"author":{"gitId":"uyencfi"},"content":"      interval: 5s"},{"lineNumber":90,"author":{"gitId":"uyencfi"},"content":"      timeout: 5s"},{"lineNumber":91,"author":{"gitId":"uyencfi"},"content":"      retries: 5"},{"lineNumber":92,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":93,"author":{"gitId":"uyencfi"},"content":"  question-service:"},{"lineNumber":94,"author":{"gitId":"uyencfi"},"content":"    build:"},{"lineNumber":95,"author":{"gitId":"uyencfi"},"content":"      context: ./question-service"},{"lineNumber":96,"author":{"gitId":"uyencfi"},"content":"    ports:"},{"lineNumber":97,"author":{"gitId":"MarcusTXK"},"content":"      - \"8500:8500\""},{"lineNumber":98,"author":{"gitId":"uyencfi"},"content":"    depends_on:"},{"lineNumber":99,"author":{"gitId":"uyencfi"},"content":"      postgres_db:"},{"lineNumber":100,"author":{"gitId":"uyencfi"},"content":"        condition: service_healthy"},{"lineNumber":101,"author":{"gitId":"uyencfi"},"content":"    environment:"},{"lineNumber":102,"author":{"gitId":"tlylt"},"content":"      - PORT\u003d80"},{"lineNumber":103,"author":{"gitId":"Hzxin"},"content":"    env_file:"},{"lineNumber":104,"author":{"gitId":"Hzxin"},"content":"      - .env.local"},{"lineNumber":105,"author":{"gitId":"uyencfi"},"content":"    links:"},{"lineNumber":106,"author":{"gitId":"uyencfi"},"content":"      - postgres_db"},{"lineNumber":107,"author":{"gitId":"uyencfi"},"content":"    restart: on-failure"},{"lineNumber":108,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":109,"author":{"gitId":"uyencfi"},"content":"  history-service:"},{"lineNumber":110,"author":{"gitId":"uyencfi"},"content":"    build:"},{"lineNumber":111,"author":{"gitId":"uyencfi"},"content":"      context: ./history-service"},{"lineNumber":112,"author":{"gitId":"uyencfi"},"content":"    ports:"},{"lineNumber":113,"author":{"gitId":"uyencfi"},"content":"      - \"8080:8080\""},{"lineNumber":114,"author":{"gitId":"uyencfi"},"content":"    links:"},{"lineNumber":115,"author":{"gitId":"uyencfi"},"content":"      - mongo"},{"lineNumber":116,"author":{"gitId":"uyencfi"},"content":"    depends_on:"},{"lineNumber":117,"author":{"gitId":"uyencfi"},"content":"      - mongo"},{"lineNumber":118,"author":{"gitId":"uyencfi"},"content":"    env_file:"},{"lineNumber":119,"author":{"gitId":"uyencfi"},"content":"      - .env.local"},{"lineNumber":120,"author":{"gitId":"uyencfi"},"content":"    environment:"},{"lineNumber":121,"author":{"gitId":"uyencfi"},"content":"      - PORT\u003d80"},{"lineNumber":122,"author":{"gitId":"uyencfi"},"content":"      - URI_QUESTION_SERVICE\u003dhttp://question-service:8500"},{"lineNumber":123,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":124,"author":{"gitId":"tlylt"},"content":"  frontend:"},{"lineNumber":125,"author":{"gitId":"tlylt"},"content":"    build:"},{"lineNumber":126,"author":{"gitId":"tlylt"},"content":"      context: ./frontend"},{"lineNumber":127,"author":{"gitId":"tlylt"},"content":"      dockerfile: Dockerfile"},{"lineNumber":128,"author":{"gitId":"tlylt"},"content":"    ports:"},{"lineNumber":129,"author":{"gitId":"tlylt"},"content":"      - \"80:80\""},{"lineNumber":130,"author":{"gitId":"MarcusTXK"},"content":"    volumes:"},{"lineNumber":131,"author":{"gitId":"MarcusTXK"},"content":"      - /app/node_modules"},{"lineNumber":132,"author":{"gitId":"MarcusTXK"},"content":"      - ./frontend:/app"},{"lineNumber":133,"author":{"gitId":"tlylt"},"content":"    depends_on:"},{"lineNumber":134,"author":{"gitId":"tlylt"},"content":"      - user-service"},{"lineNumber":135,"author":{"gitId":"tlylt"},"content":"      - matching-service"},{"lineNumber":136,"author":{"gitId":"uyencfi"},"content":"      - question-service"},{"lineNumber":137,"author":{"gitId":"uyencfi"},"content":"      - history-service"},{"lineNumber":138,"author":{"gitId":"MarcusTXK"},"content":"      - room-service"}],"authorContributionMap":{"MarcusTXK":51,"Hzxin":2,"tlylt":38,"uyencfi":47}},{"path":"frontend/.dockerignore","fileType":"dockerignore","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"# See https://help.github.com/articles/ignoring-files/ for more about ignoring files."},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"# dependencies"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"/node_modules"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"/.pnp"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":".pnp.js"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"# testing"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"/coverage"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"# misc"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":".DS_Store"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"*.pem"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"# debug"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"npm-debug.log*"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"yarn-debug.log*"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"yarn-error.log*"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"# local env files"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":".env.local"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":".env.development.local"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":".env.test.local"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":".env.production.local"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"build"}],"authorContributionMap":{"tlylt":26}},{"path":"frontend/.eslintignore","fileType":"eslintignore","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"node_modules/*"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"package-lock.json"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"build"}],"authorContributionMap":{"tlylt":3}},{"path":"frontend/.gitignore","fileType":"gitignore","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"# See https://help.github.com/articles/ignoring-files/ for more about ignoring files."},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"# dependencies"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"/node_modules"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"/.pnp"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":".pnp.js"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"# testing"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"/coverage"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"# misc"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":".DS_Store"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"*.pem"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"# debug"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"npm-debug.log*"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"yarn-debug.log*"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"yarn-error.log*"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"# local env files"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":".env.local"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":".env.development.local"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":".env.test.local"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":".env.production.local"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"# production"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"/build"}],"authorContributionMap":{"tlylt":27}},{"path":"frontend/Dockerfile","fileType":"Dockerfile","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"FROM node:14-alpine as builder"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"WORKDIR /app"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"COPY package.json ."},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"COPY package-lock.json ."},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"RUN npm ci"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"COPY . ."},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"RUN npm run build"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"FROM nginx"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"# Remove default nginx index page"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"RUN rm -rf /usr/share/nginx/html/*"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"COPY --from\u003dbuilder /app/build /usr/share/nginx/html"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"# Remove default nginx configs to avoid conflict"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"RUN rm /etc/nginx/nginx.conf /etc/nginx/conf.d/default.conf"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"# Copy nginx config"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"COPY --from\u003dbuilder /app/nginx.conf /etc/nginx/nginx.conf"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":""}],"authorContributionMap":{"tlylt":26}},{"path":"frontend/Dockerfile.dev","fileType":"dev","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"FROM node:14-alpine"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"WORKDIR /app"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"COPY package.json ."},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"COPY package-lock.json ."},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"RUN npm ci --quiet"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"# Can be removed if using docker-compose, which maps the volume for you"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"COPY . ."},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"CMD [\"npm\", \"start\"]"}],"authorContributionMap":{"tlylt":13}},{"path":"frontend/Dockerfile.production","fileType":"production","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"FROM node:14-alpine as builder"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"WORKDIR /app"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"COPY package.json ."},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"COPY package-lock.json ."},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"RUN npm ci"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"COPY . ."},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"RUN npm run build"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"FROM nginx"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"# Remove default nginx index page"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"RUN rm -rf /usr/share/nginx/html/*"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"COPY --from\u003dbuilder /app/build /usr/share/nginx/html"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"# Remove default nginx configs to avoid conflict"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"RUN rm /etc/nginx/nginx.conf /etc/nginx/conf.d/default.conf"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"# Copy nginx production config"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"COPY --from\u003dbuilder /app/nginx.conf.production /etc/nginx/nginx.conf"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":""}],"authorContributionMap":{"tlylt":26}},{"path":"frontend/README.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"# Frontend"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"## Tech Stack"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"- [Chakra UI](https://chakra-ui.com/docs/components)"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"- [Tailwind CSS](https://tailwindcss.com/docs)"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"## Getting Started with Create React App"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"This project was bootstrapped with [Create React App](https://github.com/facebook/create-react-app)."},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"## Development"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"To make adjustments to only the frontend application:"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"Start other services"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"```bash"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"docker-compose -f docker-compose.frontend.yml up --build -d"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"```"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"Run `npm run start` in the `frontend` directory."},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"Visit the frontend at http://localhost:3000"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"To stop the services"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"```bash"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"docker-compose -f docker-compose.frontend.yml stop"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"```"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"## References"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"- [Tailwind Cheatsheet](https://tailwindcomponents.com/cheatsheet/)"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"- [JWT with React](https://www.youtube.com/watch?v\u003dnI8PYZNFtac)"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"- [Persistent user login](https://www.youtube.com/watch?v\u003d27KeYk-5vJw)"}],"authorContributionMap":{"tlylt":34,"-":2}},{"path":"frontend/config-overrides.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"// Override create-react-app\u0027s webpack configs for lucafabbian\u0027s Firepad to work"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"// This is used by react-app-rewired, see https://www.npmjs.com/package/react-app-rewired"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"// Without this package, we will run into this error:"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"// https://stackoverflow.com/questions/69427025/programmatic-webpack-jest-esm-cant-resolve-module-without-js-file-exten"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"module.exports \u003d function override(config, env) {"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"  config.module.rules \u003d ["},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"    ...config.module.rules,"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"    {"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"      test: /\\.m?js/,"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"      type: \"javascript/auto\","},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"    },"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"    {"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"      test: /\\.m?js/,"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"      resolve: {"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"        fullySpecified: false,"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"    },"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"  ];"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"  return config;"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"};"}],"authorContributionMap":{"uyencfi":20}},{"path":"frontend/docker-compose.test.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"version: \"3\""},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"services:"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"    test:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"        environment:"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"            - CI\u003dtrue"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"        build:"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"            context: ."},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"            dockerfile: Dockerfile.dev"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"        command: [\"npm\", \"run\", \"test\"]"}],"authorContributionMap":{"tlylt":9}},{"path":"frontend/docker-compose.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"version: \"3\""},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"services:"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"    web:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"        build:"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"            context: ."},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"            dockerfile: Dockerfile.dev"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"        ports:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"            - \"3000:3000\""},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"        # For windows, volume only works if your files are under wsl"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"        volumes:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"            - /app/node_modules"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"            - .:/app"}],"authorContributionMap":{"tlylt":12}},{"path":"frontend/nginx.conf","fileType":"conf","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"http {"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"    "},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"    server {"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"        "},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"        listen 80 default_server;"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"        listen [::]:80 default_server;"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"        server_name localhost;"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"        charset utf-8;"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"        include /etc/nginx/mime.types;"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"        "},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"        location ~ ^/api/v1/user {"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"            proxy_set_header Host $host;"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"            proxy_set_header X-Real-IP $remote_addr;"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"            proxy_pass http://user-service:8000;"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"        location ~ ^/api/v1/matching {"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"            proxy_set_header Host $host;"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"            proxy_set_header X-Real-IP $remote_addr;"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"            proxy_pass http://matching-service:8001;"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"        location ~ ^/api/v1/room {"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"            proxy_set_header Host $host;"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"            proxy_set_header X-Real-IP $remote_addr;"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"            proxy_pass http://room-service:8022;"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"        }"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"        location ~ ^/api/v1/question {"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"            proxy_set_header Host $host;"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"            proxy_set_header X-Real-IP $remote_addr;"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"            proxy_pass http://question-service:8500;"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"        location ~ ^/api/v1/history {"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":"            proxy_set_header Host $host;"},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"            proxy_set_header X-Real-IP $remote_addr;"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"            proxy_pass http://history-service:8080;"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":51,"author":{"gitId":"MarcusTXK"},"content":"        location ~ ^/socket.io/matching {"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"            proxy_set_header Host $host;"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"            proxy_set_header X-Real-IP $remote_addr;"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"            proxy_pass http://matching-service:8001;"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"            proxy_http_version 1.1;"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"            proxy_set_header Upgrade $http_upgrade;"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"            proxy_set_header Connection \"upgrade\";"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":63,"author":{"gitId":"MarcusTXK"},"content":"        location ~ ^/socket.io/room {"},{"lineNumber":64,"author":{"gitId":"MarcusTXK"},"content":"            proxy_set_header Host $host;"},{"lineNumber":65,"author":{"gitId":"MarcusTXK"},"content":"            proxy_set_header X-Real-IP $remote_addr;"},{"lineNumber":66,"author":{"gitId":"MarcusTXK"},"content":"            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;"},{"lineNumber":67,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":68,"author":{"gitId":"MarcusTXK"},"content":"            proxy_pass http://room-service:8022;"},{"lineNumber":69,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":70,"author":{"gitId":"MarcusTXK"},"content":"            proxy_http_version 1.1;"},{"lineNumber":71,"author":{"gitId":"MarcusTXK"},"content":"            proxy_set_header Upgrade $http_upgrade;"},{"lineNumber":72,"author":{"gitId":"MarcusTXK"},"content":"            proxy_set_header Connection \"upgrade\";"},{"lineNumber":73,"author":{"gitId":"MarcusTXK"},"content":"        }"},{"lineNumber":74,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":75,"author":{"gitId":"MarcusTXK"},"content":"        location ~ ^/myapp/peerjs {"},{"lineNumber":76,"author":{"gitId":"MarcusTXK"},"content":"            proxy_set_header Host $host;"},{"lineNumber":77,"author":{"gitId":"MarcusTXK"},"content":"            proxy_set_header X-Real-IP $remote_addr;"},{"lineNumber":78,"author":{"gitId":"MarcusTXK"},"content":"            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;"},{"lineNumber":79,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":80,"author":{"gitId":"MarcusTXK"},"content":"            proxy_pass http://peerjs-server:9000;"},{"lineNumber":81,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":82,"author":{"gitId":"MarcusTXK"},"content":"            proxy_http_version 1.1;"},{"lineNumber":83,"author":{"gitId":"MarcusTXK"},"content":"            proxy_set_header Upgrade $http_upgrade;"},{"lineNumber":84,"author":{"gitId":"MarcusTXK"},"content":"            proxy_set_header Connection \"upgrade\";"},{"lineNumber":85,"author":{"gitId":"MarcusTXK"},"content":"        }"},{"lineNumber":86,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":87,"author":{"gitId":"tlylt"},"content":"        location / {"},{"lineNumber":88,"author":{"gitId":"tlylt"},"content":"            root /usr/share/nginx/html;"},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"            try_files $uri $uri/ /index.html;           "},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":92,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":94,"author":{"gitId":"tlylt"},"content":"events {"},{"lineNumber":95,"author":{"gitId":"tlylt"},"content":"    worker_connections 1024;"},{"lineNumber":96,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"MarcusTXK":33,"tlylt":55,"uyencfi":8}},{"path":"frontend/nginx.conf.production","fileType":"production","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"http {"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"    "},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"    server {"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"        "},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"        listen 3000 default_server;"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"        listen [::]:3000 default_server;"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"        server_name localhost;"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"        charset utf-8;"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"        include /etc/nginx/mime.types;"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"        location / {"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"            root /usr/share/nginx/html;"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"            try_files $uri $uri/ /index.html;           "},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"events {"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"    worker_connections 1024;"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":20}},{"path":"frontend/postcss.config.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"module.exports \u003d {"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"  plugins: {"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"    tailwindcss: {},"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"    autoprefixer: {},"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":6}},{"path":"frontend/public/index.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003c!DOCTYPE html\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"\u003chtml lang\u003d\"en\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003chead\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"        \u003cmeta charset\u003d\"utf-8\" /\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"        \u003clink rel\u003d\"icon\" href\u003d\"%PUBLIC_URL%/favicon.ico\" /\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"        \u003cmeta name\u003d\"viewport\" content\u003d\"width\u003ddevice-width, initial-scale\u003d1\" /\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"        \u003cmeta name\u003d\"theme-color\" content\u003d\"#000000\" /\u003e"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"        \u003cmeta name\u003d\"description\" content\u003d\"LeetWithFriend\" /\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"        \u003clink rel\u003d\"apple-touch-icon\" href\u003d\"%PUBLIC_URL%/logo192.png\" /\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"        \u003c!--"},{"lineNumber":11,"author":{"gitId":"-"},"content":"      manifest.json provides metadata used when your web app is installed on a"},{"lineNumber":12,"author":{"gitId":"-"},"content":"      user\u0027s mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/"},{"lineNumber":13,"author":{"gitId":"-"},"content":"    --\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"        \u003clink rel\u003d\"manifest\" href\u003d\"%PUBLIC_URL%/manifest.json\" /\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"        \u003c!--"},{"lineNumber":16,"author":{"gitId":"-"},"content":"      Notice the use of %PUBLIC_URL% in the tags above."},{"lineNumber":17,"author":{"gitId":"-"},"content":"      It will be replaced with the URL of the `public` folder during the build."},{"lineNumber":18,"author":{"gitId":"-"},"content":"      Only files inside the `public` folder can be referenced from the HTML."},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"      Unlike \"/favicon.ico\" or \"favicon.ico\", \"%PUBLIC_URL%/favicon.ico\" will"},{"lineNumber":21,"author":{"gitId":"-"},"content":"      work correctly both with client-side routing and a non-root public URL."},{"lineNumber":22,"author":{"gitId":"-"},"content":"      Learn how to configure a non-root public URL by running `npm run build`."},{"lineNumber":23,"author":{"gitId":"-"},"content":"    --\u003e"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"        \u003ctitle\u003eLeetWithFriend\u003c/title\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    \u003c/head\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    \u003cbody\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"        \u003cnoscript\u003eYou need to enable JavaScript to run this app.\u003c/noscript\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"        \u003cdiv id\u003d\"root\"\u003e\u003c/div\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        \u003c!--"},{"lineNumber":30,"author":{"gitId":"-"},"content":"      This HTML file is a template."},{"lineNumber":31,"author":{"gitId":"-"},"content":"      If you open it directly in the browser, you will see an empty page."},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"      You can add webfonts, meta tags, or analytics to this file."},{"lineNumber":34,"author":{"gitId":"-"},"content":"      The build step will place the bundled scripts into the \u003cbody\u003e tag."},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"      To begin the development, run `npm start` or `yarn start`."},{"lineNumber":37,"author":{"gitId":"-"},"content":"      To create a production bundle, use `npm run build` or `yarn build`."},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"    --\u003e\u003c/body\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"\u003c/html\u003e"}],"authorContributionMap":{"tlylt":3,"-":36}},{"path":"frontend/public/profile.svg","fileType":"svg","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"\u003csvg xmlns:dc\u003d\"http://purl.org/dc/elements/1.1/\" xmlns:cc\u003d\"http://creativecommons.org/ns#\" xmlns:rdf\u003d\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg\u003d\"http://www.w3.org/2000/svg\" xmlns\u003d\"http://www.w3.org/2000/svg\" viewBox\u003d\"0 0 180 180\" width\u003d\"60\" height\u003d\"60\"\u003e\u003cmetadata\u003e\u003crdf:RDF\u003e\u003ccc:Work\u003e\u003cdc:format\u003eimage/svg+xml\u003c/dc:format\u003e\u003cdc:type rdf:resource\u003d\"http://purl.org/dc/dcmitype/StillImage\"/\u003e\u003cdc:title\u003eBottts\u003c/dc:title\u003e\u003cdc:creator\u003e\u003ccc:Agent\u003e\u003cdc:title\u003ePablo Stanley\u003c/dc:title\u003e\u003c/cc:Agent\u003e\u003c/dc:creator\u003e\u003cdc:source\u003ehttps://bottts.com/\u003c/dc:source\u003e\u003ccc:license rdf:resource\u003d\"https://bottts.com/\"/\u003e\u003cdc:contributor\u003e\u003ccc:Agent\u003e\u003cdc:title\u003eFlorian Krner\u003c/dc:title\u003e\u003c/cc:Agent\u003e\u003c/dc:contributor\u003e\u003c/cc:Work\u003e\u003c/rdf:RDF\u003e\u003c/metadata\u003e\u003cmask id\u003d\"avatarsRadiusMask\"\u003e\u003crect width\u003d\"180\" height\u003d\"180\" rx\u003d\"0\" ry\u003d\"0\" x\u003d\"0\" y\u003d\"0\" fill\u003d\"#fff\"/\u003e\u003c/mask\u003e\u003cg mask\u003d\"url(#avatarsRadiusMask)\"\u003e\u003cg transform\u003d\"translate(0, 66)\"\u003e\u003cg opacity\u003d\"0.9\"\u003e\u003cpath id\u003d\"Cable\" d\u003d\"M38 12C35.046 23.6966 18.0959 18.6663 14.6313 30.009C11.1668 41.3518 22.6565 50 32.1552 50\" stroke\u003d\"#2A3544\" stroke-width\u003d\"6\"/\u003e\u003cpath id\u003d\"Cable_2\" d\u003d\"M150 55C158.394 58.4864 170.102 47.4063 166 38.5C161.898 29.5936 150 31.8056 150 19.195\" stroke\u003d\"#2A3544\" stroke-width\u003d\"4\"/\u003e\u003c/g\u003e\u003cpath fill-rule\u003d\"evenodd\" clip-rule\u003d\"evenodd\" d\u003d\"M138 6C136.895 6 136 6.89543 136 8V22C136 23.1046 136.895 24 138 24H157C158.105 24 159 23.1046 159 22V8C159 6.89543 158.105 6 157 6H138ZM21 37C21 35.8954 21.8954 35 23 35H35C36.1046 35 37 35.8954 37 37V55C37 56.1046 36.1046 57 35 57H23C21.8954 57 21 56.1046 21 55V37ZM136 44C136 42.8954 136.895 42 138 42H157C158.105 42 159 42.8954 159 44V62C159 63.1046 158.105 64 157 64H138C136.895 64 136 63.1046 136 62V44Z\" fill\u003d\"#273951\"/\u003e\u003cmask id\u003d\"sidesCables01Mask0\" mask-type\u003d\"alpha\" maskUnits\u003d\"userSpaceOnUse\" x\u003d\"21\" y\u003d\"6\" width\u003d\"138\" height\u003d\"58\"\u003e\u003cpath fill-rule\u003d\"evenodd\" clip-rule\u003d\"evenodd\" d\u003d\"M138 6C136.895 6 136 6.89543 136 8V22C136 23.1046 136.895 24 138 24H157C158.105 24 159 23.1046 159 22V8C159 6.89543 158.105 6 157 6H138ZM21 37C21 35.8954 21.8954 35 23 35H35C36.1046 35 37 35.8954 37 37V55C37 56.1046 36.1046 57 35 57H23C21.8954 57 21 56.1046 21 55V37ZM136 44C136 42.8954 136.895 42 138 42H157C158.105 42 159 42.8954 159 44V62C159 63.1046 158.105 64 157 64H138C136.895 64 136 63.1046 136 62V44Z\" fill\u003d\"white\"/\u003e\u003c/mask\u003e\u003cg mask\u003d\"url(#sidesCables01Mask0)\"\u003e\u003crect width\u003d\"180\" height\u003d\"76\" fill\u003d\"#26C6DA\"/\u003e\u003c/g\u003e\u003c/g\u003e\u003cg transform\u003d\"translate(41, 0)\"\u003e\u003cpath fill-rule\u003d\"evenodd\" clip-rule\u003d\"evenodd\" d\u003d\"M53.5683 39L55.5437 34.3851L49.3528 23.7098L52.2483 13.0836L49.3539 12.2949L46.1288 24.1305L52.179 34.5631L50.0881 39H38V52H62V39H53.5683Z\" fill\u003d\"#E6E6E6\"/\u003e\u003cmask id\u003d\"topAntennaCrookedMask0\" mask-type\u003d\"alpha\" maskUnits\u003d\"userSpaceOnUse\" x\u003d\"38\" y\u003d\"12\" width\u003d\"24\" height\u003d\"40\"\u003e\u003cpath fill-rule\u003d\"evenodd\" clip-rule\u003d\"evenodd\" d\u003d\"M53.5683 39L55.5437 34.3851L49.3528 23.7098L52.2483 13.0836L49.3539 12.2949L46.1288 24.1305L52.179 34.5631L50.0881 39H38V52H62V39H53.5683Z\" fill\u003d\"white\"/\u003e\u003c/mask\u003e\u003cg mask\u003d\"url(#topAntennaCrookedMask0)\"\u003e\u003crect width\u003d\"100\" height\u003d\"52\" fill\u003d\"#26C6DA\"/\u003e\u003crect x\u003d\"38\" y\u003d\"39\" width\u003d\"24\" height\u003d\"13\" fill\u003d\"white\" fill-opacity\u003d\"0.2\"/\u003e\u003c/g\u003e\u003cpath fill-rule\u003d\"evenodd\" clip-rule\u003d\"evenodd\" d\u003d\"M50 16C54.4183 16 58 12.4183 58 8C58 3.58172 54.4183 0 50 0C45.5817 0 42 3.58172 42 8C42 12.4183 45.5817 16 50 16Z\" fill\u003d\"#FFE65C\"/\u003e\u003cpath fill-rule\u003d\"evenodd\" clip-rule\u003d\"evenodd\" d\u003d\"M53 8C54.6569 8 56 6.65685 56 5C56 3.34315 54.6569 2 53 2C51.3431 2 50 3.34315 50 5C50 6.65685 51.3431 8 53 8Z\" fill\u003d\"white\"/\u003e\u003c/g\u003e\u003cg transform\u003d\"translate(25, 44)\"\u003e\u003cpath d\u003d\"M0 12C0 5.37259 5.37258 0 12 0H118C124.627 0 130 5.37258 130 12V82C130 102.987 112.987 120 92 120H38C17.0132 120 0 102.987 0 82V12Z\" fill\u003d\"#0076DE\"/\u003e\u003cmask id\u003d\"faceSquare01Mask0\" mask-type\u003d\"alpha\" maskUnits\u003d\"userSpaceOnUse\" x\u003d\"0\" y\u003d\"0\" width\u003d\"130\" height\u003d\"120\"\u003e\u003cpath d\u003d\"M0 12C0 5.37259 5.37258 0 12 0H118C124.627 0 130 5.37258 130 12V82C130 102.987 112.987 120 92 120H38C17.0132 120 0 102.987 0 82V12Z\" fill\u003d\"white\"/\u003e\u003c/mask\u003e\u003cg mask\u003d\"url(#faceSquare01Mask0)\"\u003e\u003crect x\u003d\"-2\" y\u003d\"-2\" width\u003d\"134\" height\u003d\"124\" fill\u003d\"#00ACC1\"/\u003e\u003cpath fill-rule\u003d\"evenodd\" clip-rule\u003d\"evenodd\" d\u003d\"M120 130.649C116.812 113.308 110.453 128.073 95.1523 125.017C88.3923 123.666 93.8542 117.769 88.8124 115.213C84.5536 113.054 78.7499 114.793 73.8715 113.397C66.8312 111.382 66.9237 107.282 60.3639 106.669C54.1604 106.09 47.6616 107.999 41.4049 107.282C29.5967 105.928 34.4383 88.0585 25.5835 84.9025C16.7287 81.7465 2.15043 87.1967 0.242157 96.1317C-1.61816 104.842 10.8129 137.252 10.8129 137.252H120\" fill\u003d\"black\" fill-opacity\u003d\"0.2\"/\u003e\u003cpath fill-rule\u003d\"evenodd\" clip-rule\u003d\"evenodd\" d\u003d\"M156 122.767C104.757 122.767 99.4219 96.9746 74.2092 85.1582C48.9964 73.3418 26.9059 103.905 18.4298 74.2122C9.9537 44.5195 10.0005 137.072 10.0005 137.072H156V122.767Z\" fill\u003d\"black\" fill-opacity\u003d\"0.1\"/\u003e\u003cpath fill-rule\u003d\"evenodd\" clip-rule\u003d\"evenodd\" d\u003d\"M161.575 9.17587C149.64 8.20079 156.546 19.9843 151.83 19.9843C144.863 19.9843 149.727 12.0062 141.247 12.2048C139.028 12.2568 136.303 14.1443 136.135 16.709C135.773 22.2193 139.852 31.7253 134.297 31.9953C129.117 32.247 133.193 22.3562 132.652 15.7593C132.343 11.9871 128.47 9.00745 125.684 9.00745C118.113 9.00745 123.998 24.7147 118.549 24.7147C113.1 24.7147 117.341 15.6639 113.467 10.8715C108.964 5.29973 94.1677 2.55906 104.718 0H161.867\" fill\u003d\"black\" fill-opacity\u003d\"0.4\"/\u003e\u003c/g\u003e\u003c/g\u003e\u003cg transform\u003d\"translate(52, 124)\"\u003e\u003crect x\u003d\"16\" y\u003d\"8\" width\u003d\"44\" height\u003d\"4\" rx\u003d\"2\" fill\u003d\"black\" fill-opacity\u003d\"0.8\"/\u003e\u003c/g\u003e\u003cg transform\u003d\"translate(38, 76)\"\u003e\u003cpath d\u003d\"M29.2691 9.67983C26.7216 9.81334 24.305 11.9225 23.0195 13.8332C21.5357 12.0676 18.9175 10.2223 16.3701 10.3558C10.8883 10.6431 7.51531 14.1586 7.74073 18.4598C8.0406 24.1816 12.6244 27.3464 17.4365 30.7046C19.1523 31.8531 22.441 34.8494 22.8627 35.5214C23.2845 36.1935 25.0034 36.1278 25.4425 35.3862C25.8817 34.6446 28.7463 31.3502 30.3355 30.0286C34.7674 26.1859 38.9981 22.5592 38.6982 16.8374C38.4728 12.5362 34.7509 9.39254 29.2691 9.67983Z\" fill\u003d\"#FF5353\" fill-opacity\u003d\"0.8\"/\u003e\u003cpath d\u003d\"M87.6299 10.3558C85.0825 10.2223 82.4586 12.0673 80.9805 13.8332C79.6893 11.9222 77.2784 9.81331 74.7309 9.67981C69.2491 9.39252 65.5272 12.5361 65.3017 16.8374C65.0019 22.5591 69.2297 26.1857 73.6645 30.0286C75.2508 31.3501 78.2083 34.6738 78.5575 35.3862C78.9067 36.0987 80.623 36.2131 81.1373 35.5214C81.6515 34.8298 84.8449 31.8529 86.5635 30.7046C91.3728 27.3462 95.9594 24.1816 96.2593 18.4598C96.4847 14.1586 93.1117 10.6431 87.6299 10.3558Z\" fill\u003d\"#FF5353\" fill-opacity\u003d\"0.8\"/\u003e\u003c/g\u003e\u003c/g\u003e\u003c/svg\u003e"}],"authorContributionMap":{"tlylt":1}},{"path":"frontend/src/App.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"import { BrowserRouter, Routes, Route } from \u0027react-router-dom\u0027"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"import Signup from \u0027./pages/Signup\u0027"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"import Login from \u0027./pages/Login\u0027"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"import PageNotFound from \u0027./pages/PageNotFound\u0027"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"import Home from \u0027./pages/Home\u0027"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"import UserTokenTest from \u0027./pages/UserTokenTest\u0027"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"import Layout from \u0027./components/Layout\u0027"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"import RequireAuth from \u0027./components/RequireAuth\u0027"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"import Profile from \u0027./pages/Profile\u0027"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"import PersistLogin from \u0027./components/PersistLogin\u0027"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"import Match from \u0027./pages/Match\u0027"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"import Room from \u0027./pages/Room\u0027"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"import QuestionBank from \u0027./pages/QuestionBank\u0027"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"import QuestionPage from \u0027./pages/QuestionPage\u0027"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"import History from \u0027./pages/History.jsx\u0027"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"function App() {"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  return ("},{"lineNumber":19,"author":{"gitId":"-"},"content":"    \u003cdiv className\u003d\"App\"\u003e"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"      \u003cBrowserRouter\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        \u003cRoutes\u003e"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"          \u003cRoute path\u003d\"/\" element\u003d{\u003cLayout /\u003e}\u003e"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"            {/* public routes */}"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"            \u003cRoute path\u003d\"/login\" element\u003d{\u003cLogin /\u003e} /\u003e"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"            \u003cRoute path\u003d\"/questions\" element\u003d{\u003cQuestionBank /\u003e} /\u003e"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"            \u003cRoute path\u003d\"/question/:questionId\" element\u003d{\u003cQuestionPage /\u003e} /\u003e"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"            \u003cRoute element\u003d{\u003cPersistLogin /\u003e}\u003e"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"              \u003cRoute path\u003d\"/signup\" element\u003d{\u003cSignup /\u003e} /\u003e"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"            \u003c/Route\u003e"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"            {/* private routes */}"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"            \u003cRoute element\u003d{\u003cPersistLogin /\u003e}\u003e"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"              \u003cRoute element\u003d{\u003cRequireAuth /\u003e}\u003e"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"                \u003cRoute path\u003d\"/\" element\u003d{\u003cHome /\u003e} /\u003e"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"                \u003cRoute path\u003d\"/profile\" element\u003d{\u003cProfile /\u003e} /\u003e"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"                \u003cRoute path\u003d\"/userTokenTest\" element\u003d{\u003cUserTokenTest /\u003e} /\u003e"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"                \u003cRoute path\u003d\"/match\" element\u003d{\u003cMatch /\u003e} /\u003e"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"                \u003cRoute path\u003d\"/room/:roomId\" element\u003d{\u003cRoom /\u003e} /\u003e"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"                \u003cRoute path\u003d\"/history\" element\u003d{\u003cHistory /\u003e} /\u003e"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"              \u003c/Route\u003e"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"            \u003c/Route\u003e"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"            {/* 404 */}"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"            \u003cRoute path\u003d\"*\" element\u003d{\u003cPageNotFound /\u003e} /\u003e"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"          \u003c/Route\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        \u003c/Routes\u003e"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"      \u003c/BrowserRouter\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"  )"},{"lineNumber":49,"author":{"gitId":"-"},"content":"}"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"MarcusTXK"},"content":"export default App"}],"authorContributionMap":{"MarcusTXK":16,"Hzxin":4,"tlylt":20,"-":8,"uyencfi":3}},{"path":"frontend/src/App.test.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import App from \"./App\";"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { createRoot } from \u0027react-dom/client\u0027;"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"it(\u0027renders without crashing\u0027, () \u003d\u003e {"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"    const container \u003d document.createElement(\u0027div\u0027);"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    const root \u003d createRoot(container);"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"    root.render(\u003cApp /\u003e);"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    root.unmount();"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":");"}],"authorContributionMap":{"tlylt":10}},{"path":"frontend/src/api/axios.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"import axios from \u0027axios\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"axios.defaults.withCredentials \u003d true"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"export default axios.create({"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  withCredentials: true,"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  headers: {"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    \u0027Content-Type\u0027: \u0027application/json\u0027,"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"})"}],"authorContributionMap":{"MarcusTXK":3,"tlylt":7}},{"path":"frontend/src/api/firebase.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import firebase from \u0027firebase/compat/app\u0027"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"import \u0027firebase/compat/database\u0027"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"const firebaseConfig \u003d {"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"  apiKey: \u0027AIzaSyA4aSt26GSxjrebAMFuSykUEz-xPivu0NM\u0027,"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"  authDomain: \u0027cs3219-peerprep-24ab8.firebaseapp.com\u0027,"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"  databaseURL:"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"    \u0027https://cs3219-peerprep-24ab8-default-rtdb.asia-southeast1.firebasedatabase.app\u0027,"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"  projectId: \u0027cs3219-peerprep-24ab8\u0027,"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"  storageBucket: \u0027cs3219-peerprep-24ab8.appspot.com\u0027,"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"  messagingSenderId: \u0027116710912438\u0027,"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"  appId: \u00271:116710912438:web:153a1d1acd8d42a2cf5117\u0027,"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"  measurementId: \u0027G-B4XN4F6NJ1\u0027,"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"export const compatApp \u003d firebase.initializeApp(firebaseConfig)"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"export const db \u003d firebase.database(compatApp)"}],"authorContributionMap":{"uyencfi":17}},{"path":"frontend/src/components/AppScreen.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { forwardRef } from \u0027react\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import clsx from \u0027clsx\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"function Logo(props) {"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    \u003cimg"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"      src\u003d\"/apple-touch-icon.png\""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"      alt\u003d\"Logo\""},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"      width\u003d{30}"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"      height\u003d{30}"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"      {...props}"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"    /\u003e"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"function MenuIcon(props) {"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"    \u003csvg viewBox\u003d\"0 0 24 24\" fill\u003d\"none\" aria-hidden\u003d\"true\" {...props}\u003e"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M5 6h14M5 18h14M5 12h14\""},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"        stroke\u003d\"#fff\""},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"        strokeWidth\u003d\"2\""},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"        strokeLinecap\u003d\"round\""},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"        strokeLinejoin\u003d\"round\""},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"    \u003c/svg\u003e"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"function UserIcon(props) {"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"    \u003csvg viewBox\u003d\"0 0 24 24\" fill\u003d\"none\" aria-hidden\u003d\"true\" {...props}\u003e"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M15 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM6.696 19h10.608c1.175 0 2.08-.935 1.532-1.897C18.028 15.69 16.187 14 12 14s-6.028 1.689-6.836 3.103C4.616 18.065 5.521 19 6.696 19Z\""},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"        stroke\u003d\"#fff\""},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"        strokeWidth\u003d\"2\""},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"        strokeLinecap\u003d\"round\""},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"        strokeLinejoin\u003d\"round\""},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"    \u003c/svg\u003e"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"export function AppScreen({ children, className, ...props }) {"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"    \u003cdiv className\u003d{clsx(\u0027flex flex-col\u0027, className)} {...props}\u003e"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"      \u003cdiv className\u003d\"flex justify-between px-4 pt-4\"\u003e"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"        \u003cMenuIcon className\u003d\"flex-none w-6 h-6\" /\u003e"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"        \u003cLogo className\u003d\"flex-none w-6\" /\u003e"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"        \u003cUserIcon className\u003d\"flex-none w-6 h-6\" /\u003e"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"      \u003c/div\u003e"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"      {children}"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"    \u003c/div\u003e"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"AppScreen.Header \u003d forwardRef(function AppScreenHeader({ children }, ref) {"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"    \u003cdiv ref\u003d{ref} className\u003d\"px-4 mt-6 text-white\"\u003e"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"      {children}"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"    \u003c/div\u003e"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"})"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"AppScreen.Title \u003d forwardRef(function AppScreenTitle({ children }, ref) {"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"    \u003cdiv ref\u003d{ref} className\u003d\"text-2xl text-white\"\u003e"},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"      {children}"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"    \u003c/div\u003e"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"})"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"AppScreen.Subtitle \u003d forwardRef(function AppScreenSubtitle({ children }, ref) {"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"    \u003cdiv ref\u003d{ref} className\u003d\"text-sm text-gray-500\"\u003e"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"      {children}"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"    \u003c/div\u003e"},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"})"},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"AppScreen.Body \u003d forwardRef(function AppScreenBody("},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":"  { children, className },"},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"  ref"},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":") {"},{"lineNumber":85,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":86,"author":{"gitId":"tlylt"},"content":"    \u003cdiv"},{"lineNumber":87,"author":{"gitId":"tlylt"},"content":"      ref\u003d{ref}"},{"lineNumber":88,"author":{"gitId":"tlylt"},"content":"      className\u003d{clsx(\u0027mt-6 flex-auto rounded-t-2xl bg-white\u0027, className)}"},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"    \u003e"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"      {children}"},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":"    \u003c/div\u003e"},{"lineNumber":92,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":"})"}],"authorContributionMap":{"tlylt":93}},{"path":"frontend/src/components/AuthLayout.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { Logo } from \u0027./Logo\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"function BackgroundIllustration(props) {"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"    \u003csvg"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"      viewBox\u003d\"0 0 1090 1090\""},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"      aria-hidden\u003d\"true\""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"      fill\u003d\"none\""},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"      preserveAspectRatio\u003d\"none\""},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"      {...props}"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    \u003e"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      \u003ccircle cx\u003d{545} cy\u003d{545} r\u003d\"544.5\" /\u003e"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"      \u003ccircle cx\u003d{545} cy\u003d{545} r\u003d\"480.5\" /\u003e"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"      \u003ccircle cx\u003d{545} cy\u003d{545} r\u003d\"416.5\" /\u003e"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"      \u003ccircle cx\u003d{545} cy\u003d{545} r\u003d\"352.5\" /\u003e"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"    \u003c/svg\u003e"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"export function AuthLayout({ title, subtitle, children }) {"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"    \u003cmain className\u003d\"flex min-h-full pt-16 overflow-hidden sm:py-28\"\u003e"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"      \u003cdiv className\u003d\"flex flex-col w-full max-w-2xl px-4 mx-auto sm:px-6 \"\u003e"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"        \u003cLogo className\u003d\"h-10 mx-auto\" /\u003e"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"        \u003cdiv className\u003d\"relative mt-12 sm:mt-16\"\u003e"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"          \u003cBackgroundIllustration"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"            width\u003d\"1090\""},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"            height\u003d\"1090\""},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"            className\u003d\"absolute -top-7 left-1/2 -z-10 h-[788px] -translate-x-1/2 stroke-gray-300/30 [mask-image:linear-gradient(to_bottom,white_20%,transparent_75%)] sm:-top-9 sm:h-auto\""},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"          /\u003e"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"          \u003ch1 className\u003d\"text-2xl font-medium tracking-tight text-center text-gray-900 dark:text-gray-200\"\u003e"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"            {title}"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"          \u003c/h1\u003e"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"          {subtitle \u0026\u0026 ("},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"            \u003cp className\u003d\"mt-3 text-lg text-center text-gray-600 dark:text-gray-200\"\u003e"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"              {subtitle}"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"            \u003c/p\u003e"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"          )}"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"        \u003c/div\u003e"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"        \u003cdiv className\u003d\"flex-auto px-4 py-10 mt-10 -mx-4 bg-white shadow-2xl shadow-gray-900/10 dark:bg-gray-100 sm:mx-0 sm:flex-none sm:rounded-5xl sm:p-24\"\u003e"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"          {children}"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"        \u003c/div\u003e"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"      \u003c/div\u003e"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"    \u003c/main\u003e"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":46}},{"path":"frontend/src/components/Button.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { forwardRef } from \u0027react\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import clsx from \u0027clsx\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import { Link } from \u0027react-router-dom\u0027"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"const baseStyles \u003d {"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  solid:"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"    \u0027inline-flex justify-center rounded-lg py-2 px-3 text-sm font-semibold outline-2 outline-offset-2 transition-colors\u0027,"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"  outline:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    \u0027inline-flex justify-center rounded-lg border py-[calc(theme(spacing.2)-1px)] px-[calc(theme(spacing.3)-1px)] text-sm outline-2 outline-offset-2 transition-colors\u0027,"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"const variantStyles \u003d {"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"  solid: {"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    cyan: \u0027relative overflow-hidden bg-cyan-500 text-white before:absolute before:inset-0 active:before:bg-transparent hover:before:bg-white/10 active:bg-cyan-600 active:text-white/80 before:transition-colors\u0027,"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"    white:"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"      \u0027bg-white text-cyan-900 hover:bg-white/90 active:bg-white/90 active:text-cyan-900/70\u0027,"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    gray: \u0027bg-gray-800 text-white hover:bg-gray-900 active:bg-gray-800 active:text-white/80\u0027,"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"  outline: {"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"    gray: \u0027border-gray-300 text-gray-700 hover:border-gray-400 active:bg-gray-100 active:text-gray-700/80\u0027,"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"export const Button \u003d forwardRef(function Button("},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"  { variant \u003d \u0027solid\u0027, color \u003d \u0027gray\u0027, className, href, ...props },"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"  ref"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":") {"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"  className \u003d clsx("},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"    baseStyles[variant],"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"    variantStyles[variant][color],"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"    className"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"  return href ? ("},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"    \u003cLink ref\u003d{ref} to\u003d{href} className\u003d{className} {...props} alt\u003d\"link\" /\u003e"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"  ) : ("},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"    \u003cbutton ref\u003d{ref} className\u003d{className} {...props} /\u003e"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"})"}],"authorContributionMap":{"tlylt":39}},{"path":"frontend/src/components/CircleBackground.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { useId } from \u0027react\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"export function CircleBackground({"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  color,"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  width \u003d 558,"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  height \u003d 558,"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  ...props"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"}) {"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"  let id \u003d useId()"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"    \u003csvg"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"      viewBox\u003d\"0 0 558 558\""},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"      width\u003d{width}"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"      height\u003d{height}"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"      fill\u003d\"none\""},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"      aria-hidden\u003d\"true\""},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"      {...props}"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"    \u003e"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"      \u003cdefs\u003e"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"        \u003clinearGradient"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"          id\u003d{id}"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"          x1\u003d\"79\""},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"          y1\u003d\"16\""},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"          x2\u003d\"105\""},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"          y2\u003d\"237\""},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"          gradientUnits\u003d\"userSpaceOnUse\""},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"        \u003e"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"          \u003cstop stopColor\u003d{color} /\u003e"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"          \u003cstop offset\u003d\"1\" stopColor\u003d{color} stopOpacity\u003d\"0\" /\u003e"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"        \u003c/linearGradient\u003e"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"      \u003c/defs\u003e"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"        opacity\u003d\".2\""},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M1 279C1 125.465 125.465 1 279 1s278 124.465 278 278-124.465 278-278 278S1 432.535 1 279Z\""},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"        stroke\u003d{color}"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M1 279C1 125.465 125.465 1 279 1\""},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"        stroke\u003d{`url(#${id})`}"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"        strokeLinecap\u003d\"round\""},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"    \u003c/svg\u003e"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":45}},{"path":"frontend/src/components/Container.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import clsx from \u0027clsx\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"export function Container({ className, ...props }) {"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"    \u003cdiv"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"      className\u003d{clsx(\u0027mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\u0027, className)}"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"      {...props}"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    /\u003e"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":10}},{"path":"frontend/src/components/DarkModeToggle.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { useColorMode } from \u0027@chakra-ui/react\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { BsMoon, BsSun } from \u0027react-icons/bs\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"const DarkModeToggle \u003d () \u003d\u003e {"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  const { colorMode, toggleColorMode } \u003d useColorMode()"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    \u003cbutton"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"      className\u003d\"h-10 px-3 text-yellow-300 transition duration-200 ease-in border border-gray-300 rounded-lg hover:bg-gray-800\""},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"      onClick\u003d{toggleColorMode}"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    \u003e"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      {colorMode \u003d\u003d\u003d \u0027dark\u0027 ? \u003cBsMoon /\u003e : \u003cBsSun /\u003e}"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    \u003c/button\u003e"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"export default DarkModeToggle"}],"authorContributionMap":{"tlylt":17}},{"path":"frontend/src/components/Fields.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { faCheck, faTimes } from \u0027@fortawesome/free-solid-svg-icons\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { FontAwesomeIcon } from \u0027@fortawesome/react-fontawesome\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"const formClasses \u003d"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  \u0027block w-full appearance-none rounded-lg border border-gray-200 bg-white py-[calc(theme(spacing.2)-1px)] px-[calc(theme(spacing.3)-1px)] text-gray-900 placeholder:text-gray-400 focus:border-cyan-500 focus:outline-none focus:ring-cyan-500 sm:text-sm\u0027"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"function Label({ id, children }) {"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    \u003clabel"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"      htmlFor\u003d{id}"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"      className\u003d\"block mb-2 text-sm font-semibold text-gray-900\""},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"    \u003e"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"      {children}"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    \u003c/label\u003e"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"function FormLabel({ id, isValid, isFocused \u003d false, children }) {"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"    \u003cdiv className\u003d\"flex items-center mb-1 items\"\u003e"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"      \u003clabel"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"        htmlFor\u003d{id}"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"        className\u003d\"p-1 mr-2 text-sm font-semibold text-gray-900 \""},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"      \u003e"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"        {children}"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"      \u003c/label\u003e"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"      {isFocused ? ("},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"        isValid ? ("},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"          \u003cFontAwesomeIcon icon\u003d{faCheck} className\u003d\"text-green-400\" /\u003e"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"        ) : ("},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"          \u003cFontAwesomeIcon icon\u003d{faTimes} className\u003d\"text-red-500\" /\u003e"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"        )"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"      ) : null}"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"    \u003c/div\u003e"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"export function TextField({ id, label, type \u003d \u0027text\u0027, className, ...props }) {"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"    \u003cdiv className\u003d{className}\u003e"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"      {label \u0026\u0026 \u003cLabel id\u003d{id}\u003e{label}\u003c/Label\u003e}"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"      \u003cinput id\u003d{id} type\u003d{type} {...props} className\u003d{formClasses} /\u003e"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"    \u003c/div\u003e"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"export function FormTextField({"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"  id,"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"  label,"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"  isValid,"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"  isFocused,"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"  type \u003d \u0027text\u0027,"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"  className,"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"  ...props"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"}) {"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"    \u003cdiv className\u003d{className}\u003e"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"      {label \u0026\u0026 ("},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"        \u003cFormLabel id\u003d{id} isValid\u003d{isValid} isFocused\u003d{isFocused}\u003e"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"          {label}"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"        \u003c/FormLabel\u003e"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"      )}"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"      \u003cinput id\u003d{id} type\u003d{type} {...props} className\u003d{formClasses} /\u003e"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"    \u003c/div\u003e"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":66}},{"path":"frontend/src/components/Footer.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { Container } from \u0027./Container\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { NavLinks } from \u0027./NavLinks\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"export function Footer() {"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    \u003cfooter className\u003d\"border-t border-gray-200\"\u003e"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"      \u003cContainer\u003e"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"        \u003cdiv className\u003d\"flex flex-col items-start justify-between pt-16 pb-6 gap-y-12 lg:flex-row lg:items-center lg:py-16\"\u003e"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"          \u003cdiv\u003e"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"            \u003cdiv className\u003d\"flex items-center text-gray-900 dark:text-gray-300\"\u003e"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"              \u003cdiv className\u003d\"ml-4\"\u003e"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"                \u003cp className\u003d\"text-base font-semibold\"\u003eLeetWithFriend\u003c/p\u003e"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"                \u003cp className\u003d\"mt-1 text-sm\"\u003e"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"                  An interview preparation platform and peer matching system,"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"                  \u003cbr\u003e\u003c/br\u003e"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"                  where students can find peers to practice whiteboard-style"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"                  interview questions together."},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"                \u003c/p\u003e"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"              \u003c/div\u003e"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"            \u003c/div\u003e"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"            \u003cnav className\u003d\"hidden gap-8 mt-11 sm:flex\"\u003e"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"              \u003cNavLinks /\u003e"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"            \u003c/nav\u003e"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"        \u003c/div\u003e"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"        \u003cdiv className\u003d\"flex flex-col items-center pt-8 pb-12 border-t border-gray-200 md:flex-row-reverse md:justify-between md:pt-6\"\u003e"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"          \u003cp className\u003d\"mt-6 text-sm text-gray-500 md:mt-0\"\u003e"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"            \u0026copy; Copyright {new Date().getFullYear()} CS3219 Group 58. All"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"            rights reserved."},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"          \u003c/p\u003e"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"        \u003c/div\u003e"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"      \u003c/Container\u003e"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"    \u003c/footer\u003e"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":35}},{"path":"frontend/src/components/Header.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { Popover } from \u0027@headlessui/react\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { AnimatePresence, motion } from \u0027framer-motion\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import { Button } from \u0027./Button\u0027"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"import { Container } from \u0027./Container\u0027"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"import { Logo } from \u0027./Logo\u0027"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"import { NavLinks } from \u0027./NavLinks\u0027"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"import { Link } from \u0027react-router-dom\u0027"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"import useLogout from \u0027../hooks/useLogout\u0027"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"import useAuth from \u0027../hooks/useAuth\u0027"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"import { UserAvatar } from \u0027./UserAvatar\u0027"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"import DarkModeToggle from \u0027./DarkModeToggle\u0027"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"function MenuIcon(props) {"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"    \u003csvg viewBox\u003d\"0 0 24 24\" fill\u003d\"none\" aria-hidden\u003d\"true\" {...props}\u003e"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M5 6h14M5 18h14M5 12h14\""},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"        strokeWidth\u003d{2}"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"        strokeLinecap\u003d\"round\""},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"        strokeLinejoin\u003d\"round\""},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"    \u003c/svg\u003e"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"function ChevronUpIcon(props) {"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"    \u003csvg viewBox\u003d\"0 0 24 24\" fill\u003d\"none\" aria-hidden\u003d\"true\" {...props}\u003e"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M17 14l-5-5-5 5\""},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"        strokeWidth\u003d{2}"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"        strokeLinecap\u003d\"round\""},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"        strokeLinejoin\u003d\"round\""},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"    \u003c/svg\u003e"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"function MobileNavLink({ children, ...props }) {"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"    \u003cPopover.Button"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"      as\u003d{Link}"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"      className\u003d\"block text-base leading-7 tracking-tight text-gray-700\""},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"      {...props}"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"    \u003e"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"      {children}"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"    \u003c/Popover.Button\u003e"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"export function Header() {"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"  const logout \u003d useLogout()"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"  const { auth } \u003d useAuth()"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"    \u003cheader\u003e"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"      \u003cnav\u003e"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"        \u003cContainer className\u003d\"relative z-50 flex justify-between py-8\"\u003e"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"          \u003cdiv className\u003d\"relative z-10 flex items-center gap-16\"\u003e"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"            \u003cLink to\u003d\"/\" aria-label\u003d\"Home\"\u003e"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"              \u003cLogo className\u003d\"w-auto h-10\" /\u003e"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"            \u003c/Link\u003e"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"            \u003cdiv className\u003d\"hidden lg:flex lg:gap-10\"\u003e"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"              \u003cNavLinks /\u003e"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"            \u003c/div\u003e"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"          \u003cdiv className\u003d\"flex items-center gap-6\"\u003e"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"            \u003cPopover className\u003d\"lg:hidden\"\u003e"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"              {({ open }) \u003d\u003e ("},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"                \u003c\u003e"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"                  \u003cPopover.Button"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"                    className\u003d\"relative z-10 inline-flex items-center p-2 rounded-lg stroke-gray-900 hover:bg-gray-200/50 hover:stroke-gray-600 active:stroke-gray-900 dark:stroke-gray-300 \""},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"                    aria-label\u003d\"Toggle site navigation\""},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"                  \u003e"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"                    {({ open }) \u003d\u003e"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"                      open ? ("},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"                        \u003cChevronUpIcon className\u003d\"w-6 h-6\" /\u003e"},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"                      ) : ("},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":"                        \u003cMenuIcon className\u003d\"w-6 h-6\" /\u003e"},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"                      )"},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":"                    }"},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"                  \u003c/Popover.Button\u003e"},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":"                  \u003cAnimatePresence initial\u003d{false}\u003e"},{"lineNumber":85,"author":{"gitId":"tlylt"},"content":"                    {open \u0026\u0026 ("},{"lineNumber":86,"author":{"gitId":"tlylt"},"content":"                      \u003c\u003e"},{"lineNumber":87,"author":{"gitId":"tlylt"},"content":"                        \u003cPopover.Overlay"},{"lineNumber":88,"author":{"gitId":"tlylt"},"content":"                          static"},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"                          as\u003d{motion.div}"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"                          initial\u003d{{ opacity: 0 }}"},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":"                          animate\u003d{{ opacity: 1 }}"},{"lineNumber":92,"author":{"gitId":"tlylt"},"content":"                          exit\u003d{{ opacity: 0 }}"},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":"                          className\u003d\"fixed inset-0 z-0 bg-gray-300/60 backdrop-blur\""},{"lineNumber":94,"author":{"gitId":"tlylt"},"content":"                        /\u003e"},{"lineNumber":95,"author":{"gitId":"tlylt"},"content":"                        \u003cPopover.Panel"},{"lineNumber":96,"author":{"gitId":"tlylt"},"content":"                          static"},{"lineNumber":97,"author":{"gitId":"tlylt"},"content":"                          as\u003d{motion.div}"},{"lineNumber":98,"author":{"gitId":"tlylt"},"content":"                          initial\u003d{{ opacity: 0, y: -32 }}"},{"lineNumber":99,"author":{"gitId":"tlylt"},"content":"                          animate\u003d{{ opacity: 1, y: 0 }}"},{"lineNumber":100,"author":{"gitId":"tlylt"},"content":"                          exit\u003d{{"},{"lineNumber":101,"author":{"gitId":"tlylt"},"content":"                            opacity: 0,"},{"lineNumber":102,"author":{"gitId":"tlylt"},"content":"                            y: -32,"},{"lineNumber":103,"author":{"gitId":"tlylt"},"content":"                            transition: { duration: 0.2 },"},{"lineNumber":104,"author":{"gitId":"tlylt"},"content":"                          }}"},{"lineNumber":105,"author":{"gitId":"tlylt"},"content":"                          className\u003d\"absolute inset-x-0 top-0 z-0 px-6 pt-32 pb-6 origin-top shadow-2xl rounded-b-2xl bg-gray-50 shadow-gray-900/20\""},{"lineNumber":106,"author":{"gitId":"tlylt"},"content":"                        \u003e"},{"lineNumber":107,"author":{"gitId":"tlylt"},"content":"                          \u003cdiv className\u003d\"space-y-4\"\u003e"},{"lineNumber":108,"author":{"gitId":"tlylt"},"content":"                            \u003cMobileNavLink to\u003d\"/\"\u003eHome\u003c/MobileNavLink\u003e"},{"lineNumber":109,"author":{"gitId":"tlylt"},"content":"                            \u003cMobileNavLink to\u003d\"/profile\"\u003eProfile\u003c/MobileNavLink\u003e"},{"lineNumber":110,"author":{"gitId":"tlylt"},"content":"                            \u003cMobileNavLink to\u003d\"/match\"\u003eMatch\u003c/MobileNavLink\u003e"},{"lineNumber":111,"author":{"gitId":"uyencfi"},"content":"                            \u003cMobileNavLink to\u003d\"/history\"\u003e"},{"lineNumber":112,"author":{"gitId":"tlylt"},"content":"                              Learning History"},{"lineNumber":113,"author":{"gitId":"tlylt"},"content":"                            \u003c/MobileNavLink\u003e"},{"lineNumber":114,"author":{"gitId":"tlylt"},"content":"                            \u003cMobileNavLink to\u003d\"/questions\"\u003e"},{"lineNumber":115,"author":{"gitId":"tlylt"},"content":"                              Question Bank"},{"lineNumber":116,"author":{"gitId":"tlylt"},"content":"                            \u003c/MobileNavLink\u003e"},{"lineNumber":117,"author":{"gitId":"tlylt"},"content":"                          \u003c/div\u003e"},{"lineNumber":118,"author":{"gitId":"tlylt"},"content":"                          \u003cdiv className\u003d\"flex flex-col gap-4 mt-8\"\u003e"},{"lineNumber":119,"author":{"gitId":"tlylt"},"content":"                            {auth.isLoggedIn ? ("},{"lineNumber":120,"author":{"gitId":"tlylt"},"content":"                              \u003cButton variant\u003d\"outline\" onClick\u003d{logout}\u003e"},{"lineNumber":121,"author":{"gitId":"tlylt"},"content":"                                Logout"},{"lineNumber":122,"author":{"gitId":"tlylt"},"content":"                              \u003c/Button\u003e"},{"lineNumber":123,"author":{"gitId":"tlylt"},"content":"                            ) : ("},{"lineNumber":124,"author":{"gitId":"tlylt"},"content":"                              \u003c\u003e"},{"lineNumber":125,"author":{"gitId":"tlylt"},"content":"                                \u003cButton href\u003d\"/login\" variant\u003d\"outline\"\u003e"},{"lineNumber":126,"author":{"gitId":"tlylt"},"content":"                                  Log in"},{"lineNumber":127,"author":{"gitId":"tlylt"},"content":"                                \u003c/Button\u003e"},{"lineNumber":128,"author":{"gitId":"tlylt"},"content":"                                \u003cButton href\u003d\"/signup\" variant\u003d\"outline\"\u003e"},{"lineNumber":129,"author":{"gitId":"tlylt"},"content":"                                  Sign up"},{"lineNumber":130,"author":{"gitId":"tlylt"},"content":"                                \u003c/Button\u003e"},{"lineNumber":131,"author":{"gitId":"tlylt"},"content":"                              \u003c/\u003e"},{"lineNumber":132,"author":{"gitId":"tlylt"},"content":"                            )}"},{"lineNumber":133,"author":{"gitId":"tlylt"},"content":"                          \u003c/div\u003e"},{"lineNumber":134,"author":{"gitId":"tlylt"},"content":"                        \u003c/Popover.Panel\u003e"},{"lineNumber":135,"author":{"gitId":"tlylt"},"content":"                      \u003c/\u003e"},{"lineNumber":136,"author":{"gitId":"tlylt"},"content":"                    )}"},{"lineNumber":137,"author":{"gitId":"tlylt"},"content":"                  \u003c/AnimatePresence\u003e"},{"lineNumber":138,"author":{"gitId":"tlylt"},"content":"                \u003c/\u003e"},{"lineNumber":139,"author":{"gitId":"tlylt"},"content":"              )}"},{"lineNumber":140,"author":{"gitId":"tlylt"},"content":"            \u003c/Popover\u003e"},{"lineNumber":141,"author":{"gitId":"tlylt"},"content":"            {auth.isLoggedIn ? ("},{"lineNumber":142,"author":{"gitId":"tlylt"},"content":"              \u003c\u003e"},{"lineNumber":143,"author":{"gitId":"tlylt"},"content":"                \u003cdiv className\u003d\"hidden lg:block\"\u003e"},{"lineNumber":144,"author":{"gitId":"tlylt"},"content":"                  \u003cUserAvatar username\u003d{auth.username} /\u003e"},{"lineNumber":145,"author":{"gitId":"tlylt"},"content":"                \u003c/div\u003e"},{"lineNumber":146,"author":{"gitId":"tlylt"},"content":"                \u003cDarkModeToggle /\u003e"},{"lineNumber":147,"author":{"gitId":"tlylt"},"content":"                \u003cButton"},{"lineNumber":148,"author":{"gitId":"tlylt"},"content":"                  onClick\u003d{logout}"},{"lineNumber":149,"author":{"gitId":"tlylt"},"content":"                  variant\u003d\"outline\""},{"lineNumber":150,"author":{"gitId":"tlylt"},"content":"                  className\u003d\"hidden dark:text-gray-300 lg:block\""},{"lineNumber":151,"author":{"gitId":"tlylt"},"content":"                \u003e"},{"lineNumber":152,"author":{"gitId":"tlylt"},"content":"                  Logout"},{"lineNumber":153,"author":{"gitId":"tlylt"},"content":"                \u003c/Button\u003e"},{"lineNumber":154,"author":{"gitId":"tlylt"},"content":"              \u003c/\u003e"},{"lineNumber":155,"author":{"gitId":"tlylt"},"content":"            ) : ("},{"lineNumber":156,"author":{"gitId":"tlylt"},"content":"              \u003c\u003e"},{"lineNumber":157,"author":{"gitId":"tlylt"},"content":"                \u003cDarkModeToggle /\u003e"},{"lineNumber":158,"author":{"gitId":"tlylt"},"content":"                \u003cButton"},{"lineNumber":159,"author":{"gitId":"tlylt"},"content":"                  href\u003d\"/login\""},{"lineNumber":160,"author":{"gitId":"tlylt"},"content":"                  variant\u003d\"outline\""},{"lineNumber":161,"author":{"gitId":"tlylt"},"content":"                  className\u003d\"hidden dark:text-gray-300 lg:block\""},{"lineNumber":162,"author":{"gitId":"tlylt"},"content":"                \u003e"},{"lineNumber":163,"author":{"gitId":"tlylt"},"content":"                  Log in"},{"lineNumber":164,"author":{"gitId":"tlylt"},"content":"                \u003c/Button\u003e"},{"lineNumber":165,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":166,"author":{"gitId":"tlylt"},"content":"                \u003cButton"},{"lineNumber":167,"author":{"gitId":"tlylt"},"content":"                  href\u003d\"/signup\""},{"lineNumber":168,"author":{"gitId":"tlylt"},"content":"                  variant\u003d\"outline\""},{"lineNumber":169,"author":{"gitId":"tlylt"},"content":"                  className\u003d\"hidden dark:text-gray-300 lg:block\""},{"lineNumber":170,"author":{"gitId":"tlylt"},"content":"                \u003e"},{"lineNumber":171,"author":{"gitId":"tlylt"},"content":"                  Sign up"},{"lineNumber":172,"author":{"gitId":"tlylt"},"content":"                \u003c/Button\u003e"},{"lineNumber":173,"author":{"gitId":"tlylt"},"content":"              \u003c/\u003e"},{"lineNumber":174,"author":{"gitId":"tlylt"},"content":"            )}"},{"lineNumber":175,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":176,"author":{"gitId":"tlylt"},"content":"        \u003c/Container\u003e"},{"lineNumber":177,"author":{"gitId":"tlylt"},"content":"      \u003c/nav\u003e"},{"lineNumber":178,"author":{"gitId":"tlylt"},"content":"    \u003c/header\u003e"},{"lineNumber":179,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":180,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":179,"uyencfi":1}},{"path":"frontend/src/components/Layout.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { Outlet } from \u0027react-router-dom\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { Box } from \u0027@chakra-ui/react\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import { Footer } from \u0027./Footer\u0027"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import { Header } from \u0027./Header\u0027"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"const Layout \u003d () \u003d\u003e {"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    \u003c\u003e"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"      \u003cHeader /\u003e"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"      \u003cBox\u003e"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"        \u003cOutlet /\u003e"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      \u003c/Box\u003e"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"      \u003cFooter /\u003e"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    \u003c/\u003e"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"export default Layout"}],"authorContributionMap":{"tlylt":18}},{"path":"frontend/src/components/Logo.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"export function Logo(props) {"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"    \u003cdiv {...props}\u003e"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"      \u003cimg src\u003d\"/apple-touch-icon.png\" alt\u003d\"Logo\" width\u003d{30} height\u003d{30} /\u003e"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"      \u003ch2 className\u003d\"font-semibold text-cyan-500\"\u003eLeetWithFriend\u003c/h2\u003e"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    \u003c/div\u003e"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":8}},{"path":"frontend/src/components/NavLinks.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { useState } from \u0027react\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { AnimatePresence, motion } from \u0027framer-motion\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import { Link } from \u0027react-router-dom\u0027"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"export function NavLinks() {"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  let [hoveredIndex, setHoveredIndex] \u003d useState(null)"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"  return ["},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    [\u0027Home\u0027, \u0027/\u0027],"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    [\u0027Profile\u0027, \u0027/profile\u0027],"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    [\u0027Match\u0027, \u0027/match\u0027],"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"    [\u0027Learning History\u0027, \u0027/history\u0027],"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    [\u0027Question Bank\u0027, \u0027/questions\u0027],"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"  ].map(([label, href], index) \u003d\u003e ("},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"    \u003cLink"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"      key\u003d{label}"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"      to\u003d{href}"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"      className\u003d\"relative -my-2 -mx-3 rounded-lg px-3 py-2 text-sm text-gray-700 transition-colors delay-150 hover:text-gray-900 hover:delay-[0ms] dark:text-gray-300 dark:hover:text-gray-900\""},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"      onMouseEnter\u003d{() \u003d\u003e setHoveredIndex(index)}"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"      onMouseLeave\u003d{() \u003d\u003e setHoveredIndex(null)}"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"    \u003e"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"      \u003cAnimatePresence\u003e"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"        {hoveredIndex \u003d\u003d\u003d index \u0026\u0026 ("},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"          \u003cmotion.span"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"            className\u003d\"absolute inset-0 bg-gray-100 rounded-lg\""},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"            layoutId\u003d\"hoverBackground\""},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"            initial\u003d{{ opacity: 0 }}"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"            animate\u003d{{ opacity: 1, transition: { duration: 0.15 } }}"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"            exit\u003d{{"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"              opacity: 0,"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"              transition: { duration: 0.15, delay: 0.2 },"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"            }}"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"          /\u003e"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"        )}"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"      \u003c/AnimatePresence\u003e"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"      \u003cspan className\u003d\"relative z-10\"\u003e{label}\u003c/span\u003e"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"    \u003c/Link\u003e"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"  ))"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":38,"uyencfi":1}},{"path":"frontend/src/components/PersistLogin.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { Outlet } from \u0027react-router-dom\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { useState, useEffect } from \u0027react\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import useRefreshToken from \u0027../hooks/useRefreshToken\u0027"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import useAuth from \u0027../hooks/useAuth\u0027"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"import { Spinner } from \u0027@chakra-ui/react\u0027"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"const PersistLogin \u003d () \u003d\u003e {"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  const [isLoading, setIsLoading] \u003d useState(true)"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"  const refresh \u003d useRefreshToken()"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"  const { auth, persist } \u003d useAuth()"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"    let isMounted \u003d true"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    const verifyRefreshToken \u003d async () \u003d\u003e {"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"      try {"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        await refresh()"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"      } catch (err) {"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"        console.error(err)"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"      } finally {"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"        isMounted \u0026\u0026 setIsLoading(false)"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"      }"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"    !auth?.accessToken \u0026\u0026 persist ? verifyRefreshToken() : setIsLoading(false)"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"    return () \u003d\u003e (isMounted \u003d false)"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"    // might need to use [] instead"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"  }, [auth?.accessToken, persist, refresh])"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"    \u003c\u003e"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"      {!persist ? ("},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"        \u003cOutlet /\u003e"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"      ) : isLoading ? ("},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"        \u003cdiv className\u003d\"flex justify-center\"\u003e"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"          \u003cSpinner size\u003d\"xl\" /\u003e"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"        \u003c/div\u003e"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"      ) : ("},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"        \u003cOutlet /\u003e"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"      )}"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"    \u003c/\u003e"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"export default PersistLogin"}],"authorContributionMap":{"tlylt":45}},{"path":"frontend/src/components/PhoneFrame.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { Image } from \u0027@chakra-ui/react\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import clsx from \u0027clsx\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import frame from \u0027../images/phone-frame.svg\u0027"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"function PlaceholderFrame(props) {"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    \u003csvg viewBox\u003d\"0 0 366 729\" aria-hidden\u003d\"true\" {...props}\u003e"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"#F2F2F2\""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"        fillRule\u003d\"evenodd\""},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"        clipRule\u003d\"evenodd\""},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M300.092 1c41.22 0 63.223 21.99 63.223 63.213V184.94c-.173.184-.329.476-.458.851.188-.282.404-.547.647-.791.844-.073 2.496.257 2.496 2.157V268.719c-.406 2.023-2.605 2.023-2.605 2.023a7.119 7.119 0 0 1-.08-.102v394.462c0 41.213-22.001 63.212-63.223 63.212h-95.074c-.881-.468-2.474-.795-4.323-.838l-33.704-.005-.049.001h-.231l-.141-.001c-2.028 0-3.798.339-4.745.843H66.751c-41.223 0-63.223-21.995-63.223-63.208V287.739c-.402-.024-2.165-.23-2.524-2.02v-.973A2.039 2.039 0 0 1 1 284.62v-47.611c0-.042.001-.084.004-.126v-.726c0-1.9 1.652-2.23 2.496-2.157l.028.028v-16.289c-.402-.024-2.165-.23-2.524-2.02v-.973A2.039 2.039 0 0 1 1 214.62v-47.611c0-.042.001-.084.004-.126v-.726c0-1.9 1.652-2.23 2.496-2.157l.028.028v-26.041a2.26 2.26 0 0 0 .093-.236l-.064-.01a3.337 3.337 0 0 1-.72-.12l-.166-.028A2 2 0 0 1 1 135.62v-24.611a2 2 0 0 1 1.671-1.973l.857-.143v-44.68C3.528 22.99 25.53 1 66.75 1h233.341ZM3.952 234.516a5.481 5.481 0 0 0-.229-.278c.082.071.159.163.228.278Zm89.99-206.304A4.213 4.213 0 0 0 89.727 24H56.864C38.714 24 24 38.708 24 56.852v618.296C24 693.292 38.714 708 56.864 708h250.272c18.15 0 32.864-14.708 32.864-32.852V56.852C340 38.708 325.286 24 307.136 24h-32.864a4.212 4.212 0 0 0-4.213 4.212v2.527c0 10.235-8.3 18.532-18.539 18.532H112.48c-10.239 0-18.539-8.297-18.539-18.532v-2.527Z\""},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"      \u003crect x\u003d\"154\" y\u003d\"29\" width\u003d\"56\" height\u003d\"5\" rx\u003d\"2.5\" fill\u003d\"#D4D4D4\" /\u003e"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"    \u003c/svg\u003e"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"export function PhoneFrame({"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"  className,"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"  children,"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"  priority \u003d false,"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"  ...props"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"}) {"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"    \u003cdiv className\u003d{clsx(\u0027relative aspect-[366/729]\u0027, className)} {...props}\u003e"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"      \u003cdiv className\u003d\"absolute inset-y-[calc(1/729*100%)] right-[calc(5/729*100%)] left-[calc(7/729*100%)] rounded-[calc(58/366*100%)/calc(58/729*100%)] shadow-2xl\" /\u003e"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"      \u003cdiv className\u003d\"absolute top-[calc(23/729*100%)] left-[calc(23/366*100%)] grid h-[calc(686/729*100%)] w-[calc(318/366*100%)] transform grid-cols-1 overflow-hidden bg-gray-900 pt-[calc(23/318*100%)]\"\u003e"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"        {children}"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"      \u003c/div\u003e"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"      \u003cPlaceholderFrame className\u003d\"absolute inset-0 w-full h-full pointer-events-none fill-gray-100\" /\u003e"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"      \u003cImage"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"        src\u003d{frame}"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"        alt\u003d\"\""},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"        className\u003d\"absolute inset-0 w-full h-full pointer-events-none\""},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"        unoptimized"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"        priority\u003d{priority}"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"    \u003c/div\u003e"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":42}},{"path":"frontend/src/components/PrimaryFeatures.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { Fragment, useEffect, useId, useRef, useState } from \u0027react\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { Tab } from \u0027@headlessui/react\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import clsx from \u0027clsx\u0027"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import { AnimatePresence, motion } from \u0027framer-motion\u0027"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"import { useDebouncedCallback } from \u0027use-debounce\u0027"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"import { AppScreen } from \u0027./AppScreen\u0027"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"import { CircleBackground } from \u0027./CircleBackground\u0027"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"import { Container } from \u0027./Container\u0027"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"import { PhoneFrame } from \u0027./PhoneFrame\u0027"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"import collaboration from \u0027../images/collaboration.png\u0027"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"import video from \u0027../images/video.png\u0027"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"import { Image } from \u0027@chakra-ui/react\u0027"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"const MotionAppScreenHeader \u003d motion(AppScreen.Header)"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"const MotionAppScreenBody \u003d motion(AppScreen.Body)"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"const features \u003d ["},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"  {"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"    name: \u0027Match by question difficulty or type\u0027,"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"    description:"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"      \u0027You will be matched with someone who chooses the same criteria as you within 30 seconds. Or, you can try again with different criteria.\u0027,"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"    icon: DeviceUserIcon,"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"    screen: FirstScreen,"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"  {"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"    name: \u0027Tackle the question over the collaborative editor\u0027,"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"    description:"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"      \u0027View the question at the same time, and work together to solve it. You can also chat with your peer to discuss the question. Type in the real-time collaborative editor to solve the question together.\u0027,"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"    icon: DeviceNotificationIcon,"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"    screen: SecondScreen,"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"  {"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"    name: \u0027Mark as completed and save your progress\u0027,"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"    description:"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"      \u0027Once you are done, mark the question as completed and save your progress. You can view the question as well as what you have written in the collaborative editor under learning history.\u0027,"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"    icon: DeviceTouchIcon,"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"    screen: ThirdScreen,"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"]"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"function DeviceUserIcon(props) {"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"    \u003csvg viewBox\u003d\"0 0 32 32\" aria-hidden\u003d\"true\" {...props}\u003e"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"      \u003ccircle cx\u003d{16} cy\u003d{16} r\u003d{16} fill\u003d\"#A3A3A3\" fillOpacity\u003d{0.2} /\u003e"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"        fillRule\u003d\"evenodd\""},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"        clipRule\u003d\"evenodd\""},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M16 23a3 3 0 100-6 3 3 0 000 6zm-1 2a4 4 0 00-4 4v1a2 2 0 002 2h6a2 2 0 002-2v-1a4 4 0 00-4-4h-2z\""},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"#737373\""},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"        fillRule\u003d\"evenodd\""},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"        clipRule\u003d\"evenodd\""},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M5 4a4 4 0 014-4h14a4 4 0 014 4v24a4.002 4.002 0 01-3.01 3.877c-.535.136-.99-.325-.99-.877s.474-.98.959-1.244A2 2 0 0025 28V4a2 2 0 00-2-2h-1.382a1 1 0 00-.894.553l-.448.894a1 1 0 01-.894.553h-6.764a1 1 0 01-.894-.553l-.448-.894A1 1 0 0010.382 2H9a2 2 0 00-2 2v24a2 2 0 001.041 1.756C8.525 30.02 9 30.448 9 31s-.455 1.013-.99.877A4.002 4.002 0 015 28V4z\""},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"#A3A3A3\""},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"    \u003c/svg\u003e"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"function DeviceNotificationIcon(props) {"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"    \u003csvg viewBox\u003d\"0 0 32 32\" aria-hidden\u003d\"true\" {...props}\u003e"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"      \u003ccircle cx\u003d{16} cy\u003d{16} r\u003d{16} fill\u003d\"#A3A3A3\" fillOpacity\u003d{0.2} /\u003e"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"        fillRule\u003d\"evenodd\""},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"        clipRule\u003d\"evenodd\""},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M9 0a4 4 0 00-4 4v24a4 4 0 004 4h14a4 4 0 004-4V4a4 4 0 00-4-4H9zm0 2a2 2 0 00-2 2v24a2 2 0 002 2h14a2 2 0 002-2V4a2 2 0 00-2-2h-1.382a1 1 0 00-.894.553l-.448.894a1 1 0 01-.894.553h-6.764a1 1 0 01-.894-.553l-.448-.894A1 1 0 0010.382 2H9z\""},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"#A3A3A3\""},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M9 8a2 2 0 012-2h10a2 2 0 012 2v2a2 2 0 01-2 2H11a2 2 0 01-2-2V8z\""},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"#737373\""},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"    \u003c/svg\u003e"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":"function DeviceTouchIcon(props) {"},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"  let id \u003d useId()"},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":"    \u003csvg viewBox\u003d\"0 0 32 32\" fill\u003d\"none\" aria-hidden\u003d\"true\" {...props}\u003e"},{"lineNumber":85,"author":{"gitId":"tlylt"},"content":"      \u003cdefs\u003e"},{"lineNumber":86,"author":{"gitId":"tlylt"},"content":"        \u003clinearGradient"},{"lineNumber":87,"author":{"gitId":"tlylt"},"content":"          id\u003d{`${id}-gradient`}"},{"lineNumber":88,"author":{"gitId":"tlylt"},"content":"          x1\u003d{14}"},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"          y1\u003d{14.5}"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"          x2\u003d{7}"},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":"          y2\u003d{17}"},{"lineNumber":92,"author":{"gitId":"tlylt"},"content":"          gradientUnits\u003d\"userSpaceOnUse\""},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":"        \u003e"},{"lineNumber":94,"author":{"gitId":"tlylt"},"content":"          \u003cstop stopColor\u003d\"#737373\" /\u003e"},{"lineNumber":95,"author":{"gitId":"tlylt"},"content":"          \u003cstop offset\u003d{1} stopColor\u003d\"#D4D4D4\" stopOpacity\u003d{0} /\u003e"},{"lineNumber":96,"author":{"gitId":"tlylt"},"content":"        \u003c/linearGradient\u003e"},{"lineNumber":97,"author":{"gitId":"tlylt"},"content":"      \u003c/defs\u003e"},{"lineNumber":98,"author":{"gitId":"tlylt"},"content":"      \u003ccircle cx\u003d{16} cy\u003d{16} r\u003d{16} fill\u003d\"#A3A3A3\" fillOpacity\u003d{0.2} /\u003e"},{"lineNumber":99,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":100,"author":{"gitId":"tlylt"},"content":"        fillRule\u003d\"evenodd\""},{"lineNumber":101,"author":{"gitId":"tlylt"},"content":"        clipRule\u003d\"evenodd\""},{"lineNumber":102,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M5 4a4 4 0 014-4h14a4 4 0 014 4v13h-2V4a2 2 0 00-2-2h-1.382a1 1 0 00-.894.553l-.448.894a1 1 0 01-.894.553h-6.764a1 1 0 01-.894-.553l-.448-.894A1 1 0 0010.382 2H9a2 2 0 00-2 2v24a2 2 0 002 2h4v2H9a4 4 0 01-4-4V4z\""},{"lineNumber":103,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"#A3A3A3\""},{"lineNumber":104,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":105,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":106,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M7 22c0-4.694 3.5-8 8-8\""},{"lineNumber":107,"author":{"gitId":"tlylt"},"content":"        stroke\u003d{`url(#${id}-gradient)`}"},{"lineNumber":108,"author":{"gitId":"tlylt"},"content":"        strokeWidth\u003d{2}"},{"lineNumber":109,"author":{"gitId":"tlylt"},"content":"        strokeLinecap\u003d\"round\""},{"lineNumber":110,"author":{"gitId":"tlylt"},"content":"        strokeLinejoin\u003d\"round\""},{"lineNumber":111,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":112,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":113,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M21 20l.217-5.513a1.431 1.431 0 00-2.85-.226L17.5 21.5l-1.51-1.51a2.107 2.107 0 00-2.98 0 .024.024 0 00-.005.024l3.083 9.25A4 4 0 0019.883 32H25a4 4 0 004-4v-5a3 3 0 00-3-3h-5z\""},{"lineNumber":114,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"#A3A3A3\""},{"lineNumber":115,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":116,"author":{"gitId":"tlylt"},"content":"    \u003c/svg\u003e"},{"lineNumber":117,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":118,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":119,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":120,"author":{"gitId":"tlylt"},"content":"const headerAnimation \u003d {"},{"lineNumber":121,"author":{"gitId":"tlylt"},"content":"  initial: { opacity: 0, transition: { duration: 0.3 } },"},{"lineNumber":122,"author":{"gitId":"tlylt"},"content":"  animate: { opacity: 1, transition: { duration: 0.3, delay: 0.3 } },"},{"lineNumber":123,"author":{"gitId":"tlylt"},"content":"  exit: { opacity: 0, transition: { duration: 0.3 } },"},{"lineNumber":124,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":125,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":126,"author":{"gitId":"tlylt"},"content":"const maxZIndex \u003d 2147483647"},{"lineNumber":127,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":128,"author":{"gitId":"tlylt"},"content":"const bodyVariantBackwards \u003d {"},{"lineNumber":129,"author":{"gitId":"tlylt"},"content":"  opacity: 0.4,"},{"lineNumber":130,"author":{"gitId":"tlylt"},"content":"  scale: 0.8,"},{"lineNumber":131,"author":{"gitId":"tlylt"},"content":"  zIndex: 0,"},{"lineNumber":132,"author":{"gitId":"tlylt"},"content":"  filter: \u0027blur(4px)\u0027,"},{"lineNumber":133,"author":{"gitId":"tlylt"},"content":"  transition: { duration: 0.4 },"},{"lineNumber":134,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":135,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":136,"author":{"gitId":"tlylt"},"content":"const bodyVariantForwards \u003d (custom) \u003d\u003e ({"},{"lineNumber":137,"author":{"gitId":"tlylt"},"content":"  y: \u0027100%\u0027,"},{"lineNumber":138,"author":{"gitId":"tlylt"},"content":"  zIndex: maxZIndex - custom.changeCount,"},{"lineNumber":139,"author":{"gitId":"tlylt"},"content":"  transition: { duration: 0.4 },"},{"lineNumber":140,"author":{"gitId":"tlylt"},"content":"})"},{"lineNumber":141,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":142,"author":{"gitId":"tlylt"},"content":"const bodyAnimation \u003d {"},{"lineNumber":143,"author":{"gitId":"tlylt"},"content":"  initial: \u0027initial\u0027,"},{"lineNumber":144,"author":{"gitId":"tlylt"},"content":"  animate: \u0027animate\u0027,"},{"lineNumber":145,"author":{"gitId":"tlylt"},"content":"  exit: \u0027exit\u0027,"},{"lineNumber":146,"author":{"gitId":"tlylt"},"content":"  variants: {"},{"lineNumber":147,"author":{"gitId":"tlylt"},"content":"    initial: (custom) \u003d\u003e"},{"lineNumber":148,"author":{"gitId":"tlylt"},"content":"      custom.isForwards ? bodyVariantForwards(custom) : bodyVariantBackwards,"},{"lineNumber":149,"author":{"gitId":"tlylt"},"content":"    animate: (custom) \u003d\u003e ({"},{"lineNumber":150,"author":{"gitId":"tlylt"},"content":"      y: \u00270%\u0027,"},{"lineNumber":151,"author":{"gitId":"tlylt"},"content":"      opacity: 1,"},{"lineNumber":152,"author":{"gitId":"tlylt"},"content":"      scale: 1,"},{"lineNumber":153,"author":{"gitId":"tlylt"},"content":"      zIndex: maxZIndex / 2 - custom.changeCount,"},{"lineNumber":154,"author":{"gitId":"tlylt"},"content":"      filter: \u0027blur(0px)\u0027,"},{"lineNumber":155,"author":{"gitId":"tlylt"},"content":"      transition: { duration: 0.4 },"},{"lineNumber":156,"author":{"gitId":"tlylt"},"content":"    }),"},{"lineNumber":157,"author":{"gitId":"tlylt"},"content":"    exit: (custom) \u003d\u003e"},{"lineNumber":158,"author":{"gitId":"tlylt"},"content":"      custom.isForwards ? bodyVariantBackwards : bodyVariantForwards(custom),"},{"lineNumber":159,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":160,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":161,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":162,"author":{"gitId":"tlylt"},"content":"function FirstScreen({ custom, animated \u003d false }) {"},{"lineNumber":163,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":164,"author":{"gitId":"tlylt"},"content":"    \u003cAppScreen className\u003d\"w-full\"\u003e"},{"lineNumber":165,"author":{"gitId":"tlylt"},"content":"      \u003cMotionAppScreenHeader {...(animated ? headerAnimation : {})}\u003e"},{"lineNumber":166,"author":{"gitId":"tlylt"},"content":"        \u003cAppScreen.Title\u003eMatch in 30s!\u003c/AppScreen.Title\u003e"},{"lineNumber":167,"author":{"gitId":"tlylt"},"content":"        \u003cAppScreen.Subtitle\u003e"},{"lineNumber":168,"author":{"gitId":"tlylt"},"content":"          Tip: \u003cspan className\u003d\"text-white\"\u003eTry again in a while\u003c/span\u003e if"},{"lineNumber":169,"author":{"gitId":"tlylt"},"content":"          there\u0027s no one online"},{"lineNumber":170,"author":{"gitId":"tlylt"},"content":"        \u003c/AppScreen.Subtitle\u003e"},{"lineNumber":171,"author":{"gitId":"tlylt"},"content":"      \u003c/MotionAppScreenHeader\u003e"},{"lineNumber":172,"author":{"gitId":"tlylt"},"content":"      \u003cMotionAppScreenBody {...(animated ? { ...bodyAnimation, custom } : {})}\u003e"},{"lineNumber":173,"author":{"gitId":"tlylt"},"content":"        \u003cdiv className\u003d\"px-4 py-6\"\u003e"},{"lineNumber":174,"author":{"gitId":"tlylt"},"content":"          \u003cdiv className\u003d\"space-y-6\"\u003e"},{"lineNumber":175,"author":{"gitId":"tlylt"},"content":"            {["},{"lineNumber":176,"author":{"gitId":"tlylt"},"content":"              { label: \u0027Question Difficulty\u0027, value: \u0027Medium\u0027 },"},{"lineNumber":177,"author":{"gitId":"tlylt"},"content":"              { label: \u0027Question Type\u0027, value: \u0027Dynamic Programming\u0027 },"},{"lineNumber":178,"author":{"gitId":"tlylt"},"content":"            ].map((field) \u003d\u003e ("},{"lineNumber":179,"author":{"gitId":"tlylt"},"content":"              \u003cdiv key\u003d{field.label}\u003e"},{"lineNumber":180,"author":{"gitId":"tlylt"},"content":"                \u003cdiv className\u003d\"text-sm text-gray-500\"\u003e{field.label}\u003c/div\u003e"},{"lineNumber":181,"author":{"gitId":"tlylt"},"content":"                \u003cdiv className\u003d\"pb-2 mt-2 text-sm text-gray-900 border-b border-gray-200\"\u003e"},{"lineNumber":182,"author":{"gitId":"tlylt"},"content":"                  {field.value}"},{"lineNumber":183,"author":{"gitId":"tlylt"},"content":"                \u003c/div\u003e"},{"lineNumber":184,"author":{"gitId":"tlylt"},"content":"              \u003c/div\u003e"},{"lineNumber":185,"author":{"gitId":"tlylt"},"content":"            ))}"},{"lineNumber":186,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":187,"author":{"gitId":"tlylt"},"content":"          \u003cdiv className\u003d\"px-3 py-2 mt-6 text-sm font-semibold text-center text-white rounded-lg bg-cyan-500\"\u003e"},{"lineNumber":188,"author":{"gitId":"tlylt"},"content":"            Match"},{"lineNumber":189,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":190,"author":{"gitId":"tlylt"},"content":"        \u003c/div\u003e"},{"lineNumber":191,"author":{"gitId":"tlylt"},"content":"      \u003c/MotionAppScreenBody\u003e"},{"lineNumber":192,"author":{"gitId":"tlylt"},"content":"    \u003c/AppScreen\u003e"},{"lineNumber":193,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":194,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":195,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":196,"author":{"gitId":"tlylt"},"content":"function SecondScreen({ custom, animated \u003d false }) {"},{"lineNumber":197,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":198,"author":{"gitId":"tlylt"},"content":"    \u003cAppScreen className\u003d\"w-full\"\u003e"},{"lineNumber":199,"author":{"gitId":"tlylt"},"content":"      \u003cMotionAppScreenHeader {...(animated ? headerAnimation : {})}\u003e"},{"lineNumber":200,"author":{"gitId":"tlylt"},"content":"        \u003cAppScreen.Title\u003eCollabrative Editor\u003c/AppScreen.Title\u003e"},{"lineNumber":201,"author":{"gitId":"tlylt"},"content":"        \u003cAppScreen.Subtitle\u003e"},{"lineNumber":202,"author":{"gitId":"tlylt"},"content":"          Real time update + video \u0026 voice chat!"},{"lineNumber":203,"author":{"gitId":"tlylt"},"content":"        \u003c/AppScreen.Subtitle\u003e"},{"lineNumber":204,"author":{"gitId":"tlylt"},"content":"      \u003c/MotionAppScreenHeader\u003e"},{"lineNumber":205,"author":{"gitId":"tlylt"},"content":"      \u003cMotionAppScreenBody {...(animated ? { ...bodyAnimation, custom } : {})}\u003e"},{"lineNumber":206,"author":{"gitId":"tlylt"},"content":"        \u003cdiv className\u003d\"divide-y divide-gray-100\"\u003e"},{"lineNumber":207,"author":{"gitId":"tlylt"},"content":"          \u003cdiv className\u003d\"flex items-center gap-4 px-4 py-3\"\u003e"},{"lineNumber":208,"author":{"gitId":"tlylt"},"content":"            \u003cImage"},{"lineNumber":209,"author":{"gitId":"tlylt"},"content":"              src\u003d{collaboration}"},{"lineNumber":210,"author":{"gitId":"tlylt"},"content":"              alt\u003d\"\""},{"lineNumber":211,"author":{"gitId":"tlylt"},"content":"              className\u003d\"inset-0 w-full mt-10 pointer-events-none \""},{"lineNumber":212,"author":{"gitId":"tlylt"},"content":"              unoptimized"},{"lineNumber":213,"author":{"gitId":"tlylt"},"content":"            /\u003e"},{"lineNumber":214,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":215,"author":{"gitId":"tlylt"},"content":"          \u003cdiv className\u003d\"flex items-center gap-4 px-4 py-3\"\u003e"},{"lineNumber":216,"author":{"gitId":"tlylt"},"content":"            \u003cImage"},{"lineNumber":217,"author":{"gitId":"tlylt"},"content":"              src\u003d{video}"},{"lineNumber":218,"author":{"gitId":"tlylt"},"content":"              alt\u003d\"\""},{"lineNumber":219,"author":{"gitId":"tlylt"},"content":"              className\u003d\"inset-0 w-full pointer-events-none \""},{"lineNumber":220,"author":{"gitId":"tlylt"},"content":"              unoptimized"},{"lineNumber":221,"author":{"gitId":"tlylt"},"content":"            /\u003e"},{"lineNumber":222,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":223,"author":{"gitId":"tlylt"},"content":"        \u003c/div\u003e"},{"lineNumber":224,"author":{"gitId":"tlylt"},"content":"      \u003c/MotionAppScreenBody\u003e"},{"lineNumber":225,"author":{"gitId":"tlylt"},"content":"    \u003c/AppScreen\u003e"},{"lineNumber":226,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":227,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":228,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":229,"author":{"gitId":"tlylt"},"content":"function ThirdScreen({ custom, animated \u003d false }) {"},{"lineNumber":230,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":231,"author":{"gitId":"tlylt"},"content":"    \u003cAppScreen className\u003d\"w-full\"\u003e"},{"lineNumber":232,"author":{"gitId":"tlylt"},"content":"      \u003cMotionAppScreenHeader {...(animated ? headerAnimation : {})}\u003e"},{"lineNumber":233,"author":{"gitId":"tlylt"},"content":"        \u003cAppScreen.Title\u003eLearning History\u003c/AppScreen.Title\u003e"},{"lineNumber":234,"author":{"gitId":"tlylt"},"content":"        \u003cAppScreen.Subtitle\u003e"},{"lineNumber":235,"author":{"gitId":"tlylt"},"content":"          \u003cspan className\u003d\"text-white\"\u003eRevisit\u003c/span\u003e what you have done!"},{"lineNumber":236,"author":{"gitId":"tlylt"},"content":"        \u003c/AppScreen.Subtitle\u003e"},{"lineNumber":237,"author":{"gitId":"tlylt"},"content":"      \u003c/MotionAppScreenHeader\u003e"},{"lineNumber":238,"author":{"gitId":"tlylt"},"content":"      \u003cMotionAppScreenBody {...(animated ? { ...bodyAnimation, custom } : {})}\u003e"},{"lineNumber":239,"author":{"gitId":"tlylt"},"content":"        \u003cdiv className\u003d\"px-4 py-6\"\u003e"},{"lineNumber":240,"author":{"gitId":"tlylt"},"content":"          \u003cdiv className\u003d\"space-y-4\"\u003e"},{"lineNumber":241,"author":{"gitId":"tlylt"},"content":"            {["},{"lineNumber":242,"author":{"gitId":"tlylt"},"content":"              { label: \u0027The question attempted\u0027, value: \u0027\u0027 },"},{"lineNumber":243,"author":{"gitId":"tlylt"},"content":"              {"},{"lineNumber":244,"author":{"gitId":"tlylt"},"content":"                label: \u0027The user who collaborated with you\u0027,"},{"lineNumber":245,"author":{"gitId":"tlylt"},"content":"                value: \u0027\u0027,"},{"lineNumber":246,"author":{"gitId":"tlylt"},"content":"              },"},{"lineNumber":247,"author":{"gitId":"tlylt"},"content":"              { label: \u0027Your solution\u0027, value: \u0027\u0027 },"},{"lineNumber":248,"author":{"gitId":"tlylt"},"content":"            ].map((item) \u003d\u003e ("},{"lineNumber":249,"author":{"gitId":"tlylt"},"content":"              \u003cdiv"},{"lineNumber":250,"author":{"gitId":"tlylt"},"content":"                key\u003d{item.label}"},{"lineNumber":251,"author":{"gitId":"tlylt"},"content":"                className\u003d\"flex justify-between pb-4 border-b border-gray-100\""},{"lineNumber":252,"author":{"gitId":"tlylt"},"content":"              \u003e"},{"lineNumber":253,"author":{"gitId":"tlylt"},"content":"                \u003cdiv className\u003d\"text-sm text-gray-500\"\u003e{item.label}\u003c/div\u003e"},{"lineNumber":254,"author":{"gitId":"tlylt"},"content":"                \u003cdiv className\u003d\"text-sm font-semibold text-gray-900\"\u003e"},{"lineNumber":255,"author":{"gitId":"tlylt"},"content":"                  {item.value}"},{"lineNumber":256,"author":{"gitId":"tlylt"},"content":"                \u003c/div\u003e"},{"lineNumber":257,"author":{"gitId":"tlylt"},"content":"              \u003c/div\u003e"},{"lineNumber":258,"author":{"gitId":"tlylt"},"content":"            ))}"},{"lineNumber":259,"author":{"gitId":"tlylt"},"content":"            \u003cdiv className\u003d\"px-3 py-2 text-sm font-semibold text-center text-white rounded-lg bg-cyan-500\"\u003e"},{"lineNumber":260,"author":{"gitId":"tlylt"},"content":"              Go to History"},{"lineNumber":261,"author":{"gitId":"tlylt"},"content":"            \u003c/div\u003e"},{"lineNumber":262,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":263,"author":{"gitId":"tlylt"},"content":"        \u003c/div\u003e"},{"lineNumber":264,"author":{"gitId":"tlylt"},"content":"      \u003c/MotionAppScreenBody\u003e"},{"lineNumber":265,"author":{"gitId":"tlylt"},"content":"    \u003c/AppScreen\u003e"},{"lineNumber":266,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":267,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":268,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":269,"author":{"gitId":"tlylt"},"content":"function usePrevious(value) {"},{"lineNumber":270,"author":{"gitId":"tlylt"},"content":"  let ref \u003d useRef()"},{"lineNumber":271,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":272,"author":{"gitId":"tlylt"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":273,"author":{"gitId":"tlylt"},"content":"    ref.current \u003d value"},{"lineNumber":274,"author":{"gitId":"tlylt"},"content":"  }, [value])"},{"lineNumber":275,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":276,"author":{"gitId":"tlylt"},"content":"  return ref.current"},{"lineNumber":277,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":278,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":279,"author":{"gitId":"tlylt"},"content":"function FeaturesDesktop() {"},{"lineNumber":280,"author":{"gitId":"tlylt"},"content":"  let [changeCount, setChangeCount] \u003d useState(0)"},{"lineNumber":281,"author":{"gitId":"tlylt"},"content":"  let [selectedIndex, setSelectedIndex] \u003d useState(0)"},{"lineNumber":282,"author":{"gitId":"tlylt"},"content":"  let prevIndex \u003d usePrevious(selectedIndex)"},{"lineNumber":283,"author":{"gitId":"tlylt"},"content":"  let isForwards \u003d prevIndex \u003d\u003d\u003d undefined ? true : selectedIndex \u003e prevIndex"},{"lineNumber":284,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":285,"author":{"gitId":"tlylt"},"content":"  let onChange \u003d useDebouncedCallback("},{"lineNumber":286,"author":{"gitId":"tlylt"},"content":"    (selectedIndex) \u003d\u003e {"},{"lineNumber":287,"author":{"gitId":"tlylt"},"content":"      setSelectedIndex(selectedIndex)"},{"lineNumber":288,"author":{"gitId":"tlylt"},"content":"      setChangeCount((changeCount) \u003d\u003e changeCount + 1)"},{"lineNumber":289,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":290,"author":{"gitId":"tlylt"},"content":"    100,"},{"lineNumber":291,"author":{"gitId":"tlylt"},"content":"    { leading: true }"},{"lineNumber":292,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":293,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":294,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":295,"author":{"gitId":"tlylt"},"content":"    \u003cTab.Group"},{"lineNumber":296,"author":{"gitId":"tlylt"},"content":"      as\u003d\"div\""},{"lineNumber":297,"author":{"gitId":"tlylt"},"content":"      className\u003d\"grid items-center grid-cols-12 gap-8 lg:gap-16 xl:gap-24\""},{"lineNumber":298,"author":{"gitId":"tlylt"},"content":"      selectedIndex\u003d{selectedIndex}"},{"lineNumber":299,"author":{"gitId":"tlylt"},"content":"      onChange\u003d{onChange}"},{"lineNumber":300,"author":{"gitId":"tlylt"},"content":"      vertical"},{"lineNumber":301,"author":{"gitId":"tlylt"},"content":"    \u003e"},{"lineNumber":302,"author":{"gitId":"tlylt"},"content":"      \u003cTab.List className\u003d\"relative z-10 order-last col-span-6 space-y-6\"\u003e"},{"lineNumber":303,"author":{"gitId":"tlylt"},"content":"        {features.map((feature, featureIndex) \u003d\u003e ("},{"lineNumber":304,"author":{"gitId":"tlylt"},"content":"          \u003cdiv"},{"lineNumber":305,"author":{"gitId":"tlylt"},"content":"            key\u003d{feature.name}"},{"lineNumber":306,"author":{"gitId":"tlylt"},"content":"            className\u003d\"relative transition-colors border-2 rounded-2xl hover:border-gray-500\""},{"lineNumber":307,"author":{"gitId":"tlylt"},"content":"          \u003e"},{"lineNumber":308,"author":{"gitId":"tlylt"},"content":"            {featureIndex \u003d\u003d\u003d selectedIndex \u0026\u0026 ("},{"lineNumber":309,"author":{"gitId":"tlylt"},"content":"              \u003cmotion.div"},{"lineNumber":310,"author":{"gitId":"tlylt"},"content":"                layoutId\u003d\"activeBackground\""},{"lineNumber":311,"author":{"gitId":"tlylt"},"content":"                className\u003d\"absolute inset-0 bg-gray-800 border-2\""},{"lineNumber":312,"author":{"gitId":"tlylt"},"content":"                initial\u003d{{ borderRadius: 16 }}"},{"lineNumber":313,"author":{"gitId":"tlylt"},"content":"              /\u003e"},{"lineNumber":314,"author":{"gitId":"tlylt"},"content":"            )}"},{"lineNumber":315,"author":{"gitId":"tlylt"},"content":"            \u003cdiv className\u003d\"relative z-10 p-8\"\u003e"},{"lineNumber":316,"author":{"gitId":"tlylt"},"content":"              \u003cfeature.icon className\u003d\"w-8 h-8\" /\u003e"},{"lineNumber":317,"author":{"gitId":"tlylt"},"content":"              \u003ch3 className\u003d\"mt-6 text-lg font-semibold text-sky-600\"\u003e"},{"lineNumber":318,"author":{"gitId":"tlylt"},"content":"                \u003cTab className\u003d\"text-left [\u0026:not(:focus-visible)]:focus:outline-none\"\u003e"},{"lineNumber":319,"author":{"gitId":"tlylt"},"content":"                  \u003cspan className\u003d\"absolute inset-0 rounded-2xl\" /\u003e"},{"lineNumber":320,"author":{"gitId":"tlylt"},"content":"                  {feature.name}"},{"lineNumber":321,"author":{"gitId":"tlylt"},"content":"                \u003c/Tab\u003e"},{"lineNumber":322,"author":{"gitId":"tlylt"},"content":"              \u003c/h3\u003e"},{"lineNumber":323,"author":{"gitId":"tlylt"},"content":"              \u003cp className\u003d\"mt-2 text-sm text-gray-400\"\u003e"},{"lineNumber":324,"author":{"gitId":"tlylt"},"content":"                {feature.description}"},{"lineNumber":325,"author":{"gitId":"tlylt"},"content":"              \u003c/p\u003e"},{"lineNumber":326,"author":{"gitId":"tlylt"},"content":"            \u003c/div\u003e"},{"lineNumber":327,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":328,"author":{"gitId":"tlylt"},"content":"        ))}"},{"lineNumber":329,"author":{"gitId":"tlylt"},"content":"      \u003c/Tab.List\u003e"},{"lineNumber":330,"author":{"gitId":"tlylt"},"content":"      \u003cdiv className\u003d\"relative col-span-6\"\u003e"},{"lineNumber":331,"author":{"gitId":"tlylt"},"content":"        \u003cdiv className\u003d\"absolute -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2\"\u003e"},{"lineNumber":332,"author":{"gitId":"tlylt"},"content":"          \u003cCircleBackground color\u003d\"#13B5C8\" className\u003d\"animate-spin-slower\" /\u003e"},{"lineNumber":333,"author":{"gitId":"tlylt"},"content":"        \u003c/div\u003e"},{"lineNumber":334,"author":{"gitId":"tlylt"},"content":"        \u003cPhoneFrame className\u003d\"z-10 mx-auto w-full max-w-[366px]\"\u003e"},{"lineNumber":335,"author":{"gitId":"tlylt"},"content":"          \u003cTab.Panels as\u003d{Fragment}\u003e"},{"lineNumber":336,"author":{"gitId":"tlylt"},"content":"            \u003cAnimatePresence"},{"lineNumber":337,"author":{"gitId":"tlylt"},"content":"              initial\u003d{false}"},{"lineNumber":338,"author":{"gitId":"tlylt"},"content":"              custom\u003d{{ isForwards, changeCount }}"},{"lineNumber":339,"author":{"gitId":"tlylt"},"content":"            \u003e"},{"lineNumber":340,"author":{"gitId":"tlylt"},"content":"              {features.map((feature, featureIndex) \u003d\u003e"},{"lineNumber":341,"author":{"gitId":"tlylt"},"content":"                selectedIndex \u003d\u003d\u003d featureIndex ? ("},{"lineNumber":342,"author":{"gitId":"tlylt"},"content":"                  \u003cTab.Panel"},{"lineNumber":343,"author":{"gitId":"tlylt"},"content":"                    static"},{"lineNumber":344,"author":{"gitId":"tlylt"},"content":"                    key\u003d{feature.name + changeCount}"},{"lineNumber":345,"author":{"gitId":"tlylt"},"content":"                    className\u003d\"col-start-1 row-start-1 flex focus:outline-offset-[32px] [\u0026:not(:focus-visible)]:focus:outline-none\""},{"lineNumber":346,"author":{"gitId":"tlylt"},"content":"                  \u003e"},{"lineNumber":347,"author":{"gitId":"tlylt"},"content":"                    \u003cfeature.screen"},{"lineNumber":348,"author":{"gitId":"tlylt"},"content":"                      animated"},{"lineNumber":349,"author":{"gitId":"tlylt"},"content":"                      custom\u003d{{ isForwards, changeCount }}"},{"lineNumber":350,"author":{"gitId":"tlylt"},"content":"                    /\u003e"},{"lineNumber":351,"author":{"gitId":"tlylt"},"content":"                  \u003c/Tab.Panel\u003e"},{"lineNumber":352,"author":{"gitId":"tlylt"},"content":"                ) : null"},{"lineNumber":353,"author":{"gitId":"tlylt"},"content":"              )}"},{"lineNumber":354,"author":{"gitId":"tlylt"},"content":"            \u003c/AnimatePresence\u003e"},{"lineNumber":355,"author":{"gitId":"tlylt"},"content":"          \u003c/Tab.Panels\u003e"},{"lineNumber":356,"author":{"gitId":"tlylt"},"content":"        \u003c/PhoneFrame\u003e"},{"lineNumber":357,"author":{"gitId":"tlylt"},"content":"      \u003c/div\u003e"},{"lineNumber":358,"author":{"gitId":"tlylt"},"content":"    \u003c/Tab.Group\u003e"},{"lineNumber":359,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":360,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":361,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":362,"author":{"gitId":"tlylt"},"content":"function FeaturesMobile() {"},{"lineNumber":363,"author":{"gitId":"tlylt"},"content":"  let [activeIndex, setActiveIndex] \u003d useState(0)"},{"lineNumber":364,"author":{"gitId":"tlylt"},"content":"  let slideContainerRef \u003d useRef()"},{"lineNumber":365,"author":{"gitId":"tlylt"},"content":"  let slideRefs \u003d useRef([])"},{"lineNumber":366,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":367,"author":{"gitId":"tlylt"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":368,"author":{"gitId":"tlylt"},"content":"    let observer \u003d new window.IntersectionObserver("},{"lineNumber":369,"author":{"gitId":"tlylt"},"content":"      (entries) \u003d\u003e {"},{"lineNumber":370,"author":{"gitId":"tlylt"},"content":"        for (let entry of entries) {"},{"lineNumber":371,"author":{"gitId":"tlylt"},"content":"          if (entry.isIntersecting) {"},{"lineNumber":372,"author":{"gitId":"tlylt"},"content":"            setActiveIndex(slideRefs.current.indexOf(entry.target))"},{"lineNumber":373,"author":{"gitId":"tlylt"},"content":"            break"},{"lineNumber":374,"author":{"gitId":"tlylt"},"content":"          }"},{"lineNumber":375,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":376,"author":{"gitId":"tlylt"},"content":"      },"},{"lineNumber":377,"author":{"gitId":"tlylt"},"content":"      {"},{"lineNumber":378,"author":{"gitId":"tlylt"},"content":"        root: slideContainerRef.current,"},{"lineNumber":379,"author":{"gitId":"tlylt"},"content":"        threshold: 0.6,"},{"lineNumber":380,"author":{"gitId":"tlylt"},"content":"      }"},{"lineNumber":381,"author":{"gitId":"tlylt"},"content":"    )"},{"lineNumber":382,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":383,"author":{"gitId":"tlylt"},"content":"    for (let slide of slideRefs.current) {"},{"lineNumber":384,"author":{"gitId":"tlylt"},"content":"      if (slide) {"},{"lineNumber":385,"author":{"gitId":"tlylt"},"content":"        observer.observe(slide)"},{"lineNumber":386,"author":{"gitId":"tlylt"},"content":"      }"},{"lineNumber":387,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":388,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":389,"author":{"gitId":"tlylt"},"content":"    return () \u003d\u003e {"},{"lineNumber":390,"author":{"gitId":"tlylt"},"content":"      observer.disconnect()"},{"lineNumber":391,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":392,"author":{"gitId":"tlylt"},"content":"  }, [slideContainerRef, slideRefs])"},{"lineNumber":393,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":394,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":395,"author":{"gitId":"tlylt"},"content":"    \u003c\u003e"},{"lineNumber":396,"author":{"gitId":"tlylt"},"content":"      \u003cdiv"},{"lineNumber":397,"author":{"gitId":"tlylt"},"content":"        ref\u003d{slideContainerRef}"},{"lineNumber":398,"author":{"gitId":"tlylt"},"content":"        className\u003d\"-mb-4 flex snap-x snap-mandatory -space-x-4 overflow-x-auto overscroll-x-contain scroll-smooth pb-4 [scrollbar-width:none] sm:-space-x-6 [\u0026::-webkit-scrollbar]:hidden\""},{"lineNumber":399,"author":{"gitId":"tlylt"},"content":"      \u003e"},{"lineNumber":400,"author":{"gitId":"tlylt"},"content":"        {features.map((feature, featureIndex) \u003d\u003e ("},{"lineNumber":401,"author":{"gitId":"tlylt"},"content":"          \u003cdiv"},{"lineNumber":402,"author":{"gitId":"tlylt"},"content":"            key\u003d{featureIndex}"},{"lineNumber":403,"author":{"gitId":"tlylt"},"content":"            ref\u003d{(ref) \u003d\u003e (slideRefs.current[featureIndex] \u003d ref)}"},{"lineNumber":404,"author":{"gitId":"tlylt"},"content":"            className\u003d\"flex-none w-full px-4 snap-center sm:px-6\""},{"lineNumber":405,"author":{"gitId":"tlylt"},"content":"          \u003e"},{"lineNumber":406,"author":{"gitId":"tlylt"},"content":"            \u003cdiv className\u003d\"relative px-5 py-6 overflow-hidden transform bg-gray-800 rounded-2xl\"\u003e"},{"lineNumber":407,"author":{"gitId":"tlylt"},"content":"              \u003cdiv className\u003d\"absolute -translate-x-1/2 -translate-y-1/2 left-1/2 top-1/2\"\u003e"},{"lineNumber":408,"author":{"gitId":"tlylt"},"content":"                \u003cCircleBackground"},{"lineNumber":409,"author":{"gitId":"tlylt"},"content":"                  color\u003d\"#13B5C8\""},{"lineNumber":410,"author":{"gitId":"tlylt"},"content":"                  className\u003d{featureIndex % 2 \u003d\u003d\u003d 1 ? \u0027rotate-180\u0027 : undefined}"},{"lineNumber":411,"author":{"gitId":"tlylt"},"content":"                /\u003e"},{"lineNumber":412,"author":{"gitId":"tlylt"},"content":"              \u003c/div\u003e"},{"lineNumber":413,"author":{"gitId":"tlylt"},"content":"              \u003cPhoneFrame className\u003d\"relative mx-auto w-full max-w-[366px]\"\u003e"},{"lineNumber":414,"author":{"gitId":"tlylt"},"content":"                \u003cfeature.screen /\u003e"},{"lineNumber":415,"author":{"gitId":"tlylt"},"content":"              \u003c/PhoneFrame\u003e"},{"lineNumber":416,"author":{"gitId":"tlylt"},"content":"              \u003cdiv className\u003d\"absolute inset-x-0 bottom-0 p-6 bg-gray-800/95 backdrop-blur sm:p-10\"\u003e"},{"lineNumber":417,"author":{"gitId":"tlylt"},"content":"                \u003cfeature.icon className\u003d\"w-8 h-8\" /\u003e"},{"lineNumber":418,"author":{"gitId":"tlylt"},"content":"                \u003ch3 className\u003d\"mt-6 text-sm font-semibold text-white sm:text-lg\"\u003e"},{"lineNumber":419,"author":{"gitId":"tlylt"},"content":"                  {feature.name}"},{"lineNumber":420,"author":{"gitId":"tlylt"},"content":"                \u003c/h3\u003e"},{"lineNumber":421,"author":{"gitId":"tlylt"},"content":"                \u003cp className\u003d\"mt-2 text-sm text-gray-400\"\u003e"},{"lineNumber":422,"author":{"gitId":"tlylt"},"content":"                  {feature.description}"},{"lineNumber":423,"author":{"gitId":"tlylt"},"content":"                \u003c/p\u003e"},{"lineNumber":424,"author":{"gitId":"tlylt"},"content":"              \u003c/div\u003e"},{"lineNumber":425,"author":{"gitId":"tlylt"},"content":"            \u003c/div\u003e"},{"lineNumber":426,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":427,"author":{"gitId":"tlylt"},"content":"        ))}"},{"lineNumber":428,"author":{"gitId":"tlylt"},"content":"      \u003c/div\u003e"},{"lineNumber":429,"author":{"gitId":"tlylt"},"content":"      \u003cdiv className\u003d\"flex justify-center gap-3 mt-6\"\u003e"},{"lineNumber":430,"author":{"gitId":"tlylt"},"content":"        {features.map((_, featureIndex) \u003d\u003e ("},{"lineNumber":431,"author":{"gitId":"tlylt"},"content":"          \u003cbutton"},{"lineNumber":432,"author":{"gitId":"tlylt"},"content":"            type\u003d\"button\""},{"lineNumber":433,"author":{"gitId":"tlylt"},"content":"            key\u003d{featureIndex}"},{"lineNumber":434,"author":{"gitId":"tlylt"},"content":"            className\u003d{clsx("},{"lineNumber":435,"author":{"gitId":"tlylt"},"content":"              \u0027relative h-0.5 w-4 rounded-full\u0027,"},{"lineNumber":436,"author":{"gitId":"tlylt"},"content":"              featureIndex \u003d\u003d\u003d activeIndex ? \u0027bg-gray-300\u0027 : \u0027bg-gray-500\u0027"},{"lineNumber":437,"author":{"gitId":"tlylt"},"content":"            )}"},{"lineNumber":438,"author":{"gitId":"tlylt"},"content":"            aria-label\u003d{`Go to slide ${featureIndex + 1}`}"},{"lineNumber":439,"author":{"gitId":"tlylt"},"content":"            onClick\u003d{() \u003d\u003e {"},{"lineNumber":440,"author":{"gitId":"tlylt"},"content":"              slideRefs.current[featureIndex].scrollIntoView({"},{"lineNumber":441,"author":{"gitId":"tlylt"},"content":"                block: \u0027nearest\u0027,"},{"lineNumber":442,"author":{"gitId":"tlylt"},"content":"                inline: \u0027nearest\u0027,"},{"lineNumber":443,"author":{"gitId":"tlylt"},"content":"              })"},{"lineNumber":444,"author":{"gitId":"tlylt"},"content":"            }}"},{"lineNumber":445,"author":{"gitId":"tlylt"},"content":"          \u003e"},{"lineNumber":446,"author":{"gitId":"tlylt"},"content":"            \u003cspan className\u003d\"absolute -inset-x-1.5 -inset-y-3\" /\u003e"},{"lineNumber":447,"author":{"gitId":"tlylt"},"content":"          \u003c/button\u003e"},{"lineNumber":448,"author":{"gitId":"tlylt"},"content":"        ))}"},{"lineNumber":449,"author":{"gitId":"tlylt"},"content":"      \u003c/div\u003e"},{"lineNumber":450,"author":{"gitId":"tlylt"},"content":"    \u003c/\u003e"},{"lineNumber":451,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":452,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":453,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":454,"author":{"gitId":"tlylt"},"content":"export function PrimaryFeatures({ content }) {"},{"lineNumber":455,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":456,"author":{"gitId":"tlylt"},"content":"    \u003csection"},{"lineNumber":457,"author":{"gitId":"tlylt"},"content":"      id\u003d\"features\""},{"lineNumber":458,"author":{"gitId":"tlylt"},"content":"      aria-label\u003d\"Features for leetwithfriend\""},{"lineNumber":459,"author":{"gitId":"tlylt"},"content":"      className\u003d\"py-10\""},{"lineNumber":460,"author":{"gitId":"tlylt"},"content":"    \u003e"},{"lineNumber":461,"author":{"gitId":"tlylt"},"content":"      \u003cContainer\u003e{content}\u003c/Container\u003e"},{"lineNumber":462,"author":{"gitId":"tlylt"},"content":"      \u003cdiv className\u003d\"mt-16 md:hidden\"\u003e"},{"lineNumber":463,"author":{"gitId":"tlylt"},"content":"        \u003cFeaturesMobile /\u003e"},{"lineNumber":464,"author":{"gitId":"tlylt"},"content":"      \u003c/div\u003e"},{"lineNumber":465,"author":{"gitId":"tlylt"},"content":"      \u003cContainer className\u003d\"hidden md:mt-20 md:block\"\u003e"},{"lineNumber":466,"author":{"gitId":"tlylt"},"content":"        \u003cFeaturesDesktop /\u003e"},{"lineNumber":467,"author":{"gitId":"tlylt"},"content":"      \u003c/Container\u003e"},{"lineNumber":468,"author":{"gitId":"tlylt"},"content":"    \u003c/section\u003e"},{"lineNumber":469,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":470,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":470}},{"path":"frontend/src/components/QuestionPane.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import {"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"  Text,"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"  Box,"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  Badge,"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  VStack,"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  Heading,"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"  useToast,"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"  Image,"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"  Code,"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"  StackDivider,"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"  Flex,"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"  Spacer,"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"  Button,"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"} from \u0027@chakra-ui/react\u0027"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"import ChakraUIRenderer from \u0027chakra-ui-markdown-renderer\u0027"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"import { AuthLayout } from \u0027../components/AuthLayout\u0027"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"import ReactMarkdown from \u0027react-markdown\u0027"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"import {"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"  URL_QUESTION_SERVICE,"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"  URL_ROOM_SERVICE,"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"  STATUS_CODE_SUCCESS,"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"} from \u0027../constants\u0027"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"import axios from \u0027../api/axios\u0027"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"import { useEffect, useState } from \u0027react\u0027"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"import useAxiosPrivate from \u0027../hooks/useAxiosPrivate\u0027"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"const difficultyColorMap \u003d new Map(["},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"  [\u0027easy\u0027, \u0027green\u0027],"},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":"  [\u0027medium\u0027, \u0027orange\u0027],"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"  [\u0027hard\u0027, \u0027red\u0027],"},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"])"},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":"const supTheme \u003d {"},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"  em: ({ node, ...props }) \u003d\u003e {"},{"lineNumber":35,"author":{"gitId":"Hzxin"},"content":"    if ("},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":"      props.children[0] \u0026\u0026"},{"lineNumber":37,"author":{"gitId":"Hzxin"},"content":"      typeof props.children[0] \u003d\u003d\u003d \u0027string\u0027 \u0026\u0026"},{"lineNumber":38,"author":{"gitId":"Hzxin"},"content":"      props.children[0].startsWith(\u0027^\u0027)"},{"lineNumber":39,"author":{"gitId":"Hzxin"},"content":"    ) {"},{"lineNumber":40,"author":{"gitId":"Hzxin"},"content":"      return \u003csup\u003e{props.children[0].substring(1, 2)}\u003c/sup\u003e"},{"lineNumber":41,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"Hzxin"},"content":"    if ("},{"lineNumber":43,"author":{"gitId":"Hzxin"},"content":"      props.children[0] \u0026\u0026"},{"lineNumber":44,"author":{"gitId":"Hzxin"},"content":"      typeof props.children[0] \u003d\u003d\u003d \u0027string\u0027 \u0026\u0026"},{"lineNumber":45,"author":{"gitId":"Hzxin"},"content":"      props.children[0].startsWith(\u0027~\u0027)"},{"lineNumber":46,"author":{"gitId":"Hzxin"},"content":"    ) {"},{"lineNumber":47,"author":{"gitId":"Hzxin"},"content":"      return \u003csub\u003e{props.children[0].substring(1, 2)}\u003c/sub\u003e"},{"lineNumber":48,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":49,"author":{"gitId":"Hzxin"},"content":"    return \u003ci {...props} /\u003e"},{"lineNumber":50,"author":{"gitId":"Hzxin"},"content":"  },"},{"lineNumber":51,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":52,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":53,"author":{"gitId":"Hzxin"},"content":"const newTheme \u003d {"},{"lineNumber":54,"author":{"gitId":"Hzxin"},"content":"  img: ({ node, children, ...props }) \u003d\u003e {"},{"lineNumber":55,"author":{"gitId":"Hzxin"},"content":"    return \u003cImage m\u003d{4} src\u003d{node.properties.src}\u003e\u003c/Image\u003e"},{"lineNumber":56,"author":{"gitId":"Hzxin"},"content":"  },"},{"lineNumber":57,"author":{"gitId":"Hzxin"},"content":"  code: ({ node, inline, children, ...props }) \u003d\u003e {"},{"lineNumber":58,"author":{"gitId":"Hzxin"},"content":"    return !inline ? ("},{"lineNumber":59,"author":{"gitId":"Hzxin"},"content":"      \u003cCode overflow\u003d\"auto\" fontSize\u003d\"lg\" w\u003d\"100%\" p\u003d{2} mt\u003d{4} mb\u003d{4}\u003e"},{"lineNumber":60,"author":{"gitId":"Hzxin"},"content":"        \u003cReactMarkdown"},{"lineNumber":61,"author":{"gitId":"Hzxin"},"content":"          components\u003d{ChakraUIRenderer(supTheme)}"},{"lineNumber":62,"author":{"gitId":"Hzxin"},"content":"          children\u003d{children[0]}"},{"lineNumber":63,"author":{"gitId":"Hzxin"},"content":"        /\u003e"},{"lineNumber":64,"author":{"gitId":"Hzxin"},"content":"      \u003c/Code\u003e"},{"lineNumber":65,"author":{"gitId":"Hzxin"},"content":"    ) : ("},{"lineNumber":66,"author":{"gitId":"Hzxin"},"content":"      \u003cCode fontSize\u003d\"lg\"\u003e"},{"lineNumber":67,"author":{"gitId":"Hzxin"},"content":"        \u003cReactMarkdown"},{"lineNumber":68,"author":{"gitId":"Hzxin"},"content":"          components\u003d{ChakraUIRenderer(supTheme)}"},{"lineNumber":69,"author":{"gitId":"Hzxin"},"content":"          children\u003d{children[0]}"},{"lineNumber":70,"author":{"gitId":"Hzxin"},"content":"        /\u003e"},{"lineNumber":71,"author":{"gitId":"Hzxin"},"content":"      \u003c/Code\u003e"},{"lineNumber":72,"author":{"gitId":"Hzxin"},"content":"    )"},{"lineNumber":73,"author":{"gitId":"Hzxin"},"content":"  },"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"  p: (props) \u003d\u003e {"},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"    const { children } \u003d props"},{"lineNumber":76,"author":{"gitId":"Hzxin"},"content":"    return ("},{"lineNumber":77,"author":{"gitId":"Hzxin"},"content":"      \u003cText overflow\u003d\"auto\" mb\u003d{1} className\u003d\"text-lg\"\u003e"},{"lineNumber":78,"author":{"gitId":"Hzxin"},"content":"        {children}"},{"lineNumber":79,"author":{"gitId":"Hzxin"},"content":"      \u003c/Text\u003e"},{"lineNumber":80,"author":{"gitId":"Hzxin"},"content":"    )"},{"lineNumber":81,"author":{"gitId":"Hzxin"},"content":"  },"},{"lineNumber":82,"author":{"gitId":"Hzxin"},"content":"  em: ({ node, ...props }) \u003d\u003e {"},{"lineNumber":83,"author":{"gitId":"Hzxin"},"content":"    if ("},{"lineNumber":84,"author":{"gitId":"Hzxin"},"content":"      props.children[0] \u0026\u0026"},{"lineNumber":85,"author":{"gitId":"Hzxin"},"content":"      typeof props.children[0] \u003d\u003d\u003d \u0027string\u0027 \u0026\u0026"},{"lineNumber":86,"author":{"gitId":"Hzxin"},"content":"      props.children[0].startsWith(\u0027^\u0027)"},{"lineNumber":87,"author":{"gitId":"Hzxin"},"content":"    ) {"},{"lineNumber":88,"author":{"gitId":"Hzxin"},"content":"      return \u003csup\u003e{props.children[0].substring(1, 2)}\u003c/sup\u003e"},{"lineNumber":89,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":90,"author":{"gitId":"Hzxin"},"content":"    if ("},{"lineNumber":91,"author":{"gitId":"Hzxin"},"content":"      props.children[0] \u0026\u0026"},{"lineNumber":92,"author":{"gitId":"Hzxin"},"content":"      typeof props.children[0] \u003d\u003d\u003d \u0027string\u0027 \u0026\u0026"},{"lineNumber":93,"author":{"gitId":"Hzxin"},"content":"      props.children[0].startsWith(\u0027~\u0027)"},{"lineNumber":94,"author":{"gitId":"Hzxin"},"content":"    ) {"},{"lineNumber":95,"author":{"gitId":"Hzxin"},"content":"      return \u003csub\u003e{props.children[0].substring(1, 2)}\u003c/sub\u003e"},{"lineNumber":96,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":97,"author":{"gitId":"Hzxin"},"content":"    return \u003ci {...props} /\u003e"},{"lineNumber":98,"author":{"gitId":"Hzxin"},"content":"  },"},{"lineNumber":99,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":100,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":101,"author":{"gitId":"uyencfi"},"content":"// Prettify the question text"},{"lineNumber":102,"author":{"gitId":"uyencfi"},"content":"// TODO: fix the root issue when storing questions in DB"},{"lineNumber":103,"author":{"gitId":"uyencfi"},"content":"const parse \u003d (text) \u003d\u003e {"},{"lineNumber":104,"author":{"gitId":"tlylt"},"content":"  if (text?.startsWith(\u0027## Description\u0027)) {"},{"lineNumber":105,"author":{"gitId":"uyencfi"},"content":"    text \u003d text.replace(\u0027## Description\u0027, \u0027\u0027)"},{"lineNumber":106,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":107,"author":{"gitId":"uyencfi"},"content":"  return text"},{"lineNumber":108,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":109,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":110,"author":{"gitId":"MarcusTXK"},"content":"const QuestionPane \u003d ({ questionId, roomId, isFirstQuestion }) \u003d\u003e {"},{"lineNumber":111,"author":{"gitId":"Hzxin"},"content":"  const [questionData, setQuestionData] \u003d useState([])"},{"lineNumber":112,"author":{"gitId":"MarcusTXK"},"content":"  const toast \u003d useToast()"},{"lineNumber":113,"author":{"gitId":"MarcusTXK"},"content":"  const axiosPrivate \u003d useAxiosPrivate()"},{"lineNumber":114,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":115,"author":{"gitId":"Hzxin"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":116,"author":{"gitId":"Hzxin"},"content":"    const getQuestion \u003d async () \u003d\u003e {"},{"lineNumber":117,"author":{"gitId":"Hzxin"},"content":"      await axios"},{"lineNumber":118,"author":{"gitId":"Hzxin"},"content":"        .get(URL_QUESTION_SERVICE + \u0027?id\u003d\u0027 + questionId)"},{"lineNumber":119,"author":{"gitId":"Hzxin"},"content":"        .then((response) \u003d\u003e {"},{"lineNumber":120,"author":{"gitId":"Hzxin"},"content":"          const newData \u003d response.data"},{"lineNumber":121,"author":{"gitId":"Hzxin"},"content":"          setQuestionData(newData)"},{"lineNumber":122,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":123,"author":{"gitId":"Hzxin"},"content":"        .catch((e) \u003d\u003e console.log(e))"},{"lineNumber":124,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":125,"author":{"gitId":"Hzxin"},"content":"    getQuestion()"},{"lineNumber":126,"author":{"gitId":"MarcusTXK"},"content":"  }, [questionId])"},{"lineNumber":127,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":128,"author":{"gitId":"Hzxin"},"content":"  const getNextQuestion \u003d async () \u003d\u003e {"},{"lineNumber":129,"author":{"gitId":"MarcusTXK"},"content":"    await axiosPrivate"},{"lineNumber":130,"author":{"gitId":"MarcusTXK"},"content":"      .put(`${URL_ROOM_SERVICE}/next/${roomId}`)"},{"lineNumber":131,"author":{"gitId":"MarcusTXK"},"content":"      .then((res) \u003d\u003e {"},{"lineNumber":132,"author":{"gitId":"MarcusTXK"},"content":"        if (res \u0026\u0026 res.status !\u003d\u003d STATUS_CODE_SUCCESS) {"},{"lineNumber":133,"author":{"gitId":"MarcusTXK"},"content":"          toast({"},{"lineNumber":134,"author":{"gitId":"MarcusTXK"},"content":"            title: \u0027Something went wrong\u0027,"},{"lineNumber":135,"author":{"gitId":"MarcusTXK"},"content":"            description: \u0027Please try again\u0027,"},{"lineNumber":136,"author":{"gitId":"MarcusTXK"},"content":"            status: \u0027error\u0027,"},{"lineNumber":137,"author":{"gitId":"MarcusTXK"},"content":"            duration: 4000,"},{"lineNumber":138,"author":{"gitId":"MarcusTXK"},"content":"            isClosable: true,"},{"lineNumber":139,"author":{"gitId":"MarcusTXK"},"content":"          })"},{"lineNumber":140,"author":{"gitId":"MarcusTXK"},"content":"        }"},{"lineNumber":141,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":142,"author":{"gitId":"MarcusTXK"},"content":"      .catch(console.log)"},{"lineNumber":143,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":144,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":145,"author":{"gitId":"MarcusTXK"},"content":"  const getPrevQuestion \u003d async () \u003d\u003e {"},{"lineNumber":146,"author":{"gitId":"MarcusTXK"},"content":"    await axiosPrivate"},{"lineNumber":147,"author":{"gitId":"MarcusTXK"},"content":"      .put(`${URL_ROOM_SERVICE}/prev/${roomId}`)"},{"lineNumber":148,"author":{"gitId":"MarcusTXK"},"content":"      .then((res) \u003d\u003e {"},{"lineNumber":149,"author":{"gitId":"MarcusTXK"},"content":"        if (res \u0026\u0026 res.status !\u003d\u003d STATUS_CODE_SUCCESS) {"},{"lineNumber":150,"author":{"gitId":"MarcusTXK"},"content":"          toast({"},{"lineNumber":151,"author":{"gitId":"MarcusTXK"},"content":"            title: \u0027Something went wrong\u0027,"},{"lineNumber":152,"author":{"gitId":"MarcusTXK"},"content":"            description: \u0027Please try again\u0027,"},{"lineNumber":153,"author":{"gitId":"MarcusTXK"},"content":"            status: \u0027error\u0027,"},{"lineNumber":154,"author":{"gitId":"MarcusTXK"},"content":"            duration: 4000,"},{"lineNumber":155,"author":{"gitId":"MarcusTXK"},"content":"            isClosable: true,"},{"lineNumber":156,"author":{"gitId":"MarcusTXK"},"content":"          })"},{"lineNumber":157,"author":{"gitId":"MarcusTXK"},"content":"        }"},{"lineNumber":158,"author":{"gitId":"Hzxin"},"content":"      })"},{"lineNumber":159,"author":{"gitId":"Hzxin"},"content":"      .catch(console.log)"},{"lineNumber":160,"author":{"gitId":"Hzxin"},"content":"  }"},{"lineNumber":161,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":162,"author":{"gitId":"Hzxin"},"content":"  if (typeof questionData \u003d\u003d\u003d \u0027undefined\u0027 || questionData.length \u003d\u003d\u003d 0) {"},{"lineNumber":163,"author":{"gitId":"Hzxin"},"content":"    return ("},{"lineNumber":164,"author":{"gitId":"Hzxin"},"content":"      \u003cAuthLayout title\u003d\"Retrieving question...\"\u003e"},{"lineNumber":165,"author":{"gitId":"MarcusTXK"},"content":"        \u003cdiv className\u003d\"text-center text-xl\"\u003e\u003c/div\u003e"},{"lineNumber":166,"author":{"gitId":"Hzxin"},"content":"      \u003c/AuthLayout\u003e"},{"lineNumber":167,"author":{"gitId":"Hzxin"},"content":"    )"},{"lineNumber":168,"author":{"gitId":"Hzxin"},"content":"  }"},{"lineNumber":169,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":170,"author":{"gitId":"MarcusTXK"},"content":"  const difficultyColor \u003d (difficulty) \u003d\u003e difficultyColorMap.get(difficulty)"},{"lineNumber":171,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":172,"author":{"gitId":"Hzxin"},"content":"  return ("},{"lineNumber":173,"author":{"gitId":"Hzxin"},"content":"    \u003c\u003e"},{"lineNumber":174,"author":{"gitId":"MarcusTXK"},"content":"      \u003cBox className\u003d\"rounded-lg border\"\u003e"},{"lineNumber":175,"author":{"gitId":"tlylt"},"content":"        \u003cVStack h\u003d\"100vh\" divider\u003d{\u003cStackDivider borderColor\u003d\"gray.200\" /\u003e}\u003e"},{"lineNumber":176,"author":{"gitId":"Hzxin"},"content":"          \u003cVStack divider\u003d{\u003cStackDivider borderColor\u003d\"gray.200\" /\u003e}\u003e"},{"lineNumber":177,"author":{"gitId":"tlylt"},"content":"            \u003cHeading size\u003d\"lg\" fontWeight\u003d\"semibold\" color\u003d\"gray 500\"\u003e"},{"lineNumber":178,"author":{"gitId":"Hzxin"},"content":"              {questionData.name}"},{"lineNumber":179,"author":{"gitId":"uyencfi"},"content":"            \u003c/Heading\u003e"},{"lineNumber":180,"author":{"gitId":"MarcusTXK"},"content":"            \u003cBadge"},{"lineNumber":181,"author":{"gitId":"MarcusTXK"},"content":"              borderRadius\u003d\"full\""},{"lineNumber":182,"author":{"gitId":"MarcusTXK"},"content":"              px\u003d\"2\""},{"lineNumber":183,"author":{"gitId":"Hzxin"},"content":"              colorScheme\u003d{difficultyColor(questionData.difficulty)}"},{"lineNumber":184,"author":{"gitId":"MarcusTXK"},"content":"            \u003e"},{"lineNumber":185,"author":{"gitId":"Hzxin"},"content":"              {questionData.difficulty}"},{"lineNumber":186,"author":{"gitId":"Hzxin"},"content":"            \u003c/Badge\u003e"},{"lineNumber":187,"author":{"gitId":"Hzxin"},"content":"          \u003c/VStack\u003e"},{"lineNumber":188,"author":{"gitId":"MarcusTXK"},"content":"          \u003cdiv className\u003d\"mx-2 max-h-full overflow-y-auto px-2\"\u003e"},{"lineNumber":189,"author":{"gitId":"tlylt"},"content":"            \u003cReactMarkdown"},{"lineNumber":190,"author":{"gitId":"tlylt"},"content":"              components\u003d{ChakraUIRenderer(newTheme)}"},{"lineNumber":191,"author":{"gitId":"Hzxin"},"content":"              children\u003d{parse(questionData.content)}"},{"lineNumber":192,"author":{"gitId":"tlylt"},"content":"              skipHtml"},{"lineNumber":193,"author":{"gitId":"tlylt"},"content":"            /\u003e"},{"lineNumber":194,"author":{"gitId":"Hzxin"},"content":"          \u003c/div\u003e"},{"lineNumber":195,"author":{"gitId":"MarcusTXK"},"content":"          \u003cFlex\u003e"},{"lineNumber":196,"author":{"gitId":"MarcusTXK"},"content":"            \u003cSpacer /\u003e"},{"lineNumber":197,"author":{"gitId":"Hzxin"},"content":"            \u003cButton"},{"lineNumber":198,"author":{"gitId":"MarcusTXK"},"content":"              isDisabled\u003d{isFirstQuestion}"},{"lineNumber":199,"author":{"gitId":"MarcusTXK"},"content":"              onClick\u003d{getPrevQuestion}"},{"lineNumber":200,"author":{"gitId":"MarcusTXK"},"content":"              mr\u003d{2}"},{"lineNumber":201,"author":{"gitId":"Hzxin"},"content":"            \u003e"},{"lineNumber":202,"author":{"gitId":"MarcusTXK"},"content":"              Previous Question"},{"lineNumber":203,"author":{"gitId":"Hzxin"},"content":"            \u003c/Button\u003e"},{"lineNumber":204,"author":{"gitId":"MarcusTXK"},"content":"            \u003cButton onClick\u003d{getNextQuestion}\u003eNext Question\u003c/Button\u003e"},{"lineNumber":205,"author":{"gitId":"MarcusTXK"},"content":"            \u003cSpacer /\u003e"},{"lineNumber":206,"author":{"gitId":"MarcusTXK"},"content":"          \u003c/Flex\u003e"},{"lineNumber":207,"author":{"gitId":"Hzxin"},"content":"        \u003c/VStack\u003e"},{"lineNumber":208,"author":{"gitId":"Hzxin"},"content":"      \u003c/Box\u003e"},{"lineNumber":209,"author":{"gitId":"Hzxin"},"content":"    \u003c/\u003e"},{"lineNumber":210,"author":{"gitId":"Hzxin"},"content":"  )"},{"lineNumber":211,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":212,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":213,"author":{"gitId":"Hzxin"},"content":"export default QuestionPane"}],"authorContributionMap":{"MarcusTXK":60,"Hzxin":125,"tlylt":20,"uyencfi":8}},{"path":"frontend/src/components/QuestionTable.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"import React from \u0027react\u0027"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"import { useTable, useSortBy, usePagination } from \u0027react-table\u0027"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"import {"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"  Table,"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"  Thead,"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"  Tbody,"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"  Tr,"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"  Th,"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"  Td,"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"  Flex,"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"  IconButton,"},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"  Text,"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"  Tooltip,"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"  Select,"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"  NumberInput,"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"  NumberInputField,"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"  NumberInputStepper,"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"  NumberIncrementStepper,"},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"  NumberDecrementStepper,"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"} from \u0027@chakra-ui/react\u0027"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"import {"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"  ArrowRightIcon,"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"  ArrowLeftIcon,"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"  ChevronRightIcon,"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"  ChevronLeftIcon,"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"} from \u0027@chakra-ui/icons\u0027"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"export default function QuestionTable({ columns, data }) {"},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":"  const {"},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":"    getTableProps,"},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"    getTableBodyProps,"},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"    headerGroups,"},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":"    prepareRow,"},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"    page,"},{"lineNumber":35,"author":{"gitId":"Hzxin"},"content":"    canPreviousPage,"},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":"    canNextPage,"},{"lineNumber":37,"author":{"gitId":"Hzxin"},"content":"    pageOptions,"},{"lineNumber":38,"author":{"gitId":"Hzxin"},"content":"    pageCount,"},{"lineNumber":39,"author":{"gitId":"Hzxin"},"content":"    gotoPage,"},{"lineNumber":40,"author":{"gitId":"Hzxin"},"content":"    nextPage,"},{"lineNumber":41,"author":{"gitId":"Hzxin"},"content":"    previousPage,"},{"lineNumber":42,"author":{"gitId":"Hzxin"},"content":"    setPageSize,"},{"lineNumber":43,"author":{"gitId":"Hzxin"},"content":"    state: { pageIndex, pageSize },"},{"lineNumber":44,"author":{"gitId":"Hzxin"},"content":"  } \u003d useTable("},{"lineNumber":45,"author":{"gitId":"Hzxin"},"content":"    {"},{"lineNumber":46,"author":{"gitId":"Hzxin"},"content":"      columns,"},{"lineNumber":47,"author":{"gitId":"Hzxin"},"content":"      data,"},{"lineNumber":48,"author":{"gitId":"Hzxin"},"content":"      initialState: { pageIndex: 0 },"},{"lineNumber":49,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":50,"author":{"gitId":"Hzxin"},"content":"    useSortBy,"},{"lineNumber":51,"author":{"gitId":"Hzxin"},"content":"    usePagination"},{"lineNumber":52,"author":{"gitId":"Hzxin"},"content":"  )"},{"lineNumber":53,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":54,"author":{"gitId":"Hzxin"},"content":"  return ("},{"lineNumber":55,"author":{"gitId":"Hzxin"},"content":"    \u003c\u003e"},{"lineNumber":56,"author":{"gitId":"Hzxin"},"content":"      \u003cTable variant\u003d\"striped\" {...getTableProps()}\u003e"},{"lineNumber":57,"author":{"gitId":"Hzxin"},"content":"        \u003cThead\u003e"},{"lineNumber":58,"author":{"gitId":"Hzxin"},"content":"          {headerGroups.map((headerGroup) \u003d\u003e ("},{"lineNumber":59,"author":{"gitId":"Hzxin"},"content":"            \u003cTr {...headerGroup.getHeaderGroupProps()}\u003e"},{"lineNumber":60,"author":{"gitId":"Hzxin"},"content":"              {headerGroup.headers.map((column) \u003d\u003e ("},{"lineNumber":61,"author":{"gitId":"Hzxin"},"content":"                \u003cTh {...column.getHeaderProps(column.getSortByToggleProps())}\u003e"},{"lineNumber":62,"author":{"gitId":"Hzxin"},"content":"                  {column.render(\u0027Header\u0027)}"},{"lineNumber":63,"author":{"gitId":"Hzxin"},"content":"                \u003c/Th\u003e"},{"lineNumber":64,"author":{"gitId":"Hzxin"},"content":"              ))}"},{"lineNumber":65,"author":{"gitId":"Hzxin"},"content":"            \u003c/Tr\u003e"},{"lineNumber":66,"author":{"gitId":"Hzxin"},"content":"          ))}"},{"lineNumber":67,"author":{"gitId":"Hzxin"},"content":"        \u003c/Thead\u003e"},{"lineNumber":68,"author":{"gitId":"Hzxin"},"content":"        \u003cTbody {...getTableBodyProps()}\u003e"},{"lineNumber":69,"author":{"gitId":"Hzxin"},"content":"          {page.map((row, i) \u003d\u003e {"},{"lineNumber":70,"author":{"gitId":"Hzxin"},"content":"            prepareRow(row)"},{"lineNumber":71,"author":{"gitId":"Hzxin"},"content":"            return ("},{"lineNumber":72,"author":{"gitId":"Hzxin"},"content":"              \u003cTr {...row.getRowProps()}\u003e"},{"lineNumber":73,"author":{"gitId":"Hzxin"},"content":"                {row.cells.map((cell) \u003d\u003e {"},{"lineNumber":74,"author":{"gitId":"Hzxin"},"content":"                  return \u003cTd {...cell.getCellProps()}\u003e{cell.render(\u0027Cell\u0027)}\u003c/Td\u003e"},{"lineNumber":75,"author":{"gitId":"Hzxin"},"content":"                })}"},{"lineNumber":76,"author":{"gitId":"Hzxin"},"content":"              \u003c/Tr\u003e"},{"lineNumber":77,"author":{"gitId":"Hzxin"},"content":"            )"},{"lineNumber":78,"author":{"gitId":"Hzxin"},"content":"          })}"},{"lineNumber":79,"author":{"gitId":"Hzxin"},"content":"        \u003c/Tbody\u003e"},{"lineNumber":80,"author":{"gitId":"Hzxin"},"content":"      \u003c/Table\u003e"},{"lineNumber":81,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":82,"author":{"gitId":"Hzxin"},"content":"      \u003cFlex justifyContent\u003d\"space-between\" m\u003d{4} alignItems\u003d\"center\"\u003e"},{"lineNumber":83,"author":{"gitId":"Hzxin"},"content":"        \u003cFlex\u003e"},{"lineNumber":84,"author":{"gitId":"Hzxin"},"content":"          \u003cTooltip label\u003d\"First Page\"\u003e"},{"lineNumber":85,"author":{"gitId":"Hzxin"},"content":"            \u003cIconButton"},{"lineNumber":86,"author":{"gitId":"Hzxin"},"content":"              onClick\u003d{() \u003d\u003e gotoPage(0)}"},{"lineNumber":87,"author":{"gitId":"Hzxin"},"content":"              isDisabled\u003d{!canPreviousPage}"},{"lineNumber":88,"author":{"gitId":"Hzxin"},"content":"              icon\u003d{\u003cArrowLeftIcon h\u003d{3} w\u003d{3} /\u003e}"},{"lineNumber":89,"author":{"gitId":"Hzxin"},"content":"              mr\u003d{4}"},{"lineNumber":90,"author":{"gitId":"Hzxin"},"content":"            /\u003e"},{"lineNumber":91,"author":{"gitId":"Hzxin"},"content":"          \u003c/Tooltip\u003e"},{"lineNumber":92,"author":{"gitId":"Hzxin"},"content":"          \u003cTooltip label\u003d\"Previous Page\"\u003e"},{"lineNumber":93,"author":{"gitId":"Hzxin"},"content":"            \u003cIconButton"},{"lineNumber":94,"author":{"gitId":"Hzxin"},"content":"              onClick\u003d{previousPage}"},{"lineNumber":95,"author":{"gitId":"Hzxin"},"content":"              isDisabled\u003d{!canPreviousPage}"},{"lineNumber":96,"author":{"gitId":"Hzxin"},"content":"              icon\u003d{\u003cChevronLeftIcon h\u003d{6} w\u003d{6} /\u003e}"},{"lineNumber":97,"author":{"gitId":"Hzxin"},"content":"            /\u003e"},{"lineNumber":98,"author":{"gitId":"Hzxin"},"content":"          \u003c/Tooltip\u003e"},{"lineNumber":99,"author":{"gitId":"Hzxin"},"content":"        \u003c/Flex\u003e"},{"lineNumber":100,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":101,"author":{"gitId":"Hzxin"},"content":"        \u003cFlex alignItems\u003d\"center\"\u003e"},{"lineNumber":102,"author":{"gitId":"Hzxin"},"content":"          \u003cText flexShrink\u003d\"0\" mr\u003d{8}\u003e"},{"lineNumber":103,"author":{"gitId":"Hzxin"},"content":"            Page{\u0027 \u0027}"},{"lineNumber":104,"author":{"gitId":"Hzxin"},"content":"            \u003cText fontWeight\u003d\"bold\" as\u003d\"span\"\u003e"},{"lineNumber":105,"author":{"gitId":"Hzxin"},"content":"              {pageIndex + 1}"},{"lineNumber":106,"author":{"gitId":"Hzxin"},"content":"            \u003c/Text\u003e{\u0027 \u0027}"},{"lineNumber":107,"author":{"gitId":"Hzxin"},"content":"            of{\u0027 \u0027}"},{"lineNumber":108,"author":{"gitId":"Hzxin"},"content":"            \u003cText fontWeight\u003d\"bold\" as\u003d\"span\"\u003e"},{"lineNumber":109,"author":{"gitId":"Hzxin"},"content":"              {pageOptions.length}"},{"lineNumber":110,"author":{"gitId":"Hzxin"},"content":"            \u003c/Text\u003e"},{"lineNumber":111,"author":{"gitId":"Hzxin"},"content":"          \u003c/Text\u003e"},{"lineNumber":112,"author":{"gitId":"Hzxin"},"content":"          \u003cText flexShrink\u003d\"0\"\u003eGo to page:\u003c/Text\u003e{\u0027 \u0027}"},{"lineNumber":113,"author":{"gitId":"Hzxin"},"content":"          \u003cNumberInput"},{"lineNumber":114,"author":{"gitId":"Hzxin"},"content":"            ml\u003d{2}"},{"lineNumber":115,"author":{"gitId":"Hzxin"},"content":"            mr\u003d{8}"},{"lineNumber":116,"author":{"gitId":"Hzxin"},"content":"            w\u003d{28}"},{"lineNumber":117,"author":{"gitId":"Hzxin"},"content":"            min\u003d{1}"},{"lineNumber":118,"author":{"gitId":"Hzxin"},"content":"            max\u003d{pageOptions.length}"},{"lineNumber":119,"author":{"gitId":"Hzxin"},"content":"            onChange\u003d{(value) \u003d\u003e {"},{"lineNumber":120,"author":{"gitId":"Hzxin"},"content":"              const page \u003d value ? value - 1 : 0"},{"lineNumber":121,"author":{"gitId":"Hzxin"},"content":"              gotoPage(page)"},{"lineNumber":122,"author":{"gitId":"Hzxin"},"content":"            }}"},{"lineNumber":123,"author":{"gitId":"Hzxin"},"content":"            defaultValue\u003d{pageIndex + 1}"},{"lineNumber":124,"author":{"gitId":"Hzxin"},"content":"          \u003e"},{"lineNumber":125,"author":{"gitId":"Hzxin"},"content":"            \u003cNumberInputField /\u003e"},{"lineNumber":126,"author":{"gitId":"Hzxin"},"content":"            \u003cNumberInputStepper\u003e"},{"lineNumber":127,"author":{"gitId":"Hzxin"},"content":"              \u003cNumberIncrementStepper /\u003e"},{"lineNumber":128,"author":{"gitId":"Hzxin"},"content":"              \u003cNumberDecrementStepper /\u003e"},{"lineNumber":129,"author":{"gitId":"Hzxin"},"content":"            \u003c/NumberInputStepper\u003e"},{"lineNumber":130,"author":{"gitId":"Hzxin"},"content":"          \u003c/NumberInput\u003e"},{"lineNumber":131,"author":{"gitId":"Hzxin"},"content":"          \u003cSelect"},{"lineNumber":132,"author":{"gitId":"Hzxin"},"content":"            w\u003d{32}"},{"lineNumber":133,"author":{"gitId":"Hzxin"},"content":"            value\u003d{pageSize}"},{"lineNumber":134,"author":{"gitId":"Hzxin"},"content":"            onChange\u003d{(e) \u003d\u003e {"},{"lineNumber":135,"author":{"gitId":"Hzxin"},"content":"              setPageSize(Number(e.target.value))"},{"lineNumber":136,"author":{"gitId":"Hzxin"},"content":"            }}"},{"lineNumber":137,"author":{"gitId":"Hzxin"},"content":"          \u003e"},{"lineNumber":138,"author":{"gitId":"Hzxin"},"content":"            {[10, 20, 30, 40, 50].map((pageSize) \u003d\u003e ("},{"lineNumber":139,"author":{"gitId":"Hzxin"},"content":"              \u003coption key\u003d{pageSize} value\u003d{pageSize}\u003e"},{"lineNumber":140,"author":{"gitId":"Hzxin"},"content":"                Show {pageSize}"},{"lineNumber":141,"author":{"gitId":"Hzxin"},"content":"              \u003c/option\u003e"},{"lineNumber":142,"author":{"gitId":"Hzxin"},"content":"            ))}"},{"lineNumber":143,"author":{"gitId":"Hzxin"},"content":"          \u003c/Select\u003e"},{"lineNumber":144,"author":{"gitId":"Hzxin"},"content":"        \u003c/Flex\u003e"},{"lineNumber":145,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":146,"author":{"gitId":"Hzxin"},"content":"        \u003cFlex\u003e"},{"lineNumber":147,"author":{"gitId":"Hzxin"},"content":"          \u003cTooltip label\u003d\"Next Page\"\u003e"},{"lineNumber":148,"author":{"gitId":"Hzxin"},"content":"            \u003cIconButton"},{"lineNumber":149,"author":{"gitId":"Hzxin"},"content":"              onClick\u003d{nextPage}"},{"lineNumber":150,"author":{"gitId":"Hzxin"},"content":"              isDisabled\u003d{!canNextPage}"},{"lineNumber":151,"author":{"gitId":"Hzxin"},"content":"              icon\u003d{\u003cChevronRightIcon h\u003d{6} w\u003d{6} /\u003e}"},{"lineNumber":152,"author":{"gitId":"Hzxin"},"content":"            /\u003e"},{"lineNumber":153,"author":{"gitId":"Hzxin"},"content":"          \u003c/Tooltip\u003e"},{"lineNumber":154,"author":{"gitId":"Hzxin"},"content":"          \u003cTooltip label\u003d\"Last Page\"\u003e"},{"lineNumber":155,"author":{"gitId":"Hzxin"},"content":"            \u003cIconButton"},{"lineNumber":156,"author":{"gitId":"Hzxin"},"content":"              onClick\u003d{() \u003d\u003e gotoPage(pageCount - 1)}"},{"lineNumber":157,"author":{"gitId":"Hzxin"},"content":"              isDisabled\u003d{!canNextPage}"},{"lineNumber":158,"author":{"gitId":"Hzxin"},"content":"              icon\u003d{\u003cArrowRightIcon h\u003d{3} w\u003d{3} /\u003e}"},{"lineNumber":159,"author":{"gitId":"Hzxin"},"content":"              ml\u003d{4}"},{"lineNumber":160,"author":{"gitId":"Hzxin"},"content":"            /\u003e"},{"lineNumber":161,"author":{"gitId":"Hzxin"},"content":"          \u003c/Tooltip\u003e"},{"lineNumber":162,"author":{"gitId":"Hzxin"},"content":"        \u003c/Flex\u003e"},{"lineNumber":163,"author":{"gitId":"Hzxin"},"content":"      \u003c/Flex\u003e"},{"lineNumber":164,"author":{"gitId":"Hzxin"},"content":"    \u003c/\u003e"},{"lineNumber":165,"author":{"gitId":"Hzxin"},"content":"  )"},{"lineNumber":166,"author":{"gitId":"Hzxin"},"content":"}"}],"authorContributionMap":{"Hzxin":166}},{"path":"frontend/src/components/RequireAuth.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { useLocation, Navigate, Outlet } from \u0027react-router-dom\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import useAuth from \u0027../hooks/useAuth\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"const RequireAuth \u003d () \u003d\u003e {"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  const { auth } \u003d useAuth()"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  const location \u003d useLocation()"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  return auth?.username !\u003d\u003d \u0027\u0027 ? ("},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    \u003cOutlet /\u003e"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"  ) : ("},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    \u003cNavigate to\u003d\"/login\" state\u003d{{ from: location }} replace /\u003e"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"export default RequireAuth"}],"authorContributionMap":{"tlylt":14}},{"path":"frontend/src/components/SecondaryFeatures.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { useId } from \u0027react\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { Link } from \u0027react-router-dom\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import { Container } from \u0027./Container\u0027"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"const features \u003d ["},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  {"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    name: \u0027Learn with one account\u0027,"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    description:"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"      \u0027Sign in to your account to access all of features and track your progress.\u0027,"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    icon: DeviceArrowIcon,"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"  {"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    name: \u0027Match with criteria\u0027,"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"    description:"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"      \u0027Choose the question difficulty and/or type, and we will find someone to practice with you.\u0027,"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    icon: DeviceCardsIcon,"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"  {"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"    name: \u0027Realistic and comprehensive question bank\u0027,"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"    description:"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"      \u0027Get genuine questions from real interviews and practice with them.\u0027,"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"    icon: DeviceClockIcon,"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"  {"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"    name: \u0027Track your learning history\u0027,"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"    description:"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"      \u0027Mark questions as completed and revisit them to view your past solutions\u0027,"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"    icon: DeviceListIcon,"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"  {"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"    name: \u0027Collabrative real time editor\u0027,"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"    description:"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"      \u0027Work with your friend on the same question and see their changes in real time.\u0027,"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"    icon: DeviceLockIcon,"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"  {"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"    name: \u0027Video and audio chat\u0027,"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"    description:"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"      \u0027Want a more personal touch? Video and audio chat with your friend.\u0027,"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"    icon: DeviceChartIcon,"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"]"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"function DeviceArrowIcon(props) {"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"    \u003csvg viewBox\u003d\"0 0 32 32\" aria-hidden\u003d\"true\" {...props}\u003e"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"        fillRule\u003d\"evenodd\""},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"        clipRule\u003d\"evenodd\""},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M9 0a4 4 0 00-4 4v24a4 4 0 004 4h14a4 4 0 004-4V4a4 4 0 00-4-4H9zm0 2a2 2 0 00-2 2v24a2 2 0 002 2h14a2 2 0 002-2V4a2 2 0 00-2-2h-1.382a1 1 0 00-.894.553l-.448.894a1 1 0 01-.894.553h-6.764a1 1 0 01-.894-.553l-.448-.894A1 1 0 0010.382 2H9z\""},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"#737373\""},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M12 25l8-8m0 0h-6m6 0v6\""},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"        stroke\u003d\"#171717\""},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"        strokeWidth\u003d{2}"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"        strokeLinecap\u003d\"round\""},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"      \u003ccircle cx\u003d{16} cy\u003d{16} r\u003d{16} fill\u003d\"#A3A3A3\" fillOpacity\u003d{0.2} /\u003e"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"    \u003c/svg\u003e"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"function DeviceCardsIcon(props) {"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"  let id \u003d useId()"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"    \u003csvg viewBox\u003d\"0 0 32 32\" aria-hidden\u003d\"true\" {...props}\u003e"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"        fillRule\u003d\"evenodd\""},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"        clipRule\u003d\"evenodd\""},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M9 0a4 4 0 00-4 4v24a4 4 0 004 4h14a4 4 0 004-4V4a4 4 0 00-4-4H9zm0 2a2 2 0 00-2 2v24a2 2 0 002 2h14a2 2 0 002-2V4a2 2 0 00-2-2h-1.382a1 1 0 00-.894.553l-.448.894a1 1 0 01-.894.553h-6.764a1 1 0 01-.894-.553l-.448-.894A1 1 0 0010.382 2H9z\""},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"#737373\""},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"        fillRule\u003d\"evenodd\""},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"        clipRule\u003d\"evenodd\""},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M9 13a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H10a1 1 0 01-1-1v-2zm0 6a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H10a1 1 0 01-1-1v-2zm1 5a1 1 0 00-1 1v2a1 1 0 001 1h12a1 1 0 001-1v-2a1 1 0 00-1-1H10z\""},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":"        fill\u003d{`url(#${id}-gradient)`}"},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":"      \u003crect x\u003d{9} y\u003d{6} width\u003d{14} height\u003d{4} rx\u003d{1} fill\u003d\"#171717\" /\u003e"},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"      \u003ccircle cx\u003d{16} cy\u003d{16} r\u003d{16} fill\u003d\"#A3A3A3\" fillOpacity\u003d{0.2} /\u003e"},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":"      \u003cdefs\u003e"},{"lineNumber":85,"author":{"gitId":"tlylt"},"content":"        \u003clinearGradient"},{"lineNumber":86,"author":{"gitId":"tlylt"},"content":"          id\u003d{`${id}-gradient`}"},{"lineNumber":87,"author":{"gitId":"tlylt"},"content":"          x1\u003d{16}"},{"lineNumber":88,"author":{"gitId":"tlylt"},"content":"          y1\u003d{12}"},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"          x2\u003d{16}"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"          y2\u003d{28}"},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":"          gradientUnits\u003d\"userSpaceOnUse\""},{"lineNumber":92,"author":{"gitId":"tlylt"},"content":"        \u003e"},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":"          \u003cstop stopColor\u003d\"#737373\" /\u003e"},{"lineNumber":94,"author":{"gitId":"tlylt"},"content":"          \u003cstop offset\u003d{1} stopColor\u003d\"#737373\" stopOpacity\u003d{0} /\u003e"},{"lineNumber":95,"author":{"gitId":"tlylt"},"content":"        \u003c/linearGradient\u003e"},{"lineNumber":96,"author":{"gitId":"tlylt"},"content":"      \u003c/defs\u003e"},{"lineNumber":97,"author":{"gitId":"tlylt"},"content":"    \u003c/svg\u003e"},{"lineNumber":98,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":99,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":100,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":101,"author":{"gitId":"tlylt"},"content":"function DeviceClockIcon(props) {"},{"lineNumber":102,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":103,"author":{"gitId":"tlylt"},"content":"    \u003csvg viewBox\u003d\"0 0 32 32\" aria-hidden\u003d\"true\" {...props}\u003e"},{"lineNumber":104,"author":{"gitId":"tlylt"},"content":"      \u003ccircle cx\u003d{16} cy\u003d{16} r\u003d{16} fill\u003d\"#A3A3A3\" fillOpacity\u003d{0.2} /\u003e"},{"lineNumber":105,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":106,"author":{"gitId":"tlylt"},"content":"        fillRule\u003d\"evenodd\""},{"lineNumber":107,"author":{"gitId":"tlylt"},"content":"        clipRule\u003d\"evenodd\""},{"lineNumber":108,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M5 4a4 4 0 014-4h14a4 4 0 014 4v10h-2V4a2 2 0 00-2-2h-1.382a1 1 0 00-.894.553l-.448.894a1 1 0 01-.894.553h-6.764a1 1 0 01-.894-.553l-.448-.894A1 1 0 0010.382 2H9a2 2 0 00-2 2v24a2 2 0 002 2h5v2H9a4 4 0 01-4-4V4z\""},{"lineNumber":109,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"#737373\""},{"lineNumber":110,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":111,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":112,"author":{"gitId":"tlylt"},"content":"        fillRule\u003d\"evenodd\""},{"lineNumber":113,"author":{"gitId":"tlylt"},"content":"        clipRule\u003d\"evenodd\""},{"lineNumber":114,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M24 32a8 8 0 100-16 8 8 0 000 16zm1-8.414V19h-2v5.414l4 4L28.414 27 25 23.586z\""},{"lineNumber":115,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"#171717\""},{"lineNumber":116,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":117,"author":{"gitId":"tlylt"},"content":"    \u003c/svg\u003e"},{"lineNumber":118,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":119,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":120,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":121,"author":{"gitId":"tlylt"},"content":"function DeviceListIcon(props) {"},{"lineNumber":122,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":123,"author":{"gitId":"tlylt"},"content":"    \u003csvg viewBox\u003d\"0 0 32 32\" fill\u003d\"none\" aria-hidden\u003d\"true\" {...props}\u003e"},{"lineNumber":124,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":125,"author":{"gitId":"tlylt"},"content":"        fillRule\u003d\"evenodd\""},{"lineNumber":126,"author":{"gitId":"tlylt"},"content":"        clipRule\u003d\"evenodd\""},{"lineNumber":127,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M9 0a4 4 0 00-4 4v24a4 4 0 004 4h14a4 4 0 004-4V4a4 4 0 00-4-4H9zm0 2a2 2 0 00-2 2v24a2 2 0 002 2h14a2 2 0 002-2V4a2 2 0 00-2-2h-1.382a1 1 0 00-.894.553l-.448.894a1 1 0 01-.894.553h-6.764a1 1 0 01-.894-.553l-.448-.894A1 1 0 0010.382 2H9z\""},{"lineNumber":128,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"#737373\""},{"lineNumber":129,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":130,"author":{"gitId":"tlylt"},"content":"      \u003ccircle cx\u003d{11} cy\u003d{14} r\u003d{2} fill\u003d\"#171717\" /\u003e"},{"lineNumber":131,"author":{"gitId":"tlylt"},"content":"      \u003ccircle cx\u003d{11} cy\u003d{20} r\u003d{2} fill\u003d\"#171717\" /\u003e"},{"lineNumber":132,"author":{"gitId":"tlylt"},"content":"      \u003ccircle cx\u003d{11} cy\u003d{26} r\u003d{2} fill\u003d\"#171717\" /\u003e"},{"lineNumber":133,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":134,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M16 14h6M16 20h6M16 26h6\""},{"lineNumber":135,"author":{"gitId":"tlylt"},"content":"        stroke\u003d\"#737373\""},{"lineNumber":136,"author":{"gitId":"tlylt"},"content":"        strokeWidth\u003d{2}"},{"lineNumber":137,"author":{"gitId":"tlylt"},"content":"        strokeLinecap\u003d\"square\""},{"lineNumber":138,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":139,"author":{"gitId":"tlylt"},"content":"      \u003ccircle cx\u003d{16} cy\u003d{16} r\u003d{16} fill\u003d\"#A3A3A3\" fillOpacity\u003d{0.2} /\u003e"},{"lineNumber":140,"author":{"gitId":"tlylt"},"content":"    \u003c/svg\u003e"},{"lineNumber":141,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":142,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":143,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":144,"author":{"gitId":"tlylt"},"content":"function DeviceLockIcon(props) {"},{"lineNumber":145,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":146,"author":{"gitId":"tlylt"},"content":"    \u003csvg viewBox\u003d\"0 0 32 32\" aria-hidden\u003d\"true\" {...props}\u003e"},{"lineNumber":147,"author":{"gitId":"tlylt"},"content":"      \u003ccircle cx\u003d{16} cy\u003d{16} r\u003d{16} fill\u003d\"#A3A3A3\" fillOpacity\u003d{0.2} /\u003e"},{"lineNumber":148,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":149,"author":{"gitId":"tlylt"},"content":"        fillRule\u003d\"evenodd\""},{"lineNumber":150,"author":{"gitId":"tlylt"},"content":"        clipRule\u003d\"evenodd\""},{"lineNumber":151,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M5 4a4 4 0 014-4h14a4 4 0 014 4v10h-2V4a2 2 0 00-2-2h-1.382a1 1 0 00-.894.553l-.448.894a1 1 0 01-.894.553h-6.764a1 1 0 01-.894-.553l-.448-.894A1 1 0 0010.382 2H9a2 2 0 00-2 2v24a2 2 0 002 2h5v2H9a4 4 0 01-4-4V4z\""},{"lineNumber":152,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"#737373\""},{"lineNumber":153,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":154,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":155,"author":{"gitId":"tlylt"},"content":"        fillRule\u003d\"evenodd\""},{"lineNumber":156,"author":{"gitId":"tlylt"},"content":"        clipRule\u003d\"evenodd\""},{"lineNumber":157,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M18 19.5a3.5 3.5 0 117 0V22a2 2 0 012 2v6a2 2 0 01-2 2h-7a2 2 0 01-2-2v-6a2 2 0 012-2v-2.5zm2 2.5h3v-2.5a1.5 1.5 0 00-3 0V22z\""},{"lineNumber":158,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"#171717\""},{"lineNumber":159,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":160,"author":{"gitId":"tlylt"},"content":"    \u003c/svg\u003e"},{"lineNumber":161,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":162,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":163,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":164,"author":{"gitId":"tlylt"},"content":"function DeviceChartIcon(props) {"},{"lineNumber":165,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":166,"author":{"gitId":"tlylt"},"content":"    \u003csvg viewBox\u003d\"0 0 32 32\" fill\u003d\"none\" aria-hidden\u003d\"true\" {...props}\u003e"},{"lineNumber":167,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":168,"author":{"gitId":"tlylt"},"content":"        fillRule\u003d\"evenodd\""},{"lineNumber":169,"author":{"gitId":"tlylt"},"content":"        clipRule\u003d\"evenodd\""},{"lineNumber":170,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M9 0a4 4 0 00-4 4v24a4 4 0 004 4h14a4 4 0 004-4V4a4 4 0 00-4-4H9zm0 2a2 2 0 00-2 2v24a2 2 0 002 2h14a2 2 0 002-2V4a2 2 0 00-2-2h-1.382a1 1 0 00-.894.553l-.448.894a1 1 0 01-.894.553h-6.764a1 1 0 01-.894-.553l-.448-.894A1 1 0 0010.382 2H9z\""},{"lineNumber":171,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"#737373\""},{"lineNumber":172,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":173,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":174,"author":{"gitId":"tlylt"},"content":"        fillRule\u003d\"evenodd\""},{"lineNumber":175,"author":{"gitId":"tlylt"},"content":"        clipRule\u003d\"evenodd\""},{"lineNumber":176,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M23 13.838V26a2 2 0 01-2 2H11a2 2 0 01-2-2V15.65l2.57 3.212a1 1 0 001.38.175L15.4 17.2a1 1 0 011.494.353l1.841 3.681c.399.797 1.562.714 1.843-.13L23 13.837z\""},{"lineNumber":177,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"#171717\""},{"lineNumber":178,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":179,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":180,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M10 12h12\""},{"lineNumber":181,"author":{"gitId":"tlylt"},"content":"        stroke\u003d\"#737373\""},{"lineNumber":182,"author":{"gitId":"tlylt"},"content":"        strokeWidth\u003d{2}"},{"lineNumber":183,"author":{"gitId":"tlylt"},"content":"        strokeLinecap\u003d\"square\""},{"lineNumber":184,"author":{"gitId":"tlylt"},"content":"      /\u003e"},{"lineNumber":185,"author":{"gitId":"tlylt"},"content":"      \u003ccircle cx\u003d{16} cy\u003d{16} r\u003d{16} fill\u003d\"#A3A3A3\" fillOpacity\u003d{0.2} /\u003e"},{"lineNumber":186,"author":{"gitId":"tlylt"},"content":"    \u003c/svg\u003e"},{"lineNumber":187,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":188,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":189,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":190,"author":{"gitId":"tlylt"},"content":"export function SecondaryFeatures({ username }) {"},{"lineNumber":191,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":192,"author":{"gitId":"tlylt"},"content":"    \u003csection"},{"lineNumber":193,"author":{"gitId":"tlylt"},"content":"      id\u003d\"secondary-features\""},{"lineNumber":194,"author":{"gitId":"tlylt"},"content":"      aria-label\u003d\"Features for building a portfolio\""},{"lineNumber":195,"author":{"gitId":"tlylt"},"content":"      className\u003d\"py-20 sm:py-32\""},{"lineNumber":196,"author":{"gitId":"tlylt"},"content":"    \u003e"},{"lineNumber":197,"author":{"gitId":"tlylt"},"content":"      \u003cContainer\u003e"},{"lineNumber":198,"author":{"gitId":"tlylt"},"content":"        \u003cdiv className\u003d\"max-w-2xl mx-auto sm:text-center\"\u003e"},{"lineNumber":199,"author":{"gitId":"tlylt"},"content":"          \u003ch2 className\u003d\"text-3xl font-medium tracking-tight text-gray-900 dark:text-white\"\u003e"},{"lineNumber":200,"author":{"gitId":"tlylt"},"content":"            Welcome to LeetWithFriend, {username}!"},{"lineNumber":201,"author":{"gitId":"tlylt"},"content":"          \u003c/h2\u003e"},{"lineNumber":202,"author":{"gitId":"tlylt"},"content":"          \u003cp className\u003d\"my-2 text-lg text-gray-600 dark:text-gray-400 \"\u003e"},{"lineNumber":203,"author":{"gitId":"tlylt"},"content":"            Practicing for your next interivew? LeetWithFriend provides the"},{"lineNumber":204,"author":{"gitId":"tlylt"},"content":"            collaborative experience to optimize your learning!"},{"lineNumber":205,"author":{"gitId":"tlylt"},"content":"          \u003c/p\u003e"},{"lineNumber":206,"author":{"gitId":"tlylt"},"content":"          \u003cLink to\u003d\"/match\" className\u003d\"font-bold underline\"\u003e"},{"lineNumber":207,"author":{"gitId":"tlylt"},"content":"            Go Match"},{"lineNumber":208,"author":{"gitId":"tlylt"},"content":"          \u003c/Link\u003e"},{"lineNumber":209,"author":{"gitId":"tlylt"},"content":"          \u003cp className\u003d\"mt-4 text-sm italic dark:text-gray-300\"\u003e"},{"lineNumber":210,"author":{"gitId":"tlylt"},"content":"            \"The best time to plant a tree was 20 years ago. The second best"},{"lineNumber":211,"author":{"gitId":"tlylt"},"content":"            time is now.\""},{"lineNumber":212,"author":{"gitId":"tlylt"},"content":"          \u003c/p\u003e"},{"lineNumber":213,"author":{"gitId":"tlylt"},"content":"        \u003c/div\u003e"},{"lineNumber":214,"author":{"gitId":"tlylt"},"content":"        \u003cul className\u003d\"grid max-w-2xl grid-cols-1 gap-6 mx-auto mt-16 text-sm sm:mt-20 sm:grid-cols-2 md:gap-y-10 lg:max-w-none lg:grid-cols-3\"\u003e"},{"lineNumber":215,"author":{"gitId":"tlylt"},"content":"          {features.map((feature) \u003d\u003e ("},{"lineNumber":216,"author":{"gitId":"tlylt"},"content":"            \u003cli"},{"lineNumber":217,"author":{"gitId":"tlylt"},"content":"              key\u003d{feature.name}"},{"lineNumber":218,"author":{"gitId":"tlylt"},"content":"              className\u003d\"p-8 border border-gray-200 rounded-2xl\""},{"lineNumber":219,"author":{"gitId":"tlylt"},"content":"            \u003e"},{"lineNumber":220,"author":{"gitId":"tlylt"},"content":"              \u003cfeature.icon className\u003d\"w-8 h-8\" /\u003e"},{"lineNumber":221,"author":{"gitId":"tlylt"},"content":"              \u003ch3 className\u003d\"mt-6 font-semibold text-gray-900 dark:text-white \"\u003e"},{"lineNumber":222,"author":{"gitId":"tlylt"},"content":"                {feature.name}"},{"lineNumber":223,"author":{"gitId":"tlylt"},"content":"              \u003c/h3\u003e"},{"lineNumber":224,"author":{"gitId":"tlylt"},"content":"              \u003cp className\u003d\"mt-2 text-gray-700 dark:text-gray-400\"\u003e"},{"lineNumber":225,"author":{"gitId":"tlylt"},"content":"                {feature.description}"},{"lineNumber":226,"author":{"gitId":"tlylt"},"content":"              \u003c/p\u003e"},{"lineNumber":227,"author":{"gitId":"tlylt"},"content":"            \u003c/li\u003e"},{"lineNumber":228,"author":{"gitId":"tlylt"},"content":"          ))}"},{"lineNumber":229,"author":{"gitId":"tlylt"},"content":"        \u003c/ul\u003e"},{"lineNumber":230,"author":{"gitId":"tlylt"},"content":"      \u003c/Container\u003e"},{"lineNumber":231,"author":{"gitId":"tlylt"},"content":"    \u003c/section\u003e"},{"lineNumber":232,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":233,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":233}},{"path":"frontend/src/components/TypesStack.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"import {"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"  Badge,"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"  HStack,"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"} from \u0027@chakra-ui/react\u0027"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"const TypesStack \u003d (types) \u003d\u003e {"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"  let badgeList \u003d []"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"  if (!Array.isArray(types)) {"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"    types \u003d [types]"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"  }"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"  types.forEach((type, index) \u003d\u003e {"},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"    badgeList.push("},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"      \u003cBadge"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"        fontWeight\u003d\"bold\""},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"        color\u003d\"gray.600\""},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"        borderRadius\u003d\"1\""},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"        px\u003d\"2\""},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"        colorScheme\u003d\"blue\""},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"        key\u003d{index}"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"      \u003e"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"        {type}"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"      \u003c/Badge\u003e"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"    )"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"  })"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"  return \u003cHStack\u003e{badgeList}\u003c/HStack\u003e"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":"export default TypesStack"}],"authorContributionMap":{"Hzxin":29}},{"path":"frontend/src/components/UserAvatar.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { Avatar } from \u0027@chakra-ui/react\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { getUserProfileUrl } from \u0027../utils\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"export function UserAvatar({ username, src }) {"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  const url \u003d src ?? getUserProfileUrl(username)"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"    \u003cdiv\u003e"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"      \u003cAvatar bg\u003d\"white\" name\u003d{username} src\u003d{url}\u003e\u003c/Avatar\u003e"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    \u003c/div\u003e"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":11}},{"path":"frontend/src/components/collaboration/Editor.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import { useEffect, useRef, useState } from \u0027react\u0027"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"import { db } from \u0027../../api/firebase\u0027"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"import useAuth from \u0027../../hooks/useAuth\u0027"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"import useTabSize from \u0027../../hooks/useTabSize\u0027"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"import useLanguage from \u0027../../hooks/useLanguage\u0027"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"import Firepad from \u0027./lib/firepad\u0027"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"import { basicSetup } from \u0027codemirror\u0027"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"import { EditorView, keymap } from \u0027@codemirror/view\u0027"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"import { indentWithTab } from \u0027@codemirror/commands\u0027"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"import { indentUnit } from \u0027@codemirror/language\u0027"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"import { python } from \u0027@codemirror/lang-python\u0027"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"import { javascript } from \u0027@codemirror/lang-javascript\u0027"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"import { java } from \u0027@codemirror/lang-java\u0027"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"import { cpp } from \u0027@codemirror/lang-cpp\u0027"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"import getCursorExtension from \u0027./cursorExtension\u0027"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"import getSelectionExtension from \u0027./selectionExtension\u0027"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"import CursorListener from \u0027./cursorListener\u0027"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"import { useColorMode, Select } from \u0027@chakra-ui/react\u0027"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"import { oneDark, lightTheme } from \u0027./editorThemes\u0027"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"const indents \u003d {"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"  2: \u0027  \u0027,"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"  4: \u0027    \u0027,"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"const languageExtensions \u003d {"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"  \u0027Python\u0027: python(),"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"  \u0027Java\u0027: java(),"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"  \u0027C++\u0027: cpp(),"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"  \u0027JavaScript\u0027: javascript(),"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"const Editor \u003d ({ roomId, setEditorComponent }) \u003d\u003e {"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"  const docPath \u003d \u0027docs/\u0027 + roomId"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"  const { auth } \u003d useAuth()"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"  const editorRef \u003d useRef(null)"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"  const [ready, setReady] \u003d useState(false)"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"  const [tabSize, setTabSize] \u003d useTabSize(docPath)"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"  const [lang, setLang] \u003d useLanguage(docPath)"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"  const { colorMode } \u003d useColorMode()"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"  const uid \u003d auth.username"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"    /** Timer ID returned by setTimeout, used for sending cursor data */"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"    let timerId \u003d null"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"    const MIN_DELAY \u003d 1, MAX_DELAY \u003d 50 // Delay duration in milisec to send cursor data"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"    let lastSend \u003d 0 // Timestamp of last cursor update"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"    // Delay to send cursor should be in the range [MIN_DELAY, MAX_DELAY]"},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"    const getDelay \u003d () \u003d\u003e {"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"      const elapsed \u003d Date.now() - lastSend"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"      if (elapsed \u003e\u003d MAX_DELAY) {"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":"        return MIN_DELAY // waited too long already, send ASAP"},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"      if (MAX_DELAY - elapsed \u003c MIN_DELAY) {"},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":"        return MIN_DELAY // not deadline yet, but we still need to wait at least MIN_DELAY"},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"      return MAX_DELAY - elapsed // keep waiting the rest of the duration until the deadline"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"    const parentNode \u003d editorRef.current"},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":"    const codeMirrorInstance \u003d new EditorView({"},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"      parent: editorRef.current,"},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"      extensions: ["},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":"        basicSetup,"},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":"        keymap.of([indentWithTab]), // extension to press tab for indent"},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":"        indentUnit.of(indents[tabSize]),"},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":"        languageExtensions[lang], // extension for language"},{"lineNumber":71,"author":{"gitId":"uyencfi"},"content":"        EditorView.lineWrapping, // extension to wrap line"},{"lineNumber":72,"author":{"gitId":"uyencfi"},"content":"        // extension to customize editor style"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"        colorMode \u003d\u003d\u003d \u0027light\u0027"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"          ? lightTheme"},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"          : oneDark,"},{"lineNumber":76,"author":{"gitId":"uyencfi"},"content":"        // extension to upload my own cursor data"},{"lineNumber":77,"author":{"gitId":"uyencfi"},"content":"        EditorView.updateListener.of((update) \u003d\u003e {"},{"lineNumber":78,"author":{"gitId":"uyencfi"},"content":"          if (!update.selectionSet \u0026\u0026 !update.docChanged) return"},{"lineNumber":79,"author":{"gitId":"uyencfi"},"content":"          clearTimeout(timerId)"},{"lineNumber":80,"author":{"gitId":"uyencfi"},"content":"          timerId \u003d setTimeout(() \u003d\u003e { // send cursor data to Firebase"},{"lineNumber":81,"author":{"gitId":"uyencfi"},"content":"            lastSend \u003d Date.now()"},{"lineNumber":82,"author":{"gitId":"uyencfi"},"content":"            db.ref(`${docPath}/users/${uid}/cursor`).set({"},{"lineNumber":83,"author":{"gitId":"uyencfi"},"content":"              from: update.state.selection.main.anchor,"},{"lineNumber":84,"author":{"gitId":"uyencfi"},"content":"              to: update.state.selection.main.head,"},{"lineNumber":85,"author":{"gitId":"uyencfi"},"content":"            })"},{"lineNumber":86,"author":{"gitId":"uyencfi"},"content":"          }, getDelay())"},{"lineNumber":87,"author":{"gitId":"uyencfi"},"content":"        }),"},{"lineNumber":88,"author":{"gitId":"uyencfi"},"content":"        // extensions to manage the other person\u0027s cursor and selection"},{"lineNumber":89,"author":{"gitId":"uyencfi"},"content":"        getCursorExtension(uid),"},{"lineNumber":90,"author":{"gitId":"uyencfi"},"content":"        getSelectionExtension(uid),"},{"lineNumber":91,"author":{"gitId":"uyencfi"},"content":"        EditorView.exceptionSink.of((err) \u003d\u003e {}),   // silence errors"},{"lineNumber":92,"author":{"gitId":"uyencfi"},"content":"      ]"},{"lineNumber":93,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":94,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":95,"author":{"gitId":"uyencfi"},"content":"    const firepad \u003d Firepad.fromCodeMirror6("},{"lineNumber":96,"author":{"gitId":"uyencfi"},"content":"      db.ref(docPath),"},{"lineNumber":97,"author":{"gitId":"uyencfi"},"content":"      codeMirrorInstance,"},{"lineNumber":98,"author":{"gitId":"uyencfi"},"content":"      {"},{"lineNumber":99,"author":{"gitId":"uyencfi"},"content":"        defaultText: \u0027# Type your answer here\u0027,"},{"lineNumber":100,"author":{"gitId":"uyencfi"},"content":"        userId: uid,"},{"lineNumber":101,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":102,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":103,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":104,"author":{"gitId":"uyencfi"},"content":"    let cl"},{"lineNumber":105,"author":{"gitId":"uyencfi"},"content":"    firepad.on(\u0027ready\u0027, () \u003d\u003e {"},{"lineNumber":106,"author":{"gitId":"uyencfi"},"content":"      console.log(\u0027editor ready\u0027)"},{"lineNumber":107,"author":{"gitId":"uyencfi"},"content":"      setEditorComponent(firepad)"},{"lineNumber":108,"author":{"gitId":"uyencfi"},"content":"      cl \u003d new CursorListener(docPath, codeMirrorInstance)"},{"lineNumber":109,"author":{"gitId":"uyencfi"},"content":"      setReady(true)"},{"lineNumber":110,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":111,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":112,"author":{"gitId":"uyencfi"},"content":"    return () \u003d\u003e {"},{"lineNumber":113,"author":{"gitId":"uyencfi"},"content":"      firepad.off(\u0027ready\u0027)"},{"lineNumber":114,"author":{"gitId":"uyencfi"},"content":"      codeMirrorInstance.destroy()"},{"lineNumber":115,"author":{"gitId":"uyencfi"},"content":"      cl?.deregister()"},{"lineNumber":116,"author":{"gitId":"uyencfi"},"content":"      db.ref(`${docPath}/users/${uid}`).set(null)"},{"lineNumber":117,"author":{"gitId":"uyencfi"},"content":"      parentNode.removeChild(parentNode.children[0])"},{"lineNumber":118,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"uyencfi"},"content":"  // eslint-disable-next-line react-hooks/exhaustive-deps"},{"lineNumber":120,"author":{"gitId":"uyencfi"},"content":"  }, [docPath, lang, tabSize, uid, colorMode])"},{"lineNumber":121,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":122,"author":{"gitId":"uyencfi"},"content":"  return ("},{"lineNumber":123,"author":{"gitId":"uyencfi"},"content":"    \u003c\u003e"},{"lineNumber":124,"author":{"gitId":"uyencfi"},"content":"      {!ready \u0026\u0026 \u003ch2\u003eLoading editor...\u003c/h2\u003e}"},{"lineNumber":125,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":126,"author":{"gitId":"uyencfi"},"content":"      {ready \u0026\u0026 ("},{"lineNumber":127,"author":{"gitId":"uyencfi"},"content":"        \u003cdiv className\u003d\"flex flex-row\"\u003e"},{"lineNumber":128,"author":{"gitId":"uyencfi"},"content":"          \u003cSelect value\u003d{lang} onChange\u003d{(event) \u003d\u003e setLang(event.target.value)}\u003e"},{"lineNumber":129,"author":{"gitId":"uyencfi"},"content":"            {Object.keys(languageExtensions).map((language, i) \u003d\u003e {"},{"lineNumber":130,"author":{"gitId":"uyencfi"},"content":"              return ("},{"lineNumber":131,"author":{"gitId":"uyencfi"},"content":"                \u003coption key\u003d{i} value\u003d{language}\u003e"},{"lineNumber":132,"author":{"gitId":"uyencfi"},"content":"                  {language}"},{"lineNumber":133,"author":{"gitId":"uyencfi"},"content":"                \u003c/option\u003e"},{"lineNumber":134,"author":{"gitId":"uyencfi"},"content":"              )"},{"lineNumber":135,"author":{"gitId":"uyencfi"},"content":"            })}"},{"lineNumber":136,"author":{"gitId":"uyencfi"},"content":"          \u003c/Select\u003e"},{"lineNumber":137,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":138,"author":{"gitId":"uyencfi"},"content":"          \u003cSelect value\u003d{tabSize} onChange\u003d{(event) \u003d\u003e setTabSize(event.target.value)}\u003e"},{"lineNumber":139,"author":{"gitId":"uyencfi"},"content":"            {Object.keys(indents).map((indent, i) \u003d\u003e {"},{"lineNumber":140,"author":{"gitId":"uyencfi"},"content":"              return ("},{"lineNumber":141,"author":{"gitId":"uyencfi"},"content":"                \u003coption key\u003d{i} value\u003d{indent}\u003e"},{"lineNumber":142,"author":{"gitId":"uyencfi"},"content":"                  {indent}"},{"lineNumber":143,"author":{"gitId":"uyencfi"},"content":"                \u003c/option\u003e"},{"lineNumber":144,"author":{"gitId":"uyencfi"},"content":"              )"},{"lineNumber":145,"author":{"gitId":"uyencfi"},"content":"            })}"},{"lineNumber":146,"author":{"gitId":"uyencfi"},"content":"          \u003c/Select\u003e"},{"lineNumber":147,"author":{"gitId":"uyencfi"},"content":"        \u003c/div\u003e"},{"lineNumber":148,"author":{"gitId":"uyencfi"},"content":"      )}"},{"lineNumber":149,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":150,"author":{"gitId":"uyencfi"},"content":"      \u003cdiv"},{"lineNumber":151,"author":{"gitId":"uyencfi"},"content":"        ref\u003d{editorRef}"},{"lineNumber":152,"author":{"gitId":"uyencfi"},"content":"        className\u003d{"},{"lineNumber":153,"author":{"gitId":"uyencfi"},"content":"          ready ? \u0027my-2 mr-2 flex h-min flex-col justify-start\u0027 : \u0027hidden\u0027"},{"lineNumber":154,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":155,"author":{"gitId":"uyencfi"},"content":"      /\u003e"},{"lineNumber":156,"author":{"gitId":"uyencfi"},"content":"    \u003c/\u003e"},{"lineNumber":157,"author":{"gitId":"uyencfi"},"content":"  )"},{"lineNumber":158,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":159,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":160,"author":{"gitId":"uyencfi"},"content":"export default Editor"}],"authorContributionMap":{"tlylt":6,"uyencfi":154}},{"path":"frontend/src/components/collaboration/cursorEffects.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import { StateEffect } from \u0027@codemirror/state\u0027"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"// In CodeMirror, changes to the editor state are made by creating \"effect\" objects"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"// representing the change, then encapsulating them in a \"transaction\" object"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"// to be processed by the extension."},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"/** "},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":" * A CodeMirror Effect representing the action of adding a cursor."},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":" * "},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":" * This effect contains 3 values: "},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":" * - uid: The user id associated with this cursor (could be this user or the partner)"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":" * - from: cursor start"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":" * - to: cursor end"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":" * "},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":" *  If from \u003d\u003d to, this is a cursor. If from !\u003d to, this is a selection."},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":" */"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"const addCursor \u003d StateEffect.define()"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"/** "},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":" * A CodeMirror Effect representing the action of removing a cursor."},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":" * "},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":" * This effect contains 3 values: "},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":" * - uid: The user id associated with this cursor (could be this user or the partner)"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":" * - from: cursor start"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":" * - to: cursor end"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":" * "},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":" *  If from \u003d\u003d to, this is a cursor. If from !\u003d to, this is a selection."},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":" */"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"const rmCursor \u003d StateEffect.define()"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"export { addCursor, rmCursor }"}],"authorContributionMap":{"uyencfi":31}},{"path":"frontend/src/components/collaboration/cursorExtension.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import { showTooltip } from \u0027@codemirror/view\u0027"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"import { StateField } from \u0027@codemirror/state\u0027"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"import { addCursor, rmCursor } from \u0027./cursorEffects\u0027"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"// This extension must be added to the set of extensions in the Editor component."},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"// It manages a set of cursor objects representing the cursor of the other user,"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"// and updates the editor to reflect their cursor position."},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"// Although there is only 1 partner and thus 1 cursor, we keep an \"array of cursor\" to be safe."},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"/**"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":" * Returns the extension to manage the other person\u0027s cursor."},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":" * @param uid The current user\u0027s id (NOT the other user!)"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":" */"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"const getCursorExtension \u003d (uid) \u003d\u003e {"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"  return StateField.define({"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"    // Start with an empty array of cursors"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"    create() {"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"      return []"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"    },"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"    // This function is called whenever the editor updates  it computes the"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"    // new cursor array using the previous array and the incoming transaction."},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"    update(cursors, tx) {"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"      let ret \u003d cursors"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"      for (let e of tx.effects) {"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"        // If this transaction adds or removes cursors, apply those changes"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"        if (e.is(addCursor)) {"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"          // Skip my own cursor"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"          if (e.value.uid \u003d\u003d\u003d uid) {"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"            continue"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"          }"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"          ret \u003d ["},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"            ...cursors,"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"            {"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"              uid: e.value.uid, // Each cursor has 2 fields: user id and position"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"              pos: e.value.to,"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"            },"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"          ]"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"        } else if (e.is(rmCursor)) {"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"          if (e.value.uid \u003d\u003d\u003d uid) {"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"            continue"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"          }"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"          // Remove a certain cursor by filtering it out"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"          ret \u003d cursors.filter((cur) \u003d\u003e cur.uid !\u003d\u003d e.value.uid)"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"      return ret"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"    },"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"    provide: (f) \u003d\u003e {"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"      return showTooltip.computeN([f], (state) \u003d\u003e {"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"        // Map each cursor obj stored in this StateField into a DOM element."},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"        // This renders into the other person\u0027s cursor."},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"        return state.field(f).map((x) \u003d\u003e {"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"          return {"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"            pos: Math.min(x.pos, state.doc.length),"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":"            create: () \u003d\u003e {"},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"              const dom \u003d document.createElement(\u0027div\u0027)"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"              dom.className \u003d \u0027cm-other-cursor\u0027  // Styling handled by CodeMirror\u0027s theme (see Editor.jsx)"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"              const offset \u003d { x: 0, y: -15 }"},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"              return { dom, offset }"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"            },"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"          }"},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"        })"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":"    },"},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"  })"},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":"export default getCursorExtension"}],"authorContributionMap":{"tlylt":2,"uyencfi":66}},{"path":"frontend/src/components/collaboration/cursorListener.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import { db } from \u0027../../api/firebase\u0027"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"import { addCursor, rmCursor } from \u0027./cursorEffects\u0027"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"function isPresent(x) {"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"  return x !\u003d\u003d null \u0026\u0026 x !\u003d\u003d undefined"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"class CursorListener {"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"  /** The ref to the Firebase document */"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"  dbRef"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"  /** The CodeMirror instance */"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"  view"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"  /** The current cursor status of both users. Maps uid to the cursor data. */"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"  cursorsData"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"  /** The array of callbacks when a cursor is added */"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"  onAddCallbacks"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"  /** The array of callbacks when a cursor is removed */"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"  onRemoveCallbacks"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"  /** Boolean, true if this listerner has been deregistered */"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"  deregistered"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"  constructor(docPath, view) {"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"    this.dbRef \u003d db.ref(`${docPath}/users`)"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"    this.view \u003d view"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"    this.cursorsData \u003d {}"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"    this.onAddCallbacks \u003d []"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"    this.onRemoveCallbacks \u003d []"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"    this.deregistered \u003d false"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"    this.registerCursorCallbacks()"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"    this.attachFirebaseListeners()"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"    this.initUserData()"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"   * Registers callbacks for add-cursor and rm-cursor events."},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"   * For each event, the callback fn creates a corresponding Effect object"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"   * and dispatches this effect to update the CodeMirror view."},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"  registerCursorCallbacks() {"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"    // On add cursor"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"    this.onAddCallbacks.push((newCursor) \u003d\u003e {"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"      if (isPresent(newCursor.from) \u0026\u0026 isPresent(newCursor.to)) {"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":"        let toAdd \u003d addCursor.of({"},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"          uid: newCursor.uid,"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"          from: Math.min(newCursor.from, this.view.state.doc.length),"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"          to: Math.min(newCursor.to, this.view.state.doc.length),"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"        })"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"        this.view.dispatch({ effects: [toAdd] })"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"    // On remove cursor"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"    this.onRemoveCallbacks.push((oldCursor) \u003d\u003e {"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"      if (isPresent(oldCursor.from) \u0026\u0026 isPresent(oldCursor.to)) {"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":"        let toRm \u003d rmCursor.of({"},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"          uid: oldCursor.uid,"},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"          from: oldCursor.from,"},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":"          to: oldCursor.to,"},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"        })"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"        this.view.dispatch({ effects: [toRm] })"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"   * Attaches Firebase listeners to listen for changes in cursor data."},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":"   * On the cursor data change, pass the new data to the callbacks registered"},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":"   * in {@link registerCursorCallbacks} which will emit changes to CodeMirror."},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":"  attachFirebaseListeners() {"},{"lineNumber":71,"author":{"gitId":"uyencfi"},"content":"    this.dbRef.on("},{"lineNumber":72,"author":{"gitId":"uyencfi"},"content":"      \u0027child_changed\u0027,"},{"lineNumber":73,"author":{"gitId":"uyencfi"},"content":"      (snapshot) \u003d\u003e {"},{"lineNumber":74,"author":{"gitId":"uyencfi"},"content":"        this.handleCursorEvent({"},{"lineNumber":75,"author":{"gitId":"uyencfi"},"content":"          uid: snapshot.key,"},{"lineNumber":76,"author":{"gitId":"uyencfi"},"content":"          ...snapshot.val(),"},{"lineNumber":77,"author":{"gitId":"uyencfi"},"content":"        })"},{"lineNumber":78,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":79,"author":{"gitId":"uyencfi"},"content":"      (err) \u003d\u003e {"},{"lineNumber":80,"author":{"gitId":"uyencfi"},"content":"        console.error(\u0027[child_changed] read failed: \u0027 + err.name)"},{"lineNumber":81,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":82,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":83,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":84,"author":{"gitId":"uyencfi"},"content":"    this.dbRef.on("},{"lineNumber":85,"author":{"gitId":"uyencfi"},"content":"      \u0027child_removed\u0027,"},{"lineNumber":86,"author":{"gitId":"uyencfi"},"content":"      (snapshot) \u003d\u003e {"},{"lineNumber":87,"author":{"gitId":"uyencfi"},"content":"        this.handleCursorEvent({ uid: snapshot.key })"},{"lineNumber":88,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":89,"author":{"gitId":"uyencfi"},"content":"      (err) \u003d\u003e {"},{"lineNumber":90,"author":{"gitId":"uyencfi"},"content":"        console.error(\u0027[child_removed] read failed: \u0027 + err.name)"},{"lineNumber":91,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":92,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":93,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":94,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":95,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":96,"author":{"gitId":"uyencfi"},"content":"   * Called once when the CursorListener is initialized."},{"lineNumber":97,"author":{"gitId":"uyencfi"},"content":"   * Manually retrieves cursor data because Firebase listeners have not taken effect yet."},{"lineNumber":98,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":99,"author":{"gitId":"uyencfi"},"content":"  initUserData() {"},{"lineNumber":100,"author":{"gitId":"uyencfi"},"content":"    this.dbRef"},{"lineNumber":101,"author":{"gitId":"uyencfi"},"content":"      .get()"},{"lineNumber":102,"author":{"gitId":"uyencfi"},"content":"      .then((snapshot) \u003d\u003e {"},{"lineNumber":103,"author":{"gitId":"uyencfi"},"content":"        if (!snapshot.exists()) {"},{"lineNumber":104,"author":{"gitId":"uyencfi"},"content":"          console.error(\u0027[initUserData] fail to read user data\u0027)"},{"lineNumber":105,"author":{"gitId":"uyencfi"},"content":"          return"},{"lineNumber":106,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":107,"author":{"gitId":"uyencfi"},"content":"        const v \u003d snapshot.val()"},{"lineNumber":108,"author":{"gitId":"uyencfi"},"content":"        for (const uid in v) {"},{"lineNumber":109,"author":{"gitId":"uyencfi"},"content":"          this.handleCursorEvent({ uid: uid, ...v[uid] })"},{"lineNumber":110,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":111,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":112,"author":{"gitId":"uyencfi"},"content":"      .catch(console.error)"},{"lineNumber":113,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":114,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":115,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":116,"author":{"gitId":"uyencfi"},"content":"   * Handles add- and remove-cursor events."},{"lineNumber":117,"author":{"gitId":"uyencfi"},"content":"   * Invoked on Firebase change, or on init this object."},{"lineNumber":118,"author":{"gitId":"uyencfi"},"content":"   * @param eventData an object `{uid, cursor}`, where `uid` is the owner of the cursor"},{"lineNumber":119,"author":{"gitId":"uyencfi"},"content":"   * and `cursor` contains the position of the cursor."},{"lineNumber":120,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":121,"author":{"gitId":"uyencfi"},"content":"  handleCursorEvent \u003d (eventData) \u003d\u003e {"},{"lineNumber":122,"author":{"gitId":"uyencfi"},"content":"    const { uid, cursor } \u003d eventData"},{"lineNumber":123,"author":{"gitId":"uyencfi"},"content":"    // Since cursorsData stores the current cursor of both users, if one user is undefined,"},{"lineNumber":124,"author":{"gitId":"uyencfi"},"content":"    // this is an addCursor event."},{"lineNumber":125,"author":{"gitId":"uyencfi"},"content":"    if (this.cursorsData[uid] \u003d\u003d\u003d undefined) {"},{"lineNumber":126,"author":{"gitId":"uyencfi"},"content":"      this.cursorsData[uid] \u003d {"},{"lineNumber":127,"author":{"gitId":"uyencfi"},"content":"        uid: uid,"},{"lineNumber":128,"author":{"gitId":"uyencfi"},"content":"        from: cursor?.from,"},{"lineNumber":129,"author":{"gitId":"uyencfi"},"content":"        to: cursor?.to,"},{"lineNumber":130,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":131,"author":{"gitId":"uyencfi"},"content":"      this.callbackOnAdd(this.cursorsData[uid])"},{"lineNumber":132,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":133,"author":{"gitId":"uyencfi"},"content":"    // User has an existing cursor. Remove the old cursor, then add a new cursor."},{"lineNumber":134,"author":{"gitId":"uyencfi"},"content":"    else {"},{"lineNumber":135,"author":{"gitId":"uyencfi"},"content":"      this.callbackOnRemove(this.cursorsData[uid])"},{"lineNumber":136,"author":{"gitId":"uyencfi"},"content":"      this.cursorsData[uid].from \u003d cursor?.from"},{"lineNumber":137,"author":{"gitId":"uyencfi"},"content":"      this.cursorsData[uid].to \u003d cursor?.to"},{"lineNumber":138,"author":{"gitId":"uyencfi"},"content":"      this.callbackOnAdd(this.cursorsData[uid])"},{"lineNumber":139,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":140,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":141,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":142,"author":{"gitId":"uyencfi"},"content":"  /** Executes all registered callbacks for Add-cursor event. */"},{"lineNumber":143,"author":{"gitId":"uyencfi"},"content":"  callbackOnAdd \u003d (cursor) \u003d\u003e {"},{"lineNumber":144,"author":{"gitId":"uyencfi"},"content":"    for (const fn of this.onAddCallbacks) {"},{"lineNumber":145,"author":{"gitId":"uyencfi"},"content":"      fn(cursor)"},{"lineNumber":146,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":147,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":148,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":149,"author":{"gitId":"uyencfi"},"content":"  /** Executes all registered callbacks for Remove-cursor event. */"},{"lineNumber":150,"author":{"gitId":"uyencfi"},"content":"  callbackOnRemove \u003d (cursor) \u003d\u003e {"},{"lineNumber":151,"author":{"gitId":"uyencfi"},"content":"    for (const fn of this.onRemoveCallbacks) {"},{"lineNumber":152,"author":{"gitId":"uyencfi"},"content":"      fn(cursor)"},{"lineNumber":153,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":154,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":155,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":156,"author":{"gitId":"uyencfi"},"content":"  /** Deletes all callbacks registered with this object. */"},{"lineNumber":157,"author":{"gitId":"uyencfi"},"content":"  deregister \u003d () \u003d\u003e {"},{"lineNumber":158,"author":{"gitId":"uyencfi"},"content":"    if (this.deregistered) {"},{"lineNumber":159,"author":{"gitId":"uyencfi"},"content":"      console.error(\u0027Unable to deregister twice\u0027)"},{"lineNumber":160,"author":{"gitId":"uyencfi"},"content":"      return"},{"lineNumber":161,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":162,"author":{"gitId":"uyencfi"},"content":"    this.deregistered \u003d true"},{"lineNumber":163,"author":{"gitId":"uyencfi"},"content":"    this.dbRef.off()"},{"lineNumber":164,"author":{"gitId":"uyencfi"},"content":"    this.onAddCallbacks \u003d []"},{"lineNumber":165,"author":{"gitId":"uyencfi"},"content":"    this.onRemoveCallbacks \u003d []"},{"lineNumber":166,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":167,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":168,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":169,"author":{"gitId":"uyencfi"},"content":"export default CursorListener"}],"authorContributionMap":{"uyencfi":169}},{"path":"frontend/src/components/collaboration/editorThemes.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"// Source: https://github.com/codemirror/theme-one-dark/blob/main/src/one-dark.ts"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"// With modifications to fit our needs"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import { EditorView } from \u0027@codemirror/view\u0027"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import { HighlightStyle, syntaxHighlighting } from \u0027@codemirror/language\u0027"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"import { tags as t } from \u0027@lezer/highlight\u0027"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"// Using https://github.com/one-dark/vscode-one-dark-theme/ as reference for the colors"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"const chalky \u003d \u0027#e5c07b\u0027,"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"  coral \u003d \u0027#e06c75\u0027,"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"  cyan \u003d \u0027#56b6c2\u0027,"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"  invalid \u003d \u0027#ffffff\u0027,"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"  ivory \u003d \u0027#abb2bf\u0027,"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"  stone \u003d \u0027#7d8799\u0027, // Brightened compared to original to increase contrast"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"  malibu \u003d \u0027#61afef\u0027,"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"  sage \u003d \u0027#98c379\u0027,"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"  whiskey \u003d \u0027#d19a66\u0027,"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"  violet \u003d \u0027#c678dd\u0027,"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"  darkBackground \u003d \u0027#21252b\u0027,"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"  highlightBackground \u003d \u0027#2c313a\u0027,"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"  background \u003d \u0027#282c34\u0027,"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"  selection \u003d \u0027#3E4451\u0027,"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"  cursor \u003d \u0027#528bff\u0027,"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"  darkOtherCursor \u003d \u0027#9aa38b\u0027, // Colour of the other user\u0027s cursor. Greyish/Yellowish colour"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"  darkOtherSelection \u003d \u0027#404240\u0027  // Colour of the other user\u0027s selection. A lighter, greener shade"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"// The editor theme styles for One Dark."},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"const oneDarkTheme \u003d EditorView.theme("},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"  {"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"    \u0027\u0026\u0027: {"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"      color: ivory,"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"      backgroundColor: background,"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"      // My own styles"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"      height: \u002785vh\u0027,"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"      borderColor: \u0027d3d3d3\u0027,"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"      borderWidth: \u00273px\u0027,"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"    \u0027.cm-other-selection\u0027: {"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"      backgroundColor: darkOtherSelection,"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"    \u0027.cm-tooltip.cm-other-cursor\u0027: {"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"      backgroundColor: darkOtherCursor,"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"      padding: \"8px 0.75px\","},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"    \u0027.cm-content\u0027: {"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"      caretColor: cursor,"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"    \u0027.cm-cursor, .cm-dropCursor\u0027: { borderLeftColor: cursor },"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"    \u0027\u0026.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection\u0027:"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"      { backgroundColor: selection },"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"    \u0027.cm-panels\u0027: { backgroundColor: darkBackground, color: ivory },"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"    \u0027.cm-panels.cm-panels-top\u0027: { borderBottom: \u00272px solid black\u0027 },"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"    \u0027.cm-panels.cm-panels-bottom\u0027: { borderTop: \u00272px solid black\u0027 },"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"    \u0027.cm-searchMatch\u0027: {"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"      backgroundColor: \u0027#72a1ff59\u0027,"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"      outline: \u00271px solid #457dff\u0027,"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"    \u0027.cm-searchMatch.cm-searchMatch-selected\u0027: {"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"      backgroundColor: \u0027#6199ff2f\u0027,"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"    \u0027.cm-activeLine\u0027: { backgroundColor: \u0027#6699ff0b\u0027 },"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"    \u0027.cm-selectionMatch\u0027: { backgroundColor: \u0027#aafe661a\u0027 },"},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"    \u0027\u0026.cm-focused .cm-matchingBracket, \u0026.cm-focused .cm-nonmatchingBracket\u0027: {"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"      backgroundColor: \u0027#bad0f847\u0027,"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"      outline: \u00271px solid #515a6b\u0027,"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"    \u0027.cm-gutters\u0027: {"},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"      backgroundColor: background,"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"      color: stone,"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"      border: \u0027none\u0027,"},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"    \u0027.cm-activeLineGutter\u0027: {"},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":"      backgroundColor: highlightBackground,"},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"    \u0027.cm-foldPlaceholder\u0027: {"},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":"      backgroundColor: \u0027transparent\u0027,"},{"lineNumber":85,"author":{"gitId":"tlylt"},"content":"      border: \u0027none\u0027,"},{"lineNumber":86,"author":{"gitId":"tlylt"},"content":"      color: \u0027#ddd\u0027,"},{"lineNumber":87,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":88,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"  { dark: true }"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":")"},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":92,"author":{"gitId":"tlylt"},"content":"// The syntax highlighting style for code in One Dark."},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":"const oneDarkHighlightStyle \u003d HighlightStyle.define(["},{"lineNumber":94,"author":{"gitId":"tlylt"},"content":"  { tag: t.keyword, color: violet },"},{"lineNumber":95,"author":{"gitId":"tlylt"},"content":"  {"},{"lineNumber":96,"author":{"gitId":"tlylt"},"content":"    tag: [t.name, t.deleted, t.character, t.propertyName, t.macroName],"},{"lineNumber":97,"author":{"gitId":"tlylt"},"content":"    color: coral,"},{"lineNumber":98,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":99,"author":{"gitId":"tlylt"},"content":"  { tag: [t.function(t.variableName), t.labelName], color: malibu },"},{"lineNumber":100,"author":{"gitId":"tlylt"},"content":"  { tag: [t.color, t.constant(t.name), t.standard(t.name)], color: whiskey },"},{"lineNumber":101,"author":{"gitId":"tlylt"},"content":"  { tag: [t.definition(t.name), t.separator], color: ivory },"},{"lineNumber":102,"author":{"gitId":"tlylt"},"content":"  {"},{"lineNumber":103,"author":{"gitId":"tlylt"},"content":"    tag: ["},{"lineNumber":104,"author":{"gitId":"tlylt"},"content":"      t.typeName,"},{"lineNumber":105,"author":{"gitId":"tlylt"},"content":"      t.className,"},{"lineNumber":106,"author":{"gitId":"tlylt"},"content":"      t.number,"},{"lineNumber":107,"author":{"gitId":"tlylt"},"content":"      t.changed,"},{"lineNumber":108,"author":{"gitId":"tlylt"},"content":"      t.annotation,"},{"lineNumber":109,"author":{"gitId":"tlylt"},"content":"      t.modifier,"},{"lineNumber":110,"author":{"gitId":"tlylt"},"content":"      t.self,"},{"lineNumber":111,"author":{"gitId":"tlylt"},"content":"      t.namespace,"},{"lineNumber":112,"author":{"gitId":"tlylt"},"content":"    ],"},{"lineNumber":113,"author":{"gitId":"tlylt"},"content":"    color: chalky,"},{"lineNumber":114,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":115,"author":{"gitId":"tlylt"},"content":"  {"},{"lineNumber":116,"author":{"gitId":"tlylt"},"content":"    tag: ["},{"lineNumber":117,"author":{"gitId":"tlylt"},"content":"      t.operator,"},{"lineNumber":118,"author":{"gitId":"tlylt"},"content":"      t.operatorKeyword,"},{"lineNumber":119,"author":{"gitId":"tlylt"},"content":"      t.url,"},{"lineNumber":120,"author":{"gitId":"tlylt"},"content":"      t.escape,"},{"lineNumber":121,"author":{"gitId":"tlylt"},"content":"      t.regexp,"},{"lineNumber":122,"author":{"gitId":"tlylt"},"content":"      t.link,"},{"lineNumber":123,"author":{"gitId":"tlylt"},"content":"      t.special(t.string),"},{"lineNumber":124,"author":{"gitId":"tlylt"},"content":"    ],"},{"lineNumber":125,"author":{"gitId":"tlylt"},"content":"    color: cyan,"},{"lineNumber":126,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":127,"author":{"gitId":"tlylt"},"content":"  { tag: [t.meta, t.comment], color: stone },"},{"lineNumber":128,"author":{"gitId":"tlylt"},"content":"  { tag: t.strong, fontWeight: \u0027bold\u0027 },"},{"lineNumber":129,"author":{"gitId":"tlylt"},"content":"  { tag: t.emphasis, fontStyle: \u0027italic\u0027 },"},{"lineNumber":130,"author":{"gitId":"tlylt"},"content":"  { tag: t.strikethrough, textDecoration: \u0027line-through\u0027 },"},{"lineNumber":131,"author":{"gitId":"tlylt"},"content":"  { tag: t.link, color: stone, textDecoration: \u0027underline\u0027 },"},{"lineNumber":132,"author":{"gitId":"tlylt"},"content":"  { tag: t.heading, fontWeight: \u0027bold\u0027, color: coral },"},{"lineNumber":133,"author":{"gitId":"tlylt"},"content":"  { tag: [t.atom, t.bool, t.special(t.variableName)], color: whiskey },"},{"lineNumber":134,"author":{"gitId":"tlylt"},"content":"  { tag: [t.processingInstruction, t.string, t.inserted], color: sage },"},{"lineNumber":135,"author":{"gitId":"tlylt"},"content":"  { tag: t.invalid, color: invalid },"},{"lineNumber":136,"author":{"gitId":"tlylt"},"content":"])"},{"lineNumber":137,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":138,"author":{"gitId":"tlylt"},"content":"// Extension for One Dark theme"},{"lineNumber":139,"author":{"gitId":"tlylt"},"content":"export const oneDark \u003d [oneDarkTheme, syntaxHighlighting(oneDarkHighlightStyle)]"},{"lineNumber":140,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":141,"author":{"gitId":"tlylt"},"content":"// Extension for light mode"},{"lineNumber":142,"author":{"gitId":"uyencfi"},"content":"const otherCursor \u003d \u0027#528bff\u0027,"},{"lineNumber":143,"author":{"gitId":"uyencfi"},"content":"  otherSelection \u003d \u0027#d4ebfa\u0027"},{"lineNumber":144,"author":{"gitId":"tlylt"},"content":"export const lightTheme \u003d EditorView.theme({"},{"lineNumber":145,"author":{"gitId":"tlylt"},"content":"  \u0027\u0026\u0027: {"},{"lineNumber":146,"author":{"gitId":"tlylt"},"content":"    height: \u002785vh\u0027,"},{"lineNumber":147,"author":{"gitId":"tlylt"},"content":"    borderColor: \u0027d3d3d3\u0027,"},{"lineNumber":148,"author":{"gitId":"tlylt"},"content":"    borderWidth: \u00273px\u0027,"},{"lineNumber":149,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":150,"author":{"gitId":"tlylt"},"content":"  \u0027.cm-cursor\u0027: {"},{"lineNumber":151,"author":{"gitId":"tlylt"},"content":"    borderColor: \u0027black\u0027,"},{"lineNumber":152,"author":{"gitId":"tlylt"},"content":"    borderWidth: \u00271px\u0027,"},{"lineNumber":153,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":154,"author":{"gitId":"tlylt"},"content":"  \u0027.cm-other-selection\u0027: {"},{"lineNumber":155,"author":{"gitId":"uyencfi"},"content":"    backgroundColor: otherSelection,"},{"lineNumber":156,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":157,"author":{"gitId":"tlylt"},"content":"  \u0027.cm-other-cursor\u0027: {"},{"lineNumber":158,"author":{"gitId":"uyencfi"},"content":"    borderColor: otherCursor,"},{"lineNumber":159,"author":{"gitId":"tlylt"},"content":"    height: \u002716px\u0027,"},{"lineNumber":160,"author":{"gitId":"tlylt"},"content":"  },          "},{"lineNumber":161,"author":{"gitId":"tlylt"},"content":"})"}],"authorContributionMap":{"tlylt":152,"uyencfi":9}},{"path":"frontend/src/components/collaboration/lib/client.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"export const Client \u003d (function () {"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"  // Client constructor"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"  function Client() {"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"    this.state \u003d synchronized_ // start state"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"  Client.prototype.setState \u003d function (state) {"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"    this.state \u003d state"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"  // Call this method when the user changes the document."},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"  Client.prototype.applyClient \u003d function (operation) {"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"    this.setState(this.state.applyClient(this, operation))"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"  // Call this method with a new operation from the server"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"  Client.prototype.applyServer \u003d function (operation) {"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"    this.setState(this.state.applyServer(this, operation))"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"  Client.prototype.serverAck \u003d function () {"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"    this.setState(this.state.serverAck(this))"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"  Client.prototype.serverRetry \u003d function () {"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"    this.setState(this.state.serverRetry(this))"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"  // Override this method."},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"  Client.prototype.sendOperation \u003d function (operation) {"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"    throw new Error(\"sendOperation must be defined in child class\")"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"  // Override this method."},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"  Client.prototype.applyOperation \u003d function (operation) {"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"    throw new Error(\"applyOperation must be defined in child class\")"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"  // In the \u0027Synchronized\u0027 state, there is no pending operation that the client"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"  // has sent to the server."},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"  function Synchronized() {}"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"  Client.Synchronized \u003d Synchronized"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"  Synchronized.prototype.applyClient \u003d function (client, operation) {"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"    // When the user makes an edit, send the operation to the server and"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"    // switch to the \u0027AwaitingConfirm\u0027 state"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"    client.sendOperation(operation)"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"    return new AwaitingConfirm(operation)"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"  Synchronized.prototype.applyServer \u003d function (client, operation) {"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"    // When we receive a new operation from the server, the operation can be"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"    // simply applied to the current document"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":"    client.applyOperation(operation)"},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"    return this"},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"  Synchronized.prototype.serverAck \u003d function (client) {"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"    throw new Error(\"There is no pending operation.\")"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"  Synchronized.prototype.serverRetry \u003d function (client) {"},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":"    throw new Error(\"There is no pending operation.\")"},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":"  // Singleton"},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":"  var synchronized_ \u003d new Synchronized()"},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":"  // In the \u0027AwaitingConfirm\u0027 state, there\u0027s one operation the client has sent"},{"lineNumber":71,"author":{"gitId":"uyencfi"},"content":"  // to the server and is still waiting for an acknowledgement."},{"lineNumber":72,"author":{"gitId":"uyencfi"},"content":"  function AwaitingConfirm(outstanding) {"},{"lineNumber":73,"author":{"gitId":"uyencfi"},"content":"    // Save the pending operation"},{"lineNumber":74,"author":{"gitId":"uyencfi"},"content":"    this.outstanding \u003d outstanding"},{"lineNumber":75,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":76,"author":{"gitId":"uyencfi"},"content":"  Client.AwaitingConfirm \u003d AwaitingConfirm"},{"lineNumber":77,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":78,"author":{"gitId":"uyencfi"},"content":"  AwaitingConfirm.prototype.applyClient \u003d function (client, operation) {"},{"lineNumber":79,"author":{"gitId":"uyencfi"},"content":"    // When the user makes an edit, don\u0027t send the operation immediately,"},{"lineNumber":80,"author":{"gitId":"uyencfi"},"content":"    // instead switch to \u0027AwaitingWithBuffer\u0027 state"},{"lineNumber":81,"author":{"gitId":"uyencfi"},"content":"    return new AwaitingWithBuffer(this.outstanding, operation)"},{"lineNumber":82,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":83,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":84,"author":{"gitId":"uyencfi"},"content":"  AwaitingConfirm.prototype.applyServer \u003d function (client, operation) {"},{"lineNumber":85,"author":{"gitId":"uyencfi"},"content":"    // This is another client\u0027s operation. Visualization:"},{"lineNumber":86,"author":{"gitId":"uyencfi"},"content":"    //"},{"lineNumber":87,"author":{"gitId":"uyencfi"},"content":"    //                   /\\"},{"lineNumber":88,"author":{"gitId":"uyencfi"},"content":"    // this.outstanding /  \\ operation"},{"lineNumber":89,"author":{"gitId":"uyencfi"},"content":"    //                 /    \\"},{"lineNumber":90,"author":{"gitId":"uyencfi"},"content":"    //                 \\    /"},{"lineNumber":91,"author":{"gitId":"uyencfi"},"content":"    //  pair[1]         \\  / pair[0] (new outstanding)"},{"lineNumber":92,"author":{"gitId":"uyencfi"},"content":"    //  (can be applied  \\/"},{"lineNumber":93,"author":{"gitId":"uyencfi"},"content":"    //  to the client\u0027s"},{"lineNumber":94,"author":{"gitId":"uyencfi"},"content":"    //  current document)"},{"lineNumber":95,"author":{"gitId":"uyencfi"},"content":"    var pair \u003d this.outstanding.transform(operation)"},{"lineNumber":96,"author":{"gitId":"uyencfi"},"content":"    client.applyOperation(pair[1])"},{"lineNumber":97,"author":{"gitId":"uyencfi"},"content":"    return new AwaitingConfirm(pair[0])"},{"lineNumber":98,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":99,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":100,"author":{"gitId":"uyencfi"},"content":"  AwaitingConfirm.prototype.serverAck \u003d function (client) {"},{"lineNumber":101,"author":{"gitId":"uyencfi"},"content":"    // The client\u0027s operation has been acknowledged"},{"lineNumber":102,"author":{"gitId":"uyencfi"},"content":"    // \u003d\u003e switch to synchronized state"},{"lineNumber":103,"author":{"gitId":"uyencfi"},"content":"    return synchronized_"},{"lineNumber":104,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":105,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":106,"author":{"gitId":"uyencfi"},"content":"  AwaitingConfirm.prototype.serverRetry \u003d function (client) {"},{"lineNumber":107,"author":{"gitId":"uyencfi"},"content":"    client.sendOperation(this.outstanding)"},{"lineNumber":108,"author":{"gitId":"uyencfi"},"content":"    return this"},{"lineNumber":109,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":110,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":111,"author":{"gitId":"uyencfi"},"content":"  // In the \u0027AwaitingWithBuffer\u0027 state, the client is waiting for an operation"},{"lineNumber":112,"author":{"gitId":"uyencfi"},"content":"  // to be acknowledged by the server while buffering the edits the user makes"},{"lineNumber":113,"author":{"gitId":"uyencfi"},"content":"  function AwaitingWithBuffer(outstanding, buffer) {"},{"lineNumber":114,"author":{"gitId":"uyencfi"},"content":"    // Save the pending operation and the user\u0027s edits since then"},{"lineNumber":115,"author":{"gitId":"uyencfi"},"content":"    this.outstanding \u003d outstanding"},{"lineNumber":116,"author":{"gitId":"uyencfi"},"content":"    this.buffer \u003d buffer"},{"lineNumber":117,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":118,"author":{"gitId":"uyencfi"},"content":"  Client.AwaitingWithBuffer \u003d AwaitingWithBuffer"},{"lineNumber":119,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":120,"author":{"gitId":"uyencfi"},"content":"  AwaitingWithBuffer.prototype.applyClient \u003d function (client, operation) {"},{"lineNumber":121,"author":{"gitId":"uyencfi"},"content":"    // Compose the user\u0027s changes onto the buffer"},{"lineNumber":122,"author":{"gitId":"uyencfi"},"content":"    var newBuffer \u003d this.buffer.compose(operation)"},{"lineNumber":123,"author":{"gitId":"uyencfi"},"content":"    return new AwaitingWithBuffer(this.outstanding, newBuffer)"},{"lineNumber":124,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":125,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":126,"author":{"gitId":"uyencfi"},"content":"  AwaitingWithBuffer.prototype.applyServer \u003d function (client, operation) {"},{"lineNumber":127,"author":{"gitId":"uyencfi"},"content":"    // Operation comes from another client"},{"lineNumber":128,"author":{"gitId":"uyencfi"},"content":"    //"},{"lineNumber":129,"author":{"gitId":"uyencfi"},"content":"    //                       /\\"},{"lineNumber":130,"author":{"gitId":"uyencfi"},"content":"    //     this.outstanding /  \\ operation"},{"lineNumber":131,"author":{"gitId":"uyencfi"},"content":"    //                     /    \\"},{"lineNumber":132,"author":{"gitId":"uyencfi"},"content":"    //                    /\\    /"},{"lineNumber":133,"author":{"gitId":"uyencfi"},"content":"    //       this.buffer /  \\* / pair1[0] (new outstanding)"},{"lineNumber":134,"author":{"gitId":"uyencfi"},"content":"    //                  /    \\/"},{"lineNumber":135,"author":{"gitId":"uyencfi"},"content":"    //                  \\    /"},{"lineNumber":136,"author":{"gitId":"uyencfi"},"content":"    //          pair2[1] \\  / pair2[0] (new buffer)"},{"lineNumber":137,"author":{"gitId":"uyencfi"},"content":"    // the transformed    \\/"},{"lineNumber":138,"author":{"gitId":"uyencfi"},"content":"    // operation -- can"},{"lineNumber":139,"author":{"gitId":"uyencfi"},"content":"    // be applied to the"},{"lineNumber":140,"author":{"gitId":"uyencfi"},"content":"    // client\u0027s current"},{"lineNumber":141,"author":{"gitId":"uyencfi"},"content":"    // document"},{"lineNumber":142,"author":{"gitId":"uyencfi"},"content":"    //"},{"lineNumber":143,"author":{"gitId":"uyencfi"},"content":"    // * pair1[1]"},{"lineNumber":144,"author":{"gitId":"uyencfi"},"content":"    var pair1 \u003d this.outstanding.transform(operation)"},{"lineNumber":145,"author":{"gitId":"uyencfi"},"content":"    var pair2 \u003d this.buffer.transform(pair1[1])"},{"lineNumber":146,"author":{"gitId":"uyencfi"},"content":"    client.applyOperation(pair2[1])"},{"lineNumber":147,"author":{"gitId":"uyencfi"},"content":"    return new AwaitingWithBuffer(pair1[0], pair2[0])"},{"lineNumber":148,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":149,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":150,"author":{"gitId":"uyencfi"},"content":"  AwaitingWithBuffer.prototype.serverRetry \u003d function (client) {"},{"lineNumber":151,"author":{"gitId":"uyencfi"},"content":"    // Merge with our buffer and resend."},{"lineNumber":152,"author":{"gitId":"uyencfi"},"content":"    var outstanding \u003d this.outstanding.compose(this.buffer)"},{"lineNumber":153,"author":{"gitId":"uyencfi"},"content":"    client.sendOperation(outstanding)"},{"lineNumber":154,"author":{"gitId":"uyencfi"},"content":"    return new AwaitingConfirm(outstanding)"},{"lineNumber":155,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":156,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":157,"author":{"gitId":"uyencfi"},"content":"  AwaitingWithBuffer.prototype.serverAck \u003d function (client) {"},{"lineNumber":158,"author":{"gitId":"uyencfi"},"content":"    // The pending operation has been acknowledged"},{"lineNumber":159,"author":{"gitId":"uyencfi"},"content":"    // \u003d\u003e send buffer"},{"lineNumber":160,"author":{"gitId":"uyencfi"},"content":"    client.sendOperation(this.buffer)"},{"lineNumber":161,"author":{"gitId":"uyencfi"},"content":"    return new AwaitingConfirm(this.buffer)"},{"lineNumber":162,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":163,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":164,"author":{"gitId":"uyencfi"},"content":"  return Client"},{"lineNumber":165,"author":{"gitId":"uyencfi"},"content":"})()"}],"authorContributionMap":{"uyencfi":165}},{"path":"frontend/src/components/collaboration/lib/codemirror6-adapter.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import { TextOperation } from \"./text-operation.js\""},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"import { Cursor } from \"./cursor.js\""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"import { Annotation, StateEffect, Transaction } from \"@codemirror/state\""},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"const addCodemirror6listener \u003d (_this) \u003d\u003e {"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"  _this.cm.dispatch({"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"    effects: StateEffect.appendConfig.of("},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"      _this.cm.constructor.updateListener.of((v) \u003d\u003e {"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"        if ("},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"          v.docChanged \u0026\u0026"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"          !("},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"            v.transactions[0] \u0026\u0026"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"            v.transactions[0].annotations.some((a) \u003d\u003e a.type \u003d\u003d\u003d \"firepad\")"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"          )"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"        ) {"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"          let index \u003d 0"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"          let change_op \u003d new TextOperation()"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"          let inverse_op \u003d new TextOperation()"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"          //Iterate over changes"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"          v.changes.toJSON().forEach((c) \u003d\u003e {"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"            if (typeof c \u003d\u003d \"number\") {"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"              if (c !\u003d\u003d 0) {"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"                index +\u003d c"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"                change_op \u003d change_op.retain(c)"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"                inverse_op \u003d inverse_op.retain(c)"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"              }"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"            } else if (typeof c \u003d\u003d \"object\") {"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"              const [len, ...inserts] \u003d c"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"              if (len \u003e 0) {"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"                change_op \u003d change_op.delete(len)"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"                inverse_op \u003d inverse_op.insert("},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"                  v.startState.sliceDoc(index, index + len)"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"                )"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"              }"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"              if (inserts) {"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"                const jInserts \u003d inserts.join(\"\\n\")"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"                change_op \u003d change_op.insert(jInserts)"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"                inverse_op \u003d inverse_op.delete(jInserts.length)"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"              }"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"            }"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"          })"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"          _this.trigger(\"change\", change_op, inverse_op)"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"        /** Update Editor Content */"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"        _this.lastDocLines \u003d _this.cm.state.doc.text"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"    ),"},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"  })"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":"/**"},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":" * CodeMirror6 Adapter"},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":" * Create Pipe between Firebase and CodeMirror6 Text Editor"},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":" */"},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"var CodeMirror6Adapter \u003d (function () {"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"   * @constructor CodeMirror6Editor"},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"   * @param {CodeMirror6Editor} monacoInstance - Editor Instance"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"   * @prop {CodeMirror6Editor} monaco - CodeMirror6 Instance passed as Parameter"},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":"   * @prop {CodeMirror6ITextModel} monacoModel - Data Model of the CodeMirror6 Instance"},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"   * @prop {string[]} lastDocLines - Text for all Lines in the Editor"},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"   * @prop {CodeMirror6Selection} lastCursorRange - Primary Selection of the Editor"},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":"   * @prop {function} onChange - Change Event Handler bound Local Object"},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":"   * @prop {function} onBlur - Blur Event Handler bound Local Object"},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":"   * @prop {function} onFocus - Focus Event Handler bound Local Object"},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":"   * @prop {function} onCursorActivity - Cursor Activity Handler bound Local Object"},{"lineNumber":71,"author":{"gitId":"uyencfi"},"content":"   * @prop {Boolean} ignoreChanges - Should Avoid OnChange Event Handling"},{"lineNumber":72,"author":{"gitId":"uyencfi"},"content":"   * @prop {CodeMirror6IDisposable} changeHandler - Event Handler for Model Content Change"},{"lineNumber":73,"author":{"gitId":"uyencfi"},"content":"   * @prop {CodeMirror6IDisposable} didBlurHandler - Event Handler for Focus Lost on Editor Text/Widget"},{"lineNumber":74,"author":{"gitId":"uyencfi"},"content":"   * @prop {CodeMirror6IDisposable} didFocusHandler - Event Handler for Focus Gain on Editor Text/Widget"},{"lineNumber":75,"author":{"gitId":"uyencfi"},"content":"   * @prop {CodeMirror6IDisposable} didChangeCursorPositionHandler - Event Handler for Cursor Position Change"},{"lineNumber":76,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":77,"author":{"gitId":"uyencfi"},"content":"  function CodeMirror6Adapter(cmIstance, options \u003d {}) {"},{"lineNumber":78,"author":{"gitId":"uyencfi"},"content":"    /* TODO: check if is valid codemirror6 istance"},{"lineNumber":79,"author":{"gitId":"uyencfi"},"content":"    */"},{"lineNumber":80,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":81,"author":{"gitId":"uyencfi"},"content":"    /** CodeMirror6 Member Variables */"},{"lineNumber":82,"author":{"gitId":"uyencfi"},"content":"    this.options \u003d options"},{"lineNumber":83,"author":{"gitId":"uyencfi"},"content":"    this.cm \u003d cmIstance"},{"lineNumber":84,"author":{"gitId":"uyencfi"},"content":"    this.lastDocLines \u003d this.cm.state.doc.text"},{"lineNumber":85,"author":{"gitId":"uyencfi"},"content":"    this.lastCursorRange \u003d this.cm.state.selection.main"},{"lineNumber":86,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":87,"author":{"gitId":"uyencfi"},"content":"    /** CodeMirror6 Editor Configurations */"},{"lineNumber":88,"author":{"gitId":"uyencfi"},"content":"    this.callbacks \u003d {}"},{"lineNumber":89,"author":{"gitId":"uyencfi"},"content":"    this.otherCursors \u003d []"},{"lineNumber":90,"author":{"gitId":"uyencfi"},"content":"    this.addedStyleRules \u003d []"},{"lineNumber":91,"author":{"gitId":"uyencfi"},"content":"    this.ignoreChanges \u003d false"},{"lineNumber":92,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":93,"author":{"gitId":"uyencfi"},"content":"    /** Adapter Callback Functions */"},{"lineNumber":94,"author":{"gitId":"uyencfi"},"content":"    this.onBlur \u003d this.onBlur.bind(this)"},{"lineNumber":95,"author":{"gitId":"uyencfi"},"content":"    this.onFocus \u003d this.onFocus.bind(this)"},{"lineNumber":96,"author":{"gitId":"uyencfi"},"content":"    this.onCursorActivity \u003d this.onCursorActivity.bind(this)"},{"lineNumber":97,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":98,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":99,"author":{"gitId":"uyencfi"},"content":"    addCodemirror6listener(this)"},{"lineNumber":100,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":101,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":102,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":103,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":104,"author":{"gitId":"uyencfi"},"content":"   * @method detach - Clears an Instance of Editor Adapter"},{"lineNumber":105,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":106,"author":{"gitId":"uyencfi"},"content":"  CodeMirror6Adapter.prototype.detach \u003d function detach() {"},{"lineNumber":107,"author":{"gitId":"uyencfi"},"content":"    /*"},{"lineNumber":108,"author":{"gitId":"uyencfi"},"content":"  this.changeHandler.dispose();"},{"lineNumber":109,"author":{"gitId":"uyencfi"},"content":"  this.didBlurHandler.dispose();"},{"lineNumber":110,"author":{"gitId":"uyencfi"},"content":"  this.didFocusHandler.dispose();"},{"lineNumber":111,"author":{"gitId":"uyencfi"},"content":"  this.didChangeCursorPositionHandler.dispose();"},{"lineNumber":112,"author":{"gitId":"uyencfi"},"content":"  */"},{"lineNumber":113,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":114,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":115,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":116,"author":{"gitId":"uyencfi"},"content":"   * @method getCursor - Get current cursor position"},{"lineNumber":117,"author":{"gitId":"uyencfi"},"content":"   * @returns Firepad Cursor object"},{"lineNumber":118,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":119,"author":{"gitId":"uyencfi"},"content":"  CodeMirror6Adapter.prototype.getCursor \u003d function getCursor() {"},{"lineNumber":120,"author":{"gitId":"uyencfi"},"content":"    var selection \u003d this.cm.state.selection.main"},{"lineNumber":121,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":122,"author":{"gitId":"uyencfi"},"content":"    /** Fallback to last cursor change */"},{"lineNumber":123,"author":{"gitId":"uyencfi"},"content":"    if (typeof selection \u003d\u003d\u003d \"undefined\" || selection \u003d\u003d\u003d null) {"},{"lineNumber":124,"author":{"gitId":"uyencfi"},"content":"      selection \u003d this.lastCursorRange"},{"lineNumber":125,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":126,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":127,"author":{"gitId":"uyencfi"},"content":"    /** Obtain selection indexes */"},{"lineNumber":128,"author":{"gitId":"uyencfi"},"content":"    var start \u003d selection.from"},{"lineNumber":129,"author":{"gitId":"uyencfi"},"content":"    var end \u003d selection.to"},{"lineNumber":130,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":131,"author":{"gitId":"uyencfi"},"content":"    /** If Selection is Inversed */"},{"lineNumber":132,"author":{"gitId":"uyencfi"},"content":"    if (start \u003e end) {"},{"lineNumber":133,"author":{"gitId":"uyencfi"},"content":"      var _ref \u003d [end, start]"},{"lineNumber":134,"author":{"gitId":"uyencfi"},"content":"      start \u003d _ref[0]"},{"lineNumber":135,"author":{"gitId":"uyencfi"},"content":"      end \u003d _ref[1]"},{"lineNumber":136,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":137,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":138,"author":{"gitId":"uyencfi"},"content":"    /** Return cursor position */"},{"lineNumber":139,"author":{"gitId":"uyencfi"},"content":"    return new Cursor(start, end)"},{"lineNumber":140,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":141,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":142,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":143,"author":{"gitId":"uyencfi"},"content":"   * @method setCursor - Set Selection on CodeMirror6 Editor Instance"},{"lineNumber":144,"author":{"gitId":"uyencfi"},"content":"   * @param {Object} cursor - Cursor Position (start and end)"},{"lineNumber":145,"author":{"gitId":"uyencfi"},"content":"   * @param {Number} cursor.position - Starting Position of the Cursor"},{"lineNumber":146,"author":{"gitId":"uyencfi"},"content":"   * @param {Number} cursor.selectionEnd - Ending Position of the Cursor"},{"lineNumber":147,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":148,"author":{"gitId":"uyencfi"},"content":"  CodeMirror6Adapter.prototype.setCursor \u003d function setCursor(cursor) {"},{"lineNumber":149,"author":{"gitId":"uyencfi"},"content":"    var anchor \u003d cursor.position"},{"lineNumber":150,"author":{"gitId":"uyencfi"},"content":"    var head \u003d cursor.selectionEnd"},{"lineNumber":151,"author":{"gitId":"uyencfi"},"content":"    this.cm.dispatch({ selection: { anchor, head } })"},{"lineNumber":152,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":153,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":154,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":155,"author":{"gitId":"uyencfi"},"content":"   * @method setOtherCursor - Set Remote Selection on CodeMirror6 Editor"},{"lineNumber":156,"author":{"gitId":"uyencfi"},"content":"   * @param {Number} cursor.position - Starting Position of the Selection"},{"lineNumber":157,"author":{"gitId":"uyencfi"},"content":"   * @param {Number} cursor.selectionEnd - Ending Position of the Selection"},{"lineNumber":158,"author":{"gitId":"uyencfi"},"content":"   * @param {String} color - Hex Color codes for Styling"},{"lineNumber":159,"author":{"gitId":"uyencfi"},"content":"   * @param {any} clientID - ID number of the Remote Client"},{"lineNumber":160,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":161,"author":{"gitId":"uyencfi"},"content":"  CodeMirror6Adapter.prototype.setOtherCursor \u003d function setOtherCursor("},{"lineNumber":162,"author":{"gitId":"uyencfi"},"content":"    cursor,"},{"lineNumber":163,"author":{"gitId":"uyencfi"},"content":"    color,"},{"lineNumber":164,"author":{"gitId":"uyencfi"},"content":"    clientID"},{"lineNumber":165,"author":{"gitId":"uyencfi"},"content":"  ) {}"},{"lineNumber":166,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":167,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":168,"author":{"gitId":"uyencfi"},"content":"   * @method registerCallbacks - Assign callback functions to internal property"},{"lineNumber":169,"author":{"gitId":"uyencfi"},"content":"   * @param {function[]} callbacks - Set of callback functions"},{"lineNumber":170,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":171,"author":{"gitId":"uyencfi"},"content":"  CodeMirror6Adapter.prototype.registerCallbacks \u003d function registerCallbacks("},{"lineNumber":172,"author":{"gitId":"uyencfi"},"content":"    callbacks"},{"lineNumber":173,"author":{"gitId":"uyencfi"},"content":"  ) {"},{"lineNumber":174,"author":{"gitId":"uyencfi"},"content":"    this.callbacks \u003d Object.assign({}, this.callbacks, callbacks)"},{"lineNumber":175,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":176,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":177,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":178,"author":{"gitId":"uyencfi"},"content":"   * @method registerUndo"},{"lineNumber":179,"author":{"gitId":"uyencfi"},"content":"   * @param {function} callback - Callback Handler for Undo Event"},{"lineNumber":180,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":181,"author":{"gitId":"uyencfi"},"content":"  CodeMirror6Adapter.prototype.registerUndo \u003d function registerUndo(callback) {"},{"lineNumber":182,"author":{"gitId":"uyencfi"},"content":"    if (typeof callback \u003d\u003d\u003d \"function\") {"},{"lineNumber":183,"author":{"gitId":"uyencfi"},"content":"      this.callbacks.undo \u003d callback"},{"lineNumber":184,"author":{"gitId":"uyencfi"},"content":"    } else {"},{"lineNumber":185,"author":{"gitId":"uyencfi"},"content":"      throw new Error("},{"lineNumber":186,"author":{"gitId":"uyencfi"},"content":"        \"CodeMirror6Adapter: registerUndo method expects a \" +"},{"lineNumber":187,"author":{"gitId":"uyencfi"},"content":"          \"callback function in parameter\""},{"lineNumber":188,"author":{"gitId":"uyencfi"},"content":"      )"},{"lineNumber":189,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":190,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":191,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":192,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":193,"author":{"gitId":"uyencfi"},"content":"   * @method registerRedo"},{"lineNumber":194,"author":{"gitId":"uyencfi"},"content":"   * @param {function} callback - Callback Handler for Redo Event"},{"lineNumber":195,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":196,"author":{"gitId":"uyencfi"},"content":"  CodeMirror6Adapter.prototype.registerRedo \u003d function registerRedo(callback) {"},{"lineNumber":197,"author":{"gitId":"uyencfi"},"content":"    if (typeof callback \u003d\u003d\u003d \"function\") {"},{"lineNumber":198,"author":{"gitId":"uyencfi"},"content":"      this.callbacks.redo \u003d callback"},{"lineNumber":199,"author":{"gitId":"uyencfi"},"content":"    } else {"},{"lineNumber":200,"author":{"gitId":"uyencfi"},"content":"      throw new Error("},{"lineNumber":201,"author":{"gitId":"uyencfi"},"content":"        \"CodeMirror6Adapter: registerRedo method expects a \" +"},{"lineNumber":202,"author":{"gitId":"uyencfi"},"content":"          \"callback function in parameter\""},{"lineNumber":203,"author":{"gitId":"uyencfi"},"content":"      )"},{"lineNumber":204,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":205,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":206,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":207,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":208,"author":{"gitId":"uyencfi"},"content":"   * @method trigger - Event Handler"},{"lineNumber":209,"author":{"gitId":"uyencfi"},"content":"   * @param {string} event - Event name"},{"lineNumber":210,"author":{"gitId":"uyencfi"},"content":"   * @param  {...any} args - Callback arguments"},{"lineNumber":211,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":212,"author":{"gitId":"uyencfi"},"content":"  CodeMirror6Adapter.prototype.trigger \u003d function trigger(event) {"},{"lineNumber":213,"author":{"gitId":"uyencfi"},"content":"    if (!this.callbacks.hasOwnProperty(event)) {"},{"lineNumber":214,"author":{"gitId":"uyencfi"},"content":"      return"},{"lineNumber":215,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":216,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":217,"author":{"gitId":"uyencfi"},"content":"    var action \u003d this.callbacks[event]"},{"lineNumber":218,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":219,"author":{"gitId":"uyencfi"},"content":"    if (!typeof action \u003d\u003d\u003d \"function\") {"},{"lineNumber":220,"author":{"gitId":"uyencfi"},"content":"      return"},{"lineNumber":221,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":222,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":223,"author":{"gitId":"uyencfi"},"content":"    var args \u003d []"},{"lineNumber":224,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":225,"author":{"gitId":"uyencfi"},"content":"    if (arguments.length \u003e 1) {"},{"lineNumber":226,"author":{"gitId":"uyencfi"},"content":"      for (var i \u003d 1; i \u003c arguments.length; i++) {"},{"lineNumber":227,"author":{"gitId":"uyencfi"},"content":"        args.push(arguments[i])"},{"lineNumber":228,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":229,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":230,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":231,"author":{"gitId":"uyencfi"},"content":"    action.apply(null, args)"},{"lineNumber":232,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":233,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":234,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":235,"author":{"gitId":"uyencfi"},"content":"   * @method onBlur - Blur event handler"},{"lineNumber":236,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":237,"author":{"gitId":"uyencfi"},"content":"  CodeMirror6Adapter.prototype.onBlur \u003d function onBlur() {"},{"lineNumber":238,"author":{"gitId":"uyencfi"},"content":"    if (this.monaco.getSelection().isEmpty()) {"},{"lineNumber":239,"author":{"gitId":"uyencfi"},"content":"      this.trigger(\"blur\")"},{"lineNumber":240,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":241,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":242,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":243,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":244,"author":{"gitId":"uyencfi"},"content":"   * @method onFocus - Focus event handler"},{"lineNumber":245,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":246,"author":{"gitId":"uyencfi"},"content":"  CodeMirror6Adapter.prototype.onFocus \u003d function onFocus() {"},{"lineNumber":247,"author":{"gitId":"uyencfi"},"content":"    this.trigger(\"focus\")"},{"lineNumber":248,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":249,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":250,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":251,"author":{"gitId":"uyencfi"},"content":"   * @method onCursorActivity - CursorActivity event handler"},{"lineNumber":252,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":253,"author":{"gitId":"uyencfi"},"content":"  CodeMirror6Adapter.prototype.onCursorActivity \u003d function onCursorActivity() {"},{"lineNumber":254,"author":{"gitId":"uyencfi"},"content":"    var _this \u003d this"},{"lineNumber":255,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":256,"author":{"gitId":"uyencfi"},"content":"    setTimeout(function () {"},{"lineNumber":257,"author":{"gitId":"uyencfi"},"content":"      return _this.trigger(\"cursorActivity\")"},{"lineNumber":258,"author":{"gitId":"uyencfi"},"content":"    }, 1)"},{"lineNumber":259,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":260,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":261,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":262,"author":{"gitId":"uyencfi"},"content":"   * @method applyOperation"},{"lineNumber":263,"author":{"gitId":"uyencfi"},"content":"   * @param {Operation} operation - OT.js Operation Object"},{"lineNumber":264,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":265,"author":{"gitId":"uyencfi"},"content":"  CodeMirror6Adapter.prototype.applyOperation \u003d function applyOperation("},{"lineNumber":266,"author":{"gitId":"uyencfi"},"content":"    operation"},{"lineNumber":267,"author":{"gitId":"uyencfi"},"content":"  ) {"},{"lineNumber":268,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":269,"author":{"gitId":"uyencfi"},"content":"    if (!operation.isNoop()) {"},{"lineNumber":270,"author":{"gitId":"uyencfi"},"content":"      this.ignoreChanges \u003d true"},{"lineNumber":271,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":272,"author":{"gitId":"uyencfi"},"content":"    /** Get Operations List */"},{"lineNumber":273,"author":{"gitId":"uyencfi"},"content":"    var opsList \u003d operation.ops"},{"lineNumber":274,"author":{"gitId":"uyencfi"},"content":"    var index \u003d 0"},{"lineNumber":275,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":276,"author":{"gitId":"uyencfi"},"content":"    var _this \u003d this"},{"lineNumber":277,"author":{"gitId":"uyencfi"},"content":"    opsList.forEach(function (op) {"},{"lineNumber":278,"author":{"gitId":"uyencfi"},"content":"      /** Retain Operation */"},{"lineNumber":279,"author":{"gitId":"uyencfi"},"content":"      if (op.isRetain()) {"},{"lineNumber":280,"author":{"gitId":"uyencfi"},"content":"        index +\u003d op.chars"},{"lineNumber":281,"author":{"gitId":"uyencfi"},"content":"      } else if (op.isInsert()) {"},{"lineNumber":282,"author":{"gitId":"uyencfi"},"content":"        /** Insert Operation */"},{"lineNumber":283,"author":{"gitId":"uyencfi"},"content":"        _this.cm.dispatch({"},{"lineNumber":284,"author":{"gitId":"uyencfi"},"content":"          annotations: [ Transaction.addToHistory.of(false), new Annotation(\"firepad\", true)],"},{"lineNumber":285,"author":{"gitId":"uyencfi"},"content":"          changes: { from: index, to: index, insert: op.text },"},{"lineNumber":286,"author":{"gitId":"uyencfi"},"content":"        })"},{"lineNumber":287,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":288,"author":{"gitId":"uyencfi"},"content":"        index +\u003d op.text.length"},{"lineNumber":289,"author":{"gitId":"uyencfi"},"content":"      } else if (op.isDelete()) {"},{"lineNumber":290,"author":{"gitId":"uyencfi"},"content":"        /** Delete Operation */"},{"lineNumber":291,"author":{"gitId":"uyencfi"},"content":"        _this.cm.dispatch({"},{"lineNumber":292,"author":{"gitId":"uyencfi"},"content":"          annotations: [Transaction.addToHistory.of(false),  new Annotation(\"firepad\", true)],"},{"lineNumber":293,"author":{"gitId":"uyencfi"},"content":"          changes: { from: index, to: index + op.chars, insert: \"\" },"},{"lineNumber":294,"author":{"gitId":"uyencfi"},"content":"        })"},{"lineNumber":295,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":296,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":297,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":298,"author":{"gitId":"uyencfi"},"content":"    /** Update Editor Content and Reset Config */"},{"lineNumber":299,"author":{"gitId":"uyencfi"},"content":"    this.lastDocLines \u003d this.cm.state.doc.text"},{"lineNumber":300,"author":{"gitId":"uyencfi"},"content":"    this.ignoreChanges \u003d false"},{"lineNumber":301,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":302,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":303,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":304,"author":{"gitId":"uyencfi"},"content":"  /**"},{"lineNumber":305,"author":{"gitId":"uyencfi"},"content":"   * @method invertOperation"},{"lineNumber":306,"author":{"gitId":"uyencfi"},"content":"   * @param {Operation} operation - OT.js Operation Object"},{"lineNumber":307,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":308,"author":{"gitId":"uyencfi"},"content":"  CodeMirror6Adapter.prototype.invertOperation \u003d function invertOperation("},{"lineNumber":309,"author":{"gitId":"uyencfi"},"content":"    operation"},{"lineNumber":310,"author":{"gitId":"uyencfi"},"content":"  ) {"},{"lineNumber":311,"author":{"gitId":"uyencfi"},"content":"    operation.invert(this.getValue())"},{"lineNumber":312,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":313,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":314,"author":{"gitId":"uyencfi"},"content":"  return CodeMirror6Adapter"},{"lineNumber":315,"author":{"gitId":"uyencfi"},"content":"})() /** Export Module */"},{"lineNumber":316,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":317,"author":{"gitId":"uyencfi"},"content":"export { CodeMirror6Adapter }"}],"authorContributionMap":{"uyencfi":317}},{"path":"frontend/src/components/collaboration/lib/constants.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"export const ATTR \u003d {"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"  BOLD: \"b\","},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"  ITALIC: \"i\","},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"  UNDERLINE: \"u\","},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"  STRIKE: \"s\","},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"  FONT: \"f\","},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"  FONT_SIZE: \"fs\","},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"  COLOR: \"c\","},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"  BACKGROUND_COLOR: \"bc\","},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"  ENTITY_SENTINEL: \"ent\","},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"  // Line Attributes"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"  LINE_SENTINEL: \"l\","},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"  LINE_INDENT: \"li\","},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"  LINE_ALIGN: \"la\","},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"  LIST_TYPE: \"lt\","},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"export const sentinelConstants \u003d {"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"  // A special character we insert at the beginning of lines so we can attach attributes to it to represent"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"  // \"line attributes.\"  E000 is from the unicode \"private use\" range."},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"  LINE_SENTINEL_CHARACTER: \"\\uE000\","},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"  // A special character used to represent any \"entity\" inserted into the document (e.g. an image)."},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"  ENTITY_SENTINEL_CHARACTER: \"\\uE001\","},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"}"}],"authorContributionMap":{"uyencfi":26}},{"path":"frontend/src/components/collaboration/lib/cursor.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"export const Cursor \u003d (function () {"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"  // A cursor has a `position` and a `selectionEnd`. Both are zero-based indexes"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"  // into the document. When nothing is selected, `selectionEnd` is equal to"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"  // `position`. When there is a selection, `position` is always the side of the"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"  // selection that would move if you pressed an arrow key."},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"  function Cursor(position, selectionEnd) {"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"    this.position \u003d position"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"    this.selectionEnd \u003d selectionEnd"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"  Cursor.fromJSON \u003d function (obj) {"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"    return new Cursor(obj.position, obj.selectionEnd)"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"  Cursor.prototype.equals \u003d function (other) {"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"    return ("},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"      this.position \u003d\u003d\u003d other.position \u0026\u0026"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"      this.selectionEnd \u003d\u003d\u003d other.selectionEnd"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"  // Return the more current cursor information."},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"  Cursor.prototype.compose \u003d function (other) {"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"    return other"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"  // Update the cursor with respect to an operation."},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"  Cursor.prototype.transform \u003d function (other) {"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"    function transformIndex(index) {"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"      var newIndex \u003d index"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"      var ops \u003d other.ops"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"      for (var i \u003d 0, l \u003d other.ops.length; i \u003c l; i++) {"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"        if (ops[i].isRetain()) {"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"          index -\u003d ops[i].chars"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"        } else if (ops[i].isInsert()) {"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"          newIndex +\u003d ops[i].text.length"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"        } else {"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"          newIndex -\u003d Math.min(index, ops[i].chars)"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"          index -\u003d ops[i].chars"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"        if (index \u003c 0) {"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"          break"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"      return newIndex"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"    var newPosition \u003d transformIndex(this.position)"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"    if (this.position \u003d\u003d\u003d this.selectionEnd) {"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"      return new Cursor(newPosition, newPosition)"},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"    return new Cursor(newPosition, transformIndex(this.selectionEnd))"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"  return Cursor"},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"})()"}],"authorContributionMap":{"uyencfi":57}},{"path":"frontend/src/components/collaboration/lib/document.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"let fDocument \u003d null"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"export const getDocument \u003d () \u003d\u003e fDocument || window.document"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"export const setDocument \u003d (document) \u003d\u003e (fDocument \u003d document)"}],"authorContributionMap":{"uyencfi":5}},{"path":"frontend/src/components/collaboration/lib/editor-client.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import { utils } from \"./utils.js\""},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"import { Cursor } from \"./cursor.js\""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"import { Client } from \"./client.js\""},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"import { UndoManager } from \"./undo-manager.js\""},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"import { WrappedOperation } from \"./wrapped-operation.js\""},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"export const EditorClient \u003d (function () {"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"  function SelfMeta(cursorBefore, cursorAfter) {"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"    this.cursorBefore \u003d cursorBefore"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"    this.cursorAfter \u003d cursorAfter"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"  SelfMeta.prototype.invert \u003d function () {"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"    return new SelfMeta(this.cursorAfter, this.cursorBefore)"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"  SelfMeta.prototype.compose \u003d function (other) {"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"    return new SelfMeta(this.cursorBefore, other.cursorAfter)"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"  SelfMeta.prototype.transform \u003d function (operation) {"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"    return new SelfMeta("},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"      this.cursorBefore ? this.cursorBefore.transform(operation) : null,"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"      this.cursorAfter ? this.cursorAfter.transform(operation) : null"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"  function OtherClient(id, editorAdapter) {"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"    this.id \u003d id"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"    this.editorAdapter \u003d editorAdapter"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"  OtherClient.prototype.setColor \u003d function (color) {"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"    this.color \u003d color"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"  OtherClient.prototype.updateCursor \u003d function (cursor) {"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"    this.removeCursor()"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"    this.cursor \u003d cursor"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"    this.mark \u003d this.editorAdapter.setOtherCursor(cursor, this.color, this.id)"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":"  OtherClient.prototype.removeCursor \u003d function () {"},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"    if (this.mark) {"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"      this.mark.clear()"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"  function EditorClient(serverAdapter, editorAdapter) {"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"    Client.call(this)"},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"    this.serverAdapter \u003d serverAdapter"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"    this.editorAdapter \u003d editorAdapter"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"    this.undoManager \u003d new UndoManager()"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"    this.clients \u003d {}"},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":"    var self \u003d this"},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"    this.editorAdapter.registerCallbacks({"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"      change: function (operation, inverse) {"},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"        self.onChange(operation, inverse)"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":"      cursorActivity: function () {"},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"        self.onCursorActivity()"},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":"      blur: function () {"},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":"        self.onBlur()"},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":"      focus: function () {"},{"lineNumber":71,"author":{"gitId":"uyencfi"},"content":"        self.onFocus()"},{"lineNumber":72,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":73,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":74,"author":{"gitId":"uyencfi"},"content":"    this.editorAdapter.registerUndo(function () {"},{"lineNumber":75,"author":{"gitId":"uyencfi"},"content":"      self.undo()"},{"lineNumber":76,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":77,"author":{"gitId":"uyencfi"},"content":"    this.editorAdapter.registerRedo(function () {"},{"lineNumber":78,"author":{"gitId":"uyencfi"},"content":"      self.redo()"},{"lineNumber":79,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":80,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":81,"author":{"gitId":"uyencfi"},"content":"    this.serverAdapter.registerCallbacks({"},{"lineNumber":82,"author":{"gitId":"uyencfi"},"content":"      ack: function () {"},{"lineNumber":83,"author":{"gitId":"uyencfi"},"content":"        self.serverAck()"},{"lineNumber":84,"author":{"gitId":"uyencfi"},"content":"        if (self.focused \u0026\u0026 self.state instanceof Client.Synchronized) {"},{"lineNumber":85,"author":{"gitId":"uyencfi"},"content":"          self.updateCursor()"},{"lineNumber":86,"author":{"gitId":"uyencfi"},"content":"          self.sendCursor(self.cursor)"},{"lineNumber":87,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":88,"author":{"gitId":"uyencfi"},"content":"        self.emitStatus()"},{"lineNumber":89,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":90,"author":{"gitId":"uyencfi"},"content":"      retry: function () {"},{"lineNumber":91,"author":{"gitId":"uyencfi"},"content":"        self.serverRetry()"},{"lineNumber":92,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":93,"author":{"gitId":"uyencfi"},"content":"      operation: function (operation) {"},{"lineNumber":94,"author":{"gitId":"uyencfi"},"content":"        self.applyServer(operation)"},{"lineNumber":95,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":96,"author":{"gitId":"uyencfi"},"content":"      cursor: function (clientId, cursor, color) {"},{"lineNumber":97,"author":{"gitId":"uyencfi"},"content":"        if ("},{"lineNumber":98,"author":{"gitId":"uyencfi"},"content":"          self.serverAdapter.userId_ \u003d\u003d\u003d clientId ||"},{"lineNumber":99,"author":{"gitId":"uyencfi"},"content":"          !(self.state instanceof Client.Synchronized)"},{"lineNumber":100,"author":{"gitId":"uyencfi"},"content":"        ) {"},{"lineNumber":101,"author":{"gitId":"uyencfi"},"content":"          return"},{"lineNumber":102,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":103,"author":{"gitId":"uyencfi"},"content":"        var client \u003d self.getClientObject(clientId)"},{"lineNumber":104,"author":{"gitId":"uyencfi"},"content":"        if (cursor) {"},{"lineNumber":105,"author":{"gitId":"uyencfi"},"content":"          if (color) client.setColor(color)"},{"lineNumber":106,"author":{"gitId":"uyencfi"},"content":"          client.updateCursor(Cursor.fromJSON(cursor))"},{"lineNumber":107,"author":{"gitId":"uyencfi"},"content":"        } else {"},{"lineNumber":108,"author":{"gitId":"uyencfi"},"content":"          client.removeCursor()"},{"lineNumber":109,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":110,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":111,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":112,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":113,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":114,"author":{"gitId":"uyencfi"},"content":"  inherit(EditorClient, Client)"},{"lineNumber":115,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":116,"author":{"gitId":"uyencfi"},"content":"  EditorClient.prototype.getClientObject \u003d function (clientId) {"},{"lineNumber":117,"author":{"gitId":"uyencfi"},"content":"    var client \u003d this.clients[clientId]"},{"lineNumber":118,"author":{"gitId":"uyencfi"},"content":"    if (client) {"},{"lineNumber":119,"author":{"gitId":"uyencfi"},"content":"      return client"},{"lineNumber":120,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":121,"author":{"gitId":"uyencfi"},"content":"    return (this.clients[clientId] \u003d new OtherClient("},{"lineNumber":122,"author":{"gitId":"uyencfi"},"content":"      clientId,"},{"lineNumber":123,"author":{"gitId":"uyencfi"},"content":"      this.editorAdapter"},{"lineNumber":124,"author":{"gitId":"uyencfi"},"content":"    ))"},{"lineNumber":125,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":126,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":127,"author":{"gitId":"uyencfi"},"content":"  EditorClient.prototype.applyUnredo \u003d function (operation) {"},{"lineNumber":128,"author":{"gitId":"uyencfi"},"content":"    this.undoManager.add(this.editorAdapter.invertOperation(operation))"},{"lineNumber":129,"author":{"gitId":"uyencfi"},"content":"    this.editorAdapter.applyOperation(operation.wrapped)"},{"lineNumber":130,"author":{"gitId":"uyencfi"},"content":"    this.cursor \u003d operation.meta.cursorAfter"},{"lineNumber":131,"author":{"gitId":"uyencfi"},"content":"    if (this.cursor) this.editorAdapter.setCursor(this.cursor)"},{"lineNumber":132,"author":{"gitId":"uyencfi"},"content":"    this.applyClient(operation.wrapped)"},{"lineNumber":133,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":134,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":135,"author":{"gitId":"uyencfi"},"content":"  EditorClient.prototype.undo \u003d function () {"},{"lineNumber":136,"author":{"gitId":"uyencfi"},"content":"    var self \u003d this"},{"lineNumber":137,"author":{"gitId":"uyencfi"},"content":"    if (!this.undoManager.canUndo()) {"},{"lineNumber":138,"author":{"gitId":"uyencfi"},"content":"      return"},{"lineNumber":139,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":140,"author":{"gitId":"uyencfi"},"content":"    this.undoManager.performUndo(function (o) {"},{"lineNumber":141,"author":{"gitId":"uyencfi"},"content":"      self.applyUnredo(o)"},{"lineNumber":142,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":143,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":144,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":145,"author":{"gitId":"uyencfi"},"content":"  EditorClient.prototype.redo \u003d function () {"},{"lineNumber":146,"author":{"gitId":"uyencfi"},"content":"    var self \u003d this"},{"lineNumber":147,"author":{"gitId":"uyencfi"},"content":"    if (!this.undoManager.canRedo()) {"},{"lineNumber":148,"author":{"gitId":"uyencfi"},"content":"      return"},{"lineNumber":149,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":150,"author":{"gitId":"uyencfi"},"content":"    this.undoManager.performRedo(function (o) {"},{"lineNumber":151,"author":{"gitId":"uyencfi"},"content":"      self.applyUnredo(o)"},{"lineNumber":152,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":153,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":154,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":155,"author":{"gitId":"uyencfi"},"content":"  EditorClient.prototype.onChange \u003d function (textOperation, inverse) {"},{"lineNumber":156,"author":{"gitId":"uyencfi"},"content":"    var cursorBefore \u003d this.cursor"},{"lineNumber":157,"author":{"gitId":"uyencfi"},"content":"    this.updateCursor()"},{"lineNumber":158,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":159,"author":{"gitId":"uyencfi"},"content":"    var compose \u003d"},{"lineNumber":160,"author":{"gitId":"uyencfi"},"content":"      this.undoManager.undoStack.length \u003e 0 \u0026\u0026"},{"lineNumber":161,"author":{"gitId":"uyencfi"},"content":"      inverse.shouldBeComposedWithInverted("},{"lineNumber":162,"author":{"gitId":"uyencfi"},"content":"        last(this.undoManager.undoStack).wrapped"},{"lineNumber":163,"author":{"gitId":"uyencfi"},"content":"      )"},{"lineNumber":164,"author":{"gitId":"uyencfi"},"content":"    var inverseMeta \u003d new SelfMeta(this.cursor, cursorBefore)"},{"lineNumber":165,"author":{"gitId":"uyencfi"},"content":"    this.undoManager.add(new WrappedOperation(inverse, inverseMeta), compose)"},{"lineNumber":166,"author":{"gitId":"uyencfi"},"content":"    this.applyClient(textOperation)"},{"lineNumber":167,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":168,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":169,"author":{"gitId":"uyencfi"},"content":"  EditorClient.prototype.updateCursor \u003d function () {"},{"lineNumber":170,"author":{"gitId":"uyencfi"},"content":"    this.cursor \u003d this.editorAdapter.getCursor()"},{"lineNumber":171,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":172,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":173,"author":{"gitId":"uyencfi"},"content":"  EditorClient.prototype.onCursorActivity \u003d function () {"},{"lineNumber":174,"author":{"gitId":"uyencfi"},"content":"    var oldCursor \u003d this.cursor"},{"lineNumber":175,"author":{"gitId":"uyencfi"},"content":"    this.updateCursor()"},{"lineNumber":176,"author":{"gitId":"uyencfi"},"content":"    if (!this.focused || (oldCursor \u0026\u0026 this.cursor.equals(oldCursor))) {"},{"lineNumber":177,"author":{"gitId":"uyencfi"},"content":"      return"},{"lineNumber":178,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":179,"author":{"gitId":"uyencfi"},"content":"    this.sendCursor(this.cursor)"},{"lineNumber":180,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":181,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":182,"author":{"gitId":"uyencfi"},"content":"  EditorClient.prototype.onBlur \u003d function () {"},{"lineNumber":183,"author":{"gitId":"uyencfi"},"content":"    this.cursor \u003d null"},{"lineNumber":184,"author":{"gitId":"uyencfi"},"content":"    this.sendCursor(null)"},{"lineNumber":185,"author":{"gitId":"uyencfi"},"content":"    this.focused \u003d false"},{"lineNumber":186,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":187,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":188,"author":{"gitId":"uyencfi"},"content":"  EditorClient.prototype.onFocus \u003d function () {"},{"lineNumber":189,"author":{"gitId":"uyencfi"},"content":"    this.focused \u003d true"},{"lineNumber":190,"author":{"gitId":"uyencfi"},"content":"    this.onCursorActivity()"},{"lineNumber":191,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":192,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":193,"author":{"gitId":"uyencfi"},"content":"  EditorClient.prototype.sendCursor \u003d function (cursor) {"},{"lineNumber":194,"author":{"gitId":"uyencfi"},"content":"    if (this.state instanceof Client.AwaitingWithBuffer) {"},{"lineNumber":195,"author":{"gitId":"uyencfi"},"content":"      return"},{"lineNumber":196,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":197,"author":{"gitId":"uyencfi"},"content":"    this.serverAdapter.sendCursor(cursor)"},{"lineNumber":198,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":199,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":200,"author":{"gitId":"uyencfi"},"content":"  EditorClient.prototype.sendOperation \u003d function (operation) {"},{"lineNumber":201,"author":{"gitId":"uyencfi"},"content":"    this.serverAdapter.sendOperation(operation)"},{"lineNumber":202,"author":{"gitId":"uyencfi"},"content":"    this.emitStatus()"},{"lineNumber":203,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":204,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":205,"author":{"gitId":"uyencfi"},"content":"  EditorClient.prototype.applyOperation \u003d function (operation) {"},{"lineNumber":206,"author":{"gitId":"uyencfi"},"content":"    this.editorAdapter.applyOperation(operation)"},{"lineNumber":207,"author":{"gitId":"uyencfi"},"content":"    this.updateCursor()"},{"lineNumber":208,"author":{"gitId":"uyencfi"},"content":"    this.undoManager.transform(new WrappedOperation(operation, null))"},{"lineNumber":209,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":210,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":211,"author":{"gitId":"uyencfi"},"content":"  EditorClient.prototype.emitStatus \u003d function () {"},{"lineNumber":212,"author":{"gitId":"uyencfi"},"content":"    var self \u003d this"},{"lineNumber":213,"author":{"gitId":"uyencfi"},"content":"    setTimeout(function () {"},{"lineNumber":214,"author":{"gitId":"uyencfi"},"content":"      self.trigger(\"synced\", self.state instanceof Client.Synchronized)"},{"lineNumber":215,"author":{"gitId":"uyencfi"},"content":"    }, 0)"},{"lineNumber":216,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":217,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":218,"author":{"gitId":"uyencfi"},"content":"  // Set Const.prototype.__proto__ to Super.prototype"},{"lineNumber":219,"author":{"gitId":"uyencfi"},"content":"  function inherit(Const, Super) {"},{"lineNumber":220,"author":{"gitId":"uyencfi"},"content":"    function F() {}"},{"lineNumber":221,"author":{"gitId":"uyencfi"},"content":"    F.prototype \u003d Super.prototype"},{"lineNumber":222,"author":{"gitId":"uyencfi"},"content":"    Const.prototype \u003d new F()"},{"lineNumber":223,"author":{"gitId":"uyencfi"},"content":"    Const.prototype.constructor \u003d Const"},{"lineNumber":224,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":225,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":226,"author":{"gitId":"uyencfi"},"content":"  function last(arr) {"},{"lineNumber":227,"author":{"gitId":"uyencfi"},"content":"    return arr[arr.length - 1]"},{"lineNumber":228,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":229,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":230,"author":{"gitId":"uyencfi"},"content":"  return EditorClient"},{"lineNumber":231,"author":{"gitId":"uyencfi"},"content":"})()"},{"lineNumber":232,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":233,"author":{"gitId":"uyencfi"},"content":"utils.makeEventEmitter(EditorClient, [\"synced\"])"}],"authorContributionMap":{"uyencfi":233}},{"path":"frontend/src/components/collaboration/lib/firebase-adapter.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import { TextOperation } from \"./text-operation.js\""},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"import { utils } from \"./utils.js\""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"import firebase from \"firebase/compat/app\""},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"import \"firebase/compat/database\""},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"export const FirebaseAdapter \u003d (function (global) {"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"  /*"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"  if (typeof firebase \u003d\u003d\u003d \"undefined\" \u0026\u0026 typeof require \u003d\u003d\u003d \u0027function\u0027 \u0026\u0026 typeof Firebase !\u003d\u003d \u0027function\u0027) {"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"\t  firebase \u003d require(\u0027firebase/app\u0027);"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"\t  require(\u0027firebase/database\u0027);"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"  }*/"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"  // Save a checkpoint every 100 edits."},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"  var CHECKPOINT_FREQUENCY \u003d 100"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"  function FirebaseAdapter(ref, userId, userColor) {"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"    this.ref_ \u003d ref"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"    this.ready_ \u003d false"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"    this.firebaseCallbacks_ \u003d []"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"    this.zombie_ \u003d false"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"    // We store the current document state as a TextOperation so we can write checkpoints to Firebase occasionally."},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"    // TODO: Consider more efficient ways to do this. (composing text operations is ~linear in the length of the document)."},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"    this.document_ \u003d new TextOperation()"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"    // The next expected revision."},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"    this.revision_ \u003d 0"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"    // This is used for two purposes:"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"    // 1) On initialization, we fill this with the latest checkpoint and any subsequent operations and then"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"    //      process them all together."},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"    // 2) If we ever receive revisions out-of-order (e.g. rev 5 before rev 4), we queue them here until it\u0027s time"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"    //    for them to be handled. [this should never happen with well-behaved clients; but if it /does/ happen we want"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"    //    to handle it gracefully.]"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"    this.pendingReceivedRevisions_ \u003d {}"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"    var self \u003d this"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"    if (userId) {"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"      this.setUserId(userId)"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"      this.setColor(userColor)"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":"      var connectedRef \u003d ref.root.child(\".info/connected\")"},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"      this.firebaseOn_("},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"        connectedRef,"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"        \"value\","},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"        function (snapshot) {"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"          if (snapshot.val() \u003d\u003d\u003d true) {"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"            self.initializeUserData_()"},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"          }"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"        },"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"        this"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":"      )"},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"      // Once we\u0027re initialized, start tracking users\u0027 cursors."},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":"      this.on(\"ready\", function () {"},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"        self.monitorCursors_()"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"    } else {"},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"      this.userId_ \u003d ref.push().key"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"    // Avoid triggering any events until our callers have had a chance to attach their listeners."},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"    setTimeout(function () {"},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":"      self.monitorHistory_()"},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":"    }, 0)"},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":"  utils.makeEventEmitter(FirebaseAdapter, ["},{"lineNumber":71,"author":{"gitId":"uyencfi"},"content":"    \"ready\","},{"lineNumber":72,"author":{"gitId":"uyencfi"},"content":"    \"cursor\","},{"lineNumber":73,"author":{"gitId":"uyencfi"},"content":"    \"operation\","},{"lineNumber":74,"author":{"gitId":"uyencfi"},"content":"    \"ack\","},{"lineNumber":75,"author":{"gitId":"uyencfi"},"content":"    \"retry\","},{"lineNumber":76,"author":{"gitId":"uyencfi"},"content":"  ])"},{"lineNumber":77,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":78,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.dispose \u003d function () {"},{"lineNumber":79,"author":{"gitId":"uyencfi"},"content":"    var self \u003d this"},{"lineNumber":80,"author":{"gitId":"uyencfi"},"content":"    this.removeFirebaseCallbacks_()"},{"lineNumber":81,"author":{"gitId":"uyencfi"},"content":"    this.handleInitialRevisions_ \u003d () \u003d\u003e {}"},{"lineNumber":82,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":83,"author":{"gitId":"uyencfi"},"content":"    if (!this.ready_) {"},{"lineNumber":84,"author":{"gitId":"uyencfi"},"content":"      this.on(\"ready\", function () {"},{"lineNumber":85,"author":{"gitId":"uyencfi"},"content":"        self.dispose()"},{"lineNumber":86,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":87,"author":{"gitId":"uyencfi"},"content":"      return"},{"lineNumber":88,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":89,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":90,"author":{"gitId":"uyencfi"},"content":"    if (this.userRef_) {"},{"lineNumber":91,"author":{"gitId":"uyencfi"},"content":"      this.userRef_.child(\"cursor\").remove()"},{"lineNumber":92,"author":{"gitId":"uyencfi"},"content":"      this.userRef_.child(\"color\").remove()"},{"lineNumber":93,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":94,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":95,"author":{"gitId":"uyencfi"},"content":"    this.ref_ \u003d null"},{"lineNumber":96,"author":{"gitId":"uyencfi"},"content":"    this.document_ \u003d null"},{"lineNumber":97,"author":{"gitId":"uyencfi"},"content":"    this.zombie_ \u003d true"},{"lineNumber":98,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":99,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":100,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.setUserId \u003d function (userId) {"},{"lineNumber":101,"author":{"gitId":"uyencfi"},"content":"    if (this.userRef_) {"},{"lineNumber":102,"author":{"gitId":"uyencfi"},"content":"      // Clean up existing data.  Avoid nuking another user\u0027s data"},{"lineNumber":103,"author":{"gitId":"uyencfi"},"content":"      // (if a future user takes our old name)."},{"lineNumber":104,"author":{"gitId":"uyencfi"},"content":"      this.userRef_.child(\"cursor\").remove()"},{"lineNumber":105,"author":{"gitId":"uyencfi"},"content":"      this.userRef_.child(\"cursor\").onDisconnect().cancel()"},{"lineNumber":106,"author":{"gitId":"uyencfi"},"content":"      this.userRef_.child(\"color\").remove()"},{"lineNumber":107,"author":{"gitId":"uyencfi"},"content":"      this.userRef_.child(\"color\").onDisconnect().cancel()"},{"lineNumber":108,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":109,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":110,"author":{"gitId":"uyencfi"},"content":"    this.userId_ \u003d userId"},{"lineNumber":111,"author":{"gitId":"uyencfi"},"content":"    this.userRef_ \u003d this.ref_.child(\"users\").child(userId)"},{"lineNumber":112,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":113,"author":{"gitId":"uyencfi"},"content":"    this.initializeUserData_()"},{"lineNumber":114,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":115,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":116,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.isHistoryEmpty \u003d function () {"},{"lineNumber":117,"author":{"gitId":"uyencfi"},"content":"    assert(this.ready_, \"Not ready yet.\")"},{"lineNumber":118,"author":{"gitId":"uyencfi"},"content":"    return this.revision_ \u003d\u003d\u003d 0"},{"lineNumber":119,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":120,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":121,"author":{"gitId":"uyencfi"},"content":"  /*"},{"lineNumber":122,"author":{"gitId":"uyencfi"},"content":"   * Send operation, retrying on connection failure. Takes an optional callback with signature:"},{"lineNumber":123,"author":{"gitId":"uyencfi"},"content":"   * function(error, committed)."},{"lineNumber":124,"author":{"gitId":"uyencfi"},"content":"   * An exception will be thrown on transaction failure, which should only happen on"},{"lineNumber":125,"author":{"gitId":"uyencfi"},"content":"   * catastrophic failure like a security rule violation."},{"lineNumber":126,"author":{"gitId":"uyencfi"},"content":"   */"},{"lineNumber":127,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.sendOperation \u003d function (operation, callback) {"},{"lineNumber":128,"author":{"gitId":"uyencfi"},"content":"    var self \u003d this"},{"lineNumber":129,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":130,"author":{"gitId":"uyencfi"},"content":"    // If we\u0027re not ready yet, do nothing right now, and trigger a retry when we\u0027re ready."},{"lineNumber":131,"author":{"gitId":"uyencfi"},"content":"    if (!this.ready_) {"},{"lineNumber":132,"author":{"gitId":"uyencfi"},"content":"      this.on(\"ready\", function () {"},{"lineNumber":133,"author":{"gitId":"uyencfi"},"content":"        self.trigger(\"retry\")"},{"lineNumber":134,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":135,"author":{"gitId":"uyencfi"},"content":"      return"},{"lineNumber":136,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":137,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":138,"author":{"gitId":"uyencfi"},"content":"    // Sanity check that this operation is valid."},{"lineNumber":139,"author":{"gitId":"uyencfi"},"content":"    assert("},{"lineNumber":140,"author":{"gitId":"uyencfi"},"content":"      this.document_.targetLength \u003d\u003d\u003d operation.baseLength,"},{"lineNumber":141,"author":{"gitId":"uyencfi"},"content":"      \"sendOperation() called with invalid operation.\""},{"lineNumber":142,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":143,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":144,"author":{"gitId":"uyencfi"},"content":"    // Convert revision into an id that will sort properly lexicographically."},{"lineNumber":145,"author":{"gitId":"uyencfi"},"content":"    var revisionId \u003d revisionToId(this.revision_)"},{"lineNumber":146,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":147,"author":{"gitId":"uyencfi"},"content":"    function doTransaction(revisionId, revisionData) {"},{"lineNumber":148,"author":{"gitId":"uyencfi"},"content":"      self.ref_"},{"lineNumber":149,"author":{"gitId":"uyencfi"},"content":"        .child(\"history\")"},{"lineNumber":150,"author":{"gitId":"uyencfi"},"content":"        .child(revisionId)"},{"lineNumber":151,"author":{"gitId":"uyencfi"},"content":"        .transaction("},{"lineNumber":152,"author":{"gitId":"uyencfi"},"content":"          function (current) {"},{"lineNumber":153,"author":{"gitId":"uyencfi"},"content":"            if (current \u003d\u003d\u003d null) {"},{"lineNumber":154,"author":{"gitId":"uyencfi"},"content":"              return revisionData"},{"lineNumber":155,"author":{"gitId":"uyencfi"},"content":"            }"},{"lineNumber":156,"author":{"gitId":"uyencfi"},"content":"          },"},{"lineNumber":157,"author":{"gitId":"uyencfi"},"content":"          function (error, committed, snapshot) {"},{"lineNumber":158,"author":{"gitId":"uyencfi"},"content":"            if (error) {"},{"lineNumber":159,"author":{"gitId":"uyencfi"},"content":"              if (error.message \u003d\u003d\u003d \"disconnect\") {"},{"lineNumber":160,"author":{"gitId":"uyencfi"},"content":"                if (self.sent_ \u0026\u0026 self.sent_.id \u003d\u003d\u003d revisionId) {"},{"lineNumber":161,"author":{"gitId":"uyencfi"},"content":"                  // We haven\u0027t seen our transaction succeed or fail.  Send it again."},{"lineNumber":162,"author":{"gitId":"uyencfi"},"content":"                  setTimeout(function () {"},{"lineNumber":163,"author":{"gitId":"uyencfi"},"content":"                    doTransaction(revisionId, revisionData)"},{"lineNumber":164,"author":{"gitId":"uyencfi"},"content":"                  }, 0)"},{"lineNumber":165,"author":{"gitId":"uyencfi"},"content":"                } else if (callback) {"},{"lineNumber":166,"author":{"gitId":"uyencfi"},"content":"                  callback(error, false)"},{"lineNumber":167,"author":{"gitId":"uyencfi"},"content":"                }"},{"lineNumber":168,"author":{"gitId":"uyencfi"},"content":"              } else {"},{"lineNumber":169,"author":{"gitId":"uyencfi"},"content":"                utils.log(\"Transaction failure!\", error)"},{"lineNumber":170,"author":{"gitId":"uyencfi"},"content":"                throw error"},{"lineNumber":171,"author":{"gitId":"uyencfi"},"content":"              }"},{"lineNumber":172,"author":{"gitId":"uyencfi"},"content":"            } else {"},{"lineNumber":173,"author":{"gitId":"uyencfi"},"content":"              if (callback) callback(null, committed)"},{"lineNumber":174,"author":{"gitId":"uyencfi"},"content":"            }"},{"lineNumber":175,"author":{"gitId":"uyencfi"},"content":"          },"},{"lineNumber":176,"author":{"gitId":"uyencfi"},"content":"          /*applyLocally\u003d*/ false"},{"lineNumber":177,"author":{"gitId":"uyencfi"},"content":"        )"},{"lineNumber":178,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":179,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":180,"author":{"gitId":"uyencfi"},"content":"    this.sent_ \u003d { id: revisionId, op: operation }"},{"lineNumber":181,"author":{"gitId":"uyencfi"},"content":"    doTransaction(revisionId, {"},{"lineNumber":182,"author":{"gitId":"uyencfi"},"content":"      a: self.userId_,"},{"lineNumber":183,"author":{"gitId":"uyencfi"},"content":"      o: operation.toJSON(),"},{"lineNumber":184,"author":{"gitId":"uyencfi"},"content":"      t: firebase.database.ServerValue.TIMESTAMP,"},{"lineNumber":185,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":186,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":187,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":188,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.sendCursor \u003d function (obj) {"},{"lineNumber":189,"author":{"gitId":"uyencfi"},"content":"    if (obj !\u003d\u003d null) {"},{"lineNumber":190,"author":{"gitId":"uyencfi"},"content":"      this.userRef_.child(\"cursor\").set(obj)"},{"lineNumber":191,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":192,"author":{"gitId":"uyencfi"},"content":"    this.cursor_ \u003d obj"},{"lineNumber":193,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":194,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":195,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.setColor \u003d function (color) {"},{"lineNumber":196,"author":{"gitId":"uyencfi"},"content":"    this.userRef_.child(\"color\").set(color)"},{"lineNumber":197,"author":{"gitId":"uyencfi"},"content":"    this.color_ \u003d color"},{"lineNumber":198,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":199,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":200,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.getDocument \u003d function () {"},{"lineNumber":201,"author":{"gitId":"uyencfi"},"content":"    return this.document_"},{"lineNumber":202,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":203,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":204,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.registerCallbacks \u003d function (callbacks) {"},{"lineNumber":205,"author":{"gitId":"uyencfi"},"content":"    for (var eventType in callbacks) {"},{"lineNumber":206,"author":{"gitId":"uyencfi"},"content":"      this.on(eventType, callbacks[eventType])"},{"lineNumber":207,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":208,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":209,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":210,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.initializeUserData_ \u003d function () {"},{"lineNumber":211,"author":{"gitId":"uyencfi"},"content":"    this.userRef_.child(\"cursor\").onDisconnect().remove()"},{"lineNumber":212,"author":{"gitId":"uyencfi"},"content":"    this.userRef_.child(\"color\").onDisconnect().remove()"},{"lineNumber":213,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":214,"author":{"gitId":"uyencfi"},"content":"    this.sendCursor(this.cursor_ || null)"},{"lineNumber":215,"author":{"gitId":"uyencfi"},"content":"    this.setColor(this.color_ || null)"},{"lineNumber":216,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":217,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":218,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.monitorCursors_ \u003d function () {"},{"lineNumber":219,"author":{"gitId":"uyencfi"},"content":"    var usersRef \u003d this.ref_.child(\"users\"),"},{"lineNumber":220,"author":{"gitId":"uyencfi"},"content":"      self \u003d this"},{"lineNumber":221,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":222,"author":{"gitId":"uyencfi"},"content":"    function childChanged(childSnap) {"},{"lineNumber":223,"author":{"gitId":"uyencfi"},"content":"      var userId \u003d childSnap.key"},{"lineNumber":224,"author":{"gitId":"uyencfi"},"content":"      var userData \u003d childSnap.val()"},{"lineNumber":225,"author":{"gitId":"uyencfi"},"content":"      self.trigger(\"cursor\", userId, userData.cursor, userData.color)"},{"lineNumber":226,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":227,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":228,"author":{"gitId":"uyencfi"},"content":"    this.firebaseOn_(usersRef, \"child_added\", childChanged)"},{"lineNumber":229,"author":{"gitId":"uyencfi"},"content":"    this.firebaseOn_(usersRef, \"child_changed\", childChanged)"},{"lineNumber":230,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":231,"author":{"gitId":"uyencfi"},"content":"    this.firebaseOn_(usersRef, \"child_removed\", function (childSnap) {"},{"lineNumber":232,"author":{"gitId":"uyencfi"},"content":"      var userId \u003d childSnap.key"},{"lineNumber":233,"author":{"gitId":"uyencfi"},"content":"      self.trigger(\"cursor\", userId, null)"},{"lineNumber":234,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":235,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":236,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":237,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.monitorHistory_ \u003d function () {"},{"lineNumber":238,"author":{"gitId":"uyencfi"},"content":"    var self \u003d this"},{"lineNumber":239,"author":{"gitId":"uyencfi"},"content":"    // Get the latest checkpoint as a starting point so we don\u0027t have to re-play entire history."},{"lineNumber":240,"author":{"gitId":"uyencfi"},"content":"    this.ref_.child(\"checkpoint\").once(\"value\", function (s) {"},{"lineNumber":241,"author":{"gitId":"uyencfi"},"content":"      if (self.zombie_) {"},{"lineNumber":242,"author":{"gitId":"uyencfi"},"content":"        return"},{"lineNumber":243,"author":{"gitId":"uyencfi"},"content":"      } // just in case we were cleaned up before we got the checkpoint data."},{"lineNumber":244,"author":{"gitId":"uyencfi"},"content":"      var revisionId \u003d s.child(\"id\").val(),"},{"lineNumber":245,"author":{"gitId":"uyencfi"},"content":"        op \u003d s.child(\"o\").val(),"},{"lineNumber":246,"author":{"gitId":"uyencfi"},"content":"        author \u003d s.child(\"a\").val()"},{"lineNumber":247,"author":{"gitId":"uyencfi"},"content":"      if (op !\u003d null \u0026\u0026 revisionId !\u003d null \u0026\u0026 author !\u003d\u003d null) {"},{"lineNumber":248,"author":{"gitId":"uyencfi"},"content":"        self.pendingReceivedRevisions_[revisionId] \u003d { o: op, a: author }"},{"lineNumber":249,"author":{"gitId":"uyencfi"},"content":"        self.checkpointRevision_ \u003d revisionFromId(revisionId)"},{"lineNumber":250,"author":{"gitId":"uyencfi"},"content":"        self.monitorHistoryStartingAt_(self.checkpointRevision_ + 1)"},{"lineNumber":251,"author":{"gitId":"uyencfi"},"content":"      } else {"},{"lineNumber":252,"author":{"gitId":"uyencfi"},"content":"        self.checkpointRevision_ \u003d 0"},{"lineNumber":253,"author":{"gitId":"uyencfi"},"content":"        self.monitorHistoryStartingAt_(self.checkpointRevision_)"},{"lineNumber":254,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":255,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":256,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":257,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":258,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.monitorHistoryStartingAt_ \u003d function (revision) {"},{"lineNumber":259,"author":{"gitId":"uyencfi"},"content":"    var historyRef \u003d this.ref_"},{"lineNumber":260,"author":{"gitId":"uyencfi"},"content":"      .child(\"history\")"},{"lineNumber":261,"author":{"gitId":"uyencfi"},"content":"      .startAt(null, revisionToId(revision))"},{"lineNumber":262,"author":{"gitId":"uyencfi"},"content":"    var self \u003d this"},{"lineNumber":263,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":264,"author":{"gitId":"uyencfi"},"content":"    setTimeout(function () {"},{"lineNumber":265,"author":{"gitId":"uyencfi"},"content":"      self.firebaseOn_(historyRef, \"child_added\", function (revisionSnapshot) {"},{"lineNumber":266,"author":{"gitId":"uyencfi"},"content":"        var revisionId \u003d revisionSnapshot.key"},{"lineNumber":267,"author":{"gitId":"uyencfi"},"content":"        self.pendingReceivedRevisions_[revisionId] \u003d revisionSnapshot.val()"},{"lineNumber":268,"author":{"gitId":"uyencfi"},"content":"        if (self.ready_) {"},{"lineNumber":269,"author":{"gitId":"uyencfi"},"content":"          self.handlePendingReceivedRevisions_()"},{"lineNumber":270,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":271,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":272,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":273,"author":{"gitId":"uyencfi"},"content":"      historyRef.once(\"value\", function () {"},{"lineNumber":274,"author":{"gitId":"uyencfi"},"content":"        self.handleInitialRevisions_()"},{"lineNumber":275,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":276,"author":{"gitId":"uyencfi"},"content":"    }, 0)"},{"lineNumber":277,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":278,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":279,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.handleInitialRevisions_ \u003d function () {"},{"lineNumber":280,"author":{"gitId":"uyencfi"},"content":"    assert(!this.ready_, \"Should not be called multiple times.\")"},{"lineNumber":281,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":282,"author":{"gitId":"uyencfi"},"content":"    // Compose the checkpoint and all subsequent revisions into a single operation to apply at once."},{"lineNumber":283,"author":{"gitId":"uyencfi"},"content":"    this.revision_ \u003d this.checkpointRevision_"},{"lineNumber":284,"author":{"gitId":"uyencfi"},"content":"    var revisionId \u003d revisionToId(this.revision_),"},{"lineNumber":285,"author":{"gitId":"uyencfi"},"content":"      pending \u003d this.pendingReceivedRevisions_"},{"lineNumber":286,"author":{"gitId":"uyencfi"},"content":"    while (pending[revisionId] !\u003d null) {"},{"lineNumber":287,"author":{"gitId":"uyencfi"},"content":"      var revision \u003d this.parseRevision_(pending[revisionId])"},{"lineNumber":288,"author":{"gitId":"uyencfi"},"content":"      if (!revision) {"},{"lineNumber":289,"author":{"gitId":"uyencfi"},"content":"        // If a misbehaved client adds a bad operation, just ignore it."},{"lineNumber":290,"author":{"gitId":"uyencfi"},"content":"        utils.log("},{"lineNumber":291,"author":{"gitId":"uyencfi"},"content":"          \"Invalid operation.\","},{"lineNumber":292,"author":{"gitId":"uyencfi"},"content":"          this.ref_.toString(),"},{"lineNumber":293,"author":{"gitId":"uyencfi"},"content":"          revisionId,"},{"lineNumber":294,"author":{"gitId":"uyencfi"},"content":"          pending[revisionId]"},{"lineNumber":295,"author":{"gitId":"uyencfi"},"content":"        )"},{"lineNumber":296,"author":{"gitId":"uyencfi"},"content":"      } else {"},{"lineNumber":297,"author":{"gitId":"uyencfi"},"content":"        this.document_ \u003d this.document_.compose(revision.operation)"},{"lineNumber":298,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":299,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":300,"author":{"gitId":"uyencfi"},"content":"      delete pending[revisionId]"},{"lineNumber":301,"author":{"gitId":"uyencfi"},"content":"      this.revision_++"},{"lineNumber":302,"author":{"gitId":"uyencfi"},"content":"      revisionId \u003d revisionToId(this.revision_)"},{"lineNumber":303,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":304,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":305,"author":{"gitId":"uyencfi"},"content":"    this.trigger(\"operation\", this.document_)"},{"lineNumber":306,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":307,"author":{"gitId":"uyencfi"},"content":"    this.ready_ \u003d true"},{"lineNumber":308,"author":{"gitId":"uyencfi"},"content":"    var self \u003d this"},{"lineNumber":309,"author":{"gitId":"uyencfi"},"content":"    setTimeout(function () {"},{"lineNumber":310,"author":{"gitId":"uyencfi"},"content":"      self.trigger(\"ready\")"},{"lineNumber":311,"author":{"gitId":"uyencfi"},"content":"    }, 0)"},{"lineNumber":312,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":313,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":314,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.handlePendingReceivedRevisions_ \u003d function () {"},{"lineNumber":315,"author":{"gitId":"uyencfi"},"content":"    var pending \u003d this.pendingReceivedRevisions_"},{"lineNumber":316,"author":{"gitId":"uyencfi"},"content":"    var revisionId \u003d revisionToId(this.revision_)"},{"lineNumber":317,"author":{"gitId":"uyencfi"},"content":"    var triggerRetry \u003d false"},{"lineNumber":318,"author":{"gitId":"uyencfi"},"content":"    while (pending[revisionId] !\u003d null) {"},{"lineNumber":319,"author":{"gitId":"uyencfi"},"content":"      this.revision_++"},{"lineNumber":320,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":321,"author":{"gitId":"uyencfi"},"content":"      var revision \u003d this.parseRevision_(pending[revisionId])"},{"lineNumber":322,"author":{"gitId":"uyencfi"},"content":"      if (!revision) {"},{"lineNumber":323,"author":{"gitId":"uyencfi"},"content":"        // If a misbehaved client adds a bad operation, just ignore it."},{"lineNumber":324,"author":{"gitId":"uyencfi"},"content":"        utils.log("},{"lineNumber":325,"author":{"gitId":"uyencfi"},"content":"          \"Invalid operation.\","},{"lineNumber":326,"author":{"gitId":"uyencfi"},"content":"          this.ref_.toString(),"},{"lineNumber":327,"author":{"gitId":"uyencfi"},"content":"          revisionId,"},{"lineNumber":328,"author":{"gitId":"uyencfi"},"content":"          pending[revisionId]"},{"lineNumber":329,"author":{"gitId":"uyencfi"},"content":"        )"},{"lineNumber":330,"author":{"gitId":"uyencfi"},"content":"      } else {"},{"lineNumber":331,"author":{"gitId":"uyencfi"},"content":"        this.document_ \u003d this.document_.compose(revision.operation)"},{"lineNumber":332,"author":{"gitId":"uyencfi"},"content":"        if (this.sent_ \u0026\u0026 revisionId \u003d\u003d\u003d this.sent_.id) {"},{"lineNumber":333,"author":{"gitId":"uyencfi"},"content":"          // We have an outstanding change at this revision id."},{"lineNumber":334,"author":{"gitId":"uyencfi"},"content":"          if ("},{"lineNumber":335,"author":{"gitId":"uyencfi"},"content":"            this.sent_.op.equals(revision.operation) \u0026\u0026"},{"lineNumber":336,"author":{"gitId":"uyencfi"},"content":"            revision.author \u003d\u003d\u003d this.userId_"},{"lineNumber":337,"author":{"gitId":"uyencfi"},"content":"          ) {"},{"lineNumber":338,"author":{"gitId":"uyencfi"},"content":"            // This is our change; it succeeded."},{"lineNumber":339,"author":{"gitId":"uyencfi"},"content":"            if (this.revision_ % CHECKPOINT_FREQUENCY \u003d\u003d\u003d 0) {"},{"lineNumber":340,"author":{"gitId":"uyencfi"},"content":"              this.saveCheckpoint_()"},{"lineNumber":341,"author":{"gitId":"uyencfi"},"content":"            }"},{"lineNumber":342,"author":{"gitId":"uyencfi"},"content":"            this.sent_ \u003d null"},{"lineNumber":343,"author":{"gitId":"uyencfi"},"content":"            this.trigger(\"ack\")"},{"lineNumber":344,"author":{"gitId":"uyencfi"},"content":"          } else {"},{"lineNumber":345,"author":{"gitId":"uyencfi"},"content":"            // our op failed.  Trigger a retry after we\u0027re done catching up on any incoming ops."},{"lineNumber":346,"author":{"gitId":"uyencfi"},"content":"            triggerRetry \u003d true"},{"lineNumber":347,"author":{"gitId":"uyencfi"},"content":"            this.trigger(\"operation\", revision.operation)"},{"lineNumber":348,"author":{"gitId":"uyencfi"},"content":"          }"},{"lineNumber":349,"author":{"gitId":"uyencfi"},"content":"        } else {"},{"lineNumber":350,"author":{"gitId":"uyencfi"},"content":"          this.trigger(\"operation\", revision.operation)"},{"lineNumber":351,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":352,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":353,"author":{"gitId":"uyencfi"},"content":"      delete pending[revisionId]"},{"lineNumber":354,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":355,"author":{"gitId":"uyencfi"},"content":"      revisionId \u003d revisionToId(this.revision_)"},{"lineNumber":356,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":357,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":358,"author":{"gitId":"uyencfi"},"content":"    if (triggerRetry) {"},{"lineNumber":359,"author":{"gitId":"uyencfi"},"content":"      this.sent_ \u003d null"},{"lineNumber":360,"author":{"gitId":"uyencfi"},"content":"      this.trigger(\"retry\")"},{"lineNumber":361,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":362,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":363,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":364,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.parseRevision_ \u003d function (data) {"},{"lineNumber":365,"author":{"gitId":"uyencfi"},"content":"    // We could do some of this validation via security rules.  But it\u0027s nice to be robust, just in case."},{"lineNumber":366,"author":{"gitId":"uyencfi"},"content":"    if (typeof data !\u003d\u003d \"object\") {"},{"lineNumber":367,"author":{"gitId":"uyencfi"},"content":"      return null"},{"lineNumber":368,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":369,"author":{"gitId":"uyencfi"},"content":"    if (typeof data.a !\u003d\u003d \"string\" || typeof data.o !\u003d\u003d \"object\") {"},{"lineNumber":370,"author":{"gitId":"uyencfi"},"content":"      return null"},{"lineNumber":371,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":372,"author":{"gitId":"uyencfi"},"content":"    var op \u003d null"},{"lineNumber":373,"author":{"gitId":"uyencfi"},"content":"    try {"},{"lineNumber":374,"author":{"gitId":"uyencfi"},"content":"      op \u003d TextOperation.fromJSON(data.o)"},{"lineNumber":375,"author":{"gitId":"uyencfi"},"content":"    } catch (e) {"},{"lineNumber":376,"author":{"gitId":"uyencfi"},"content":"      return null"},{"lineNumber":377,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":378,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":379,"author":{"gitId":"uyencfi"},"content":"    if (op.baseLength !\u003d\u003d this.document_.targetLength) {"},{"lineNumber":380,"author":{"gitId":"uyencfi"},"content":"      return null"},{"lineNumber":381,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":382,"author":{"gitId":"uyencfi"},"content":"    return { author: data.a, operation: op }"},{"lineNumber":383,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":384,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":385,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.saveCheckpoint_ \u003d function () {"},{"lineNumber":386,"author":{"gitId":"uyencfi"},"content":"    this.ref_.child(\"checkpoint\").set({"},{"lineNumber":387,"author":{"gitId":"uyencfi"},"content":"      a: this.userId_,"},{"lineNumber":388,"author":{"gitId":"uyencfi"},"content":"      o: this.document_.toJSON(),"},{"lineNumber":389,"author":{"gitId":"uyencfi"},"content":"      id: revisionToId(this.revision_ - 1), // use the id for the revision we just wrote."},{"lineNumber":390,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":391,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":392,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":393,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.firebaseOn_ \u003d function ("},{"lineNumber":394,"author":{"gitId":"uyencfi"},"content":"    ref,"},{"lineNumber":395,"author":{"gitId":"uyencfi"},"content":"    eventType,"},{"lineNumber":396,"author":{"gitId":"uyencfi"},"content":"    callback,"},{"lineNumber":397,"author":{"gitId":"uyencfi"},"content":"    context"},{"lineNumber":398,"author":{"gitId":"uyencfi"},"content":"  ) {"},{"lineNumber":399,"author":{"gitId":"uyencfi"},"content":"    this.firebaseCallbacks_.push({"},{"lineNumber":400,"author":{"gitId":"uyencfi"},"content":"      ref: ref,"},{"lineNumber":401,"author":{"gitId":"uyencfi"},"content":"      eventType: eventType,"},{"lineNumber":402,"author":{"gitId":"uyencfi"},"content":"      callback: callback,"},{"lineNumber":403,"author":{"gitId":"uyencfi"},"content":"      context: context,"},{"lineNumber":404,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":405,"author":{"gitId":"uyencfi"},"content":"    ref.on(eventType, callback, context)"},{"lineNumber":406,"author":{"gitId":"uyencfi"},"content":"    return callback"},{"lineNumber":407,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":408,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":409,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.firebaseOff_ \u003d function ("},{"lineNumber":410,"author":{"gitId":"uyencfi"},"content":"    ref,"},{"lineNumber":411,"author":{"gitId":"uyencfi"},"content":"    eventType,"},{"lineNumber":412,"author":{"gitId":"uyencfi"},"content":"    callback,"},{"lineNumber":413,"author":{"gitId":"uyencfi"},"content":"    context"},{"lineNumber":414,"author":{"gitId":"uyencfi"},"content":"  ) {"},{"lineNumber":415,"author":{"gitId":"uyencfi"},"content":"    ref.off(eventType, callback, context)"},{"lineNumber":416,"author":{"gitId":"uyencfi"},"content":"    for (var i \u003d 0; i \u003c this.firebaseCallbacks_.length; i++) {"},{"lineNumber":417,"author":{"gitId":"uyencfi"},"content":"      var l \u003d this.firebaseCallbacks_[i]"},{"lineNumber":418,"author":{"gitId":"uyencfi"},"content":"      if ("},{"lineNumber":419,"author":{"gitId":"uyencfi"},"content":"        l.ref \u003d\u003d\u003d ref \u0026\u0026"},{"lineNumber":420,"author":{"gitId":"uyencfi"},"content":"        l.eventType \u003d\u003d\u003d eventType \u0026\u0026"},{"lineNumber":421,"author":{"gitId":"uyencfi"},"content":"        l.callback \u003d\u003d\u003d callback \u0026\u0026"},{"lineNumber":422,"author":{"gitId":"uyencfi"},"content":"        l.context \u003d\u003d\u003d context"},{"lineNumber":423,"author":{"gitId":"uyencfi"},"content":"      ) {"},{"lineNumber":424,"author":{"gitId":"uyencfi"},"content":"        this.firebaseCallbacks_.splice(i, 1)"},{"lineNumber":425,"author":{"gitId":"uyencfi"},"content":"        break"},{"lineNumber":426,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":427,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":428,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":429,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":430,"author":{"gitId":"uyencfi"},"content":"  FirebaseAdapter.prototype.removeFirebaseCallbacks_ \u003d function () {"},{"lineNumber":431,"author":{"gitId":"uyencfi"},"content":"    for (var i \u003d 0; i \u003c this.firebaseCallbacks_.length; i++) {"},{"lineNumber":432,"author":{"gitId":"uyencfi"},"content":"      var l \u003d this.firebaseCallbacks_[i]"},{"lineNumber":433,"author":{"gitId":"uyencfi"},"content":"      l.ref.off(l.eventType, l.callback, l.context)"},{"lineNumber":434,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":435,"author":{"gitId":"uyencfi"},"content":"    this.firebaseCallbacks_ \u003d []"},{"lineNumber":436,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":437,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":438,"author":{"gitId":"uyencfi"},"content":"  // Throws an error if the first argument is falsy. Useful for debugging."},{"lineNumber":439,"author":{"gitId":"uyencfi"},"content":"  function assert(b, msg) {"},{"lineNumber":440,"author":{"gitId":"uyencfi"},"content":"    if (!b) {"},{"lineNumber":441,"author":{"gitId":"uyencfi"},"content":"      throw new Error(msg || \"assertion error\")"},{"lineNumber":442,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":443,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":444,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":445,"author":{"gitId":"uyencfi"},"content":"  // Based off ideas from http://www.zanopha.com/docs/elen.pdf"},{"lineNumber":446,"author":{"gitId":"uyencfi"},"content":"  var characters \u003d"},{"lineNumber":447,"author":{"gitId":"uyencfi"},"content":"    \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\""},{"lineNumber":448,"author":{"gitId":"uyencfi"},"content":"  function revisionToId(revision) {"},{"lineNumber":449,"author":{"gitId":"uyencfi"},"content":"    if (revision \u003d\u003d\u003d 0) {"},{"lineNumber":450,"author":{"gitId":"uyencfi"},"content":"      return \"A0\""},{"lineNumber":451,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":452,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":453,"author":{"gitId":"uyencfi"},"content":"    var str \u003d \"\""},{"lineNumber":454,"author":{"gitId":"uyencfi"},"content":"    while (revision \u003e 0) {"},{"lineNumber":455,"author":{"gitId":"uyencfi"},"content":"      var digit \u003d revision % characters.length"},{"lineNumber":456,"author":{"gitId":"uyencfi"},"content":"      str \u003d characters[digit] + str"},{"lineNumber":457,"author":{"gitId":"uyencfi"},"content":"      revision -\u003d digit"},{"lineNumber":458,"author":{"gitId":"uyencfi"},"content":"      revision /\u003d characters.length"},{"lineNumber":459,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":460,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":461,"author":{"gitId":"uyencfi"},"content":"    // Prefix with length (starting at \u0027A\u0027 for length 1) to ensure the id\u0027s sort lexicographically."},{"lineNumber":462,"author":{"gitId":"uyencfi"},"content":"    var prefix \u003d characters[str.length + 9]"},{"lineNumber":463,"author":{"gitId":"uyencfi"},"content":"    return prefix + str"},{"lineNumber":464,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":465,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":466,"author":{"gitId":"uyencfi"},"content":"  function revisionFromId(revisionId) {"},{"lineNumber":467,"author":{"gitId":"uyencfi"},"content":"    assert("},{"lineNumber":468,"author":{"gitId":"uyencfi"},"content":"      revisionId.length \u003e 0 \u0026\u0026"},{"lineNumber":469,"author":{"gitId":"uyencfi"},"content":"        revisionId[0] \u003d\u003d\u003d characters[revisionId.length + 8]"},{"lineNumber":470,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":471,"author":{"gitId":"uyencfi"},"content":"    var revision \u003d 0"},{"lineNumber":472,"author":{"gitId":"uyencfi"},"content":"    for (var i \u003d 1; i \u003c revisionId.length; i++) {"},{"lineNumber":473,"author":{"gitId":"uyencfi"},"content":"      revision *\u003d characters.length"},{"lineNumber":474,"author":{"gitId":"uyencfi"},"content":"      revision +\u003d characters.indexOf(revisionId[i])"},{"lineNumber":475,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":476,"author":{"gitId":"uyencfi"},"content":"    return revision"},{"lineNumber":477,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":478,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":479,"author":{"gitId":"uyencfi"},"content":"  return FirebaseAdapter"},{"lineNumber":480,"author":{"gitId":"uyencfi"},"content":"})()"}],"authorContributionMap":{"uyencfi":480}},{"path":"frontend/src/components/collaboration/lib/firepad.css","fileType":"css","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":".firepad {"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"  -webkit-box-sizing: border-box;"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"  -moz-box-sizing: border-box;"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"  box-sizing: border-box;"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"  width: 100%;"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"  height: 100%;"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"  position: relative;"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"  text-align: left;"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"  line-height: normal;"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":".firepad .CodeMirror {"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"  position: absolute;"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"  top: 0;"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"  bottom: 0;"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"  right: 0;"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"  left: 0;"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"  height: auto;"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":".firepad-with-toolbar .CodeMirror {"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"  top: 83px;"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"  padding-left: 10px;"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":".firepad-with-toolbar .CodeMirror-lines {"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"  padding-top: 10px;"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":".firepad-toolbar {"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"  height: 82px;"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"  line-height: 82px;"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"  padding-left: 10px;"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"  border-bottom: 1px solid #c9c9c9;"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"  /* Don\u0027t select text when double-clicking in toolbar */"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"  -webkit-touch-callout: none;"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"  -webkit-user-select: none;"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"  -khtml-user-select: none;"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"  -moz-user-select: none;"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"  -ms-user-select: none;"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"  user-select: none;"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":".firepad-toolbar-wrapper {"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"  display: inline-block;"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"  line-height: 14px;"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":".firepad-richtext .CodeMirror {"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"  font-family: Verdana, sans-serif;"},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"  font-size: 14px;"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":".firepad-spacer {"},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"  height: 10px;"},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"  width: 1px;"},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"/** Styles for all of the rich-text formatting we support. */"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":".firepad-b {"},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"  font-weight: bold;"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":".firepad-i {"},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"  font-style: italic;"},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":".firepad-u {"},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":"  text-decoration: underline;"},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":".firepad-s {"},{"lineNumber":71,"author":{"gitId":"uyencfi"},"content":"  text-decoration: line-through;"},{"lineNumber":72,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":73,"author":{"gitId":"uyencfi"},"content":".firepad-u.firepad-s {"},{"lineNumber":74,"author":{"gitId":"uyencfi"},"content":"  text-decoration: underline line-through;"},{"lineNumber":75,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":76,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":77,"author":{"gitId":"uyencfi"},"content":".firepad-f-arial {"},{"lineNumber":78,"author":{"gitId":"uyencfi"},"content":"  font-family: Arial, Helvetica, sans-serif;"},{"lineNumber":79,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":80,"author":{"gitId":"uyencfi"},"content":".firepad-f-comic-sans-ms {"},{"lineNumber":81,"author":{"gitId":"uyencfi"},"content":"  font-family: \"Comic Sans MS\", cursive, sans-serif;"},{"lineNumber":82,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":83,"author":{"gitId":"uyencfi"},"content":".firepad-f-courier-new {"},{"lineNumber":84,"author":{"gitId":"uyencfi"},"content":"  font-family: \"Courier New\", Courier, monospace;"},{"lineNumber":85,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":86,"author":{"gitId":"uyencfi"},"content":".firepad-f-impact {"},{"lineNumber":87,"author":{"gitId":"uyencfi"},"content":"  font-family: Impact, Charcoal, sans-serif;"},{"lineNumber":88,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":89,"author":{"gitId":"uyencfi"},"content":".firepad-f-times-new-roman {"},{"lineNumber":90,"author":{"gitId":"uyencfi"},"content":"  font-family: \"Times New Roman\", Times, serif;"},{"lineNumber":91,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":92,"author":{"gitId":"uyencfi"},"content":".firepad-f-verdana {"},{"lineNumber":93,"author":{"gitId":"uyencfi"},"content":"  font-family: Verdana, Geneva, sans-serif;"},{"lineNumber":94,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":95,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":96,"author":{"gitId":"uyencfi"},"content":".firepad-la-left {"},{"lineNumber":97,"author":{"gitId":"uyencfi"},"content":"  text-align: left;"},{"lineNumber":98,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":99,"author":{"gitId":"uyencfi"},"content":".firepad-la-center {"},{"lineNumber":100,"author":{"gitId":"uyencfi"},"content":"  text-align: center;"},{"lineNumber":101,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":102,"author":{"gitId":"uyencfi"},"content":".firepad-la-right {"},{"lineNumber":103,"author":{"gitId":"uyencfi"},"content":"  text-align: right;"},{"lineNumber":104,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":105,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":106,"author":{"gitId":"uyencfi"},"content":"/** Line Styles */"},{"lineNumber":107,"author":{"gitId":"uyencfi"},"content":"pre.firepad-lt-o,"},{"lineNumber":108,"author":{"gitId":"uyencfi"},"content":"pre.firepad-lt-u,"},{"lineNumber":109,"author":{"gitId":"uyencfi"},"content":"pre.firepad-lt-t,"},{"lineNumber":110,"author":{"gitId":"uyencfi"},"content":"pre.firepad-lt-tc,"},{"lineNumber":111,"author":{"gitId":"uyencfi"},"content":"pre.CodeMirror-line.firepad-lt-o,"},{"lineNumber":112,"author":{"gitId":"uyencfi"},"content":"pre.CodeMirror-line.firepad-lt-u,"},{"lineNumber":113,"author":{"gitId":"uyencfi"},"content":"pre.CodeMirror-line.firepad-lt-t,"},{"lineNumber":114,"author":{"gitId":"uyencfi"},"content":"pre.CodeMirror-line.firepad-lt-tc {"},{"lineNumber":115,"author":{"gitId":"uyencfi"},"content":"  padding-left: 40px;"},{"lineNumber":116,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":117,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":118,"author":{"gitId":"uyencfi"},"content":".firepad-list-left {"},{"lineNumber":119,"author":{"gitId":"uyencfi"},"content":"  display: inline-block;"},{"lineNumber":120,"author":{"gitId":"uyencfi"},"content":"  margin-left: -40px;"},{"lineNumber":121,"author":{"gitId":"uyencfi"},"content":"  width: 40px;"},{"lineNumber":122,"author":{"gitId":"uyencfi"},"content":"  padding-right: 5px;"},{"lineNumber":123,"author":{"gitId":"uyencfi"},"content":"  text-align: right;"},{"lineNumber":124,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":125,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":126,"author":{"gitId":"uyencfi"},"content":".firepad-todo-left {"},{"lineNumber":127,"author":{"gitId":"uyencfi"},"content":"  display: inline-block;"},{"lineNumber":128,"author":{"gitId":"uyencfi"},"content":"  margin-left: -20px;"},{"lineNumber":129,"author":{"gitId":"uyencfi"},"content":"  width: 20px;"},{"lineNumber":130,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":131,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":132,"author":{"gitId":"uyencfi"},"content":".powered-by-firepad {"},{"lineNumber":133,"author":{"gitId":"uyencfi"},"content":"  position: absolute;"},{"lineNumber":134,"author":{"gitId":"uyencfi"},"content":"  display: block;"},{"lineNumber":135,"author":{"gitId":"uyencfi"},"content":"  z-index: 5;"},{"lineNumber":136,"author":{"gitId":"uyencfi"},"content":"  right: 20px;"},{"lineNumber":137,"author":{"gitId":"uyencfi"},"content":"  bottom: 20px;"},{"lineNumber":138,"author":{"gitId":"uyencfi"},"content":"  width: 129px;"},{"lineNumber":139,"author":{"gitId":"uyencfi"},"content":"  height: 23px;"},{"lineNumber":140,"author":{"gitId":"uyencfi"},"content":"  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIEAAAAXCAYAAAAsnywOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowN0M3OUFEQTk4ODUxMUUyQUFBRTg2NUQxMTExQTUxQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowN0M3OUFEQjk4ODUxMUUyQUFBRTg2NUQxMTExQTUxQyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkRBNEIyOTA5OTg4NDExRTJBQUFFODY1RDExMTFBNTFDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkRBNEIyOTBBOTg4NDExRTJBQUFFODY1RDExMTFBNTFDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+o21teAAABctJREFUeNrEWttV8zgQFjl5X1EBTgVr3vKGqYBQQZIKgAoMFUAqiKkgTgUxT/CGUwH+K8DbwVrnjDbzKzOjS9jdOUcnCVjyXD7NTTp7f39XkZQPoxjGn8PI4Lulbhi3w2jht4bnzXMX8Jkx6zbD+DWMSnj3Yhh38H2J3vMTlCN+DfUeXixlwJPVSwfrtDBeE/g0a85hbhf4fDmM7TDqmBdNp1N1FgACDco3Rp/Bb4mM8p6G8ZxojEeY79Ia+MC0DDSUS8ZYV/ApAfMFeOmZ/5fAr4/MOg8R/O3Q5jIgWMEaHN0jfdvnK4HvIBBoMPgNfP7X5AJBUnYIEGYA4sLxXD8NSokePIa09AxGdeksYU7l8w4GBCMCUQaF3yDk/wEAatdKu03i07jor2FsYI0i4f17ZuctItcpPV5UC8ZUHt63Qvg0sn+iMHdEY0dhsS68g9E6rmcPa2We+XieXWvr5BTrAD7WkFP0xN+zRPD1sHtrxqCxZL1rRQD1MzBnaZj/3QTM3YFHe5FAoAONXiND9Z5nS/h8A0apmN4yqG+B8ewEBfeRgLbJ3J4Bld1dOhFYc4LHTeDcPzxGdmXJGE9zA8n7P7KNnF0pZbGG+QnsjiZAwS28jNtNPfO+BRj/ixDOzLlm5t0xPEjUILkmwO8T8MvJd8XkDecQt8/g+5LI7AtC1lBPlXt0jcnKQslRgH41BYIeGO8j405MbHcNIClZMwBo4LMnlJQH8rwEY10zxpISTDf/qIkKQqPhyxNS9SflLQXwdQuAeHT4yzEQRgSizgmldLH1J2GgLNBAnLDYA3BeJCeAVjNAK8AIdjwHGGxDGPYV8b2A+P4F62nPeplQSVAhTwuhjNODLdkvCSCUbk6AGw9ZpFv1EZW41IygGVNnt6iJEuNGMybkLJj3L5k1HoXyLDSud45X4UrSF9BZwezwlPyhg420RiC5//j4WI0dpnom9mwRExpqbktvgmvnBOaSylww5KcnLlIhpgiY44IjJ8LNPBJkHK08fDWoJ9EQILg60SO3INs3ts0YjLpTv7dLqRJsLSheqhSoWP0akXSpwH4FFdtTSzlNxPhTCTeLSkEGqT+xAF20sF6XwMcRsEbq0PdOFdjXhYvJ2lOaUzahperv2OZQBbHTl9XHUANrvnj0VavDWUzJhFAbLmfgGWeCjjn9rqU+wSlC1h4X6xqtSSiDKCC9Kr5HvmYA0xBA9x30NJG82UR6RQBqHlF5+DxWz4Skvwi9lsz6b2MQ/jExvnRMIsUBQCm+z58FKncFCu483ilnXHKVIKuJ0/eCJ2oBKHukF07GxQ9svB71azJCVtxx3QiezPBZjZEhpfZsDQu/CeVZaB28OgEEvtM0KQQ1gQDQhGfh8p1JZFwuBe8U4wVwyCoYj1p6wph57+10Ou3HaHfeEfXlRMW1Xl33lhHIywJqWyWUY3O0CyRDKk8ymqPncojBOdGTkAAaAwDOCzyAjmeMh6FKdu1Jpn09j1ahlv0YMZgTbjsUABoplbpsghWxQ8lc7eklcHnDDgzQoBK1c4QsIiocl3YOf6ckhlIu0CLvZN53AfG8QSCkjqy1J+RKdHRHYiwgPaZNHHvsbGMVLps0s0u4I9iMaPo0sON/nWgwDZ6xFnZbk+AZJe9UEfLFJou+BP6J4nsU0XjxJSopdCGUjT0A5DrC7RbgCn/i2tmDJxy0kaDSTK4l5Q9U67lzbBNySHatDucuigNBm9h4kBobPqrV7zd2toTbsrxdquNDEEnhXcJOxUq+dJTbnugpe8LgvUfnSwYkywAw2g00kYxvCV8vK9ThgCT2TpyZ84VQ26O4tke7qfEgdwPur1b8ieZC+a+9naMEibsX2anDhdBOHV9oceX7dhR/mRBibGfWHrP7Nt4CeQNbxTVE2PhEsqxiymDujmGRuItsFtud6FUyFX7DdqYOJ4Ia1c+VUAnElLju+woiCf235HP16quGshS5DAj+FmAA6gfBqr4bldAAAAAASUVORK5CYII\u003d\");"},{"lineNumber":141,"author":{"gitId":"uyencfi"},"content":"  opacity: 0.5;"},{"lineNumber":142,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":143,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":144,"author":{"gitId":"uyencfi"},"content":".powered-by-firepad:hover {"},{"lineNumber":145,"author":{"gitId":"uyencfi"},"content":"  opacity: 1;"},{"lineNumber":146,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":147,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":148,"author":{"gitId":"uyencfi"},"content":".firepad-btn-group {"},{"lineNumber":149,"author":{"gitId":"uyencfi"},"content":"  margin: 5px 7px 0 0;"},{"lineNumber":150,"author":{"gitId":"uyencfi"},"content":"  display: inline-block;"},{"lineNumber":151,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":152,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":153,"author":{"gitId":"uyencfi"},"content":"a.firepad-btn,"},{"lineNumber":154,"author":{"gitId":"uyencfi"},"content":"a.firepad-btn:visited,"},{"lineNumber":155,"author":{"gitId":"uyencfi"},"content":"a.firepad-btn:active {"},{"lineNumber":156,"author":{"gitId":"uyencfi"},"content":"  font-family: \"Arial\" sans-serif;"},{"lineNumber":157,"author":{"gitId":"uyencfi"},"content":"  cursor: pointer;"},{"lineNumber":158,"author":{"gitId":"uyencfi"},"content":"  text-decoration: none;"},{"lineNumber":159,"author":{"gitId":"uyencfi"},"content":"  display: inline-block;"},{"lineNumber":160,"author":{"gitId":"uyencfi"},"content":"  padding: 6px 6px 4px 6px;"},{"lineNumber":161,"author":{"gitId":"uyencfi"},"content":"  text-align: center;"},{"lineNumber":162,"author":{"gitId":"uyencfi"},"content":"  vertical-align: middle;"},{"lineNumber":163,"author":{"gitId":"uyencfi"},"content":"  font-size: 16px;"},{"lineNumber":164,"author":{"gitId":"uyencfi"},"content":"  background-color: #fcfcfc;"},{"lineNumber":165,"author":{"gitId":"uyencfi"},"content":"  border: 1px solid #c9c9c9;"},{"lineNumber":166,"author":{"gitId":"uyencfi"},"content":"  border-bottom-width: 4px;"},{"lineNumber":167,"author":{"gitId":"uyencfi"},"content":"  color: #9c9c9c;"},{"lineNumber":168,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":169,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":170,"author":{"gitId":"uyencfi"},"content":"a.firepad-btn:hover {"},{"lineNumber":171,"author":{"gitId":"uyencfi"},"content":"  color: #fff;"},{"lineNumber":172,"author":{"gitId":"uyencfi"},"content":"  background-color: #ffbf86;"},{"lineNumber":173,"author":{"gitId":"uyencfi"},"content":"  border-color: #e6a165;"},{"lineNumber":174,"author":{"gitId":"uyencfi"},"content":"  text-decoration: none;"},{"lineNumber":175,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":176,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":177,"author":{"gitId":"uyencfi"},"content":"a.firepad-btn:active {"},{"lineNumber":178,"author":{"gitId":"uyencfi"},"content":"  -webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15),"},{"lineNumber":179,"author":{"gitId":"uyencfi"},"content":"    0 1px 2px rgba(0, 0, 0, 0.05);"},{"lineNumber":180,"author":{"gitId":"uyencfi"},"content":"  -moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15),"},{"lineNumber":181,"author":{"gitId":"uyencfi"},"content":"    0 1px 2px rgba(0, 0, 0, 0.05);"},{"lineNumber":182,"author":{"gitId":"uyencfi"},"content":"  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);"},{"lineNumber":183,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":184,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":185,"author":{"gitId":"uyencfi"},"content":".firepad-btn-group \u003e .firepad-btn {"},{"lineNumber":186,"author":{"gitId":"uyencfi"},"content":"  -webkit-border-radius: 0;"},{"lineNumber":187,"author":{"gitId":"uyencfi"},"content":"  -moz-border-radius: 0;"},{"lineNumber":188,"author":{"gitId":"uyencfi"},"content":"  border-radius: 0;"},{"lineNumber":189,"author":{"gitId":"uyencfi"},"content":"  margin-left: -1px;"},{"lineNumber":190,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":191,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":192,"author":{"gitId":"uyencfi"},"content":".firepad-btn-group \u003e .firepad-btn:first-child {"},{"lineNumber":193,"author":{"gitId":"uyencfi"},"content":"  border-bottom-left-radius: 6px;"},{"lineNumber":194,"author":{"gitId":"uyencfi"},"content":"  border-top-left-radius: 6px;"},{"lineNumber":195,"author":{"gitId":"uyencfi"},"content":"  -webkit-border-bottom-left-radius: 6px;"},{"lineNumber":196,"author":{"gitId":"uyencfi"},"content":"  -webkit-border-top-left-radius: 6px;"},{"lineNumber":197,"author":{"gitId":"uyencfi"},"content":"  -moz-border-radius-bottomleft: 6px;"},{"lineNumber":198,"author":{"gitId":"uyencfi"},"content":"  -moz-border-radius-topleft: 6px;"},{"lineNumber":199,"author":{"gitId":"uyencfi"},"content":"  margin-left: 0px;"},{"lineNumber":200,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":201,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":202,"author":{"gitId":"uyencfi"},"content":".firepad-btn-group \u003e .firepad-btn:last-child {"},{"lineNumber":203,"author":{"gitId":"uyencfi"},"content":"  border-bottom-right-radius: 6px;"},{"lineNumber":204,"author":{"gitId":"uyencfi"},"content":"  border-top-right-radius: 6px;"},{"lineNumber":205,"author":{"gitId":"uyencfi"},"content":"  -webkit-border-bottom-right-radius: 6px;"},{"lineNumber":206,"author":{"gitId":"uyencfi"},"content":"  -webkit-border-top-right-radius: 6px;"},{"lineNumber":207,"author":{"gitId":"uyencfi"},"content":"  -moz-border-radius-bottomright: 6px;"},{"lineNumber":208,"author":{"gitId":"uyencfi"},"content":"  -moz-border-radius-topright: 6px;"},{"lineNumber":209,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":210,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":211,"author":{"gitId":"uyencfi"},"content":".firepad-dropdown {"},{"lineNumber":212,"author":{"gitId":"uyencfi"},"content":"  position: relative;"},{"lineNumber":213,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":214,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":215,"author":{"gitId":"uyencfi"},"content":".firepad-dropdown-menu {"},{"lineNumber":216,"author":{"gitId":"uyencfi"},"content":"  position: absolute;"},{"lineNumber":217,"author":{"gitId":"uyencfi"},"content":"  top: 100%;"},{"lineNumber":218,"author":{"gitId":"uyencfi"},"content":"  left: 0;"},{"lineNumber":219,"author":{"gitId":"uyencfi"},"content":"  z-index: 1000;"},{"lineNumber":220,"author":{"gitId":"uyencfi"},"content":"  display: none;"},{"lineNumber":221,"author":{"gitId":"uyencfi"},"content":"  float: left;"},{"lineNumber":222,"author":{"gitId":"uyencfi"},"content":"  padding: 4px 0;"},{"lineNumber":223,"author":{"gitId":"uyencfi"},"content":"  margin: 4px 0 0;"},{"lineNumber":224,"author":{"gitId":"uyencfi"},"content":"  list-style: none;"},{"lineNumber":225,"author":{"gitId":"uyencfi"},"content":"  background-color: #ffffff;"},{"lineNumber":226,"author":{"gitId":"uyencfi"},"content":"  border: 1px solid #ccc;"},{"lineNumber":227,"author":{"gitId":"uyencfi"},"content":"  border: 1px solid rgba(0, 0, 0, 0.2);"},{"lineNumber":228,"author":{"gitId":"uyencfi"},"content":"  *border-right-width: 2px;"},{"lineNumber":229,"author":{"gitId":"uyencfi"},"content":"  *border-bottom-width: 2px;"},{"lineNumber":230,"author":{"gitId":"uyencfi"},"content":"  -webkit-border-radius: 5px;"},{"lineNumber":231,"author":{"gitId":"uyencfi"},"content":"  -moz-border-radius: 5px;"},{"lineNumber":232,"author":{"gitId":"uyencfi"},"content":"  border-radius: 5px;"},{"lineNumber":233,"author":{"gitId":"uyencfi"},"content":"  -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);"},{"lineNumber":234,"author":{"gitId":"uyencfi"},"content":"  -moz-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);"},{"lineNumber":235,"author":{"gitId":"uyencfi"},"content":"  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);"},{"lineNumber":236,"author":{"gitId":"uyencfi"},"content":"  -webkit-background-clip: padding-box;"},{"lineNumber":237,"author":{"gitId":"uyencfi"},"content":"  -moz-background-clip: padding;"},{"lineNumber":238,"author":{"gitId":"uyencfi"},"content":"  background-clip: padding-box;"},{"lineNumber":239,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":240,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":241,"author":{"gitId":"uyencfi"},"content":".firepad-dropdown-menu a {"},{"lineNumber":242,"author":{"gitId":"uyencfi"},"content":"  text-align: left;"},{"lineNumber":243,"author":{"gitId":"uyencfi"},"content":"  display: block;"},{"lineNumber":244,"author":{"gitId":"uyencfi"},"content":"  padding: 3px 15px;"},{"lineNumber":245,"author":{"gitId":"uyencfi"},"content":"  clear: both;"},{"lineNumber":246,"author":{"gitId":"uyencfi"},"content":"  font-weight: normal;"},{"lineNumber":247,"author":{"gitId":"uyencfi"},"content":"  line-height: 18px;"},{"lineNumber":248,"author":{"gitId":"uyencfi"},"content":"  color: #333333;"},{"lineNumber":249,"author":{"gitId":"uyencfi"},"content":"  white-space: nowrap;"},{"lineNumber":250,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":251,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":252,"author":{"gitId":"uyencfi"},"content":".firepad-dropdown-menu a:hover {"},{"lineNumber":253,"author":{"gitId":"uyencfi"},"content":"  color: #fff;"},{"lineNumber":254,"author":{"gitId":"uyencfi"},"content":"  text-decoration: none;"},{"lineNumber":255,"author":{"gitId":"uyencfi"},"content":"  background-color: #ffbf86;"},{"lineNumber":256,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":257,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":258,"author":{"gitId":"uyencfi"},"content":".firepad-color-dropdown-item {"},{"lineNumber":259,"author":{"gitId":"uyencfi"},"content":"  height: 25px;"},{"lineNumber":260,"author":{"gitId":"uyencfi"},"content":"  width: 25px;"},{"lineNumber":261,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":262,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":263,"author":{"gitId":"uyencfi"},"content":".firepad-dialog {"},{"lineNumber":264,"author":{"gitId":"uyencfi"},"content":"  position: absolute;"},{"lineNumber":265,"author":{"gitId":"uyencfi"},"content":"  left: 0px;"},{"lineNumber":266,"author":{"gitId":"uyencfi"},"content":"  top: 0px;"},{"lineNumber":267,"author":{"gitId":"uyencfi"},"content":"  width: 100%;"},{"lineNumber":268,"author":{"gitId":"uyencfi"},"content":"  height: 100%;"},{"lineNumber":269,"author":{"gitId":"uyencfi"},"content":"  z-index: 1000;"},{"lineNumber":270,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":271,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":272,"author":{"gitId":"uyencfi"},"content":".firepad-dialog-div {"},{"lineNumber":273,"author":{"gitId":"uyencfi"},"content":"  position: relative;"},{"lineNumber":274,"author":{"gitId":"uyencfi"},"content":"  width: 400px;"},{"lineNumber":275,"author":{"gitId":"uyencfi"},"content":"  height: 100px;"},{"lineNumber":276,"author":{"gitId":"uyencfi"},"content":"  margin: 100px auto;"},{"lineNumber":277,"author":{"gitId":"uyencfi"},"content":"  background-color: #fff;"},{"lineNumber":278,"author":{"gitId":"uyencfi"},"content":"  border: 1px solid #000;"},{"lineNumber":279,"author":{"gitId":"uyencfi"},"content":"  padding: 15px;"},{"lineNumber":280,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":281,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":282,"author":{"gitId":"uyencfi"},"content":".firepad-dialog-input {"},{"lineNumber":283,"author":{"gitId":"uyencfi"},"content":"  width: 80%;"},{"lineNumber":284,"author":{"gitId":"uyencfi"},"content":"  display: block;"},{"lineNumber":285,"author":{"gitId":"uyencfi"},"content":"  padding: 5px 5px;"},{"lineNumber":286,"author":{"gitId":"uyencfi"},"content":"  margin: 10px 10px 10px 5px;"},{"lineNumber":287,"author":{"gitId":"uyencfi"},"content":"  clear: both;"},{"lineNumber":288,"author":{"gitId":"uyencfi"},"content":"  font-weight: normal;"},{"lineNumber":289,"author":{"gitId":"uyencfi"},"content":"  line-height: 25px;"},{"lineNumber":290,"author":{"gitId":"uyencfi"},"content":"  color: #333333;"},{"lineNumber":291,"author":{"gitId":"uyencfi"},"content":"  white-space: nowrap;"},{"lineNumber":292,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":293,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":294,"author":{"gitId":"uyencfi"},"content":"/********************************************************************"},{"lineNumber":295,"author":{"gitId":"uyencfi"},"content":" * Generated via icomoon.io."},{"lineNumber":296,"author":{"gitId":"uyencfi"},"content":"  If you want to make changes, you can go to http://icomoon.io/app/, go to the bottom right and click the"},{"lineNumber":297,"author":{"gitId":"uyencfi"},"content":"  database-looking icon, then \"Load Session\" and use the checked-in font/firepad-icomoon.json file."},{"lineNumber":298,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":299,"author":{"gitId":"uyencfi"},"content":"  Note: When you download the generated font, turn on the \"Base 64 Encode ...\" option to generate the font inline"},{"lineNumber":300,"author":{"gitId":"uyencfi"},"content":"  in the CSS (to avoid needing to distribute a font file with firepad)."},{"lineNumber":301,"author":{"gitId":"uyencfi"},"content":" */"},{"lineNumber":302,"author":{"gitId":"uyencfi"},"content":"@font-face {"},{"lineNumber":303,"author":{"gitId":"uyencfi"},"content":"  font-family: \"firepad\";"},{"lineNumber":304,"author":{"gitId":"uyencfi"},"content":"  src: url(\"firepad.eot\");"},{"lineNumber":305,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":306,"author":{"gitId":"uyencfi"},"content":"@font-face {"},{"lineNumber":307,"author":{"gitId":"uyencfi"},"content":"  font-family: \"firepad\";"},{"lineNumber":308,"author":{"gitId":"uyencfi"},"content":"  src: url(data:application/font-woff;charset\u003dutf-8;base64,d09GRk9UVE8AAAzsAAsAAAAAFegAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAABCAAACZUAABDLmL2mHkZGVE0AAAqgAAAAGgAAABxoZGqgR0RFRgAACrwAAAAdAAAAIABFAARPUy8yAAAK3AAAAEsAAABgL9zcQGNtYXAAAAsoAAAAXgAAAX7gqNO7aGVhZAAAC4gAAAAuAAAANv1GCI1oaGVhAAALuAAAAB4AAAAkBBD/5GhtdHgAAAvYAAAAHgAAADYEYAEQbWF4cAAAC/gAAAAGAAAABgAYUABuYW1lAAAMAAAAAOAAAAGGNHbrq3Bvc3QAAAzgAAAADAAAACAAAwAAeJy9V3l0lNUVf1+YjWQyQJghBMIMZafTCoERQUQWIaCDYGGkiNKypuBIC5hYUERB9o9FYMoOrWgrEPDkQMqpcKpCkUqnRyONCBRo2FKSgbAY+L7yDdz+7vcmw5ZqT//omTP33nff3d6977vvPUVYLEJRFEfexKnjJ48eJ5QUoYjH9U4peuc6emOL6qyjOi3eVJE1NINUNUk47WpYj+gF1mzlsXrZQtTPVsINsoUzu74vQ2SxDYeoJxqJZqKV8ItOopvoJfqLQeJZ8YIYK14UU8Q08YaYJ5aIiFgvNoutoqjg5xNzO3bsCNQviXIk6iRRZ4kCEj0sUReJHpGoq0TdJOotUR+JnpCor0T9TJQjHeVIRznSUY50lCMd5SQc5SZSVJMpIZT5ygJlobJIUZXFyhJlqbJMeVtZrqxQVioR5VfKKmW1skZZq6xT1isblI2iMaclRTjFLcWrHKrzjk23++wT7AvsW+yf2csd3tSqtCfTNqUddjqcp9Id6TnpH7jedKl6viUe0SN2Fymjr7xH4tJ21UOidfuuRBUrrpJoXN6K6OtHT6tEX87d7CD6MHyQ6GDk0QTA0OtXg2pYVfVQoRrFz0oiF1Oim5R8lYXm+WCgbMcKouqiMURn+44gutSrD5zs+TWM/qTeCyRWDC3wGG4SnT4RdhJNjQskGh1oTCL79/tJtHzqcQmoovsFyaNzlsY+kJ8IoxQxN+u2jkTmwTye/BPL9pCALvAE8+jMwTwfUdGbwnDbXHpID3mM/HDUZgTi7qCqhrV8VS0MqlpAd2MVLq2aBcbZEXmsch/RjdOLiC7ubUF0eUoboqtZw7GGJc9gOP4c0T9teRA5fprofNY6tQYyV9Rt7ZOSov66bNZuS8JVvoUtLiTRsO8plYTb09OhjQvCHQKctpJE/83LiD6eP4nE8JFTGOxk3iASvXh28PxJXm2c3SiNuz3NU116RMv3EL3YY6cNqzzUFfa2PkJ0/JVcEmnDDhEdnV2iIs/RG/OJSutOR7YGNyHRoqg8AfyYkLwAzwbqTmPeAhjDLJ0c3MQXtSHKlpNRvEuF86CVUYSCpj6GlOtDIDbkIVSrzyCiY6zqZOpI1RqV4TCVuXuIvvnjTpb8IWrIVFkqqnnB/gFbnAsnl56B4IllmyQkkRF6zeSS8F3fLyWF0iqLiFqdBNWuGNT3UWTF3xfUD55ymAkIaxHbvQs4zwtoaq6CFz8tsagozz6YEF/Qdl8ArmQAVyC2428yfNHmRq5ckmjfYJvKcILK3AVy+ZA8LFMC7QOcpvps8VVO3TWZSsBG708i0t/4CFRmkOhaz5nYEL0HOEgU9Dpgc2mWGHa241gjEvY2lZAERVqbSp/fbuIEp4bt9dsYVzAnU6qwsi9mTxqpSLIzvX/v7ilMzJgmpA+2E7bVZt4XtkvzNcFkmsreQttdMUofMO/TW+2tPfgaMzXWM6VTo/i+6BN2CmuPXivWQvfZNw1V/G/2M5P2Jdvr50+qtvC735P7C//X3FfeFUytuU94XW9Yvm3jPJCb+4NPpOa7gs9MBl9Re/D3VeS/3TjanG/bOQ9s+wcqm8jCf9g5Lo1bf/NUo9S4C8UjWrXne6lGyJIAEIua01roDooHCj3BcKG/0BY2mnqiW9VSP06OqKpODU5S+8TMA8QaDXr84Wg4aP5jfNRYWsC+/26fMQ+zMGiRmpgP3DUfDzwwb5TePR95UB/2a4MurdgS1KqjdqM65kkQUEtQfkkUxjyaWw36rVHNjUNYjcasuBGc2FlEyp4dh1GMDg22E5WYvXznzd8weZTBOjTdXZBigHNfjChDJ5v5MJFxtR0oFTcA7RdorJ62k9DTcn78uQkgmbX4rwwWc+NcNY+o/OUAxkuPw94t2BcpdTKs4E7ZBu4y9O0j4c9UHuPgLZ9cDqkVlzcBXN1iSk0wuXzaTNzDZtawwQJ4TLGOMg3CY53bfyCKK2jPlonTQe22gPodTuFbvT6FvaMNCxh0hj2j+DWI8xXF+PoLUAv3QtwzC9RFPkRvxbdzfCGrzAJS0xareNr6jkkC1Ed8YlL6coAGE6wmg6fasNAZiHbIuMaqvNZRR3CIjPqql8e0yLarrFKWSi435WTj2GBZc8zLvnoR4Eq56Xw1czdxRfh+VnJxMfsakwzRkpWQgsciM8RzbHsiS51HiAOfxtE2cCAubES/RZ4qZqcjJa5hoF7ejU9leVuiyqNfwd7n718B2JJjNfNq1oWT/VJdriHXZfK79yY7a+mz4E69hupGuqlcw6YAS1ycmPrvcmLamFLHTcCbYKUuy4vxseQmsPqsXLNcrt4vUY5VfwH1ZBzUc/iqUz5+Hfba8rLbVs6EPUsQOynOR7KlXSdQ+Tht61TO5OrNdmA/z6gaFkamF4/A4b66+DYuAp1wbfmmoU63q+ecIvqX/SUHYpnRYZMRMkIa/hjNrJgO0/8YJUhYe+zCpS2M68aYE5eI/twyg2iNccGBT4yUsSVjPLAztzkJmx6B7ZxtRM6LiHDx8y2JJgRToNGihMTPLI2lFbGxZUNpmW7uHwTPNKvRfM30q4WsLj2ALtUyVcPt1KMFNDcaTQyfpur3c8Uu9R7A558y/vWH1HAh3T4++7B6RyffKPbEVANaRsBwoy358XlDKx1apaw1o0pqvZXBN123zg0hErXH/MhPg7W4MLvycJ+9Coqq8vJ8RsBuEglWDd/rN9xGBKGh/1aNP4uJdc2kKhvxadC6Yy3J92qluLFrASQZAkr/zgHtPbh1ljQnur4RFUkd68bVqkNZAlzfsJ1BFQ9PSQCRkOSZasL5RRnzMqQu87z3ds07MNEb3VoEjQ5p8Vu/QzISRW9E5mOcXoseiQfiEZueX+jRquMho9qulZrhN5l5E31uli0BzGGSR5Wg6DxT55PDWnhJXW/MmOPxa62CzxtuLeA3IqhSBFUimrpxMtGSMW8TbS7DzlnSXPDb6qMPkeXWVi/Rp/sG4O11Hk+SY6fQU8UufFjGj9CNxWg4Mbr0g7Thex3wZDoeL2f6biA6HX4Cw73j8DjpYsXXd23RPlSu5yt4FChTi0j03vwlnjEnwiS63OqQAOlKlOj28CGghu5GB2nhBLVSR4cUHJ3gOMVIH662U8v6MBAybDGyuTBX4cOzxa16VGcqXvYNhUVR7M/9dG1QK43a03A/Hqrj1bbdkQDmMMmjs6DoBFMnksNaeEldb1pQx/ZOi/lV4xy+A6093iP6EQuDXB7GvfF8W5KPhmMHJRxHcn2qdi4Ws6b9G/R4y/0AAAB4nGNgYGBkAIIztovOg+hzwskvYDQASW0G1AAAeJxjYGRgYOADYgkGEGBiYARCcSBmAfMYAAVHAEoAAAB4nGNgZmJgnMDAysDB6MOYxsDA4A6lvzJIMrQwMDAxsDIzwIEAgskQkOaawuDwgOEDA+OD/w8Y9BgfMCg0MDAwwhUoACEjABBCDB8AeJzljdkRgCAMRB+I94UH+mNpFmK5lmAHGGCsws1ksjvJmwAZqQ8UQZckFbPhlFlJ6bC43YP30fE5q+JtEUktpCGXVApT09DS0TMwYtmZmFlYcWyghEkP/6sX448KEgAAeJxjYGRgYADiA48eTY3nt/nKwM3EAALnhJNfIOj/D5gYGB8AuRwMYGkAXjsL7AAAeJxjYGRgYHzw/wGDHhMDA8M/BiAJFEEBzABt5wP2AAB4nGNigAAmBoYEBgcghgAFBmSgwGCAwmcAADLOAXUAAAAAUAAAGAAAeJx1jk9qwkAUh79otJRK6ap0OeCmm4RkXAgeIAfown2gYwhIIqNCT9KVR3DpMXqAHqHH6C/2bbpw4DHf++b9GWDGJwnDSbjjyXgkfjUeM+fDOJU/G0944Mt4Kv+jyiS9l3m8dg08Er8Yj6kojFP5k/GEZy7GU/lvNrREAjtq3mHTxrCrBW9yDUe28lFpaI7bWlDR03G43lEVAYcn1zbHSvF/3p/zLMhYKrzqSmVUfXeo+tgE5/PCrZztFflFtsx8Uaro1t/WcpG9Xoe/OE0c9rMOcd/2nSvz4mbvL7EuORF4nGNgZsALAAB9AAQ\u003d)"},{"lineNumber":309,"author":{"gitId":"uyencfi"},"content":"      format(\"woff\"),"},{"lineNumber":310,"author":{"gitId":"uyencfi"},"content":"    url(data:application/x-font-ttf;charset\u003dutf-8;base64,AAEAAAANAIAAAwBQRkZUTWhkaqAAAA9wAAAAHEdERUYARwAGAAAPUAAAACBPUy8yL7vcIAAAAVgAAABWY21hcODA1NYAAAHwAAABfmdhc3D//wADAAAPSAAAAAhnbHlmMPUBFgAAA6gAAAkIaGVhZP1GCI0AAADcAAAANmhoZWEEEf/lAAABFAAAACRobXR4BQoBEQAAAbAAAAA+bG9jYR04G1IAAANwAAAANm1heHAAZQCTAAABOAAAACBuYW1lNHbrqwAADLAAAAGGcG9zdFMv72QAAA44AAABDgABAAAAAQAABST+1l8PPPUACwIAAAAAAM4TY+gAAAAAzhNj6AAA/98CAAHhAAAACAACAAAAAAAAAAEAAAHh/98ALgIAAAD+AAIAAAEAAAAAAAAAAAAAAAAAAAAFAAEAAAAaAJAACQAAAAAAAgAAAAEAAQAAAEAAAAAAAAAAAQIAAZAABQAIAUwBZgAAAEcBTAFmAAAA9QAZAIQAAAIABQMAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUGZFZABA4ADwAAHg/+AALgHhACGAAAABAAAAAAAAAgAAAAAAAAAAqgAAAAAAAAIAAGAAQABgAAAAAAAAACAAAAAAAAAAAAAAAAAAIAAxAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAHAABAAAAAAB4AAMAAQAAABwABABcAAAACAAIAAIAAAAA4BXwAP//AAAAAOAA8AD//wAAAAAQAwABAAAABgAAAAAABAAFAAYABwAIAAkACgALAAwADQAOAA8AEAARABIAGQATABQAFQAWABcAGAAAAQYAAAEAAAAAAAAAAQIAAAACAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4APgBWAHwAugF0AbAB7AISAjgCXgKEAq4DFAM0A1QDfgOoA+AEDAQ2BGAEhAAAAAEAAP/gAgAB4AACAAARASECAP4AAeD+AAAAAAADAGAAAAGgAcAAEQAZACEAACU2NTQmKwMROwIyNjU0JiczMhYUBisBFyM1MzIWFAYBYh5LNUBAICBAYDVLIr4zFR4eFTNQUFAVHx/uIy81S/5ASzUiO6MmNCbAgCY0JgABAEAAAAHAAcAACwAAARUjAzMVIzUzEyM1AcBAoEDgQKBAAcAg/oAgIAGAIAAAAAACAGAAAAGgAcAAEQAVAAABMxUUBiImPQEzFRQXFjI3NjUFIRUhAWBAXoReQBocVBwa/wABQP7AAcDQPFRUPNDQHxcaGhcfsEAAAAAAAQAAAAACAAHAACoAACUVIxYVFAcGIicmNTMUFjI2NCYjITUzJicmNDc2MhcWFSM0JiIGFBYzMhcCAHUVMi6ALjJAOU45OSf/AJYCAjIyLoAuMkA5Tjk5Jz0t4CAeIjglIyMlOBomJjQmIAECJXAlIyMlOBomJjQmIAAAAAkAAP/gAgAB4AAPAB8ALwA/AE8AXwBvAH8AjwAANyMiBh0BFBY7ATI2PQE0JgcUBisBIiY9ATQ2OwEyFhUlISIGHQEUFjMhMjY9ATQmJyEiBh0BFBYzITI2PQE0JiUjIgYdARQWOwEyNj0BNCYHFAYrASImPQE0NjsBMhYVFyMiBh0BFBY7ATI2PQE0JgcUBisBIiY9ATQ2OwEyFhUlISIGHQEUFjMhMjY9ATQmcGAHCQkHYAcJCRcJByAHCQkHIAcJAZD+4AcJCQcBIAcJCQf+4AcJCQcBIAcJCf55YAcJCQdgBgoJFwkHIAcJCQcgBwkQYAcJCQdgBwkJFwkHIAcJCQcgBwkBkP7gBwkJBwEgBwkJYAkHYAcJCQdgBwlQBwkJByAHCQkHEAkHIAcJCQcgBwnACQcgBwkJByAHCeAJB2AHCRgIUAcJUAcJCQcgBwkJB5AJB2AHCQkHYAcJUAcJCQcgBwkJB9AJByAHCQkHIAcJAAYAAP/gAgAB4AADAAcACwATABsAIwAAEyEVIRUhFSEVIRUhAhQWMjY0JiIGFBYyNjQmIgYUFjI2NCYiwAFA/sABQP7AAUD+wMAmNCYmNCYmNCYmNCYmNCYmNAHAQIBAgEABujQmJjQm5jQmJjQm5jQmJjQmAAAAAAYAIP/gAgAB4AADAAcACwARAB0AKQAANyEVIREhFSERIRUhJxUjNSM1ExUzFSM1NzUjNTMdAiM1MzUjNTM1IzXAAUD+wAFA/sABQP7AYCAgIEBgQEBgYEBAQEBAQAEAQAEAQGCAYCD++RkgSR4ZIEl3oCAgICAgAAUAAAAAAgABwAADAAcACwAPABMAABEhFSEVIRUhFSEVITUhFSEVIRUhAgD+AAFA/sABQP7AAgD+AAIA/gABwEAgQIBAoECAQAAAAAAFAAAAAAIAAcAAAwAHAAsADwATAAARIRUhFyEVIRUhFSEnIRUhFSEVIQIA/gBgAUD+wAFA/sBgAgD+AAIA/gABwEAgQIBAoECAQAAABQAAAAACAAHAAAMABwALAA8AEwAAESEVIRchFSEVIRUhJyEVIRUhFSECAP4AwAFA/sABQP7AwAIA/gACAP4AAcBAIECAQKBAgEAAAAUAAAAAAgABwAADAAcACwAPABMAABEhFSEVIRUhFSEVIRUhFSEVIRUhAgD+AAIA/gACAP4AAgD+AAIA/gABwEAgQCBAIEAgQAAAAAAGAAAAIAIAAYAAAwAHAAsADwASABUAABEhFSE1IRUhFSEVIRUhFSElFzc1JwcBYP6gAWD+oAFg/qABYP6gAYBAQEBAASBAoECAQCBAoGBgIGBgAAACAAD/4AIAAeEAIABBAAABJyYiDwEGFB8BFhc3Ji8BJjQ/ATYyHwEWFA8BFgc3NjQHJicHFh8BFhQPAQYiLwEmND8BJjcHBhQfARYyPwE2NCcB3QIkZCNuIyMCBgcoCAUCExNtEzYTAhQUMQ0BTSPEBgcoCAUCExNtEzYTAhQUMQ0BTSMjAiRkI24jIwG7AiMjbSRkJAIFBSgEBgITNhNtFBQCEzYTMh8jTSNkeQUFKAQGAhM2E20UFAITNhMyHyNNI2QkAiMjbSRkJAABACD/4AHPAeAAEAAABT4BLgIHFSc3FTYeAg4BAX0SEwclVkDAwEFiOBkLKSAhREY1IAF/wMB8ASM8UVdZAAAAAQAx/98B4AHgABAAAAE1Fwc1Jg4CFhcuAj4CASDAwEBWJQcTEiMpCxk4YgFkfMDAfwEgNUZEISVZV1E8IwAAAAMAAAAAAgABwAALABIAFgAAASEHERQWMyEyNjURASczNTMVMyU3IRcBoP7AYAkHAeAHCf8AoGCAYP6tIAEmIAHAYP6wBwkJBwFQ/uCAYGDAICAAAAMAAAAAAgABwAALABIAFgAAASEHERQWMyEyNjURBxUjNSM3FyU3IRcBoP7AYAkHAeAHCcCAYKCg/q0gASYgAcBg/rAHCQkHAVDAYGCAgOAgIAAAAAQAAAAAAgABwAADABcAGwAjAAATIRUhBSEiBh0BFBY7ARUhNTMyNj0BNCYDIzUzNhQGIiY0NjKAAQD/AAFg/kANExMNYAEAYA0TE43AwIcNFA0NFAHAQCATDaANE4CAEw2gDRP+wKB6FA0NFA0AAAAGAAAAAAIAAcAAAwAHAAsADwATABYAABEhFSEXIRUhFSEVIRUhFSEHIRUhExUnAgD+AMABQP7AAUD+wAFA/sDAAgD+AICAAcBAIEAgQCBAIEABQMBgAAAABgAAAAACAAHAAAMABwALAA8AEwAWAAARIRUhFyEVIRUhFSEVIRUhByEVIT0BFwIA/gDAAUD+wAFA/sABQP7AwAIA/gCAAcBAIEAgQCBAIECAwGAABAAAAAACAAGgAAMABwAPABQAABkBIREDIREhBhQWMjY0JiITIRMXNwIAIP5AAcCAHCgcHChE/oBggEABoP5gAaD+gAFgPCgcHCgc/uABAKAwAAAAAQAA/+ACAAHAABQAABIyFhQGIyInDgEHNT4BNTQnLgE1NJbUlpZqFBQmWTkcJAEsMwHAeqx6AyYbAg4NLBkHBx5UMFYAAAAAAAAMAJYAAQAAAAAAAQAHABAAAQAAAAAAAgAHACgAAQAAAAAAAwAjAHgAAQAAAAAABAAHAKwAAQAAAAAABQALAMwAAQAAAAAABgAHAOgAAwABBAkAAQAOAAAAAwABBAkAAgAOABgAAwABBAkAAwBGADAAAwABBAkABAAOAJwAAwABBAkABQAWALQAAwABBAkABgAOANgAZgBpAHIAZQBwAGEAZAAAZmlyZXBhZAAAUgBlAGcAdQBsAGEAcgAAUmVndWxhcgAARgBvAG4AdABGAG8AcgBnAGUAIAAyAC4AMAAgADoAIABmAGkAcgBlAHAAYQBkACAAOgAgADIAMwAtADcALQAyADAAMQAzAABGb250Rm9yZ2UgMi4wIDogZmlyZXBhZCA6IDIzLTctMjAxMwAAZgBpAHIAZQBwAGEAZAAAZmlyZXBhZAAAVgBlAHIAcwBpAG8AbgAgADEALgAwAABWZXJzaW9uIDEuMAAAZgBpAHIAZQBwAGEAZAAAZmlyZXBhZAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABoAAAABAAIBAgEDAQQBBQEGAQcBCAEJAQoBCwEMAQ0BDgEPARABEQESARMBFAEVARYBFwEYB3VuaUYwMDAHdW5pRTAwMAd1bmlFMDAxB3VuaUUwMDIHdW5pRTAwMwd1bmlFMDA0B3VuaUUwMDUHdW5pRTAwNgd1bmlFMDA3B3VuaUUwMDgHdW5pRTAwOQd1bmlFMDBBB3VuaUUwMEIHdW5pRTAwQwd1bmlFMDBEB3VuaUUwMEUHdW5pRTAxMAd1bmlFMDExB3VuaUUwMTIHdW5pRTAxMwd1bmlFMDE0B3VuaUUwMTUHdW5pRTAwRgAAAAAAAf//AAIAAQAAAA4AAAAYAAAAAAACAAEAAwAZAAEABAAAAAIAAAAAAAEAAAAAzD2izwAAAADOE2PoAAAAAM4TY+g\u003d)"},{"lineNumber":311,"author":{"gitId":"uyencfi"},"content":"      format(\"truetype\");"},{"lineNumber":312,"author":{"gitId":"uyencfi"},"content":"  font-weight: normal;"},{"lineNumber":313,"author":{"gitId":"uyencfi"},"content":"  font-style: normal;"},{"lineNumber":314,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":315,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":316,"author":{"gitId":"uyencfi"},"content":".firepad-tb-bold,"},{"lineNumber":317,"author":{"gitId":"uyencfi"},"content":".firepad-tb-italic,"},{"lineNumber":318,"author":{"gitId":"uyencfi"},"content":".firepad-tb-underline,"},{"lineNumber":319,"author":{"gitId":"uyencfi"},"content":".firepad-tb-strikethrough,"},{"lineNumber":320,"author":{"gitId":"uyencfi"},"content":".firepad-tb-list,"},{"lineNumber":321,"author":{"gitId":"uyencfi"},"content":".firepad-tb-list-2,"},{"lineNumber":322,"author":{"gitId":"uyencfi"},"content":".firepad-tb-numbered-list,"},{"lineNumber":323,"author":{"gitId":"uyencfi"},"content":".firepad-tb-paragraph-left,"},{"lineNumber":324,"author":{"gitId":"uyencfi"},"content":".firepad-tb-paragraph-center,"},{"lineNumber":325,"author":{"gitId":"uyencfi"},"content":".firepad-tb-paragraph-right,"},{"lineNumber":326,"author":{"gitId":"uyencfi"},"content":".firepad-tb-paragraph-justify,"},{"lineNumber":327,"author":{"gitId":"uyencfi"},"content":".firepad-tb-menu,"},{"lineNumber":328,"author":{"gitId":"uyencfi"},"content":".firepad-tb-link,"},{"lineNumber":329,"author":{"gitId":"uyencfi"},"content":".firepad-tb-undo,"},{"lineNumber":330,"author":{"gitId":"uyencfi"},"content":".firepad-tb-redo,"},{"lineNumber":331,"author":{"gitId":"uyencfi"},"content":".firepad-tb-box-add,"},{"lineNumber":332,"author":{"gitId":"uyencfi"},"content":".firepad-tb-box-remove,"},{"lineNumber":333,"author":{"gitId":"uyencfi"},"content":".firepad-tb-print,"},{"lineNumber":334,"author":{"gitId":"uyencfi"},"content":".firepad-tb-indent-decrease,"},{"lineNumber":335,"author":{"gitId":"uyencfi"},"content":".firepad-tb-indent-increase,"},{"lineNumber":336,"author":{"gitId":"uyencfi"},"content":".firepad-tb-insert-image,"},{"lineNumber":337,"author":{"gitId":"uyencfi"},"content":".firepad-tb-bubble {"},{"lineNumber":338,"author":{"gitId":"uyencfi"},"content":"  font-family: \"firepad\";"},{"lineNumber":339,"author":{"gitId":"uyencfi"},"content":"  speak: none;"},{"lineNumber":340,"author":{"gitId":"uyencfi"},"content":"  font-style: normal;"},{"lineNumber":341,"author":{"gitId":"uyencfi"},"content":"  font-weight: normal;"},{"lineNumber":342,"author":{"gitId":"uyencfi"},"content":"  font-variant: normal;"},{"lineNumber":343,"author":{"gitId":"uyencfi"},"content":"  text-transform: none;"},{"lineNumber":344,"author":{"gitId":"uyencfi"},"content":"  line-height: 1;"},{"lineNumber":345,"author":{"gitId":"uyencfi"},"content":"  -webkit-font-smoothing: antialiased;"},{"lineNumber":346,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":347,"author":{"gitId":"uyencfi"},"content":".firepad-tb-bold:before {"},{"lineNumber":348,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e000\";"},{"lineNumber":349,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":350,"author":{"gitId":"uyencfi"},"content":".firepad-tb-italic:before {"},{"lineNumber":351,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e001\";"},{"lineNumber":352,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":353,"author":{"gitId":"uyencfi"},"content":".firepad-tb-underline:before {"},{"lineNumber":354,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e002\";"},{"lineNumber":355,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":356,"author":{"gitId":"uyencfi"},"content":".firepad-tb-strikethrough:before {"},{"lineNumber":357,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e003\";"},{"lineNumber":358,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":359,"author":{"gitId":"uyencfi"},"content":".firepad-tb-list:before {"},{"lineNumber":360,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e004\";"},{"lineNumber":361,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":362,"author":{"gitId":"uyencfi"},"content":".firepad-tb-list-2:before {"},{"lineNumber":363,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e005\";"},{"lineNumber":364,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":365,"author":{"gitId":"uyencfi"},"content":".firepad-tb-numbered-list:before {"},{"lineNumber":366,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e006\";"},{"lineNumber":367,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":368,"author":{"gitId":"uyencfi"},"content":".firepad-tb-paragraph-left:before {"},{"lineNumber":369,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e007\";"},{"lineNumber":370,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":371,"author":{"gitId":"uyencfi"},"content":".firepad-tb-paragraph-center:before {"},{"lineNumber":372,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e008\";"},{"lineNumber":373,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":374,"author":{"gitId":"uyencfi"},"content":".firepad-tb-paragraph-right:before {"},{"lineNumber":375,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e009\";"},{"lineNumber":376,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":377,"author":{"gitId":"uyencfi"},"content":".firepad-tb-paragraph-justify:before {"},{"lineNumber":378,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e00a\";"},{"lineNumber":379,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":380,"author":{"gitId":"uyencfi"},"content":".firepad-tb-menu:before {"},{"lineNumber":381,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e00b\";"},{"lineNumber":382,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":383,"author":{"gitId":"uyencfi"},"content":".firepad-tb-link:before {"},{"lineNumber":384,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e00c\";"},{"lineNumber":385,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":386,"author":{"gitId":"uyencfi"},"content":".firepad-tb-undo:before {"},{"lineNumber":387,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e00d\";"},{"lineNumber":388,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":389,"author":{"gitId":"uyencfi"},"content":".firepad-tb-redo:before {"},{"lineNumber":390,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e00e\";"},{"lineNumber":391,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":392,"author":{"gitId":"uyencfi"},"content":".firepad-tb-box-add:before {"},{"lineNumber":393,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e010\";"},{"lineNumber":394,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":395,"author":{"gitId":"uyencfi"},"content":".firepad-tb-box-remove:before {"},{"lineNumber":396,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e011\";"},{"lineNumber":397,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":398,"author":{"gitId":"uyencfi"},"content":".firepad-tb-print:before {"},{"lineNumber":399,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e012\";"},{"lineNumber":400,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":401,"author":{"gitId":"uyencfi"},"content":".firepad-tb-indent-decrease:before {"},{"lineNumber":402,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e013\";"},{"lineNumber":403,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":404,"author":{"gitId":"uyencfi"},"content":".firepad-tb-indent-increase:before {"},{"lineNumber":405,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e014\";"},{"lineNumber":406,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":407,"author":{"gitId":"uyencfi"},"content":".firepad-tb-insert-image:before {"},{"lineNumber":408,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e015\";"},{"lineNumber":409,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":410,"author":{"gitId":"uyencfi"},"content":".firepad-tb-bubble:before {"},{"lineNumber":411,"author":{"gitId":"uyencfi"},"content":"  content: \"\\e00f\";"},{"lineNumber":412,"author":{"gitId":"uyencfi"},"content":"}"}],"authorContributionMap":{"uyencfi":412}},{"path":"frontend/src/components/collaboration/lib/firepad.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"/*!"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":" * This file, and the entire ../lib directory is copied from https://github.com/lucafabbian/firepad."},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":" * lucafabbian\u0027s Firepad offers support for CodeMirror and Ace editors. Our project"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":" * only uses CodeMirror6, but the Ace adapter source code generates some webpack "},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":" * warnings when compiled, causing our project to fail the CI. Since a PR on his repo can take "},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":" * time to be merged and resolve the issue, we decide to copy over relevant CodeMirror6"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":" * source files only."},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":" * "},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":" * Some other files also violate eslint rules, which we silence with eslint-disable-next-line."},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":" * "},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":" * \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":" * Firepad is an open-source, collaborative code and text editor. It was designed"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":" * to be embedded inside larger applications. Since it uses Firebase as a backend,"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":" * it requires no server-side code and can be added to any web app simply by"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":" * including a couple JavaScript files."},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":" *"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":" * http://www.firepad.io/"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":" * License: MIT"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":" * Copyright: 2014 Firebase"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":" * With code from ot.js (Copyright 2012-2013 Tim Baumann)"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":" */"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"import { TextOperation } from \"./text-operation.js\""},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"import { FirebaseAdapter } from \"./firebase-adapter.js\""},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"import { utils } from \"./utils.js\""},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"import { EditorClient } from \"./editor-client.js\""},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"import { CodeMirror6Adapter } from \"./codemirror6-adapter.js\""},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"const Firepad \u003d (function () {"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"  function Firepad(ref, place, options) {"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"    if (!(this instanceof Firepad)) {"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"      return new Firepad(ref, place, options)"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"    if (place.type !\u003d\u003d \"CodeMirror6\") {"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"      throw new Error("},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"        \"We only support a CodeMirror6 instance (CodeMirror Rich text not supported)!\""},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"      )"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"    this.zombie_ \u003d false"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"    this.codeMirror6_ \u003d this.editor_ \u003d place.editor"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":"    const curValue \u003d this.codeMirror6_.state.doc.toString()"},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"    if (curValue !\u003d\u003d \"\") {"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"      throw new Error("},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"        \"Can\u0027t initialize Firepad with a CodeMirror6 instance that already contains text.\""},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"      )"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"    var editorWrapper \u003d this.codeMirror6_.dom"},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"    this.firepadWrapper_ \u003d utils.elt(\"div\", null, { class: \"firepad\" })"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"    editorWrapper.parentNode.replaceChild(this.firepadWrapper_, editorWrapper)"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"    this.firepadWrapper_.appendChild(editorWrapper)"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"    // Provide an easy way to get the firepad instance associated with this CodeMirror instance."},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"    this.editor_.firepad \u003d this"},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"    this.options_ \u003d options || {}"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"    var userId \u003d this.getOption(\"userId\", ref.push().key)"},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"    var userColor \u003d this.getOption(\"userColor\", colorFromUserId(userId))"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":"    this.firebaseAdapter_ \u003d new FirebaseAdapter(ref, userId, userColor)"},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"    this.editorAdapter_ \u003d new CodeMirror6Adapter("},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"      this.codeMirror6_,"},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":"      this.options_"},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":"    this.client_ \u003d new EditorClient(this.firebaseAdapter_, this.editorAdapter_)"},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":71,"author":{"gitId":"uyencfi"},"content":"    var self \u003d this"},{"lineNumber":72,"author":{"gitId":"uyencfi"},"content":"    this.firebaseAdapter_.on(\"cursor\", function () {"},{"lineNumber":73,"author":{"gitId":"uyencfi"},"content":"      self.trigger.apply(self, [\"cursor\"].concat([].slice.call(arguments)))"},{"lineNumber":74,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":75,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":76,"author":{"gitId":"uyencfi"},"content":"    this.firebaseAdapter_.on(\"ready\", function () {"},{"lineNumber":77,"author":{"gitId":"uyencfi"},"content":"      self.ready_ \u003d true"},{"lineNumber":78,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":79,"author":{"gitId":"uyencfi"},"content":"      var defaultText \u003d self.getOption(\"defaultText\", null)"},{"lineNumber":80,"author":{"gitId":"uyencfi"},"content":"      if (defaultText \u0026\u0026 self.isHistoryEmpty()) {"},{"lineNumber":81,"author":{"gitId":"uyencfi"},"content":"        self.setText(defaultText)"},{"lineNumber":82,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":83,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":84,"author":{"gitId":"uyencfi"},"content":"      self.trigger(\"ready\")"},{"lineNumber":85,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":86,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":87,"author":{"gitId":"uyencfi"},"content":"    this.client_.on(\"synced\", function (isSynced) {"},{"lineNumber":88,"author":{"gitId":"uyencfi"},"content":"      self.trigger(\"synced\", isSynced)"},{"lineNumber":89,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":90,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":91,"author":{"gitId":"uyencfi"},"content":"    // Hack for IE8 to make font icons work more reliably."},{"lineNumber":92,"author":{"gitId":"uyencfi"},"content":"    // http://stackoverflow.com/questions/9809351/ie8-css-font-face-fonts-only-working-for-before-content-on-over-and-sometimes"},{"lineNumber":93,"author":{"gitId":"uyencfi"},"content":"    if ("},{"lineNumber":94,"author":{"gitId":"uyencfi"},"content":"      navigator.appName \u003d\u003d\u003d \"Microsoft Internet Explorer\" \u0026\u0026"},{"lineNumber":95,"author":{"gitId":"uyencfi"},"content":"      navigator.userAgent.match(/MSIE 8\\./)"},{"lineNumber":96,"author":{"gitId":"uyencfi"},"content":"    ) {"},{"lineNumber":97,"author":{"gitId":"uyencfi"},"content":"      window.onload \u003d function () {"},{"lineNumber":98,"author":{"gitId":"uyencfi"},"content":"        var head \u003d document.getElementsByTagName(\"head\")[0],"},{"lineNumber":99,"author":{"gitId":"uyencfi"},"content":"          style \u003d document.createElement(\"style\")"},{"lineNumber":100,"author":{"gitId":"uyencfi"},"content":"        style.type \u003d \"text/css\""},{"lineNumber":101,"author":{"gitId":"uyencfi"},"content":"        style.styleSheet.cssText \u003d \":before,:after{content:none !important;}\""},{"lineNumber":102,"author":{"gitId":"uyencfi"},"content":"        head.appendChild(style)"},{"lineNumber":103,"author":{"gitId":"uyencfi"},"content":"        setTimeout(function () {"},{"lineNumber":104,"author":{"gitId":"uyencfi"},"content":"          head.removeChild(style)"},{"lineNumber":105,"author":{"gitId":"uyencfi"},"content":"        }, 0)"},{"lineNumber":106,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":107,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":108,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":109,"author":{"gitId":"uyencfi"},"content":"  utils.makeEventEmitter(Firepad)"},{"lineNumber":110,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":111,"author":{"gitId":"uyencfi"},"content":"  // For readability, this is the Firepad \"constructor\", even though right now it\u0027s just an alias for Firepad."},{"lineNumber":112,"author":{"gitId":"uyencfi"},"content":"  Firepad.fromCodeMirror6 \u003d (ref, editor, ...e) \u003d\u003e"},{"lineNumber":113,"author":{"gitId":"uyencfi"},"content":"    Firepad("},{"lineNumber":114,"author":{"gitId":"uyencfi"},"content":"      ref,"},{"lineNumber":115,"author":{"gitId":"uyencfi"},"content":"      {"},{"lineNumber":116,"author":{"gitId":"uyencfi"},"content":"        type: \"CodeMirror6\","},{"lineNumber":117,"author":{"gitId":"uyencfi"},"content":"        editor,"},{"lineNumber":118,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":119,"author":{"gitId":"uyencfi"},"content":"      ...e"},{"lineNumber":120,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":121,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":122,"author":{"gitId":"uyencfi"},"content":"  Firepad.prototype.dispose \u003d function () {"},{"lineNumber":123,"author":{"gitId":"uyencfi"},"content":"    this.zombie_ \u003d true // We\u0027ve been disposed.  No longer valid to do anything."},{"lineNumber":124,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":125,"author":{"gitId":"uyencfi"},"content":"    // Unwrap the editor."},{"lineNumber":126,"author":{"gitId":"uyencfi"},"content":"    var editorWrapper"},{"lineNumber":127,"author":{"gitId":"uyencfi"},"content":"    if (this.codeMirror_) {"},{"lineNumber":128,"author":{"gitId":"uyencfi"},"content":"      editorWrapper \u003d this.codeMirror_.getWrapperElement()"},{"lineNumber":129,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":130,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":131,"author":{"gitId":"uyencfi"},"content":"    this.firepadWrapper_.removeChild(editorWrapper)"},{"lineNumber":132,"author":{"gitId":"uyencfi"},"content":"    this.firepadWrapper_.parentNode.replaceChild("},{"lineNumber":133,"author":{"gitId":"uyencfi"},"content":"      editorWrapper,"},{"lineNumber":134,"author":{"gitId":"uyencfi"},"content":"      this.firepadWrapper_"},{"lineNumber":135,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":136,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":137,"author":{"gitId":"uyencfi"},"content":"    this.editor_.firepad \u003d null"},{"lineNumber":138,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":139,"author":{"gitId":"uyencfi"},"content":"    this.firebaseAdapter_.dispose()"},{"lineNumber":140,"author":{"gitId":"uyencfi"},"content":"    this.editorAdapter_.detach()"},{"lineNumber":141,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":142,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":143,"author":{"gitId":"uyencfi"},"content":"  Firepad.prototype.setUserId \u003d function (userId) {"},{"lineNumber":144,"author":{"gitId":"uyencfi"},"content":"    this.firebaseAdapter_.setUserId(userId)"},{"lineNumber":145,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":146,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":147,"author":{"gitId":"uyencfi"},"content":"  Firepad.prototype.setUserColor \u003d function (color) {"},{"lineNumber":148,"author":{"gitId":"uyencfi"},"content":"    this.firebaseAdapter_.setColor(color)"},{"lineNumber":149,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":150,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":151,"author":{"gitId":"uyencfi"},"content":"  Firepad.prototype.getText \u003d function () {"},{"lineNumber":152,"author":{"gitId":"uyencfi"},"content":"    this.assertReady_(\"getText\")"},{"lineNumber":153,"author":{"gitId":"uyencfi"},"content":"    if (this.codeMirror6_) return this.codeMirror6_.state.doc.toString()"},{"lineNumber":154,"author":{"gitId":"uyencfi"},"content":"    throw new Error(\u0027Firepad cannot find CodeMirror6 instance\u0027)"},{"lineNumber":155,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":156,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":157,"author":{"gitId":"uyencfi"},"content":"  Firepad.prototype.setText \u003d function (textPieces) {"},{"lineNumber":158,"author":{"gitId":"uyencfi"},"content":"    this.assertReady_(\"setText\")"},{"lineNumber":159,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":160,"author":{"gitId":"uyencfi"},"content":"    if (this.codeMirror6_) {"},{"lineNumber":161,"author":{"gitId":"uyencfi"},"content":"      return this.codeMirror6_.dispatch({"},{"lineNumber":162,"author":{"gitId":"uyencfi"},"content":"        changes: {from: 0, to: this.codeMirror6_.state.doc.length, insert: textPieces}"},{"lineNumber":163,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":164,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":165,"author":{"gitId":"uyencfi"},"content":"    throw new Error(\u0027Firepad cannot find CodeMirror6 instance\u0027)"},{"lineNumber":166,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":167,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":168,"author":{"gitId":"uyencfi"},"content":"  Firepad.prototype.isHistoryEmpty \u003d function () {"},{"lineNumber":169,"author":{"gitId":"uyencfi"},"content":"    this.assertReady_(\"isHistoryEmpty\")"},{"lineNumber":170,"author":{"gitId":"uyencfi"},"content":"    return this.firebaseAdapter_.isHistoryEmpty()"},{"lineNumber":171,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":172,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":173,"author":{"gitId":"uyencfi"},"content":"  Firepad.prototype.getOption \u003d function (option, def) {"},{"lineNumber":174,"author":{"gitId":"uyencfi"},"content":"    return option in this.options_ ? this.options_[option] : def"},{"lineNumber":175,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":176,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":177,"author":{"gitId":"uyencfi"},"content":"  Firepad.prototype.assertReady_ \u003d function (funcName) {"},{"lineNumber":178,"author":{"gitId":"uyencfi"},"content":"    if (!this.ready_) {"},{"lineNumber":179,"author":{"gitId":"uyencfi"},"content":"      throw new Error("},{"lineNumber":180,"author":{"gitId":"uyencfi"},"content":"        \u0027You must wait for the \"ready\" event before calling \u0027 + funcName + \".\""},{"lineNumber":181,"author":{"gitId":"uyencfi"},"content":"      )"},{"lineNumber":182,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":183,"author":{"gitId":"uyencfi"},"content":"    if (this.zombie_) {"},{"lineNumber":184,"author":{"gitId":"uyencfi"},"content":"      throw new Error("},{"lineNumber":185,"author":{"gitId":"uyencfi"},"content":"        \"You can\u0027t use a Firepad after calling dispose()!  [called \" +"},{"lineNumber":186,"author":{"gitId":"uyencfi"},"content":"          funcName +"},{"lineNumber":187,"author":{"gitId":"uyencfi"},"content":"          \"]\""},{"lineNumber":188,"author":{"gitId":"uyencfi"},"content":"      )"},{"lineNumber":189,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":190,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":191,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":192,"author":{"gitId":"uyencfi"},"content":"  function colorFromUserId(userId) {"},{"lineNumber":193,"author":{"gitId":"uyencfi"},"content":"    var a \u003d 1"},{"lineNumber":194,"author":{"gitId":"uyencfi"},"content":"    for (var i \u003d 0; i \u003c userId.length; i++) {"},{"lineNumber":195,"author":{"gitId":"uyencfi"},"content":"      a \u003d (17 * (a + userId.charCodeAt(i))) % 360"},{"lineNumber":196,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":197,"author":{"gitId":"uyencfi"},"content":"    var hue \u003d a / 360"},{"lineNumber":198,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":199,"author":{"gitId":"uyencfi"},"content":"    return hsl2hex(hue, 1, 0.75)"},{"lineNumber":200,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":201,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":202,"author":{"gitId":"uyencfi"},"content":"  function rgb2hex(r, g, b) {"},{"lineNumber":203,"author":{"gitId":"uyencfi"},"content":"    function digits(n) {"},{"lineNumber":204,"author":{"gitId":"uyencfi"},"content":"      var m \u003d Math.round(255 * n).toString(16)"},{"lineNumber":205,"author":{"gitId":"uyencfi"},"content":"      return m.length \u003d\u003d\u003d 1 ? \"0\" + m : m"},{"lineNumber":206,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":207,"author":{"gitId":"uyencfi"},"content":"    return \"#\" + digits(r) + digits(g) + digits(b)"},{"lineNumber":208,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":209,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":210,"author":{"gitId":"uyencfi"},"content":"  function hsl2hex(h, s, l) {"},{"lineNumber":211,"author":{"gitId":"uyencfi"},"content":"    if (s \u003d\u003d\u003d 0) {"},{"lineNumber":212,"author":{"gitId":"uyencfi"},"content":"      return rgb2hex(l, l, l)"},{"lineNumber":213,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":214,"author":{"gitId":"uyencfi"},"content":"    var var2 \u003d l \u003c 0.5 ? l * (1 + s) : l + s - s * l"},{"lineNumber":215,"author":{"gitId":"uyencfi"},"content":"    var var1 \u003d 2 * l - var2"},{"lineNumber":216,"author":{"gitId":"uyencfi"},"content":"    var hue2rgb \u003d function (hue) {"},{"lineNumber":217,"author":{"gitId":"uyencfi"},"content":"      if (hue \u003c 0) {"},{"lineNumber":218,"author":{"gitId":"uyencfi"},"content":"        hue +\u003d 1"},{"lineNumber":219,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":220,"author":{"gitId":"uyencfi"},"content":"      if (hue \u003e 1) {"},{"lineNumber":221,"author":{"gitId":"uyencfi"},"content":"        hue -\u003d 1"},{"lineNumber":222,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":223,"author":{"gitId":"uyencfi"},"content":"      if (6 * hue \u003c 1) {"},{"lineNumber":224,"author":{"gitId":"uyencfi"},"content":"        return var1 + (var2 - var1) * 6 * hue"},{"lineNumber":225,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":226,"author":{"gitId":"uyencfi"},"content":"      if (2 * hue \u003c 1) {"},{"lineNumber":227,"author":{"gitId":"uyencfi"},"content":"        return var2"},{"lineNumber":228,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":229,"author":{"gitId":"uyencfi"},"content":"      if (3 * hue \u003c 2) {"},{"lineNumber":230,"author":{"gitId":"uyencfi"},"content":"        return var1 + (var2 - var1) * 6 * (2 / 3 - hue)"},{"lineNumber":231,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":232,"author":{"gitId":"uyencfi"},"content":"      return var1"},{"lineNumber":233,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":234,"author":{"gitId":"uyencfi"},"content":"    return rgb2hex(hue2rgb(h + 1 / 3), hue2rgb(h), hue2rgb(h - 1 / 3))"},{"lineNumber":235,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":236,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":237,"author":{"gitId":"uyencfi"},"content":"  return Firepad"},{"lineNumber":238,"author":{"gitId":"uyencfi"},"content":"})()"},{"lineNumber":239,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":240,"author":{"gitId":"uyencfi"},"content":"Object.assign(Firepad, {"},{"lineNumber":241,"author":{"gitId":"uyencfi"},"content":"  Text,"},{"lineNumber":242,"author":{"gitId":"uyencfi"},"content":"  TextOperation,"},{"lineNumber":243,"author":{"gitId":"uyencfi"},"content":"})"},{"lineNumber":244,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":245,"author":{"gitId":"uyencfi"},"content":"export default Firepad"}],"authorContributionMap":{"uyencfi":245}},{"path":"frontend/src/components/collaboration/lib/text-op.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import { utils } from \"./utils.js\""},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"export const TextOp \u003d (function () {"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"  // Operation are essentially lists of ops. There are three types of ops:"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"  //"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"  // * Retain ops: Advance the cursor position by a given number of characters."},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"  //   Represented by positive ints."},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"  // * Insert ops: Insert a given string at the current cursor position."},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"  //   Represented by strings."},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"  // * Delete ops: Delete the next n characters. Represented by negative ints."},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"  function TextOp(type) {"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"    this.type \u003d type"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"    this.chars \u003d null"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"    this.text \u003d null"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"    this.attributes \u003d null"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"    if (type \u003d\u003d\u003d \"insert\") {"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"      this.text \u003d arguments[1]"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"      utils.assert(typeof this.text \u003d\u003d\u003d \"string\")"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"      this.attributes \u003d arguments[2] || {}"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"      utils.assert(typeof this.attributes \u003d\u003d\u003d \"object\")"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"    } else if (type \u003d\u003d\u003d \"delete\") {"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"      this.chars \u003d arguments[1]"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"      utils.assert(typeof this.chars \u003d\u003d\u003d \"number\")"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"    } else if (type \u003d\u003d\u003d \"retain\") {"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"      this.chars \u003d arguments[1]"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"      utils.assert(typeof this.chars \u003d\u003d\u003d \"number\")"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"      this.attributes \u003d arguments[2] || {}"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"      utils.assert(typeof this.attributes \u003d\u003d\u003d \"object\")"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"  TextOp.prototype.isInsert \u003d function () {"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"    return this.type \u003d\u003d\u003d \"insert\""},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"  TextOp.prototype.isDelete \u003d function () {"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"    return this.type \u003d\u003d\u003d \"delete\""},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"  TextOp.prototype.isRetain \u003d function () {"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"    return this.type \u003d\u003d\u003d \"retain\""},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"  TextOp.prototype.equals \u003d function (other) {"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":"    return ("},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"      this.type \u003d\u003d\u003d other.type \u0026\u0026"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"      this.text \u003d\u003d\u003d other.text \u0026\u0026"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"      this.chars \u003d\u003d\u003d other.chars \u0026\u0026"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"      this.attributesEqual(other.attributes)"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"  TextOp.prototype.attributesEqual \u003d function (otherAttributes) {"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"    for (var attr in this.attributes) {"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"      if (this.attributes[attr] !\u003d\u003d otherAttributes[attr]) {"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":"        return false"},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"    for (attr in otherAttributes) {"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"      if (this.attributes[attr] !\u003d\u003d otherAttributes[attr]) {"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"        return false"},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"    return true"},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":"  TextOp.prototype.hasEmptyAttributes \u003d function () {"},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":"    var empty \u003d true"},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":"    // eslint-disable-next-line no-unused-vars"},{"lineNumber":71,"author":{"gitId":"uyencfi"},"content":"    for (var attr in this.attributes) {"},{"lineNumber":72,"author":{"gitId":"uyencfi"},"content":"      empty \u003d false"},{"lineNumber":73,"author":{"gitId":"uyencfi"},"content":"      break"},{"lineNumber":74,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":75,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":76,"author":{"gitId":"uyencfi"},"content":"    return empty"},{"lineNumber":77,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":78,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":79,"author":{"gitId":"uyencfi"},"content":"  return TextOp"},{"lineNumber":80,"author":{"gitId":"uyencfi"},"content":"})()"}],"authorContributionMap":{"uyencfi":80}},{"path":"frontend/src/components/collaboration/lib/text-operation.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import { utils } from \"./utils.js\""},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"import { TextOp } from \"./text-op.js\""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"export const TextOperation \u003d (function () {"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"  // Constructor for new operations."},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"  function TextOperation() {"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"    if (!this || this.constructor !\u003d\u003d TextOperation) {"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"      // \u003d\u003e function was called without \u0027new\u0027"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"      return new TextOperation()"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"    // When an operation is applied to an input string, you can think of this as"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"    // if an imaginary cursor runs over the entire string and skips over some"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"    // parts, deletes some parts and inserts characters at some positions. These"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"    // actions (skip/delete/insert) are stored as an array in the \"ops\" property."},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"    this.ops \u003d []"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"    // An operation\u0027s baseLength is the length of every string the operation"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"    // can be applied to."},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"    this.baseLength \u003d 0"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"    // The targetLength is the length of every string that results from applying"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"    // the operation on a valid input string."},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"    this.targetLength \u003d 0"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"  TextOperation.prototype.equals \u003d function (other) {"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"    if (this.baseLength !\u003d\u003d other.baseLength) {"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"      return false"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"    if (this.targetLength !\u003d\u003d other.targetLength) {"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"      return false"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"    if (this.ops.length !\u003d\u003d other.ops.length) {"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"      return false"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"    for (var i \u003d 0; i \u003c this.ops.length; i++) {"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"      if (!this.ops[i].equals(other.ops[i])) {"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"        return false"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"    return true"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":"  // After an operation is constructed, the user of the library can specify the"},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"  // actions of an operation (skip/insert/delete) with these three builder"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"  // methods. They all return the operation for convenient chaining."},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"  // Skip over a given number of characters."},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"  TextOperation.prototype.retain \u003d function (n, attributes) {"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"    if (typeof n !\u003d\u003d \"number\" || n \u003c 0) {"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"      throw new Error(\"retain expects a positive integer.\")"},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"    if (n \u003d\u003d\u003d 0) {"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"      return this"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"    this.baseLength +\u003d n"},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"    this.targetLength +\u003d n"},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":"    attributes \u003d attributes || {}"},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"    var prevOp \u003d this.ops.length \u003e 0 ? this.ops[this.ops.length - 1] : null"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"    if (prevOp \u0026\u0026 prevOp.isRetain() \u0026\u0026 prevOp.attributesEqual(attributes)) {"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"      // The last op is a retain op with the same attributes \u003d\u003e we can merge them into one op."},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"      prevOp.chars +\u003d n"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"    } else {"},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":"      // Create a new op."},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"      this.ops.push(new TextOp(\"retain\", n, attributes))"},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":"    return this"},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":"  // Insert a string at the current position."},{"lineNumber":71,"author":{"gitId":"uyencfi"},"content":"  TextOperation.prototype.insert \u003d function (str, attributes) {"},{"lineNumber":72,"author":{"gitId":"uyencfi"},"content":"    if (typeof str !\u003d\u003d \"string\") {"},{"lineNumber":73,"author":{"gitId":"uyencfi"},"content":"      throw new Error(\"insert expects a string\")"},{"lineNumber":74,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":75,"author":{"gitId":"uyencfi"},"content":"    if (str \u003d\u003d\u003d \"\") {"},{"lineNumber":76,"author":{"gitId":"uyencfi"},"content":"      return this"},{"lineNumber":77,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"uyencfi"},"content":"    attributes \u003d attributes || {}"},{"lineNumber":79,"author":{"gitId":"uyencfi"},"content":"    this.targetLength +\u003d str.length"},{"lineNumber":80,"author":{"gitId":"uyencfi"},"content":"    var prevOp \u003d this.ops.length \u003e 0 ? this.ops[this.ops.length - 1] : null"},{"lineNumber":81,"author":{"gitId":"uyencfi"},"content":"    var prevPrevOp \u003d this.ops.length \u003e 1 ? this.ops[this.ops.length - 2] : null"},{"lineNumber":82,"author":{"gitId":"uyencfi"},"content":"    if (prevOp \u0026\u0026 prevOp.isInsert() \u0026\u0026 prevOp.attributesEqual(attributes)) {"},{"lineNumber":83,"author":{"gitId":"uyencfi"},"content":"      // Merge insert op."},{"lineNumber":84,"author":{"gitId":"uyencfi"},"content":"      prevOp.text +\u003d str"},{"lineNumber":85,"author":{"gitId":"uyencfi"},"content":"    } else if (prevOp \u0026\u0026 prevOp.isDelete()) {"},{"lineNumber":86,"author":{"gitId":"uyencfi"},"content":"      // It doesn\u0027t matter when an operation is applied whether the operation"},{"lineNumber":87,"author":{"gitId":"uyencfi"},"content":"      // is delete(3), insert(\"something\") or insert(\"something\"), delete(3)."},{"lineNumber":88,"author":{"gitId":"uyencfi"},"content":"      // Here we enforce that in this case, the insert op always comes first."},{"lineNumber":89,"author":{"gitId":"uyencfi"},"content":"      // This makes all operations that have the same effect when applied to"},{"lineNumber":90,"author":{"gitId":"uyencfi"},"content":"      // a document of the right length equal in respect to the `equals` method."},{"lineNumber":91,"author":{"gitId":"uyencfi"},"content":"      if ("},{"lineNumber":92,"author":{"gitId":"uyencfi"},"content":"        prevPrevOp \u0026\u0026"},{"lineNumber":93,"author":{"gitId":"uyencfi"},"content":"        prevPrevOp.isInsert() \u0026\u0026"},{"lineNumber":94,"author":{"gitId":"uyencfi"},"content":"        prevPrevOp.attributesEqual(attributes)"},{"lineNumber":95,"author":{"gitId":"uyencfi"},"content":"      ) {"},{"lineNumber":96,"author":{"gitId":"uyencfi"},"content":"        prevPrevOp.text +\u003d str"},{"lineNumber":97,"author":{"gitId":"uyencfi"},"content":"      } else {"},{"lineNumber":98,"author":{"gitId":"uyencfi"},"content":"        this.ops[this.ops.length - 1] \u003d new TextOp(\"insert\", str, attributes)"},{"lineNumber":99,"author":{"gitId":"uyencfi"},"content":"        this.ops.push(prevOp)"},{"lineNumber":100,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":101,"author":{"gitId":"uyencfi"},"content":"    } else {"},{"lineNumber":102,"author":{"gitId":"uyencfi"},"content":"      this.ops.push(new TextOp(\"insert\", str, attributes))"},{"lineNumber":103,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":104,"author":{"gitId":"uyencfi"},"content":"    return this"},{"lineNumber":105,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":106,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":107,"author":{"gitId":"uyencfi"},"content":"  // Delete a string at the current position."},{"lineNumber":108,"author":{"gitId":"uyencfi"},"content":"  TextOperation.prototype[\"delete\"] \u003d function (n) {"},{"lineNumber":109,"author":{"gitId":"uyencfi"},"content":"    if (typeof n \u003d\u003d\u003d \"string\") {"},{"lineNumber":110,"author":{"gitId":"uyencfi"},"content":"      n \u003d n.length"},{"lineNumber":111,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":112,"author":{"gitId":"uyencfi"},"content":"    if (typeof n !\u003d\u003d \"number\" || n \u003c 0) {"},{"lineNumber":113,"author":{"gitId":"uyencfi"},"content":"      throw new Error(\"delete expects a positive integer or a string\")"},{"lineNumber":114,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":115,"author":{"gitId":"uyencfi"},"content":"    if (n \u003d\u003d\u003d 0) {"},{"lineNumber":116,"author":{"gitId":"uyencfi"},"content":"      return this"},{"lineNumber":117,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":118,"author":{"gitId":"uyencfi"},"content":"    this.baseLength +\u003d n"},{"lineNumber":119,"author":{"gitId":"uyencfi"},"content":"    var prevOp \u003d this.ops.length \u003e 0 ? this.ops[this.ops.length - 1] : null"},{"lineNumber":120,"author":{"gitId":"uyencfi"},"content":"    if (prevOp \u0026\u0026 prevOp.isDelete()) {"},{"lineNumber":121,"author":{"gitId":"uyencfi"},"content":"      prevOp.chars +\u003d n"},{"lineNumber":122,"author":{"gitId":"uyencfi"},"content":"    } else {"},{"lineNumber":123,"author":{"gitId":"uyencfi"},"content":"      this.ops.push(new TextOp(\"delete\", n))"},{"lineNumber":124,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":125,"author":{"gitId":"uyencfi"},"content":"    return this"},{"lineNumber":126,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":127,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":128,"author":{"gitId":"uyencfi"},"content":"  // Tests whether this operation has no effect."},{"lineNumber":129,"author":{"gitId":"uyencfi"},"content":"  TextOperation.prototype.isNoop \u003d function () {"},{"lineNumber":130,"author":{"gitId":"uyencfi"},"content":"    return ("},{"lineNumber":131,"author":{"gitId":"uyencfi"},"content":"      this.ops.length \u003d\u003d\u003d 0 ||"},{"lineNumber":132,"author":{"gitId":"uyencfi"},"content":"      (this.ops.length \u003d\u003d\u003d 1 \u0026\u0026"},{"lineNumber":133,"author":{"gitId":"uyencfi"},"content":"        this.ops[0].isRetain() \u0026\u0026"},{"lineNumber":134,"author":{"gitId":"uyencfi"},"content":"        this.ops[0].hasEmptyAttributes())"},{"lineNumber":135,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":136,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":137,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":138,"author":{"gitId":"uyencfi"},"content":"  TextOperation.prototype.clone \u003d function () {"},{"lineNumber":139,"author":{"gitId":"uyencfi"},"content":"    var clone \u003d new TextOperation()"},{"lineNumber":140,"author":{"gitId":"uyencfi"},"content":"    for (var i \u003d 0; i \u003c this.ops.length; i++) {"},{"lineNumber":141,"author":{"gitId":"uyencfi"},"content":"      if (this.ops[i].isRetain()) {"},{"lineNumber":142,"author":{"gitId":"uyencfi"},"content":"        clone.retain(this.ops[i].chars, this.ops[i].attributes)"},{"lineNumber":143,"author":{"gitId":"uyencfi"},"content":"      } else if (this.ops[i].isInsert()) {"},{"lineNumber":144,"author":{"gitId":"uyencfi"},"content":"        clone.insert(this.ops[i].text, this.ops[i].attributes)"},{"lineNumber":145,"author":{"gitId":"uyencfi"},"content":"      } else {"},{"lineNumber":146,"author":{"gitId":"uyencfi"},"content":"        clone[\"delete\"](this.ops[i].chars)"},{"lineNumber":147,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":148,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":149,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":150,"author":{"gitId":"uyencfi"},"content":"    return clone"},{"lineNumber":151,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":152,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":153,"author":{"gitId":"uyencfi"},"content":"  // Pretty printing."},{"lineNumber":154,"author":{"gitId":"uyencfi"},"content":"  TextOperation.prototype.toString \u003d function () {"},{"lineNumber":155,"author":{"gitId":"uyencfi"},"content":"    // map: build a new array by applying a function to every element in an old"},{"lineNumber":156,"author":{"gitId":"uyencfi"},"content":"    // array."},{"lineNumber":157,"author":{"gitId":"uyencfi"},"content":"    var map \u003d"},{"lineNumber":158,"author":{"gitId":"uyencfi"},"content":"      Array.prototype.map ||"},{"lineNumber":159,"author":{"gitId":"uyencfi"},"content":"      function (fn) {"},{"lineNumber":160,"author":{"gitId":"uyencfi"},"content":"        var arr \u003d this"},{"lineNumber":161,"author":{"gitId":"uyencfi"},"content":"        var newArr \u003d []"},{"lineNumber":162,"author":{"gitId":"uyencfi"},"content":"        for (var i \u003d 0, l \u003d arr.length; i \u003c l; i++) {"},{"lineNumber":163,"author":{"gitId":"uyencfi"},"content":"          newArr[i] \u003d fn(arr[i])"},{"lineNumber":164,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":165,"author":{"gitId":"uyencfi"},"content":"        return newArr"},{"lineNumber":166,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":167,"author":{"gitId":"uyencfi"},"content":"    return map"},{"lineNumber":168,"author":{"gitId":"uyencfi"},"content":"      .call(this.ops, function (op) {"},{"lineNumber":169,"author":{"gitId":"uyencfi"},"content":"        if (op.isRetain()) {"},{"lineNumber":170,"author":{"gitId":"uyencfi"},"content":"          return \"retain \" + op.chars"},{"lineNumber":171,"author":{"gitId":"uyencfi"},"content":"        } else if (op.isInsert()) {"},{"lineNumber":172,"author":{"gitId":"uyencfi"},"content":"          return \"insert \u0027\" + op.text + \"\u0027\""},{"lineNumber":173,"author":{"gitId":"uyencfi"},"content":"        } else {"},{"lineNumber":174,"author":{"gitId":"uyencfi"},"content":"          return \"delete \" + op.chars"},{"lineNumber":175,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":176,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":177,"author":{"gitId":"uyencfi"},"content":"      .join(\", \")"},{"lineNumber":178,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":179,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":180,"author":{"gitId":"uyencfi"},"content":"  // Converts operation into a JSON value."},{"lineNumber":181,"author":{"gitId":"uyencfi"},"content":"  TextOperation.prototype.toJSON \u003d function () {"},{"lineNumber":182,"author":{"gitId":"uyencfi"},"content":"    var ops \u003d []"},{"lineNumber":183,"author":{"gitId":"uyencfi"},"content":"    for (var i \u003d 0; i \u003c this.ops.length; i++) {"},{"lineNumber":184,"author":{"gitId":"uyencfi"},"content":"      // We prefix ops with their attributes if non-empty."},{"lineNumber":185,"author":{"gitId":"uyencfi"},"content":"      if (!this.ops[i].hasEmptyAttributes()) {"},{"lineNumber":186,"author":{"gitId":"uyencfi"},"content":"        ops.push(this.ops[i].attributes)"},{"lineNumber":187,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":188,"author":{"gitId":"uyencfi"},"content":"      if (this.ops[i].type \u003d\u003d\u003d \"retain\") {"},{"lineNumber":189,"author":{"gitId":"uyencfi"},"content":"        ops.push(this.ops[i].chars)"},{"lineNumber":190,"author":{"gitId":"uyencfi"},"content":"      } else if (this.ops[i].type \u003d\u003d\u003d \"insert\") {"},{"lineNumber":191,"author":{"gitId":"uyencfi"},"content":"        ops.push(this.ops[i].text)"},{"lineNumber":192,"author":{"gitId":"uyencfi"},"content":"      } else if (this.ops[i].type \u003d\u003d\u003d \"delete\") {"},{"lineNumber":193,"author":{"gitId":"uyencfi"},"content":"        ops.push(-this.ops[i].chars)"},{"lineNumber":194,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":195,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":196,"author":{"gitId":"uyencfi"},"content":"    // Return an array with /something/ in it, since an empty array will be treated as null by Firebase."},{"lineNumber":197,"author":{"gitId":"uyencfi"},"content":"    if (ops.length \u003d\u003d\u003d 0) {"},{"lineNumber":198,"author":{"gitId":"uyencfi"},"content":"      ops.push(0)"},{"lineNumber":199,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":200,"author":{"gitId":"uyencfi"},"content":"    return ops"},{"lineNumber":201,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":202,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":203,"author":{"gitId":"uyencfi"},"content":"  // Converts a plain JS object into an operation and validates it."},{"lineNumber":204,"author":{"gitId":"uyencfi"},"content":"  TextOperation.fromJSON \u003d function (ops) {"},{"lineNumber":205,"author":{"gitId":"uyencfi"},"content":"    var o \u003d new TextOperation()"},{"lineNumber":206,"author":{"gitId":"uyencfi"},"content":"    for (var i \u003d 0, l \u003d ops.length; i \u003c l; i++) {"},{"lineNumber":207,"author":{"gitId":"uyencfi"},"content":"      var op \u003d ops[i]"},{"lineNumber":208,"author":{"gitId":"uyencfi"},"content":"      var attributes \u003d {}"},{"lineNumber":209,"author":{"gitId":"uyencfi"},"content":"      if (typeof op \u003d\u003d\u003d \"object\") {"},{"lineNumber":210,"author":{"gitId":"uyencfi"},"content":"        attributes \u003d op"},{"lineNumber":211,"author":{"gitId":"uyencfi"},"content":"        i++"},{"lineNumber":212,"author":{"gitId":"uyencfi"},"content":"        op \u003d ops[i]"},{"lineNumber":213,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":214,"author":{"gitId":"uyencfi"},"content":"      if (typeof op \u003d\u003d\u003d \"number\") {"},{"lineNumber":215,"author":{"gitId":"uyencfi"},"content":"        if (op \u003e 0) {"},{"lineNumber":216,"author":{"gitId":"uyencfi"},"content":"          o.retain(op, attributes)"},{"lineNumber":217,"author":{"gitId":"uyencfi"},"content":"        } else {"},{"lineNumber":218,"author":{"gitId":"uyencfi"},"content":"          o[\"delete\"](-op)"},{"lineNumber":219,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":220,"author":{"gitId":"uyencfi"},"content":"      } else {"},{"lineNumber":221,"author":{"gitId":"uyencfi"},"content":"        utils.assert(typeof op \u003d\u003d\u003d \"string\")"},{"lineNumber":222,"author":{"gitId":"uyencfi"},"content":"        o.insert(op, attributes)"},{"lineNumber":223,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":224,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":225,"author":{"gitId":"uyencfi"},"content":"    return o"},{"lineNumber":226,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":227,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":228,"author":{"gitId":"uyencfi"},"content":"  // Apply an operation to a string, returning a new string. Throws an error if"},{"lineNumber":229,"author":{"gitId":"uyencfi"},"content":"  // there\u0027s a mismatch between the input string and the operation."},{"lineNumber":230,"author":{"gitId":"uyencfi"},"content":"  TextOperation.prototype.apply \u003d function (str, oldAttributes, newAttributes) {"},{"lineNumber":231,"author":{"gitId":"uyencfi"},"content":"    var operation \u003d this"},{"lineNumber":232,"author":{"gitId":"uyencfi"},"content":"    oldAttributes \u003d oldAttributes || []"},{"lineNumber":233,"author":{"gitId":"uyencfi"},"content":"    newAttributes \u003d newAttributes || []"},{"lineNumber":234,"author":{"gitId":"uyencfi"},"content":"    if (str.length !\u003d\u003d operation.baseLength) {"},{"lineNumber":235,"author":{"gitId":"uyencfi"},"content":"      throw new Error("},{"lineNumber":236,"author":{"gitId":"uyencfi"},"content":"        \"The operation\u0027s base length must be equal to the string\u0027s length.\""},{"lineNumber":237,"author":{"gitId":"uyencfi"},"content":"      )"},{"lineNumber":238,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":239,"author":{"gitId":"uyencfi"},"content":"    var newStringParts \u003d [],"},{"lineNumber":240,"author":{"gitId":"uyencfi"},"content":"      j \u003d 0,"},{"lineNumber":241,"author":{"gitId":"uyencfi"},"content":"      k,"},{"lineNumber":242,"author":{"gitId":"uyencfi"},"content":"      attr"},{"lineNumber":243,"author":{"gitId":"uyencfi"},"content":"    var oldIndex \u003d 0"},{"lineNumber":244,"author":{"gitId":"uyencfi"},"content":"    var ops \u003d this.ops"},{"lineNumber":245,"author":{"gitId":"uyencfi"},"content":"    for (var i \u003d 0, l \u003d ops.length; i \u003c l; i++) {"},{"lineNumber":246,"author":{"gitId":"uyencfi"},"content":"      var op \u003d ops[i]"},{"lineNumber":247,"author":{"gitId":"uyencfi"},"content":"      if (op.isRetain()) {"},{"lineNumber":248,"author":{"gitId":"uyencfi"},"content":"        if (oldIndex + op.chars \u003e str.length) {"},{"lineNumber":249,"author":{"gitId":"uyencfi"},"content":"          throw new Error("},{"lineNumber":250,"author":{"gitId":"uyencfi"},"content":"            \"Operation can\u0027t retain more characters than are left in the string.\""},{"lineNumber":251,"author":{"gitId":"uyencfi"},"content":"          )"},{"lineNumber":252,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":253,"author":{"gitId":"uyencfi"},"content":"        // Copy skipped part of the retained string."},{"lineNumber":254,"author":{"gitId":"uyencfi"},"content":"        newStringParts[j++] \u003d str.slice(oldIndex, oldIndex + op.chars)"},{"lineNumber":255,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":256,"author":{"gitId":"uyencfi"},"content":"        // Copy (and potentially update) attributes for each char in retained string."},{"lineNumber":257,"author":{"gitId":"uyencfi"},"content":"        for (k \u003d 0; k \u003c op.chars; k++) {"},{"lineNumber":258,"author":{"gitId":"uyencfi"},"content":"          var currAttributes \u003d oldAttributes[oldIndex + k] || {},"},{"lineNumber":259,"author":{"gitId":"uyencfi"},"content":"            updatedAttributes \u003d {}"},{"lineNumber":260,"author":{"gitId":"uyencfi"},"content":"          for (attr in currAttributes) {"},{"lineNumber":261,"author":{"gitId":"uyencfi"},"content":"            updatedAttributes[attr] \u003d currAttributes[attr]"},{"lineNumber":262,"author":{"gitId":"uyencfi"},"content":"            utils.assert(updatedAttributes[attr] !\u003d\u003d false)"},{"lineNumber":263,"author":{"gitId":"uyencfi"},"content":"          }"},{"lineNumber":264,"author":{"gitId":"uyencfi"},"content":"          for (attr in op.attributes) {"},{"lineNumber":265,"author":{"gitId":"uyencfi"},"content":"            if (op.attributes[attr] \u003d\u003d\u003d false) {"},{"lineNumber":266,"author":{"gitId":"uyencfi"},"content":"              delete updatedAttributes[attr]"},{"lineNumber":267,"author":{"gitId":"uyencfi"},"content":"            } else {"},{"lineNumber":268,"author":{"gitId":"uyencfi"},"content":"              updatedAttributes[attr] \u003d op.attributes[attr]"},{"lineNumber":269,"author":{"gitId":"uyencfi"},"content":"            }"},{"lineNumber":270,"author":{"gitId":"uyencfi"},"content":"            utils.assert(updatedAttributes[attr] !\u003d\u003d false)"},{"lineNumber":271,"author":{"gitId":"uyencfi"},"content":"          }"},{"lineNumber":272,"author":{"gitId":"uyencfi"},"content":"          newAttributes.push(updatedAttributes)"},{"lineNumber":273,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":274,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":275,"author":{"gitId":"uyencfi"},"content":"        oldIndex +\u003d op.chars"},{"lineNumber":276,"author":{"gitId":"uyencfi"},"content":"      } else if (op.isInsert()) {"},{"lineNumber":277,"author":{"gitId":"uyencfi"},"content":"        // Insert string."},{"lineNumber":278,"author":{"gitId":"uyencfi"},"content":"        newStringParts[j++] \u003d op.text"},{"lineNumber":279,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":280,"author":{"gitId":"uyencfi"},"content":"        // Insert attributes for each char."},{"lineNumber":281,"author":{"gitId":"uyencfi"},"content":"        for (k \u003d 0; k \u003c op.text.length; k++) {"},{"lineNumber":282,"author":{"gitId":"uyencfi"},"content":"          var insertedAttributes \u003d {}"},{"lineNumber":283,"author":{"gitId":"uyencfi"},"content":"          for (attr in op.attributes) {"},{"lineNumber":284,"author":{"gitId":"uyencfi"},"content":"            insertedAttributes[attr] \u003d op.attributes[attr]"},{"lineNumber":285,"author":{"gitId":"uyencfi"},"content":"            utils.assert(insertedAttributes[attr] !\u003d\u003d false)"},{"lineNumber":286,"author":{"gitId":"uyencfi"},"content":"          }"},{"lineNumber":287,"author":{"gitId":"uyencfi"},"content":"          newAttributes.push(insertedAttributes)"},{"lineNumber":288,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":289,"author":{"gitId":"uyencfi"},"content":"      } else {"},{"lineNumber":290,"author":{"gitId":"uyencfi"},"content":"        // delete op"},{"lineNumber":291,"author":{"gitId":"uyencfi"},"content":"        oldIndex +\u003d op.chars"},{"lineNumber":292,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":293,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":294,"author":{"gitId":"uyencfi"},"content":"    if (oldIndex !\u003d\u003d str.length) {"},{"lineNumber":295,"author":{"gitId":"uyencfi"},"content":"      throw new Error(\"The operation didn\u0027t operate on the whole string.\")"},{"lineNumber":296,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":297,"author":{"gitId":"uyencfi"},"content":"    var newString \u003d newStringParts.join(\"\")"},{"lineNumber":298,"author":{"gitId":"uyencfi"},"content":"    utils.assert(newString.length \u003d\u003d\u003d newAttributes.length)"},{"lineNumber":299,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":300,"author":{"gitId":"uyencfi"},"content":"    return newString"},{"lineNumber":301,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":302,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":303,"author":{"gitId":"uyencfi"},"content":"  // Computes the inverse of an operation. The inverse of an operation is the"},{"lineNumber":304,"author":{"gitId":"uyencfi"},"content":"  // operation that reverts the effects of the operation, e.g. when you have an"},{"lineNumber":305,"author":{"gitId":"uyencfi"},"content":"  // operation \u0027insert(\"hello \"); skip(6);\u0027 then the inverse is \u0027delete(\"hello \");"},{"lineNumber":306,"author":{"gitId":"uyencfi"},"content":"  // skip(6);\u0027. The inverse should be used for implementing undo."},{"lineNumber":307,"author":{"gitId":"uyencfi"},"content":"  TextOperation.prototype.invert \u003d function (str) {"},{"lineNumber":308,"author":{"gitId":"uyencfi"},"content":"    var strIndex \u003d 0"},{"lineNumber":309,"author":{"gitId":"uyencfi"},"content":"    var inverse \u003d new TextOperation()"},{"lineNumber":310,"author":{"gitId":"uyencfi"},"content":"    var ops \u003d this.ops"},{"lineNumber":311,"author":{"gitId":"uyencfi"},"content":"    for (var i \u003d 0, l \u003d ops.length; i \u003c l; i++) {"},{"lineNumber":312,"author":{"gitId":"uyencfi"},"content":"      var op \u003d ops[i]"},{"lineNumber":313,"author":{"gitId":"uyencfi"},"content":"      if (op.isRetain()) {"},{"lineNumber":314,"author":{"gitId":"uyencfi"},"content":"        inverse.retain(op.chars)"},{"lineNumber":315,"author":{"gitId":"uyencfi"},"content":"        strIndex +\u003d op.chars"},{"lineNumber":316,"author":{"gitId":"uyencfi"},"content":"      } else if (op.isInsert()) {"},{"lineNumber":317,"author":{"gitId":"uyencfi"},"content":"        inverse[\"delete\"](op.text.length)"},{"lineNumber":318,"author":{"gitId":"uyencfi"},"content":"      } else {"},{"lineNumber":319,"author":{"gitId":"uyencfi"},"content":"        // delete op"},{"lineNumber":320,"author":{"gitId":"uyencfi"},"content":"        inverse.insert(str.slice(strIndex, strIndex + op.chars))"},{"lineNumber":321,"author":{"gitId":"uyencfi"},"content":"        strIndex +\u003d op.chars"},{"lineNumber":322,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":323,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":324,"author":{"gitId":"uyencfi"},"content":"    return inverse"},{"lineNumber":325,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":326,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":327,"author":{"gitId":"uyencfi"},"content":"  // Compose merges two consecutive operations into one operation, that"},{"lineNumber":328,"author":{"gitId":"uyencfi"},"content":"  // preserves the changes of both. Or, in other words, for each input string S"},{"lineNumber":329,"author":{"gitId":"uyencfi"},"content":"  // and a pair of consecutive operations A and B,"},{"lineNumber":330,"author":{"gitId":"uyencfi"},"content":"  // apply(apply(S, A), B) \u003d apply(S, compose(A, B)) must hold."},{"lineNumber":331,"author":{"gitId":"uyencfi"},"content":"  TextOperation.prototype.compose \u003d function (operation2) {"},{"lineNumber":332,"author":{"gitId":"uyencfi"},"content":"    var operation1 \u003d this"},{"lineNumber":333,"author":{"gitId":"uyencfi"},"content":"    if (operation1.targetLength !\u003d\u003d operation2.baseLength) {"},{"lineNumber":334,"author":{"gitId":"uyencfi"},"content":"      throw new Error("},{"lineNumber":335,"author":{"gitId":"uyencfi"},"content":"        \"The base length of the second operation has to be the target length of the first operation\""},{"lineNumber":336,"author":{"gitId":"uyencfi"},"content":"      )"},{"lineNumber":337,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":338,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":339,"author":{"gitId":"uyencfi"},"content":"    function composeAttributes(first, second, firstOpIsInsert) {"},{"lineNumber":340,"author":{"gitId":"uyencfi"},"content":"      var merged \u003d {},"},{"lineNumber":341,"author":{"gitId":"uyencfi"},"content":"        attr"},{"lineNumber":342,"author":{"gitId":"uyencfi"},"content":"      for (attr in first) {"},{"lineNumber":343,"author":{"gitId":"uyencfi"},"content":"        merged[attr] \u003d first[attr]"},{"lineNumber":344,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":345,"author":{"gitId":"uyencfi"},"content":"      for (attr in second) {"},{"lineNumber":346,"author":{"gitId":"uyencfi"},"content":"        if (firstOpIsInsert \u0026\u0026 second[attr] \u003d\u003d\u003d false) {"},{"lineNumber":347,"author":{"gitId":"uyencfi"},"content":"          delete merged[attr]"},{"lineNumber":348,"author":{"gitId":"uyencfi"},"content":"        } else {"},{"lineNumber":349,"author":{"gitId":"uyencfi"},"content":"          merged[attr] \u003d second[attr]"},{"lineNumber":350,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":351,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":352,"author":{"gitId":"uyencfi"},"content":"      return merged"},{"lineNumber":353,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":354,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":355,"author":{"gitId":"uyencfi"},"content":"    var operation \u003d new TextOperation() // the combined operation"},{"lineNumber":356,"author":{"gitId":"uyencfi"},"content":"    var ops1 \u003d operation1.clone().ops,"},{"lineNumber":357,"author":{"gitId":"uyencfi"},"content":"      ops2 \u003d operation2.clone().ops"},{"lineNumber":358,"author":{"gitId":"uyencfi"},"content":"    var i1 \u003d 0,"},{"lineNumber":359,"author":{"gitId":"uyencfi"},"content":"      i2 \u003d 0 // current index into ops1 respectively ops2"},{"lineNumber":360,"author":{"gitId":"uyencfi"},"content":"    var op1 \u003d ops1[i1++],"},{"lineNumber":361,"author":{"gitId":"uyencfi"},"content":"      op2 \u003d ops2[i2++] // current ops"},{"lineNumber":362,"author":{"gitId":"uyencfi"},"content":"    var attributes"},{"lineNumber":363,"author":{"gitId":"uyencfi"},"content":"    while (true) {"},{"lineNumber":364,"author":{"gitId":"uyencfi"},"content":"      // Dispatch on the type of op1 and op2"},{"lineNumber":365,"author":{"gitId":"uyencfi"},"content":"      if (typeof op1 \u003d\u003d\u003d \"undefined\" \u0026\u0026 typeof op2 \u003d\u003d\u003d \"undefined\") {"},{"lineNumber":366,"author":{"gitId":"uyencfi"},"content":"        // end condition: both ops1 and ops2 have been processed"},{"lineNumber":367,"author":{"gitId":"uyencfi"},"content":"        break"},{"lineNumber":368,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":369,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":370,"author":{"gitId":"uyencfi"},"content":"      if (op1 \u0026\u0026 op1.isDelete()) {"},{"lineNumber":371,"author":{"gitId":"uyencfi"},"content":"        operation[\"delete\"](op1.chars)"},{"lineNumber":372,"author":{"gitId":"uyencfi"},"content":"        op1 \u003d ops1[i1++]"},{"lineNumber":373,"author":{"gitId":"uyencfi"},"content":"        continue"},{"lineNumber":374,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":375,"author":{"gitId":"uyencfi"},"content":"      if (op2 \u0026\u0026 op2.isInsert()) {"},{"lineNumber":376,"author":{"gitId":"uyencfi"},"content":"        operation.insert(op2.text, op2.attributes)"},{"lineNumber":377,"author":{"gitId":"uyencfi"},"content":"        op2 \u003d ops2[i2++]"},{"lineNumber":378,"author":{"gitId":"uyencfi"},"content":"        continue"},{"lineNumber":379,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":380,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":381,"author":{"gitId":"uyencfi"},"content":"      if (typeof op1 \u003d\u003d\u003d \"undefined\") {"},{"lineNumber":382,"author":{"gitId":"uyencfi"},"content":"        throw new Error("},{"lineNumber":383,"author":{"gitId":"uyencfi"},"content":"          \"Cannot compose operations: first operation is too short.\""},{"lineNumber":384,"author":{"gitId":"uyencfi"},"content":"        )"},{"lineNumber":385,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":386,"author":{"gitId":"uyencfi"},"content":"      if (typeof op2 \u003d\u003d\u003d \"undefined\") {"},{"lineNumber":387,"author":{"gitId":"uyencfi"},"content":"        throw new Error("},{"lineNumber":388,"author":{"gitId":"uyencfi"},"content":"          \"Cannot compose operations: first operation is too long.\""},{"lineNumber":389,"author":{"gitId":"uyencfi"},"content":"        )"},{"lineNumber":390,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":391,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":392,"author":{"gitId":"uyencfi"},"content":"      if (op1.isRetain() \u0026\u0026 op2.isRetain()) {"},{"lineNumber":393,"author":{"gitId":"uyencfi"},"content":"        attributes \u003d composeAttributes(op1.attributes, op2.attributes)"},{"lineNumber":394,"author":{"gitId":"uyencfi"},"content":"        if (op1.chars \u003e op2.chars) {"},{"lineNumber":395,"author":{"gitId":"uyencfi"},"content":"          operation.retain(op2.chars, attributes)"},{"lineNumber":396,"author":{"gitId":"uyencfi"},"content":"          op1.chars -\u003d op2.chars"},{"lineNumber":397,"author":{"gitId":"uyencfi"},"content":"          op2 \u003d ops2[i2++]"},{"lineNumber":398,"author":{"gitId":"uyencfi"},"content":"        } else if (op1.chars \u003d\u003d\u003d op2.chars) {"},{"lineNumber":399,"author":{"gitId":"uyencfi"},"content":"          operation.retain(op1.chars, attributes)"},{"lineNumber":400,"author":{"gitId":"uyencfi"},"content":"          op1 \u003d ops1[i1++]"},{"lineNumber":401,"author":{"gitId":"uyencfi"},"content":"          op2 \u003d ops2[i2++]"},{"lineNumber":402,"author":{"gitId":"uyencfi"},"content":"        } else {"},{"lineNumber":403,"author":{"gitId":"uyencfi"},"content":"          operation.retain(op1.chars, attributes)"},{"lineNumber":404,"author":{"gitId":"uyencfi"},"content":"          op2.chars -\u003d op1.chars"},{"lineNumber":405,"author":{"gitId":"uyencfi"},"content":"          op1 \u003d ops1[i1++]"},{"lineNumber":406,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":407,"author":{"gitId":"uyencfi"},"content":"      } else if (op1.isInsert() \u0026\u0026 op2.isDelete()) {"},{"lineNumber":408,"author":{"gitId":"uyencfi"},"content":"        if (op1.text.length \u003e op2.chars) {"},{"lineNumber":409,"author":{"gitId":"uyencfi"},"content":"          op1.text \u003d op1.text.slice(op2.chars)"},{"lineNumber":410,"author":{"gitId":"uyencfi"},"content":"          op2 \u003d ops2[i2++]"},{"lineNumber":411,"author":{"gitId":"uyencfi"},"content":"        } else if (op1.text.length \u003d\u003d\u003d op2.chars) {"},{"lineNumber":412,"author":{"gitId":"uyencfi"},"content":"          op1 \u003d ops1[i1++]"},{"lineNumber":413,"author":{"gitId":"uyencfi"},"content":"          op2 \u003d ops2[i2++]"},{"lineNumber":414,"author":{"gitId":"uyencfi"},"content":"        } else {"},{"lineNumber":415,"author":{"gitId":"uyencfi"},"content":"          op2.chars -\u003d op1.text.length"},{"lineNumber":416,"author":{"gitId":"uyencfi"},"content":"          op1 \u003d ops1[i1++]"},{"lineNumber":417,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":418,"author":{"gitId":"uyencfi"},"content":"      } else if (op1.isInsert() \u0026\u0026 op2.isRetain()) {"},{"lineNumber":419,"author":{"gitId":"uyencfi"},"content":"        attributes \u003d composeAttributes("},{"lineNumber":420,"author":{"gitId":"uyencfi"},"content":"          op1.attributes,"},{"lineNumber":421,"author":{"gitId":"uyencfi"},"content":"          op2.attributes,"},{"lineNumber":422,"author":{"gitId":"uyencfi"},"content":"          /*firstOpIsInsert\u003d*/ true"},{"lineNumber":423,"author":{"gitId":"uyencfi"},"content":"        )"},{"lineNumber":424,"author":{"gitId":"uyencfi"},"content":"        if (op1.text.length \u003e op2.chars) {"},{"lineNumber":425,"author":{"gitId":"uyencfi"},"content":"          operation.insert(op1.text.slice(0, op2.chars), attributes)"},{"lineNumber":426,"author":{"gitId":"uyencfi"},"content":"          op1.text \u003d op1.text.slice(op2.chars)"},{"lineNumber":427,"author":{"gitId":"uyencfi"},"content":"          op2 \u003d ops2[i2++]"},{"lineNumber":428,"author":{"gitId":"uyencfi"},"content":"        } else if (op1.text.length \u003d\u003d\u003d op2.chars) {"},{"lineNumber":429,"author":{"gitId":"uyencfi"},"content":"          operation.insert(op1.text, attributes)"},{"lineNumber":430,"author":{"gitId":"uyencfi"},"content":"          op1 \u003d ops1[i1++]"},{"lineNumber":431,"author":{"gitId":"uyencfi"},"content":"          op2 \u003d ops2[i2++]"},{"lineNumber":432,"author":{"gitId":"uyencfi"},"content":"        } else {"},{"lineNumber":433,"author":{"gitId":"uyencfi"},"content":"          operation.insert(op1.text, attributes)"},{"lineNumber":434,"author":{"gitId":"uyencfi"},"content":"          op2.chars -\u003d op1.text.length"},{"lineNumber":435,"author":{"gitId":"uyencfi"},"content":"          op1 \u003d ops1[i1++]"},{"lineNumber":436,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":437,"author":{"gitId":"uyencfi"},"content":"      } else if (op1.isRetain() \u0026\u0026 op2.isDelete()) {"},{"lineNumber":438,"author":{"gitId":"uyencfi"},"content":"        if (op1.chars \u003e op2.chars) {"},{"lineNumber":439,"author":{"gitId":"uyencfi"},"content":"          operation[\"delete\"](op2.chars)"},{"lineNumber":440,"author":{"gitId":"uyencfi"},"content":"          op1.chars -\u003d op2.chars"},{"lineNumber":441,"author":{"gitId":"uyencfi"},"content":"          op2 \u003d ops2[i2++]"},{"lineNumber":442,"author":{"gitId":"uyencfi"},"content":"        } else if (op1.chars \u003d\u003d\u003d op2.chars) {"},{"lineNumber":443,"author":{"gitId":"uyencfi"},"content":"          operation[\"delete\"](op2.chars)"},{"lineNumber":444,"author":{"gitId":"uyencfi"},"content":"          op1 \u003d ops1[i1++]"},{"lineNumber":445,"author":{"gitId":"uyencfi"},"content":"          op2 \u003d ops2[i2++]"},{"lineNumber":446,"author":{"gitId":"uyencfi"},"content":"        } else {"},{"lineNumber":447,"author":{"gitId":"uyencfi"},"content":"          operation[\"delete\"](op1.chars)"},{"lineNumber":448,"author":{"gitId":"uyencfi"},"content":"          op2.chars -\u003d op1.chars"},{"lineNumber":449,"author":{"gitId":"uyencfi"},"content":"          op1 \u003d ops1[i1++]"},{"lineNumber":450,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":451,"author":{"gitId":"uyencfi"},"content":"      } else {"},{"lineNumber":452,"author":{"gitId":"uyencfi"},"content":"        throw new Error("},{"lineNumber":453,"author":{"gitId":"uyencfi"},"content":"          \"This shouldn\u0027t happen: op1: \" +"},{"lineNumber":454,"author":{"gitId":"uyencfi"},"content":"            JSON.stringify(op1) +"},{"lineNumber":455,"author":{"gitId":"uyencfi"},"content":"            \", op2: \" +"},{"lineNumber":456,"author":{"gitId":"uyencfi"},"content":"            JSON.stringify(op2)"},{"lineNumber":457,"author":{"gitId":"uyencfi"},"content":"        )"},{"lineNumber":458,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":459,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":460,"author":{"gitId":"uyencfi"},"content":"    return operation"},{"lineNumber":461,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":462,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":463,"author":{"gitId":"uyencfi"},"content":"  function getSimpleOp(operation) {"},{"lineNumber":464,"author":{"gitId":"uyencfi"},"content":"    var ops \u003d operation.ops"},{"lineNumber":465,"author":{"gitId":"uyencfi"},"content":"    // eslint-disable-next-line default-case"},{"lineNumber":466,"author":{"gitId":"uyencfi"},"content":"    switch (ops.length) {"},{"lineNumber":467,"author":{"gitId":"uyencfi"},"content":"      case 1:"},{"lineNumber":468,"author":{"gitId":"uyencfi"},"content":"        return ops[0]"},{"lineNumber":469,"author":{"gitId":"uyencfi"},"content":"      case 2:"},{"lineNumber":470,"author":{"gitId":"uyencfi"},"content":"        return ops[0].isRetain() ? ops[1] : ops[1].isRetain() ? ops[0] : null"},{"lineNumber":471,"author":{"gitId":"uyencfi"},"content":"      case 3:"},{"lineNumber":472,"author":{"gitId":"uyencfi"},"content":"        if (ops[0].isRetain() \u0026\u0026 ops[2].isRetain()) {"},{"lineNumber":473,"author":{"gitId":"uyencfi"},"content":"          return ops[1]"},{"lineNumber":474,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":475,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":476,"author":{"gitId":"uyencfi"},"content":"    return null"},{"lineNumber":477,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":478,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":479,"author":{"gitId":"uyencfi"},"content":"  function getStartIndex(operation) {"},{"lineNumber":480,"author":{"gitId":"uyencfi"},"content":"    if (operation.ops[0].isRetain()) {"},{"lineNumber":481,"author":{"gitId":"uyencfi"},"content":"      return operation.ops[0].chars"},{"lineNumber":482,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":483,"author":{"gitId":"uyencfi"},"content":"    return 0"},{"lineNumber":484,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":485,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":486,"author":{"gitId":"uyencfi"},"content":"  // When you use ctrl-z to undo your latest changes, you expect the program not"},{"lineNumber":487,"author":{"gitId":"uyencfi"},"content":"  // to undo every single keystroke but to undo your last sentence you wrote at"},{"lineNumber":488,"author":{"gitId":"uyencfi"},"content":"  // a stretch or the deletion you did by holding the backspace key down. This"},{"lineNumber":489,"author":{"gitId":"uyencfi"},"content":"  // This can be implemented by composing operations on the undo stack. This"},{"lineNumber":490,"author":{"gitId":"uyencfi"},"content":"  // method can help decide whether two operations should be composed. It"},{"lineNumber":491,"author":{"gitId":"uyencfi"},"content":"  // returns true if the operations are consecutive insert operations or both"},{"lineNumber":492,"author":{"gitId":"uyencfi"},"content":"  // operations delete text at the same position. You may want to include other"},{"lineNumber":493,"author":{"gitId":"uyencfi"},"content":"  // factors like the time since the last change in your decision."},{"lineNumber":494,"author":{"gitId":"uyencfi"},"content":"  TextOperation.prototype.shouldBeComposedWith \u003d function (other) {"},{"lineNumber":495,"author":{"gitId":"uyencfi"},"content":"    if (this.isNoop() || other.isNoop()) {"},{"lineNumber":496,"author":{"gitId":"uyencfi"},"content":"      return true"},{"lineNumber":497,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":498,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":499,"author":{"gitId":"uyencfi"},"content":"    var startA \u003d getStartIndex(this),"},{"lineNumber":500,"author":{"gitId":"uyencfi"},"content":"      startB \u003d getStartIndex(other)"},{"lineNumber":501,"author":{"gitId":"uyencfi"},"content":"    var simpleA \u003d getSimpleOp(this),"},{"lineNumber":502,"author":{"gitId":"uyencfi"},"content":"      simpleB \u003d getSimpleOp(other)"},{"lineNumber":503,"author":{"gitId":"uyencfi"},"content":"    if (!simpleA || !simpleB) {"},{"lineNumber":504,"author":{"gitId":"uyencfi"},"content":"      return false"},{"lineNumber":505,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":506,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":507,"author":{"gitId":"uyencfi"},"content":"    if (simpleA.isInsert() \u0026\u0026 simpleB.isInsert()) {"},{"lineNumber":508,"author":{"gitId":"uyencfi"},"content":"      return startA + simpleA.text.length \u003d\u003d\u003d startB"},{"lineNumber":509,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":510,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":511,"author":{"gitId":"uyencfi"},"content":"    if (simpleA.isDelete() \u0026\u0026 simpleB.isDelete()) {"},{"lineNumber":512,"author":{"gitId":"uyencfi"},"content":"      // there are two possibilities to delete: with backspace and with the"},{"lineNumber":513,"author":{"gitId":"uyencfi"},"content":"      // delete key."},{"lineNumber":514,"author":{"gitId":"uyencfi"},"content":"      return startB + simpleB.chars \u003d\u003d\u003d startA || startA \u003d\u003d\u003d startB"},{"lineNumber":515,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":516,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":517,"author":{"gitId":"uyencfi"},"content":"    return false"},{"lineNumber":518,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":519,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":520,"author":{"gitId":"uyencfi"},"content":"  // Decides whether two operations should be composed with each other"},{"lineNumber":521,"author":{"gitId":"uyencfi"},"content":"  // if they were inverted, that is"},{"lineNumber":522,"author":{"gitId":"uyencfi"},"content":"  // `shouldBeComposedWith(a, b) \u003d shouldBeComposedWithInverted(b^{-1}, a^{-1})`."},{"lineNumber":523,"author":{"gitId":"uyencfi"},"content":"  TextOperation.prototype.shouldBeComposedWithInverted \u003d function (other) {"},{"lineNumber":524,"author":{"gitId":"uyencfi"},"content":"    if (this.isNoop() || other.isNoop()) {"},{"lineNumber":525,"author":{"gitId":"uyencfi"},"content":"      return true"},{"lineNumber":526,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":527,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":528,"author":{"gitId":"uyencfi"},"content":"    var startA \u003d getStartIndex(this),"},{"lineNumber":529,"author":{"gitId":"uyencfi"},"content":"      startB \u003d getStartIndex(other)"},{"lineNumber":530,"author":{"gitId":"uyencfi"},"content":"    var simpleA \u003d getSimpleOp(this),"},{"lineNumber":531,"author":{"gitId":"uyencfi"},"content":"      simpleB \u003d getSimpleOp(other)"},{"lineNumber":532,"author":{"gitId":"uyencfi"},"content":"    if (!simpleA || !simpleB) {"},{"lineNumber":533,"author":{"gitId":"uyencfi"},"content":"      return false"},{"lineNumber":534,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":535,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":536,"author":{"gitId":"uyencfi"},"content":"    if (simpleA.isInsert() \u0026\u0026 simpleB.isInsert()) {"},{"lineNumber":537,"author":{"gitId":"uyencfi"},"content":"      return startA + simpleA.text.length \u003d\u003d\u003d startB || startA \u003d\u003d\u003d startB"},{"lineNumber":538,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":539,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":540,"author":{"gitId":"uyencfi"},"content":"    if (simpleA.isDelete() \u0026\u0026 simpleB.isDelete()) {"},{"lineNumber":541,"author":{"gitId":"uyencfi"},"content":"      return startB + simpleB.chars \u003d\u003d\u003d startA"},{"lineNumber":542,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":543,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":544,"author":{"gitId":"uyencfi"},"content":"    return false"},{"lineNumber":545,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":546,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":547,"author":{"gitId":"uyencfi"},"content":"  TextOperation.transformAttributes \u003d function (attributes1, attributes2) {"},{"lineNumber":548,"author":{"gitId":"uyencfi"},"content":"    var attributes1prime \u003d {},"},{"lineNumber":549,"author":{"gitId":"uyencfi"},"content":"      attributes2prime \u003d {}"},{"lineNumber":550,"author":{"gitId":"uyencfi"},"content":"    var attr,"},{"lineNumber":551,"author":{"gitId":"uyencfi"},"content":"      allAttrs \u003d {}"},{"lineNumber":552,"author":{"gitId":"uyencfi"},"content":"    for (attr in attributes1) {"},{"lineNumber":553,"author":{"gitId":"uyencfi"},"content":"      allAttrs[attr] \u003d true"},{"lineNumber":554,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":555,"author":{"gitId":"uyencfi"},"content":"    for (attr in attributes2) {"},{"lineNumber":556,"author":{"gitId":"uyencfi"},"content":"      allAttrs[attr] \u003d true"},{"lineNumber":557,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":558,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":559,"author":{"gitId":"uyencfi"},"content":"    for (attr in allAttrs) {"},{"lineNumber":560,"author":{"gitId":"uyencfi"},"content":"      var attr1 \u003d attributes1[attr],"},{"lineNumber":561,"author":{"gitId":"uyencfi"},"content":"        attr2 \u003d attributes2[attr]"},{"lineNumber":562,"author":{"gitId":"uyencfi"},"content":"      utils.assert(attr1 !\u003d null || attr2 !\u003d null)"},{"lineNumber":563,"author":{"gitId":"uyencfi"},"content":"      if (attr1 \u003d\u003d null) {"},{"lineNumber":564,"author":{"gitId":"uyencfi"},"content":"        // Only modified by attributes2; keep it."},{"lineNumber":565,"author":{"gitId":"uyencfi"},"content":"        attributes2prime[attr] \u003d attr2"},{"lineNumber":566,"author":{"gitId":"uyencfi"},"content":"      } else if (attr2 \u003d\u003d null) {"},{"lineNumber":567,"author":{"gitId":"uyencfi"},"content":"        // only modified by attributes1; keep it"},{"lineNumber":568,"author":{"gitId":"uyencfi"},"content":"        attributes1prime[attr] \u003d attr1"},{"lineNumber":569,"author":{"gitId":"uyencfi"},"content":"      } else if (attr1 \u003d\u003d\u003d attr2) {"},{"lineNumber":570,"author":{"gitId":"uyencfi"},"content":"        // Both set it to the same value.  Nothing to do."},{"lineNumber":571,"author":{"gitId":"uyencfi"},"content":"      } else {"},{"lineNumber":572,"author":{"gitId":"uyencfi"},"content":"        // attr1 and attr2 are different. Prefer attr1."},{"lineNumber":573,"author":{"gitId":"uyencfi"},"content":"        attributes1prime[attr] \u003d attr1"},{"lineNumber":574,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":575,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":576,"author":{"gitId":"uyencfi"},"content":"    return [attributes1prime, attributes2prime]"},{"lineNumber":577,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":578,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":579,"author":{"gitId":"uyencfi"},"content":"  // Transform takes two operations A and B that happened concurrently and"},{"lineNumber":580,"author":{"gitId":"uyencfi"},"content":"  // produces two operations A\u0027 and B\u0027 (in an array) such that"},{"lineNumber":581,"author":{"gitId":"uyencfi"},"content":"  // `apply(apply(S, A), B\u0027) \u003d apply(apply(S, B), A\u0027)`. This function is the"},{"lineNumber":582,"author":{"gitId":"uyencfi"},"content":"  // heart of OT."},{"lineNumber":583,"author":{"gitId":"uyencfi"},"content":"  TextOperation.transform \u003d function (operation1, operation2) {"},{"lineNumber":584,"author":{"gitId":"uyencfi"},"content":"    if (operation1.baseLength !\u003d\u003d operation2.baseLength) {"},{"lineNumber":585,"author":{"gitId":"uyencfi"},"content":"      throw new Error(\"Both operations have to have the same base length\")"},{"lineNumber":586,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":587,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":588,"author":{"gitId":"uyencfi"},"content":"    var operation1prime \u003d new TextOperation()"},{"lineNumber":589,"author":{"gitId":"uyencfi"},"content":"    var operation2prime \u003d new TextOperation()"},{"lineNumber":590,"author":{"gitId":"uyencfi"},"content":"    var ops1 \u003d operation1.clone().ops,"},{"lineNumber":591,"author":{"gitId":"uyencfi"},"content":"      ops2 \u003d operation2.clone().ops"},{"lineNumber":592,"author":{"gitId":"uyencfi"},"content":"    var i1 \u003d 0,"},{"lineNumber":593,"author":{"gitId":"uyencfi"},"content":"      i2 \u003d 0"},{"lineNumber":594,"author":{"gitId":"uyencfi"},"content":"    var op1 \u003d ops1[i1++],"},{"lineNumber":595,"author":{"gitId":"uyencfi"},"content":"      op2 \u003d ops2[i2++]"},{"lineNumber":596,"author":{"gitId":"uyencfi"},"content":"    while (true) {"},{"lineNumber":597,"author":{"gitId":"uyencfi"},"content":"      // At every iteration of the loop, the imaginary cursor that both"},{"lineNumber":598,"author":{"gitId":"uyencfi"},"content":"      // operation1 and operation2 have that operates on the input string must"},{"lineNumber":599,"author":{"gitId":"uyencfi"},"content":"      // have the same position in the input string."},{"lineNumber":600,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":601,"author":{"gitId":"uyencfi"},"content":"      if (typeof op1 \u003d\u003d\u003d \"undefined\" \u0026\u0026 typeof op2 \u003d\u003d\u003d \"undefined\") {"},{"lineNumber":602,"author":{"gitId":"uyencfi"},"content":"        // end condition: both ops1 and ops2 have been processed"},{"lineNumber":603,"author":{"gitId":"uyencfi"},"content":"        break"},{"lineNumber":604,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":605,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":606,"author":{"gitId":"uyencfi"},"content":"      // next two cases: one or both ops are insert ops"},{"lineNumber":607,"author":{"gitId":"uyencfi"},"content":"      // \u003d\u003e insert the string in the corresponding prime operation, skip it in"},{"lineNumber":608,"author":{"gitId":"uyencfi"},"content":"      // the other one. If both op1 and op2 are insert ops, prefer op1."},{"lineNumber":609,"author":{"gitId":"uyencfi"},"content":"      if (op1 \u0026\u0026 op1.isInsert()) {"},{"lineNumber":610,"author":{"gitId":"uyencfi"},"content":"        operation1prime.insert(op1.text, op1.attributes)"},{"lineNumber":611,"author":{"gitId":"uyencfi"},"content":"        operation2prime.retain(op1.text.length)"},{"lineNumber":612,"author":{"gitId":"uyencfi"},"content":"        op1 \u003d ops1[i1++]"},{"lineNumber":613,"author":{"gitId":"uyencfi"},"content":"        continue"},{"lineNumber":614,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":615,"author":{"gitId":"uyencfi"},"content":"      if (op2 \u0026\u0026 op2.isInsert()) {"},{"lineNumber":616,"author":{"gitId":"uyencfi"},"content":"        operation1prime.retain(op2.text.length)"},{"lineNumber":617,"author":{"gitId":"uyencfi"},"content":"        operation2prime.insert(op2.text, op2.attributes)"},{"lineNumber":618,"author":{"gitId":"uyencfi"},"content":"        op2 \u003d ops2[i2++]"},{"lineNumber":619,"author":{"gitId":"uyencfi"},"content":"        continue"},{"lineNumber":620,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":621,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":622,"author":{"gitId":"uyencfi"},"content":"      if (typeof op1 \u003d\u003d\u003d \"undefined\") {"},{"lineNumber":623,"author":{"gitId":"uyencfi"},"content":"        throw new Error("},{"lineNumber":624,"author":{"gitId":"uyencfi"},"content":"          \"Cannot transform operations: first operation is too short.\""},{"lineNumber":625,"author":{"gitId":"uyencfi"},"content":"        )"},{"lineNumber":626,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":627,"author":{"gitId":"uyencfi"},"content":"      if (typeof op2 \u003d\u003d\u003d \"undefined\") {"},{"lineNumber":628,"author":{"gitId":"uyencfi"},"content":"        throw new Error("},{"lineNumber":629,"author":{"gitId":"uyencfi"},"content":"          \"Cannot transform operations: first operation is too long.\""},{"lineNumber":630,"author":{"gitId":"uyencfi"},"content":"        )"},{"lineNumber":631,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":632,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":633,"author":{"gitId":"uyencfi"},"content":"      var minl"},{"lineNumber":634,"author":{"gitId":"uyencfi"},"content":"      if (op1.isRetain() \u0026\u0026 op2.isRetain()) {"},{"lineNumber":635,"author":{"gitId":"uyencfi"},"content":"        // Simple case: retain/retain"},{"lineNumber":636,"author":{"gitId":"uyencfi"},"content":"        var attributesPrime \u003d TextOperation.transformAttributes("},{"lineNumber":637,"author":{"gitId":"uyencfi"},"content":"          op1.attributes,"},{"lineNumber":638,"author":{"gitId":"uyencfi"},"content":"          op2.attributes"},{"lineNumber":639,"author":{"gitId":"uyencfi"},"content":"        )"},{"lineNumber":640,"author":{"gitId":"uyencfi"},"content":"        if (op1.chars \u003e op2.chars) {"},{"lineNumber":641,"author":{"gitId":"uyencfi"},"content":"          minl \u003d op2.chars"},{"lineNumber":642,"author":{"gitId":"uyencfi"},"content":"          op1.chars -\u003d op2.chars"},{"lineNumber":643,"author":{"gitId":"uyencfi"},"content":"          op2 \u003d ops2[i2++]"},{"lineNumber":644,"author":{"gitId":"uyencfi"},"content":"        } else if (op1.chars \u003d\u003d\u003d op2.chars) {"},{"lineNumber":645,"author":{"gitId":"uyencfi"},"content":"          minl \u003d op2.chars"},{"lineNumber":646,"author":{"gitId":"uyencfi"},"content":"          op1 \u003d ops1[i1++]"},{"lineNumber":647,"author":{"gitId":"uyencfi"},"content":"          op2 \u003d ops2[i2++]"},{"lineNumber":648,"author":{"gitId":"uyencfi"},"content":"        } else {"},{"lineNumber":649,"author":{"gitId":"uyencfi"},"content":"          minl \u003d op1.chars"},{"lineNumber":650,"author":{"gitId":"uyencfi"},"content":"          op2.chars -\u003d op1.chars"},{"lineNumber":651,"author":{"gitId":"uyencfi"},"content":"          op1 \u003d ops1[i1++]"},{"lineNumber":652,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":653,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":654,"author":{"gitId":"uyencfi"},"content":"        operation1prime.retain(minl, attributesPrime[0])"},{"lineNumber":655,"author":{"gitId":"uyencfi"},"content":"        operation2prime.retain(minl, attributesPrime[1])"},{"lineNumber":656,"author":{"gitId":"uyencfi"},"content":"      } else if (op1.isDelete() \u0026\u0026 op2.isDelete()) {"},{"lineNumber":657,"author":{"gitId":"uyencfi"},"content":"        // Both operations delete the same string at the same position. We don\u0027t"},{"lineNumber":658,"author":{"gitId":"uyencfi"},"content":"        // need to produce any operations, we just skip over the delete ops and"},{"lineNumber":659,"author":{"gitId":"uyencfi"},"content":"        // handle the case that one operation deletes more than the other."},{"lineNumber":660,"author":{"gitId":"uyencfi"},"content":"        if (op1.chars \u003e op2.chars) {"},{"lineNumber":661,"author":{"gitId":"uyencfi"},"content":"          op1.chars -\u003d op2.chars"},{"lineNumber":662,"author":{"gitId":"uyencfi"},"content":"          op2 \u003d ops2[i2++]"},{"lineNumber":663,"author":{"gitId":"uyencfi"},"content":"        } else if (op1.chars \u003d\u003d\u003d op2.chars) {"},{"lineNumber":664,"author":{"gitId":"uyencfi"},"content":"          op1 \u003d ops1[i1++]"},{"lineNumber":665,"author":{"gitId":"uyencfi"},"content":"          op2 \u003d ops2[i2++]"},{"lineNumber":666,"author":{"gitId":"uyencfi"},"content":"        } else {"},{"lineNumber":667,"author":{"gitId":"uyencfi"},"content":"          op2.chars -\u003d op1.chars"},{"lineNumber":668,"author":{"gitId":"uyencfi"},"content":"          op1 \u003d ops1[i1++]"},{"lineNumber":669,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":670,"author":{"gitId":"uyencfi"},"content":"        // next two cases: delete/retain and retain/delete"},{"lineNumber":671,"author":{"gitId":"uyencfi"},"content":"      } else if (op1.isDelete() \u0026\u0026 op2.isRetain()) {"},{"lineNumber":672,"author":{"gitId":"uyencfi"},"content":"        if (op1.chars \u003e op2.chars) {"},{"lineNumber":673,"author":{"gitId":"uyencfi"},"content":"          minl \u003d op2.chars"},{"lineNumber":674,"author":{"gitId":"uyencfi"},"content":"          op1.chars -\u003d op2.chars"},{"lineNumber":675,"author":{"gitId":"uyencfi"},"content":"          op2 \u003d ops2[i2++]"},{"lineNumber":676,"author":{"gitId":"uyencfi"},"content":"        } else if (op1.chars \u003d\u003d\u003d op2.chars) {"},{"lineNumber":677,"author":{"gitId":"uyencfi"},"content":"          minl \u003d op2.chars"},{"lineNumber":678,"author":{"gitId":"uyencfi"},"content":"          op1 \u003d ops1[i1++]"},{"lineNumber":679,"author":{"gitId":"uyencfi"},"content":"          op2 \u003d ops2[i2++]"},{"lineNumber":680,"author":{"gitId":"uyencfi"},"content":"        } else {"},{"lineNumber":681,"author":{"gitId":"uyencfi"},"content":"          minl \u003d op1.chars"},{"lineNumber":682,"author":{"gitId":"uyencfi"},"content":"          op2.chars -\u003d op1.chars"},{"lineNumber":683,"author":{"gitId":"uyencfi"},"content":"          op1 \u003d ops1[i1++]"},{"lineNumber":684,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":685,"author":{"gitId":"uyencfi"},"content":"        operation1prime[\"delete\"](minl)"},{"lineNumber":686,"author":{"gitId":"uyencfi"},"content":"      } else if (op1.isRetain() \u0026\u0026 op2.isDelete()) {"},{"lineNumber":687,"author":{"gitId":"uyencfi"},"content":"        if (op1.chars \u003e op2.chars) {"},{"lineNumber":688,"author":{"gitId":"uyencfi"},"content":"          minl \u003d op2.chars"},{"lineNumber":689,"author":{"gitId":"uyencfi"},"content":"          op1.chars -\u003d op2.chars"},{"lineNumber":690,"author":{"gitId":"uyencfi"},"content":"          op2 \u003d ops2[i2++]"},{"lineNumber":691,"author":{"gitId":"uyencfi"},"content":"        } else if (op1.chars \u003d\u003d\u003d op2.chars) {"},{"lineNumber":692,"author":{"gitId":"uyencfi"},"content":"          minl \u003d op1.chars"},{"lineNumber":693,"author":{"gitId":"uyencfi"},"content":"          op1 \u003d ops1[i1++]"},{"lineNumber":694,"author":{"gitId":"uyencfi"},"content":"          op2 \u003d ops2[i2++]"},{"lineNumber":695,"author":{"gitId":"uyencfi"},"content":"        } else {"},{"lineNumber":696,"author":{"gitId":"uyencfi"},"content":"          minl \u003d op1.chars"},{"lineNumber":697,"author":{"gitId":"uyencfi"},"content":"          op2.chars -\u003d op1.chars"},{"lineNumber":698,"author":{"gitId":"uyencfi"},"content":"          op1 \u003d ops1[i1++]"},{"lineNumber":699,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":700,"author":{"gitId":"uyencfi"},"content":"        operation2prime[\"delete\"](minl)"},{"lineNumber":701,"author":{"gitId":"uyencfi"},"content":"      } else {"},{"lineNumber":702,"author":{"gitId":"uyencfi"},"content":"        throw new Error(\"The two operations aren\u0027t compatible\")"},{"lineNumber":703,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":704,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":705,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":706,"author":{"gitId":"uyencfi"},"content":"    return [operation1prime, operation2prime]"},{"lineNumber":707,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":708,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":709,"author":{"gitId":"uyencfi"},"content":"  // convenience method to write transform(a, b) as a.transform(b)"},{"lineNumber":710,"author":{"gitId":"uyencfi"},"content":"  TextOperation.prototype.transform \u003d function (other) {"},{"lineNumber":711,"author":{"gitId":"uyencfi"},"content":"    return TextOperation.transform(this, other)"},{"lineNumber":712,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":713,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":714,"author":{"gitId":"uyencfi"},"content":"  return TextOperation"},{"lineNumber":715,"author":{"gitId":"uyencfi"},"content":"})()"}],"authorContributionMap":{"uyencfi":715}},{"path":"frontend/src/components/collaboration/lib/undo-manager.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"export const UndoManager \u003d (function () {"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"  var NORMAL_STATE \u003d \"normal\""},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"  var UNDOING_STATE \u003d \"undoing\""},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"  var REDOING_STATE \u003d \"redoing\""},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"  // Create a new UndoManager with an optional maximum history size."},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"  function UndoManager(maxItems) {"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"    this.maxItems \u003d maxItems || 50"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"    this.state \u003d NORMAL_STATE"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"    this.dontCompose \u003d false"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"    this.undoStack \u003d []"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"    this.redoStack \u003d []"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"  // Add an operation to the undo or redo stack, depending on the current state"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"  // of the UndoManager. The operation added must be the inverse of the last"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"  // edit. When `compose` is true, compose the operation with the last operation"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"  // unless the last operation was alread pushed on the redo stack or was hidden"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"  // by a newer operation on the undo stack."},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"  UndoManager.prototype.add \u003d function (operation, compose) {"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"    if (this.state \u003d\u003d\u003d UNDOING_STATE) {"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"      this.redoStack.push(operation)"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"      this.dontCompose \u003d true"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"    } else if (this.state \u003d\u003d\u003d REDOING_STATE) {"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"      this.undoStack.push(operation)"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"      this.dontCompose \u003d true"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"    } else {"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"      var undoStack \u003d this.undoStack"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"      if (!this.dontCompose \u0026\u0026 compose \u0026\u0026 undoStack.length \u003e 0) {"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"        undoStack.push(operation.compose(undoStack.pop()))"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"      } else {"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"        undoStack.push(operation)"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"        if (undoStack.length \u003e this.maxItems) {"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"          undoStack.shift()"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"      this.dontCompose \u003d false"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"      this.redoStack \u003d []"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"  function transformStack(stack, operation) {"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":"    var newStack \u003d []"},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"    var Operation \u003d operation.constructor"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"    for (var i \u003d stack.length - 1; i \u003e\u003d 0; i--) {"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"      var pair \u003d Operation.transform(stack[i], operation)"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"      if (typeof pair[0].isNoop !\u003d\u003d \"function\" || !pair[0].isNoop()) {"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"        newStack.push(pair[0])"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"      operation \u003d pair[1]"},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"    return newStack.reverse()"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"  // Transform the undo and redo stacks against a operation by another client."},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"  UndoManager.prototype.transform \u003d function (operation) {"},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":"    this.undoStack \u003d transformStack(this.undoStack, operation)"},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"    this.redoStack \u003d transformStack(this.redoStack, operation)"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"  // Perform an undo by calling a function with the latest operation on the undo"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"  // stack. The function is expected to call the `add` method with the inverse"},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":"  // of the operation, which pushes the inverse on the redo stack."},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"  UndoManager.prototype.performUndo \u003d function (fn) {"},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"    this.state \u003d UNDOING_STATE"},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":"    if (this.undoStack.length \u003d\u003d\u003d 0) {"},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":"      throw new Error(\"undo not possible\")"},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":"    fn(this.undoStack.pop())"},{"lineNumber":71,"author":{"gitId":"uyencfi"},"content":"    this.state \u003d NORMAL_STATE"},{"lineNumber":72,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":73,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":74,"author":{"gitId":"uyencfi"},"content":"  // The inverse of `performUndo`."},{"lineNumber":75,"author":{"gitId":"uyencfi"},"content":"  UndoManager.prototype.performRedo \u003d function (fn) {"},{"lineNumber":76,"author":{"gitId":"uyencfi"},"content":"    this.state \u003d REDOING_STATE"},{"lineNumber":77,"author":{"gitId":"uyencfi"},"content":"    if (this.redoStack.length \u003d\u003d\u003d 0) {"},{"lineNumber":78,"author":{"gitId":"uyencfi"},"content":"      throw new Error(\"redo not possible\")"},{"lineNumber":79,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":80,"author":{"gitId":"uyencfi"},"content":"    fn(this.redoStack.pop())"},{"lineNumber":81,"author":{"gitId":"uyencfi"},"content":"    this.state \u003d NORMAL_STATE"},{"lineNumber":82,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":83,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":84,"author":{"gitId":"uyencfi"},"content":"  // Is the undo stack not empty?"},{"lineNumber":85,"author":{"gitId":"uyencfi"},"content":"  UndoManager.prototype.canUndo \u003d function () {"},{"lineNumber":86,"author":{"gitId":"uyencfi"},"content":"    return this.undoStack.length !\u003d\u003d 0"},{"lineNumber":87,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":88,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":89,"author":{"gitId":"uyencfi"},"content":"  // Is the redo stack not empty?"},{"lineNumber":90,"author":{"gitId":"uyencfi"},"content":"  UndoManager.prototype.canRedo \u003d function () {"},{"lineNumber":91,"author":{"gitId":"uyencfi"},"content":"    return this.redoStack.length !\u003d\u003d 0"},{"lineNumber":92,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":93,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":94,"author":{"gitId":"uyencfi"},"content":"  // Whether the UndoManager is currently performing an undo."},{"lineNumber":95,"author":{"gitId":"uyencfi"},"content":"  UndoManager.prototype.isUndoing \u003d function () {"},{"lineNumber":96,"author":{"gitId":"uyencfi"},"content":"    return this.state \u003d\u003d\u003d UNDOING_STATE"},{"lineNumber":97,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":98,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":99,"author":{"gitId":"uyencfi"},"content":"  // Whether the UndoManager is currently performing a redo."},{"lineNumber":100,"author":{"gitId":"uyencfi"},"content":"  UndoManager.prototype.isRedoing \u003d function () {"},{"lineNumber":101,"author":{"gitId":"uyencfi"},"content":"    return this.state \u003d\u003d\u003d REDOING_STATE"},{"lineNumber":102,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":103,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":104,"author":{"gitId":"uyencfi"},"content":"  return UndoManager"},{"lineNumber":105,"author":{"gitId":"uyencfi"},"content":"})()"}],"authorContributionMap":{"uyencfi":105}},{"path":"frontend/src/components/collaboration/lib/utils.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"const utils \u003d {}"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"utils.makeEventEmitter \u003d function (clazz, opt_allowedEVents) {"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"  clazz.prototype.allowedEvents_ \u003d opt_allowedEVents"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"  clazz.prototype.on \u003d function (eventType, callback, context) {"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"    this.validateEventType_(eventType)"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"    this.eventListeners_ \u003d this.eventListeners_ || {}"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"    this.eventListeners_[eventType] \u003d this.eventListeners_[eventType] || []"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"    this.eventListeners_[eventType].push({"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"      callback: callback,"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"      context: context,"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"  clazz.prototype.off \u003d function (eventType, callback) {"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"    this.validateEventType_(eventType)"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"    this.eventListeners_ \u003d this.eventListeners_ || {}"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"    var listeners \u003d this.eventListeners_[eventType] || []"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"    for (var i \u003d 0; i \u003c listeners.length; i++) {"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"      if (listeners[i].callback \u003d\u003d\u003d callback) {"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"        listeners.splice(i, 1)"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"        return"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"  clazz.prototype.trigger \u003d function (eventType /*, args ... */) {"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"    this.eventListeners_ \u003d this.eventListeners_ || {}"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"    var listeners \u003d this.eventListeners_[eventType] || []"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"    for (var i \u003d 0; i \u003c listeners.length; i++) {"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"      listeners[i].callback.apply("},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"        listeners[i].context,"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"        Array.prototype.slice.call(arguments, 1)"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"      )"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"  clazz.prototype.validateEventType_ \u003d function (eventType) {"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"    if (this.allowedEvents_) {"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"      var allowed \u003d false"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"      for (var i \u003d 0; i \u003c this.allowedEvents_.length; i++) {"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"        if (this.allowedEvents_[i] \u003d\u003d\u003d eventType) {"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":"          allowed \u003d true"},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"          break"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"      if (!allowed) {"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"        throw new Error(\u0027Unknown event \"\u0027 + eventType + \u0027\"\u0027)"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":"utils.elt \u003d function (tag, content, attrs) {"},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"  var e \u003d document.createElement(tag)"},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"  if (typeof content \u003d\u003d\u003d \"string\") {"},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":"    utils.setTextContent(e, content)"},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"  } else if (content) {"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"    for (var i \u003d 0; i \u003c content.length; ++i) {"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"      e.appendChild(content[i])"},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":"  for (var attr in attrs || {}) {"},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"    e.setAttribute(attr, attrs[attr])"},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":"  return e"},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":"utils.setTextContent \u003d function (e, str) {"},{"lineNumber":71,"author":{"gitId":"uyencfi"},"content":"  e.innerHTML \u003d \"\""},{"lineNumber":72,"author":{"gitId":"uyencfi"},"content":"  e.appendChild(document.createTextNode(str))"},{"lineNumber":73,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":74,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":75,"author":{"gitId":"uyencfi"},"content":"utils.on \u003d function (emitter, type, f, capture) {"},{"lineNumber":76,"author":{"gitId":"uyencfi"},"content":"  if (emitter.addEventListener) {"},{"lineNumber":77,"author":{"gitId":"uyencfi"},"content":"    emitter.addEventListener(type, f, capture || false)"},{"lineNumber":78,"author":{"gitId":"uyencfi"},"content":"  } else if (emitter.attachEvent) {"},{"lineNumber":79,"author":{"gitId":"uyencfi"},"content":"    emitter.attachEvent(\"on\" + type, f)"},{"lineNumber":80,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":81,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":82,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":83,"author":{"gitId":"uyencfi"},"content":"utils.off \u003d function (emitter, type, f, capture) {"},{"lineNumber":84,"author":{"gitId":"uyencfi"},"content":"  if (emitter.removeEventListener) {"},{"lineNumber":85,"author":{"gitId":"uyencfi"},"content":"    emitter.removeEventListener(type, f, capture || false)"},{"lineNumber":86,"author":{"gitId":"uyencfi"},"content":"  } else if (emitter.detachEvent) {"},{"lineNumber":87,"author":{"gitId":"uyencfi"},"content":"    emitter.detachEvent(\"on\" + type, f)"},{"lineNumber":88,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":89,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":90,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":91,"author":{"gitId":"uyencfi"},"content":"utils.preventDefault \u003d function (e) {"},{"lineNumber":92,"author":{"gitId":"uyencfi"},"content":"  if (e.preventDefault) {"},{"lineNumber":93,"author":{"gitId":"uyencfi"},"content":"    e.preventDefault()"},{"lineNumber":94,"author":{"gitId":"uyencfi"},"content":"  } else {"},{"lineNumber":95,"author":{"gitId":"uyencfi"},"content":"    e.returnValue \u003d false"},{"lineNumber":96,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":97,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":98,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":99,"author":{"gitId":"uyencfi"},"content":"utils.stopPropagation \u003d function (e) {"},{"lineNumber":100,"author":{"gitId":"uyencfi"},"content":"  if (e.stopPropagation) {"},{"lineNumber":101,"author":{"gitId":"uyencfi"},"content":"    e.stopPropagation()"},{"lineNumber":102,"author":{"gitId":"uyencfi"},"content":"  } else {"},{"lineNumber":103,"author":{"gitId":"uyencfi"},"content":"    e.cancelBubble \u003d true"},{"lineNumber":104,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":105,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":106,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":107,"author":{"gitId":"uyencfi"},"content":"utils.stopEvent \u003d function (e) {"},{"lineNumber":108,"author":{"gitId":"uyencfi"},"content":"  utils.preventDefault(e)"},{"lineNumber":109,"author":{"gitId":"uyencfi"},"content":"  utils.stopPropagation(e)"},{"lineNumber":110,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":111,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":112,"author":{"gitId":"uyencfi"},"content":"utils.stopEventAnd \u003d function (fn) {"},{"lineNumber":113,"author":{"gitId":"uyencfi"},"content":"  return function (e) {"},{"lineNumber":114,"author":{"gitId":"uyencfi"},"content":"    fn(e)"},{"lineNumber":115,"author":{"gitId":"uyencfi"},"content":"    utils.stopEvent(e)"},{"lineNumber":116,"author":{"gitId":"uyencfi"},"content":"    return false"},{"lineNumber":117,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":118,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":119,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":120,"author":{"gitId":"uyencfi"},"content":"utils.trim \u003d function (str) {"},{"lineNumber":121,"author":{"gitId":"uyencfi"},"content":"  return str.replace(/^\\s+/g, \"\").replace(/\\s+$/g, \"\")"},{"lineNumber":122,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":123,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":124,"author":{"gitId":"uyencfi"},"content":"utils.stringEndsWith \u003d function (str, suffix) {"},{"lineNumber":125,"author":{"gitId":"uyencfi"},"content":"  var list \u003d typeof suffix \u003d\u003d \"string\" ? [suffix] : suffix"},{"lineNumber":126,"author":{"gitId":"uyencfi"},"content":"  for (var i \u003d 0; i \u003c list.length; i++) {"},{"lineNumber":127,"author":{"gitId":"uyencfi"},"content":"    // eslint-disable-next-line no-redeclare"},{"lineNumber":128,"author":{"gitId":"uyencfi"},"content":"    var suffix \u003d list[i]"},{"lineNumber":129,"author":{"gitId":"uyencfi"},"content":"    if (str.indexOf(suffix, str.length - suffix.length) !\u003d\u003d -1) return true"},{"lineNumber":130,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":131,"author":{"gitId":"uyencfi"},"content":"  return false"},{"lineNumber":132,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":133,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":134,"author":{"gitId":"uyencfi"},"content":"utils.assert \u003d function assert(b, msg) {"},{"lineNumber":135,"author":{"gitId":"uyencfi"},"content":"  if (!b) {"},{"lineNumber":136,"author":{"gitId":"uyencfi"},"content":"    throw new Error(msg || \"assertion error\")"},{"lineNumber":137,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":138,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":139,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":140,"author":{"gitId":"uyencfi"},"content":"utils.log \u003d function () {"},{"lineNumber":141,"author":{"gitId":"uyencfi"},"content":"  if (typeof console !\u003d\u003d \"undefined\" \u0026\u0026 typeof console.log !\u003d\u003d \"undefined\") {"},{"lineNumber":142,"author":{"gitId":"uyencfi"},"content":"    var args \u003d [\"Firepad:\"]"},{"lineNumber":143,"author":{"gitId":"uyencfi"},"content":"    for (var i \u003d 0; i \u003c arguments.length; i++) {"},{"lineNumber":144,"author":{"gitId":"uyencfi"},"content":"      args.push(arguments[i])"},{"lineNumber":145,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":146,"author":{"gitId":"uyencfi"},"content":"    console.log.apply(console, args)"},{"lineNumber":147,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":148,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":149,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":150,"author":{"gitId":"uyencfi"},"content":"export { utils }"}],"authorContributionMap":{"uyencfi":150}},{"path":"frontend/src/components/collaboration/lib/wrapped-operation.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"export const WrappedOperation \u003d (function (global) {"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"  // A WrappedOperation contains an operation and corresponing metadata."},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"  function WrappedOperation(operation, meta) {"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"    this.wrapped \u003d operation"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"    this.meta \u003d meta"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"  WrappedOperation.prototype.apply \u003d function () {"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"    return this.wrapped.apply.apply(this.wrapped, arguments)"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"  WrappedOperation.prototype.invert \u003d function () {"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"    var meta \u003d this.meta"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"    return new WrappedOperation("},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"      this.wrapped.invert.apply(this.wrapped, arguments),"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"      meta \u0026\u0026 typeof meta \u003d\u003d\u003d \"object\" \u0026\u0026 typeof meta.invert \u003d\u003d\u003d \"function\""},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"        ? meta.invert.apply(meta, arguments)"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"        : meta"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"  // Copy all properties from source to target."},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"  function copy(source, target) {"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"    for (var key in source) {"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"      if (source.hasOwnProperty(key)) {"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"        target[key] \u003d source[key]"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"  function composeMeta(a, b) {"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"    if (a \u0026\u0026 typeof a \u003d\u003d\u003d \"object\") {"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"      if (typeof a.compose \u003d\u003d\u003d \"function\") {"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"        return a.compose(b)"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"      var meta \u003d {}"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"      copy(a, meta)"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"      copy(b, meta)"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"      return meta"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"    return b"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"  WrappedOperation.prototype.compose \u003d function (other) {"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"    return new WrappedOperation("},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"      this.wrapped.compose(other.wrapped),"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"      composeMeta(this.meta, other.meta)"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"  function transformMeta(meta, operation) {"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"    if (meta \u0026\u0026 typeof meta \u003d\u003d\u003d \"object\") {"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"      if (typeof meta.transform \u003d\u003d\u003d \"function\") {"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":"        return meta.transform(operation)"},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":"    return meta"},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"  WrappedOperation.transform \u003d function (a, b) {"},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"    var pair \u003d a.wrapped.transform(b.wrapped)"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"    return ["},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":"      new WrappedOperation(pair[0], transformMeta(a.meta, b.wrapped)),"},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"      new WrappedOperation(pair[1], transformMeta(b.meta, a.wrapped)),"},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"    ]"},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":"  // convenience method to write transform(a, b) as a.transform(b)"},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":"  WrappedOperation.prototype.transform \u003d function (other) {"},{"lineNumber":71,"author":{"gitId":"uyencfi"},"content":"    return WrappedOperation.transform(this, other)"},{"lineNumber":72,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":73,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":74,"author":{"gitId":"uyencfi"},"content":"  return WrappedOperation"},{"lineNumber":75,"author":{"gitId":"uyencfi"},"content":"})()"}],"authorContributionMap":{"uyencfi":75}},{"path":"frontend/src/components/collaboration/selectionDecor.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import { Decoration } from \u0027@codemirror/view\u0027"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"/**"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":" * Returns a CodeMirror Decoration for the other person\u0027s selection."},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":" * Basically, the returned decoration object specifies how the"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":" * selected text should be styled (text color, background color, etc.)"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":" */"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"const getOtherSelectionDecor \u003d (uid) \u003d\u003e {"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"  return Decoration.mark({"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"    inclusiveStart: true,"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"    attributes: {"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"      class: \u0027cm-other-selection\u0027,"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"    },"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"    uid: uid,"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"  })"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"export default getOtherSelectionDecor"}],"authorContributionMap":{"uyencfi":18}},{"path":"frontend/src/components/collaboration/selectionExtension.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import { StateField } from \u0027@codemirror/state\u0027"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"import { EditorView, Decoration } from \u0027@codemirror/view\u0027"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"import { addCursor, rmCursor } from \u0027./cursorEffects\u0027"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"import getOtherSelectionDecor from \u0027./selectionDecor\u0027"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"// This extension must be added to the set of extensions in the Editor component."},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"// It manages a set of Decoration objects representing the selections of the other user,"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"// and updates the editor to reflect their selection."},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"// Why is it a Selection extension, but the effects used are addCursor/rmCursor?"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"// Because selection IS a cursor, only with from !\u003d to. All selection changes are"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"// reported as cursor changes, we distinguish selection from cursor by checking from !\u003d to."},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"/**"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":" * Returns the extension to manage the other person\u0027s selection."},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":" * @param uid The current user\u0027s id (NOT the other user!)"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":" */"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"const getSelectionExtension \u003d (uid) \u003d\u003e {"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"  return StateField.define({"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"    // Start with an empty set of decorations"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"    create() {"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"      return Decoration.none"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"    },"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"    // This is called whenever the editor updates"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"    update(selections, tx) {"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"      // map adjusts the previous selections to account for document changes, using operational transformation"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"      selections \u003d selections.map(tx.changes)"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"      // If this transaction adds or removes selections, apply those changes"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"      for (let e of tx.effects) {"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"        if (e.is(addCursor)) {"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"          // Skip my own selection"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"          if (e.value.uid \u003d\u003d\u003d uid) {"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"            continue"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"          }"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"          let arr \u003d []"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"          // Verify that this is actually a selection (if from \u003d\u003d to, no text selected)"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"          if (e.value.from !\u003d\u003d e.value.to) {"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"            let from \u003d e.value.from, to \u003d e.value.to"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"            if (from \u003e to) {"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"              [from, to] \u003d [to, from]   // Swap to ensure from \u003c to"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"            }"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"            const otherSel \u003d getOtherSelectionDecor(e.value.uid)"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"            arr.push(otherSel.range(from, to))"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":"          }"},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"          selections \u003d selections.update({"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"            add: arr,"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"          })"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"        } else if (e.is(rmCursor)) {"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"          if (e.value.uid \u003d\u003d\u003d uid) {"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"            continue"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"          }"},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"          selections \u003d selections.update({"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"            filter: (from, to, decoration) \u003d\u003e {"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"              // Remove a cursor by filtering it out"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":"              // decoration.spec contains the uid associated with that cursor."},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"              // See getOtherSelectionMark() for the definition of our Decoration."},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"              return decoration.spec.uid !\u003d\u003d e.value.uid"},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":"            },"},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"          })"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"      return selections"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"    },"},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":"    // Indicate that this StateField obj provides a set of decorations"},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"    provide: (f) \u003d\u003e EditorView.decorations.from(f),"},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"  })"},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":"export default getSelectionExtension"}],"authorContributionMap":{"uyencfi":69}},{"path":"frontend/src/components/match/MatchDialog.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"import {"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"  Modal,"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"  ModalOverlay,"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"  ModalContent,"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  Button,"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"  useDisclosure,"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"} from \u0027@chakra-ui/react\u0027"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"import { useState, useEffect } from \u0027react\u0027"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"import MatchForm from \u0027./MatchForm\u0027"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"import io from \u0027socket.io-client\u0027"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"import MatchTimer from \u0027./MatchTimer\u0027"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"import MatchTimeout from \u0027./MatchTimeout\u0027"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"import { useNavigate } from \u0027react-router-dom\u0027"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"import {"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"  URI_MATCHING_SERVICE_SOCKET_PATH,"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"  EVENT_EMIT,"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"  EVENT_LISTEN,"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"  URI_MATCHING_SERVICE,"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"} from \u0027../../constants\u0027"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"import MatchError from \u0027./MatchError\u0027"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"import useAuth from \u0027../../hooks/useAuth\u0027"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"import { ArrowForwardIcon } from \u0027@chakra-ui/icons\u0027"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"const PHASES \u003d {"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"  SELECT: \u0027SELECT\u0027,"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"  FINDING: \u0027FINDING\u0027,"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"  TIMEOUT: \u0027TIMEOUT\u0027,"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"  ERROR: \u0027ERROR\u0027,"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"}"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"const MatchDialog \u003d ({ isDisabled }) \u003d\u003e {"},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"  const difficultyList \u003d [\u0027easy\u0027, \u0027medium\u0027, \u0027hard\u0027]"},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"  const { isOpen, onOpen, onClose } \u003d useDisclosure()"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"  const [difficulty, setDifficulty] \u003d useState(\u0027\u0027)"},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":"  const [type, setType] \u003d useState(\u0027\u0027)"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"  const [phase, setPhase] \u003d useState(PHASES.SELECT)"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"  const [socket, setSocket] \u003d useState()"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"  const navigate \u003d useNavigate()"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"  const { auth } \u003d useAuth()"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"    const newSocket \u003d io(URI_MATCHING_SERVICE, {"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"      path: URI_MATCHING_SERVICE_SOCKET_PATH,"},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"      auth: {"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"        token: auth.accessToken,"},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"    })"},{"lineNumber":49,"author":{"gitId":"MarcusTXK"},"content":"    setSocket(newSocket)"},{"lineNumber":50,"author":{"gitId":"MarcusTXK"},"content":"    newSocket.on(EVENT_LISTEN.MATCHING, () \u003d\u003e console.log(\u0027matching\u0027))"},{"lineNumber":51,"author":{"gitId":"MarcusTXK"},"content":"    newSocket.on(EVENT_LISTEN.MATCH_SUCCESS, (payload) \u003d\u003e {"},{"lineNumber":52,"author":{"gitId":"MarcusTXK"},"content":"      console.log(\u0027match success\u0027)"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"      navigate(`/room/${payload.room}`)"},{"lineNumber":54,"author":{"gitId":"MarcusTXK"},"content":"    })"},{"lineNumber":55,"author":{"gitId":"MarcusTXK"},"content":"    newSocket.on(EVENT_LISTEN.MATCH_FAIL, () \u003d\u003e {"},{"lineNumber":56,"author":{"gitId":"MarcusTXK"},"content":"      console.log(\u0027match error\u0027)"},{"lineNumber":57,"author":{"gitId":"MarcusTXK"},"content":"      setPhase(PHASES.ERROR)"},{"lineNumber":58,"author":{"gitId":"MarcusTXK"},"content":"    })"},{"lineNumber":59,"author":{"gitId":"MarcusTXK"},"content":"    newSocket.on(EVENT_LISTEN.MATCH_TIMEOUT, () \u003d\u003e {"},{"lineNumber":60,"author":{"gitId":"MarcusTXK"},"content":"      console.log(\u0027timed out\u0027)"},{"lineNumber":61,"author":{"gitId":"MarcusTXK"},"content":"      setPhase(PHASES.TIMEOUT)"},{"lineNumber":62,"author":{"gitId":"MarcusTXK"},"content":"    })"},{"lineNumber":63,"author":{"gitId":"MarcusTXK"},"content":"    return () \u003d\u003e newSocket.close()"},{"lineNumber":64,"author":{"gitId":"MarcusTXK"},"content":"  }, [auth.accessToken, navigate])"},{"lineNumber":65,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":66,"author":{"gitId":"MarcusTXK"},"content":"  const handleSubmit \u003d (e) \u003d\u003e {"},{"lineNumber":67,"author":{"gitId":"MarcusTXK"},"content":"    e.preventDefault()"},{"lineNumber":68,"author":{"gitId":"Hzxin"},"content":"    if (difficulty) {"},{"lineNumber":69,"author":{"gitId":"MarcusTXK"},"content":"      socket.emit(EVENT_EMIT.MATCH_FIND, { difficulty: difficulty })"},{"lineNumber":70,"author":{"gitId":"Hzxin"},"content":"    } else {"},{"lineNumber":71,"author":{"gitId":"Hzxin"},"content":"      socket.emit(EVENT_EMIT.MATCH_FIND, { type: type })"},{"lineNumber":72,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":74,"author":{"gitId":"MarcusTXK"},"content":"    setPhase(PHASES.FINDING)"},{"lineNumber":75,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":76,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":77,"author":{"gitId":"MarcusTXK"},"content":"  const handleOpen \u003d () \u003d\u003e {"},{"lineNumber":78,"author":{"gitId":"MarcusTXK"},"content":"    setPhase(PHASES.SELECT)"},{"lineNumber":79,"author":{"gitId":"MarcusTXK"},"content":"    onOpen()"},{"lineNumber":80,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":81,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":82,"author":{"gitId":"MarcusTXK"},"content":"  const handleClose \u003d () \u003d\u003e {"},{"lineNumber":83,"author":{"gitId":"MarcusTXK"},"content":"    socket.emit(EVENT_EMIT.MATCH_CANCEL, () \u003d\u003e console.log(\u0027Cancelled\u0027))"},{"lineNumber":84,"author":{"gitId":"MarcusTXK"},"content":"    onClose()"},{"lineNumber":85,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":86,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":87,"author":{"gitId":"MarcusTXK"},"content":"  const renderBody \u003d () \u003d\u003e {"},{"lineNumber":88,"author":{"gitId":"MarcusTXK"},"content":"    switch (phase) {"},{"lineNumber":89,"author":{"gitId":"MarcusTXK"},"content":"      case PHASES.SELECT:"},{"lineNumber":90,"author":{"gitId":"MarcusTXK"},"content":"        return ("},{"lineNumber":91,"author":{"gitId":"MarcusTXK"},"content":"          \u003cMatchForm"},{"lineNumber":92,"author":{"gitId":"MarcusTXK"},"content":"            onClose\u003d{handleClose}"},{"lineNumber":93,"author":{"gitId":"MarcusTXK"},"content":"            onSubmit\u003d{handleSubmit}"},{"lineNumber":94,"author":{"gitId":"Hzxin"},"content":"            onChange\u003d{(e) \u003d\u003e {"},{"lineNumber":95,"author":{"gitId":"Hzxin"},"content":"              if (difficultyList.includes(e.target.value)) {"},{"lineNumber":96,"author":{"gitId":"Hzxin"},"content":"                setDifficulty(e.target.value)"},{"lineNumber":97,"author":{"gitId":"Hzxin"},"content":"              } else {"},{"lineNumber":98,"author":{"gitId":"Hzxin"},"content":"                setType(e.target.value)"},{"lineNumber":99,"author":{"gitId":"Hzxin"},"content":"              }"},{"lineNumber":100,"author":{"gitId":"Hzxin"},"content":"            }}"},{"lineNumber":101,"author":{"gitId":"MarcusTXK"},"content":"          /\u003e"},{"lineNumber":102,"author":{"gitId":"MarcusTXK"},"content":"        )"},{"lineNumber":103,"author":{"gitId":"MarcusTXK"},"content":"      case PHASES.FINDING:"},{"lineNumber":104,"author":{"gitId":"MarcusTXK"},"content":"        return \u003cMatchTimer currDate\u003d{new Date()} onClose\u003d{handleClose} /\u003e"},{"lineNumber":105,"author":{"gitId":"MarcusTXK"},"content":"      case PHASES.TIMEOUT:"},{"lineNumber":106,"author":{"gitId":"MarcusTXK"},"content":"        return ("},{"lineNumber":107,"author":{"gitId":"MarcusTXK"},"content":"          \u003cMatchTimeout"},{"lineNumber":108,"author":{"gitId":"MarcusTXK"},"content":"            onClose\u003d{handleClose}"},{"lineNumber":109,"author":{"gitId":"MarcusTXK"},"content":"            handleRetry\u003d{() \u003d\u003e setPhase(PHASES.SELECT)}"},{"lineNumber":110,"author":{"gitId":"MarcusTXK"},"content":"          /\u003e"},{"lineNumber":111,"author":{"gitId":"MarcusTXK"},"content":"        )"},{"lineNumber":112,"author":{"gitId":"MarcusTXK"},"content":"      default:"},{"lineNumber":113,"author":{"gitId":"MarcusTXK"},"content":"        return ("},{"lineNumber":114,"author":{"gitId":"MarcusTXK"},"content":"          \u003cMatchError"},{"lineNumber":115,"author":{"gitId":"MarcusTXK"},"content":"            onClose\u003d{handleClose}"},{"lineNumber":116,"author":{"gitId":"MarcusTXK"},"content":"            handleRetry\u003d{() \u003d\u003e setPhase(PHASES.SELECT)}"},{"lineNumber":117,"author":{"gitId":"MarcusTXK"},"content":"          /\u003e"},{"lineNumber":118,"author":{"gitId":"MarcusTXK"},"content":"        )"},{"lineNumber":119,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":120,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":121,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":122,"author":{"gitId":"MarcusTXK"},"content":"  return ("},{"lineNumber":123,"author":{"gitId":"MarcusTXK"},"content":"    \u003c\u003e"},{"lineNumber":124,"author":{"gitId":"tlylt"},"content":"      \u003cButton"},{"lineNumber":125,"author":{"gitId":"tlylt"},"content":"        onClick\u003d{handleOpen}"},{"lineNumber":126,"author":{"gitId":"tlylt"},"content":"        disabled\u003d{isDisabled}"},{"lineNumber":127,"author":{"gitId":"tlylt"},"content":"        variant\u003d\"outline\""},{"lineNumber":128,"author":{"gitId":"tlylt"},"content":"        rightIcon\u003d{\u003cArrowForwardIcon /\u003e}"},{"lineNumber":129,"author":{"gitId":"tlylt"},"content":"      \u003e"},{"lineNumber":130,"author":{"gitId":"MarcusTXK"},"content":"        Find Match"},{"lineNumber":131,"author":{"gitId":"MarcusTXK"},"content":"      \u003c/Button\u003e"},{"lineNumber":132,"author":{"gitId":"MarcusTXK"},"content":"      \u003cModal isOpen\u003d{isOpen} onClose\u003d{handleClose}\u003e"},{"lineNumber":133,"author":{"gitId":"MarcusTXK"},"content":"        \u003cModalOverlay /\u003e"},{"lineNumber":134,"author":{"gitId":"MarcusTXK"},"content":"        \u003cModalContent\u003e{renderBody()}\u003c/ModalContent\u003e"},{"lineNumber":135,"author":{"gitId":"MarcusTXK"},"content":"      \u003c/Modal\u003e"},{"lineNumber":136,"author":{"gitId":"MarcusTXK"},"content":"    \u003c/\u003e"},{"lineNumber":137,"author":{"gitId":"MarcusTXK"},"content":"  )"},{"lineNumber":138,"author":{"gitId":"MarcusTXK"},"content":"}"},{"lineNumber":139,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":140,"author":{"gitId":"MarcusTXK"},"content":"export default MatchDialog"}],"authorContributionMap":{"MarcusTXK":117,"Hzxin":15,"tlylt":7,"uyencfi":1}},{"path":"frontend/src/components/match/MatchError.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"import {"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"  ModalHeader,"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"  ModalFooter,"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"  ModalBody,"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  ModalCloseButton,"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"  Button,"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"} from \u0027@chakra-ui/react\u0027"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"const MatchError \u003d ({ onClose, handleRetry }) \u003d\u003e {"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"  return ("},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"    \u003c\u003e"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"      \u003cModalHeader\u003eMatch Error\u003c/ModalHeader\u003e"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"      \u003cModalCloseButton /\u003e"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"      \u003cModalBody\u003e"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"        Something went wrong, please wait for a while before trying again."},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"      \u003c/ModalBody\u003e"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"      \u003cModalFooter\u003e"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"        \u003cButton variant\u003d\"ghost\" mr\u003d{3} onClick\u003d{onClose}\u003e"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"          Cancel"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"        \u003c/Button\u003e"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"        \u003cButton colorScheme\u003d\"blue\" onClick\u003d{handleRetry}\u003e"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"          Retry"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"        \u003c/Button\u003e"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"      \u003c/ModalFooter\u003e"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"    \u003c/\u003e"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"  )"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"}"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"export default MatchError"}],"authorContributionMap":{"MarcusTXK":31}},{"path":"frontend/src/components/match/MatchForm.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"import axios from \u0027../../api/axios\u0027"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"import {"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"  ModalHeader,"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"  ModalFooter,"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  ModalBody,"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"  ModalCloseButton,"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"  Button,"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"  Select,"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"  FormControl,"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"  FormLabel,"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"  Tabs,"},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"  Tab,"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"  TabList,"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"  TabPanels,"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"  TabPanel,"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"} from \u0027@chakra-ui/react\u0027"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"import { useEffect, useState } from \u0027react\u0027;"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"import { URL_QUESTION_SERVICE } from \u0027../../constants\u0027"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"const MatchForm \u003d ({ onClose, onSubmit, onChange }) \u003d\u003e {"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"  const [data, setData] \u003d useState()"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"    const fetchData \u003d async () \u003d\u003e {"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"      try {"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"        const { data: response } \u003d await axios.get("},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"          URL_QUESTION_SERVICE + \u0027/allTypes\u0027"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"        )"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"        const optionList \u003d response.types.map((types) \u003d\u003e "},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":"            \u003coption key\u003d{types} value\u003d{types}\u003e{types}\u003c/option\u003e"},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":"      )"},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"        setData(optionList)"},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"      } catch (error) {"},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":"        console.error(error)"},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"      }"},{"lineNumber":35,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":"    if (!data || data.length \u003d\u003d\u003d 0) {"},{"lineNumber":37,"author":{"gitId":"Hzxin"},"content":"      fetchData()"},{"lineNumber":38,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":39,"author":{"gitId":"Hzxin"},"content":"  })"},{"lineNumber":40,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":41,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"  return ("},{"lineNumber":43,"author":{"gitId":"Hzxin"},"content":"    \u003cTabs\u003e"},{"lineNumber":44,"author":{"gitId":"Hzxin"},"content":"      \u003cTabList\u003e"},{"lineNumber":45,"author":{"gitId":"Hzxin"},"content":"        \u003cTab\u003eDifficulty\u003c/Tab\u003e"},{"lineNumber":46,"author":{"gitId":"Hzxin"},"content":"        \u003cTab\u003eCategory\u003c/Tab\u003e"},{"lineNumber":47,"author":{"gitId":"Hzxin"},"content":"      \u003c/TabList\u003e"},{"lineNumber":48,"author":{"gitId":"Hzxin"},"content":"      \u003cTabPanels\u003e"},{"lineNumber":49,"author":{"gitId":"Hzxin"},"content":"        \u003cTabPanel\u003e"},{"lineNumber":50,"author":{"gitId":"MarcusTXK"},"content":"          \u003cform onSubmit\u003d{onSubmit}\u003e"},{"lineNumber":51,"author":{"gitId":"MarcusTXK"},"content":"            \u003cModalHeader\u003eSelect match criterias\u003c/ModalHeader\u003e"},{"lineNumber":52,"author":{"gitId":"MarcusTXK"},"content":"            \u003cModalCloseButton /\u003e"},{"lineNumber":53,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":54,"author":{"gitId":"MarcusTXK"},"content":"            \u003cModalBody\u003e"},{"lineNumber":55,"author":{"gitId":"MarcusTXK"},"content":"              \u003cFormControl isRequired\u003e"},{"lineNumber":56,"author":{"gitId":"MarcusTXK"},"content":"                \u003cFormLabel\u003eQuestion difficulty\u003c/FormLabel\u003e"},{"lineNumber":57,"author":{"gitId":"MarcusTXK"},"content":"                \u003cSelect placeholder\u003d\"Select a difficulty\" onChange\u003d{onChange}\u003e"},{"lineNumber":58,"author":{"gitId":"MarcusTXK"},"content":"                  \u003coption value\u003d\"easy\"\u003eEasy\u003c/option\u003e"},{"lineNumber":59,"author":{"gitId":"MarcusTXK"},"content":"                  \u003coption value\u003d\"medium\"\u003eMedium\u003c/option\u003e"},{"lineNumber":60,"author":{"gitId":"MarcusTXK"},"content":"                  \u003coption value\u003d\"hard\"\u003eHard\u003c/option\u003e"},{"lineNumber":61,"author":{"gitId":"MarcusTXK"},"content":"                \u003c/Select\u003e"},{"lineNumber":62,"author":{"gitId":"MarcusTXK"},"content":"              \u003c/FormControl\u003e"},{"lineNumber":63,"author":{"gitId":"Hzxin"},"content":"              \u003cFormControl isRequired\u003e\u003c/FormControl\u003e"},{"lineNumber":64,"author":{"gitId":"Hzxin"},"content":"            \u003c/ModalBody\u003e"},{"lineNumber":65,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":66,"author":{"gitId":"Hzxin"},"content":"            \u003cModalFooter\u003e"},{"lineNumber":67,"author":{"gitId":"Hzxin"},"content":"              \u003cButton variant\u003d\"ghost\" mr\u003d{3} onClick\u003d{onClose}\u003e"},{"lineNumber":68,"author":{"gitId":"Hzxin"},"content":"                Cancel"},{"lineNumber":69,"author":{"gitId":"Hzxin"},"content":"              \u003c/Button\u003e"},{"lineNumber":70,"author":{"gitId":"Hzxin"},"content":"              \u003cButton colorScheme\u003d\"blue\" type\u003d\"submit\"\u003e"},{"lineNumber":71,"author":{"gitId":"Hzxin"},"content":"                Match"},{"lineNumber":72,"author":{"gitId":"Hzxin"},"content":"              \u003c/Button\u003e"},{"lineNumber":73,"author":{"gitId":"Hzxin"},"content":"            \u003c/ModalFooter\u003e"},{"lineNumber":74,"author":{"gitId":"Hzxin"},"content":"          \u003c/form\u003e"},{"lineNumber":75,"author":{"gitId":"Hzxin"},"content":"        \u003c/TabPanel\u003e"},{"lineNumber":76,"author":{"gitId":"Hzxin"},"content":"          "},{"lineNumber":77,"author":{"gitId":"Hzxin"},"content":"        \u003cTabPanel\u003e"},{"lineNumber":78,"author":{"gitId":"Hzxin"},"content":"        \u003cform onSubmit\u003d{onSubmit}\u003e"},{"lineNumber":79,"author":{"gitId":"Hzxin"},"content":"            \u003cModalHeader\u003eSelect match criterias\u003c/ModalHeader\u003e"},{"lineNumber":80,"author":{"gitId":"Hzxin"},"content":"            \u003cModalCloseButton /\u003e"},{"lineNumber":81,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":82,"author":{"gitId":"Hzxin"},"content":"            \u003cModalBody\u003e"},{"lineNumber":83,"author":{"gitId":"Hzxin"},"content":"              \u003cFormControl isRequired\u003e"},{"lineNumber":84,"author":{"gitId":"Hzxin"},"content":"                \u003cFormLabel\u003eQuestion Category\u003c/FormLabel\u003e"},{"lineNumber":85,"author":{"gitId":"Hzxin"},"content":"                \u003cSelect placeholder\u003d\"Select a category\" onChange\u003d{onChange}\u003e"},{"lineNumber":86,"author":{"gitId":"Hzxin"},"content":"                  {data}"},{"lineNumber":87,"author":{"gitId":"Hzxin"},"content":"                \u003c/Select\u003e"},{"lineNumber":88,"author":{"gitId":"Hzxin"},"content":"              \u003c/FormControl\u003e"},{"lineNumber":89,"author":{"gitId":"Hzxin"},"content":"              \u003cFormControl isRequired\u003e\u003c/FormControl\u003e"},{"lineNumber":90,"author":{"gitId":"MarcusTXK"},"content":"            \u003c/ModalBody\u003e"},{"lineNumber":91,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":92,"author":{"gitId":"MarcusTXK"},"content":"            \u003cModalFooter\u003e"},{"lineNumber":93,"author":{"gitId":"MarcusTXK"},"content":"              \u003cButton variant\u003d\"ghost\" mr\u003d{3} onClick\u003d{onClose}\u003e"},{"lineNumber":94,"author":{"gitId":"MarcusTXK"},"content":"                Cancel"},{"lineNumber":95,"author":{"gitId":"MarcusTXK"},"content":"              \u003c/Button\u003e"},{"lineNumber":96,"author":{"gitId":"MarcusTXK"},"content":"              \u003cButton colorScheme\u003d\"blue\" type\u003d\"submit\"\u003e"},{"lineNumber":97,"author":{"gitId":"MarcusTXK"},"content":"                Match"},{"lineNumber":98,"author":{"gitId":"MarcusTXK"},"content":"              \u003c/Button\u003e"},{"lineNumber":99,"author":{"gitId":"MarcusTXK"},"content":"            \u003c/ModalFooter\u003e"},{"lineNumber":100,"author":{"gitId":"MarcusTXK"},"content":"          \u003c/form\u003e"},{"lineNumber":101,"author":{"gitId":"Hzxin"},"content":"        \u003c/TabPanel\u003e"},{"lineNumber":102,"author":{"gitId":"Hzxin"},"content":"      \u003c/TabPanels\u003e"},{"lineNumber":103,"author":{"gitId":"Hzxin"},"content":"    \u003c/Tabs\u003e"},{"lineNumber":104,"author":{"gitId":"MarcusTXK"},"content":"  )"},{"lineNumber":105,"author":{"gitId":"MarcusTXK"},"content":"}"},{"lineNumber":106,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":107,"author":{"gitId":"MarcusTXK"},"content":"export default MatchForm"}],"authorContributionMap":{"MarcusTXK":41,"Hzxin":66}},{"path":"frontend/src/components/match/MatchTimeout.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"import {"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"  ModalHeader,"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"  ModalFooter,"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"  ModalBody,"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  ModalCloseButton,"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"  Button,"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"} from \u0027@chakra-ui/react\u0027"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"const MatchTimeout \u003d ({ onClose, handleRetry }) \u003d\u003e {"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"  return ("},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"    \u003c\u003e"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"      \u003cModalHeader\u003eNo match found\u003c/ModalHeader\u003e"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"      \u003cModalCloseButton /\u003e"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"      \u003cModalBody\u003e"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"        Please try again. Consider relaxing your matching critera(s)."},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"      \u003c/ModalBody\u003e"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"      \u003cModalFooter\u003e"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"        \u003cButton variant\u003d\"ghost\" mr\u003d{3} onClick\u003d{onClose}\u003e"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"          Cancel"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"        \u003c/Button\u003e"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"        \u003cButton colorScheme\u003d\"blue\" onClick\u003d{handleRetry}\u003e"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"          Retry"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"        \u003c/Button\u003e"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"      \u003c/ModalFooter\u003e"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"    \u003c/\u003e"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"  )"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"}"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"export default MatchTimeout"}],"authorContributionMap":{"MarcusTXK":31}},{"path":"frontend/src/components/match/MatchTimer.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"import {"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"  ModalHeader,"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"  ModalFooter,"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"  ModalBody,"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  ModalCloseButton,"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"  Button,"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"  CircularProgress,"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"  CircularProgressLabel,"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"} from \u0027@chakra-ui/react\u0027"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"import { useCountdown } from \u0027../../hooks/useCountdown\u0027"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"const MATCH_TIMEOUT_SECONDS \u003d 30"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"const MATCH_TIMEOUT \u003d MATCH_TIMEOUT_SECONDS * 1000"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"const MatchTimer \u003d ({ currDate, onClose }) \u003d\u003e {"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"  const [, , , seconds] \u003d useCountdown("},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"    new Date(currDate.getTime() + MATCH_TIMEOUT)"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"  )"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"  return ("},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"    \u003c\u003e"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"      \u003cModalHeader\u003eFinding a Match\u003c/ModalHeader\u003e"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"      \u003cModalCloseButton /\u003e"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"      \u003cModalBody\u003e"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"        \u003cdiv className\u003d\"flex justify-center\"\u003e"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"          {seconds \u003e\u003d 0 ? ("},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"            \u003cCircularProgress"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"              value\u003d{"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"                ((MATCH_TIMEOUT_SECONDS - seconds) / MATCH_TIMEOUT_SECONDS) *"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"                100"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"              }"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"              size\u003d\"120px\""},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"            \u003e"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"              \u003cCircularProgressLabel\u003e{`${seconds}s`}\u003c/CircularProgressLabel\u003e"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"            \u003c/CircularProgress\u003e"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"          ) : ("},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"            \u003cCircularProgress isIndeterminate size\u003d\"120px\" /\u003e"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"          )}"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"        \u003c/div\u003e"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"      \u003c/ModalBody\u003e"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"      \u003cModalFooter\u003e"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"        \u003cButton variant\u003d\"ghost\" mr\u003d{3} onClick\u003d{onClose}\u003e"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"          Cancel"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"        \u003c/Button\u003e"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"      \u003c/ModalFooter\u003e"},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"    \u003c/\u003e"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"  )"},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":"}"},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":49,"author":{"gitId":"MarcusTXK"},"content":"export default MatchTimer"}],"authorContributionMap":{"MarcusTXK":49}},{"path":"frontend/src/components/room/RoomEndDialog.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"import {"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"  Modal,"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"  ModalOverlay,"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"  ModalContent,"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  Button,"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"  useDisclosure,"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"  ModalHeader,"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"  ModalCloseButton,"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"  ModalBody,"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"  ModalFooter,"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"} from \u0027@chakra-ui/react\u0027"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"import React from \u0027react\u0027"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"const RoomEndDialog \u003d ({ handleClick }) \u003d\u003e {"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"  const { isOpen, onOpen, onClose } \u003d useDisclosure()"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"  return ("},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"    \u003c\u003e"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"      \u003cButton onClick\u003d{onOpen}\u003eEnd Session\u003c/Button\u003e"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"      \u003cModal isOpen\u003d{isOpen} onClose\u003d{onClose}\u003e"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"        \u003cModalOverlay /\u003e"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"        \u003cModalContent\u003e"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"          \u003cModalHeader\u003eAre you sure?\u003c/ModalHeader\u003e"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"          \u003cModalCloseButton /\u003e"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"          \u003cModalBody\u003e"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"            Ending the session will close the room for both users and questions"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"            completed will be reflected in your match history."},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"          \u003c/ModalBody\u003e"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"          \u003cModalFooter\u003e"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"            \u003cButton variant\u003d\"ghost\" mr\u003d{3} onClick\u003d{onClose}\u003e"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"              Cancel"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"            \u003c/Button\u003e"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"            \u003cButton"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"              colorScheme\u003d\"blue\""},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"              onClick\u003d{() \u003d\u003e {"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"                onClose()"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"                handleClick()"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"              }}"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"            \u003e"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"              Confirm"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"            \u003c/Button\u003e"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"          \u003c/ModalFooter\u003e"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"        \u003c/ModalContent\u003e"},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"      \u003c/Modal\u003e"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"    \u003c/\u003e"},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":"  )"},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"}"},{"lineNumber":49,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":50,"author":{"gitId":"MarcusTXK"},"content":"export default RoomEndDialog"}],"authorContributionMap":{"MarcusTXK":50}},{"path":"frontend/src/components/room/VideoChat.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"import { Peer } from \u0027peerjs\u0027"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"import {"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"  AspectRatio,"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"  HStack,"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  Button,"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"  ButtonGroup,"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"  Stack,"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"  useColorModeValue,"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"} from \u0027@chakra-ui/react\u0027"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"import { useEffect, useState } from \u0027react\u0027"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"import {"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"  FaMicrophone,"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"  FaMicrophoneSlash,"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"  FaVideo,"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"  FaVideoSlash,"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"} from \u0027react-icons/fa\u0027"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"import { PEERJS_PATH, PEERJS_PORT, PEERJS_HOST } from \u0027../../constants\u0027"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"import { useRef } from \u0027react\u0027"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"const VideoChat \u003d ({ userId, otherUserId, roomId, socket }) \u003d\u003e {"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"  const [isShowOther, setShowOther] \u003d useState(false)"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"  const isAudioRef \u003d useRef(false)"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"  const [isAudio, setAudio] \u003d useState(false)"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"  const [isVideo, setVideo] \u003d useState(false)"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"  const [isOtherAudio, setOtherAudio] \u003d useState(false)"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"  const [connection, setConnection] \u003d useState()"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"  const peer \u003d useRef(null)"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"  const [myStream, setMyStream] \u003d useState()"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"  const [otherStream, setOtherStream] \u003d useState()"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"  const buttonColour \u003d useColorModeValue(\u0027blackAlpha\u0027, \u0027gray\u0027)"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"  const selfVideo \u003d useRef()"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"  const otherVideo \u003d useRef()"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"    if (!peer.current || peer.current.destroyed) {"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"      peer.current \u003d new Peer(userId, {"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"        host: PEERJS_HOST,"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"        port: PEERJS_PORT,"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"        path: PEERJS_PATH,"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"      peer.current.on(\u0027open\u0027, (userId) \u003d\u003e {"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"        console.log(\u0027opened with: \u0027, userId)"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"        socket.emit(\u0027join-room\u0027, { roomId, userId })"},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":"      peer.current.on(\u0027close\u0027, () \u003d\u003e {"},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"        console.log(\u0027other person closed: \u0027, userId)"},{"lineNumber":49,"author":{"gitId":"MarcusTXK"},"content":"        setUpOtherStream(null, false)"},{"lineNumber":50,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":51,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":52,"author":{"gitId":"MarcusTXK"},"content":"      peer.current.on(\u0027error\u0027, (e) \u003d\u003e {"},{"lineNumber":53,"author":{"gitId":"MarcusTXK"},"content":"        console.log(\u0027peer error\u0027, e)"},{"lineNumber":54,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":55,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":56,"author":{"gitId":"MarcusTXK"},"content":"      socket.on(\u0027user-disconnected\u0027, (otherUserId) \u003d\u003e {"},{"lineNumber":57,"author":{"gitId":"MarcusTXK"},"content":"        console.log(\u0027user-disconnected: peer\u0027, peer.current)"},{"lineNumber":58,"author":{"gitId":"MarcusTXK"},"content":"        console.log(\u0027otherUserId\u0027, otherUserId)"},{"lineNumber":59,"author":{"gitId":"MarcusTXK"},"content":"        setUpOtherStream(null, false)"},{"lineNumber":60,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":61,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":63,"author":{"gitId":"MarcusTXK"},"content":"    if (!myStream) {"},{"lineNumber":64,"author":{"gitId":"MarcusTXK"},"content":"      const getUserMedia \u003d"},{"lineNumber":65,"author":{"gitId":"MarcusTXK"},"content":"        navigator.getUserMedia ||"},{"lineNumber":66,"author":{"gitId":"MarcusTXK"},"content":"        navigator.webkitGetUserMedia ||"},{"lineNumber":67,"author":{"gitId":"MarcusTXK"},"content":"        navigator.mozGetUserMedia"},{"lineNumber":68,"author":{"gitId":"MarcusTXK"},"content":"      getUserMedia("},{"lineNumber":69,"author":{"gitId":"MarcusTXK"},"content":"        { video: true, audio: true },"},{"lineNumber":70,"author":{"gitId":"MarcusTXK"},"content":"        (stream) \u003d\u003e {"},{"lineNumber":71,"author":{"gitId":"MarcusTXK"},"content":"          isAudioRef.current \u003d false"},{"lineNumber":72,"author":{"gitId":"MarcusTXK"},"content":"          const videoTrack \u003d stream"},{"lineNumber":73,"author":{"gitId":"MarcusTXK"},"content":"            .getTracks()"},{"lineNumber":74,"author":{"gitId":"MarcusTXK"},"content":"            .find((track) \u003d\u003e track.kind \u003d\u003d\u003d \u0027video\u0027)"},{"lineNumber":75,"author":{"gitId":"MarcusTXK"},"content":"          videoTrack.enabled \u003d isVideo"},{"lineNumber":76,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":77,"author":{"gitId":"MarcusTXK"},"content":"          const audioTrack \u003d stream"},{"lineNumber":78,"author":{"gitId":"MarcusTXK"},"content":"            .getTracks()"},{"lineNumber":79,"author":{"gitId":"MarcusTXK"},"content":"            .find((track) \u003d\u003e track.kind \u003d\u003d\u003d \u0027audio\u0027)"},{"lineNumber":80,"author":{"gitId":"MarcusTXK"},"content":"          audioTrack.enabled \u003d isAudioRef.current"},{"lineNumber":81,"author":{"gitId":"MarcusTXK"},"content":"          setMyStream(stream)"},{"lineNumber":82,"author":{"gitId":"MarcusTXK"},"content":"          selfVideo.current.srcObject \u003d stream"},{"lineNumber":83,"author":{"gitId":"MarcusTXK"},"content":"          callOtherUser(otherUserId, stream)"},{"lineNumber":84,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":85,"author":{"gitId":"MarcusTXK"},"content":"          peer.current.on("},{"lineNumber":86,"author":{"gitId":"MarcusTXK"},"content":"            \u0027call\u0027,"},{"lineNumber":87,"author":{"gitId":"MarcusTXK"},"content":"            (call) \u003d\u003e {"},{"lineNumber":88,"author":{"gitId":"MarcusTXK"},"content":"              console.log(\u0027Hi, I just got a call, this is mystream: \u0027, stream)"},{"lineNumber":89,"author":{"gitId":"MarcusTXK"},"content":"              call.answer(stream) // Answer the call with an A/V stream."},{"lineNumber":90,"author":{"gitId":"MarcusTXK"},"content":"              call.on(\u0027stream\u0027, (remoteStream) \u003d\u003e {"},{"lineNumber":91,"author":{"gitId":"MarcusTXK"},"content":"                // Show stream in some video/canvas element."},{"lineNumber":92,"author":{"gitId":"MarcusTXK"},"content":"                console.log(\u0027remote stream from call\u0027, remoteStream)"},{"lineNumber":93,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":94,"author":{"gitId":"MarcusTXK"},"content":"                setUpOtherStream(remoteStream, true)"},{"lineNumber":95,"author":{"gitId":"MarcusTXK"},"content":"              })"},{"lineNumber":96,"author":{"gitId":"MarcusTXK"},"content":"            },"},{"lineNumber":97,"author":{"gitId":"MarcusTXK"},"content":"            (err) \u003d\u003e {"},{"lineNumber":98,"author":{"gitId":"MarcusTXK"},"content":"              console.log(\u0027Failed to get local stream\u0027, err)"},{"lineNumber":99,"author":{"gitId":"MarcusTXK"},"content":"            }"},{"lineNumber":100,"author":{"gitId":"MarcusTXK"},"content":"          )"},{"lineNumber":101,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":102,"author":{"gitId":"MarcusTXK"},"content":"          peer.current.on("},{"lineNumber":103,"author":{"gitId":"MarcusTXK"},"content":"            \u0027connection\u0027,"},{"lineNumber":104,"author":{"gitId":"MarcusTXK"},"content":"            (conn) \u003d\u003e {"},{"lineNumber":105,"author":{"gitId":"MarcusTXK"},"content":"              console.log(\u0027Hi, I just got a connection\u0027)"},{"lineNumber":106,"author":{"gitId":"MarcusTXK"},"content":"              console.log(\u0027connect\u0027, conn)"},{"lineNumber":107,"author":{"gitId":"MarcusTXK"},"content":"              setConnection(conn)"},{"lineNumber":108,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":109,"author":{"gitId":"MarcusTXK"},"content":"              conn.on(\u0027error\u0027, function (err) {"},{"lineNumber":110,"author":{"gitId":"MarcusTXK"},"content":"                console.log(\u0027error\u0027)"},{"lineNumber":111,"author":{"gitId":"MarcusTXK"},"content":"              })"},{"lineNumber":112,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":113,"author":{"gitId":"MarcusTXK"},"content":"              conn.on(\u0027open\u0027, () \u003d\u003e {"},{"lineNumber":114,"author":{"gitId":"MarcusTXK"},"content":"                // Send messages"},{"lineNumber":115,"author":{"gitId":"MarcusTXK"},"content":"                console.log(\u0027audio video\u0027, isAudioRef.current, isVideo)"},{"lineNumber":116,"author":{"gitId":"MarcusTXK"},"content":"                if (conn) {"},{"lineNumber":117,"author":{"gitId":"MarcusTXK"},"content":"                  conn.send({ isAudio: isAudioRef.current, isVideo })"},{"lineNumber":118,"author":{"gitId":"MarcusTXK"},"content":"                }"},{"lineNumber":119,"author":{"gitId":"MarcusTXK"},"content":"              })"},{"lineNumber":120,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":121,"author":{"gitId":"MarcusTXK"},"content":"              // Receive messages"},{"lineNumber":122,"author":{"gitId":"MarcusTXK"},"content":"              conn.on(\u0027data\u0027, function (data) {"},{"lineNumber":123,"author":{"gitId":"MarcusTXK"},"content":"                console.log(\u0027Received\u0027, data)"},{"lineNumber":124,"author":{"gitId":"MarcusTXK"},"content":"                setOtherAudio(data.isAudio)"},{"lineNumber":125,"author":{"gitId":"MarcusTXK"},"content":"              })"},{"lineNumber":126,"author":{"gitId":"MarcusTXK"},"content":"            },"},{"lineNumber":127,"author":{"gitId":"MarcusTXK"},"content":"            (err) \u003d\u003e {"},{"lineNumber":128,"author":{"gitId":"MarcusTXK"},"content":"              console.log(\u0027Connection err\u0027, err)"},{"lineNumber":129,"author":{"gitId":"MarcusTXK"},"content":"            }"},{"lineNumber":130,"author":{"gitId":"MarcusTXK"},"content":"          )"},{"lineNumber":131,"author":{"gitId":"MarcusTXK"},"content":"        },"},{"lineNumber":132,"author":{"gitId":"MarcusTXK"},"content":"        (err) \u003d\u003e {"},{"lineNumber":133,"author":{"gitId":"MarcusTXK"},"content":"          console.log(\u0027Failed to get local stream\u0027, err)"},{"lineNumber":134,"author":{"gitId":"MarcusTXK"},"content":"        }"},{"lineNumber":135,"author":{"gitId":"MarcusTXK"},"content":"      )"},{"lineNumber":136,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":137,"author":{"gitId":"MarcusTXK"},"content":"    // eslint-disable-next-line react-hooks/exhaustive-deps"},{"lineNumber":138,"author":{"gitId":"MarcusTXK"},"content":"  }, [isVideo, myStream, otherUserId, roomId, socket, userId])"},{"lineNumber":139,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":140,"author":{"gitId":"MarcusTXK"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":141,"author":{"gitId":"MarcusTXK"},"content":"    if (peer.current) {"},{"lineNumber":142,"author":{"gitId":"MarcusTXK"},"content":"      console.log(\u0027newPeer that is set in peer: \u0027, peer.current)"},{"lineNumber":143,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":144,"author":{"gitId":"MarcusTXK"},"content":"      if (myStream \u0026\u0026 !otherStream) {"},{"lineNumber":145,"author":{"gitId":"MarcusTXK"},"content":"        callOtherUser(otherUserId, myStream, peer.current)"},{"lineNumber":146,"author":{"gitId":"MarcusTXK"},"content":"      }"},{"lineNumber":147,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":148,"author":{"gitId":"MarcusTXK"},"content":"    // eslint-disable-next-line react-hooks/exhaustive-deps"},{"lineNumber":149,"author":{"gitId":"MarcusTXK"},"content":"  }, [myStream, otherStream, otherUserId])"},{"lineNumber":150,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":151,"author":{"gitId":"MarcusTXK"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":152,"author":{"gitId":"MarcusTXK"},"content":"    return () \u003d\u003e {"},{"lineNumber":153,"author":{"gitId":"MarcusTXK"},"content":"      if (peer.current) {"},{"lineNumber":154,"author":{"gitId":"MarcusTXK"},"content":"        peer.current.disconnect()"},{"lineNumber":155,"author":{"gitId":"MarcusTXK"},"content":"        peer.current.destroy()"},{"lineNumber":156,"author":{"gitId":"MarcusTXK"},"content":"        console.log(\u0027cleaned up\u0027)"},{"lineNumber":157,"author":{"gitId":"MarcusTXK"},"content":"      }"},{"lineNumber":158,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":159,"author":{"gitId":"MarcusTXK"},"content":"  }, [])"},{"lineNumber":160,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":161,"author":{"gitId":"MarcusTXK"},"content":"  const callOtherUser \u003d (id, providedStream) \u003d\u003e {"},{"lineNumber":162,"author":{"gitId":"MarcusTXK"},"content":"    console.log("},{"lineNumber":163,"author":{"gitId":"MarcusTXK"},"content":"      \u0027callOtherUser: ID, providestream, mystream, peer: \u0027,"},{"lineNumber":164,"author":{"gitId":"MarcusTXK"},"content":"      id,"},{"lineNumber":165,"author":{"gitId":"MarcusTXK"},"content":"      providedStream,"},{"lineNumber":166,"author":{"gitId":"MarcusTXK"},"content":"      myStream,"},{"lineNumber":167,"author":{"gitId":"MarcusTXK"},"content":"      peer.current"},{"lineNumber":168,"author":{"gitId":"MarcusTXK"},"content":"    )"},{"lineNumber":169,"author":{"gitId":"MarcusTXK"},"content":"    if (!peer.current) {"},{"lineNumber":170,"author":{"gitId":"MarcusTXK"},"content":"      console.log(\u0027no peer yet\u0027)"},{"lineNumber":171,"author":{"gitId":"MarcusTXK"},"content":"      return"},{"lineNumber":172,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":173,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":174,"author":{"gitId":"MarcusTXK"},"content":"    const call \u003d peer.current.call("},{"lineNumber":175,"author":{"gitId":"MarcusTXK"},"content":"      id,"},{"lineNumber":176,"author":{"gitId":"MarcusTXK"},"content":"      providedStream ? providedStream : myStream"},{"lineNumber":177,"author":{"gitId":"MarcusTXK"},"content":"    )"},{"lineNumber":178,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":179,"author":{"gitId":"MarcusTXK"},"content":"    if (call) {"},{"lineNumber":180,"author":{"gitId":"MarcusTXK"},"content":"      call.on(\u0027stream\u0027, (remoteStream) \u003d\u003e {"},{"lineNumber":181,"author":{"gitId":"MarcusTXK"},"content":"        console.log(\u0027received stream from other dude\u0027)"},{"lineNumber":182,"author":{"gitId":"MarcusTXK"},"content":"        setUpOtherStream(remoteStream, true)"},{"lineNumber":183,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":184,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":185,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":186,"author":{"gitId":"MarcusTXK"},"content":"    const conn \u003d peer.current.connect(id)"},{"lineNumber":187,"author":{"gitId":"MarcusTXK"},"content":"    if (conn) {"},{"lineNumber":188,"author":{"gitId":"MarcusTXK"},"content":"      console.log(\u0027connect\u0027, conn)"},{"lineNumber":189,"author":{"gitId":"MarcusTXK"},"content":"      setConnection(conn)"},{"lineNumber":190,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":191,"author":{"gitId":"MarcusTXK"},"content":"      conn.on(\u0027error\u0027, function (err) {"},{"lineNumber":192,"author":{"gitId":"MarcusTXK"},"content":"        console.log(\u0027conection error: \u0027, err)"},{"lineNumber":193,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":194,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":195,"author":{"gitId":"MarcusTXK"},"content":"      conn.on(\u0027open\u0027, function () {"},{"lineNumber":196,"author":{"gitId":"MarcusTXK"},"content":"        conn.send({ isAudio: isAudioRef.current, isVideo })"},{"lineNumber":197,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":198,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":199,"author":{"gitId":"MarcusTXK"},"content":"      conn.on(\u0027data\u0027, function (data) {"},{"lineNumber":200,"author":{"gitId":"MarcusTXK"},"content":"        console.log(\u0027Received\u0027, data)"},{"lineNumber":201,"author":{"gitId":"MarcusTXK"},"content":"        setOtherAudio(data.isAudio)"},{"lineNumber":202,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":203,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":204,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":205,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":206,"author":{"gitId":"MarcusTXK"},"content":"  const setUpOtherStream \u003d (stream, isShow) \u003d\u003e {"},{"lineNumber":207,"author":{"gitId":"MarcusTXK"},"content":"    setShowOther(isShow)"},{"lineNumber":208,"author":{"gitId":"MarcusTXK"},"content":"    setOtherStream(stream)"},{"lineNumber":209,"author":{"gitId":"MarcusTXK"},"content":"    if (otherVideo.current) {"},{"lineNumber":210,"author":{"gitId":"MarcusTXK"},"content":"      otherVideo.current.srcObject \u003d stream"},{"lineNumber":211,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":212,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":213,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":214,"author":{"gitId":"MarcusTXK"},"content":"  const toggleAudioVideo \u003d (isAudioEnabled, isVideoEnabled) \u003d\u003e {"},{"lineNumber":215,"author":{"gitId":"MarcusTXK"},"content":"    isAudioRef.current \u003d isAudioEnabled"},{"lineNumber":216,"author":{"gitId":"MarcusTXK"},"content":"    setAudio(isAudioEnabled)"},{"lineNumber":217,"author":{"gitId":"MarcusTXK"},"content":"    setVideo(isVideoEnabled)"},{"lineNumber":218,"author":{"gitId":"MarcusTXK"},"content":"    console.log(\u0027toggleAudioVideo, stream:\u0027, myStream)"},{"lineNumber":219,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":220,"author":{"gitId":"MarcusTXK"},"content":"    const videoTrack \u003d myStream"},{"lineNumber":221,"author":{"gitId":"MarcusTXK"},"content":"      .getTracks()"},{"lineNumber":222,"author":{"gitId":"MarcusTXK"},"content":"      .find((track) \u003d\u003e track.kind \u003d\u003d\u003d \u0027video\u0027)"},{"lineNumber":223,"author":{"gitId":"MarcusTXK"},"content":"    console.log(\u0027videoTracks: \u0027, myStream.getTracks())"},{"lineNumber":224,"author":{"gitId":"MarcusTXK"},"content":"    videoTrack.enabled \u003d isVideoEnabled"},{"lineNumber":225,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":226,"author":{"gitId":"MarcusTXK"},"content":"    const audioTrack \u003d myStream"},{"lineNumber":227,"author":{"gitId":"MarcusTXK"},"content":"      .getTracks()"},{"lineNumber":228,"author":{"gitId":"MarcusTXK"},"content":"      .find((track) \u003d\u003e track.kind \u003d\u003d\u003d \u0027audio\u0027)"},{"lineNumber":229,"author":{"gitId":"MarcusTXK"},"content":"    audioTrack.enabled \u003d isAudioEnabled"},{"lineNumber":230,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":231,"author":{"gitId":"MarcusTXK"},"content":"    setMyStream(myStream)"},{"lineNumber":232,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":233,"author":{"gitId":"MarcusTXK"},"content":"    if (connection) {"},{"lineNumber":234,"author":{"gitId":"MarcusTXK"},"content":"      connection.send({ isAudio: isAudioEnabled, isVideo: isVideoEnabled })"},{"lineNumber":235,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":236,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":237,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":238,"author":{"gitId":"MarcusTXK"},"content":"  return ("},{"lineNumber":239,"author":{"gitId":"MarcusTXK"},"content":"    \u003c\u003e"},{"lineNumber":240,"author":{"gitId":"MarcusTXK"},"content":"      \u003cHStack spacing\u003d\"5px\" position\u003d\"fixed\" bottom\u003d{5} right\u003d{5} zIndex\u003d{1000}\u003e"},{"lineNumber":241,"author":{"gitId":"MarcusTXK"},"content":"        \u003cStack spacing\u003d{-10} background\u003d\"black\" hidden\u003d{!isShowOther}\u003e"},{"lineNumber":242,"author":{"gitId":"MarcusTXK"},"content":"          \u003cAspectRatio w\u003d\"200px\" ratio\u003d{4 / 3}\u003e"},{"lineNumber":243,"author":{"gitId":"MarcusTXK"},"content":"            \u003cvideo"},{"lineNumber":244,"author":{"gitId":"MarcusTXK"},"content":"              id\u003d\"other\""},{"lineNumber":245,"author":{"gitId":"MarcusTXK"},"content":"              ref\u003d{otherVideo}"},{"lineNumber":246,"author":{"gitId":"MarcusTXK"},"content":"              autoPlay\u003d{true}"},{"lineNumber":247,"author":{"gitId":"MarcusTXK"},"content":"              playsInline\u003d{true}"},{"lineNumber":248,"author":{"gitId":"MarcusTXK"},"content":"            /\u003e"},{"lineNumber":249,"author":{"gitId":"MarcusTXK"},"content":"          \u003c/AspectRatio\u003e"},{"lineNumber":250,"author":{"gitId":"MarcusTXK"},"content":"          \u003cButtonGroup colorScheme\u003d{buttonColour} spacing\u003d\"0\"\u003e"},{"lineNumber":251,"author":{"gitId":"MarcusTXK"},"content":"            \u003cButton"},{"lineNumber":252,"author":{"gitId":"MarcusTXK"},"content":"              width\u003d\"full\""},{"lineNumber":253,"author":{"gitId":"MarcusTXK"},"content":"              onClick\u003d{() \u003d\u003e {"},{"lineNumber":254,"author":{"gitId":"MarcusTXK"},"content":"                console.log("},{"lineNumber":255,"author":{"gitId":"MarcusTXK"},"content":"                  \u0027other dude audio\u0027,"},{"lineNumber":256,"author":{"gitId":"MarcusTXK"},"content":"                  otherStream \u0026\u0026 otherStream.getAudioTracks()"},{"lineNumber":257,"author":{"gitId":"MarcusTXK"},"content":"                )"},{"lineNumber":258,"author":{"gitId":"MarcusTXK"},"content":"                console.log("},{"lineNumber":259,"author":{"gitId":"MarcusTXK"},"content":"                  \u0027other video\u0027,"},{"lineNumber":260,"author":{"gitId":"MarcusTXK"},"content":"                  otherStream \u0026\u0026 otherStream.getVideoTracks()"},{"lineNumber":261,"author":{"gitId":"MarcusTXK"},"content":"                )"},{"lineNumber":262,"author":{"gitId":"MarcusTXK"},"content":"                console.log(\u0027other stream tracks\u0027, otherStream.getTracks())"},{"lineNumber":263,"author":{"gitId":"MarcusTXK"},"content":"              }}"},{"lineNumber":264,"author":{"gitId":"MarcusTXK"},"content":"            \u003e"},{"lineNumber":265,"author":{"gitId":"MarcusTXK"},"content":"              {isOtherAudio ? \u003cFaMicrophone /\u003e : \u003cFaMicrophoneSlash /\u003e}"},{"lineNumber":266,"author":{"gitId":"MarcusTXK"},"content":"            \u003c/Button\u003e"},{"lineNumber":267,"author":{"gitId":"MarcusTXK"},"content":"            \u003cButton width\u003d\"full\"\u003e{otherUserId}\u003c/Button\u003e"},{"lineNumber":268,"author":{"gitId":"MarcusTXK"},"content":"          \u003c/ButtonGroup\u003e"},{"lineNumber":269,"author":{"gitId":"MarcusTXK"},"content":"        \u003c/Stack\u003e"},{"lineNumber":270,"author":{"gitId":"MarcusTXK"},"content":"        \u003cStack spacing\u003d{-10} background\u003d\"black\"\u003e"},{"lineNumber":271,"author":{"gitId":"MarcusTXK"},"content":"          \u003cAspectRatio w\u003d\"200px\" ratio\u003d{4 / 3}\u003e"},{"lineNumber":272,"author":{"gitId":"MarcusTXK"},"content":"            \u003cvideo"},{"lineNumber":273,"author":{"gitId":"MarcusTXK"},"content":"              id\u003d\"self\""},{"lineNumber":274,"author":{"gitId":"MarcusTXK"},"content":"              ref\u003d{selfVideo}"},{"lineNumber":275,"author":{"gitId":"MarcusTXK"},"content":"              muted\u003d{true}"},{"lineNumber":276,"author":{"gitId":"MarcusTXK"},"content":"              autoPlay\u003d{true}"},{"lineNumber":277,"author":{"gitId":"MarcusTXK"},"content":"              playsInline\u003d{true}"},{"lineNumber":278,"author":{"gitId":"MarcusTXK"},"content":"            /\u003e"},{"lineNumber":279,"author":{"gitId":"MarcusTXK"},"content":"          \u003c/AspectRatio\u003e"},{"lineNumber":280,"author":{"gitId":"MarcusTXK"},"content":"          \u003cButtonGroup colorScheme\u003d{buttonColour} spacing\u003d\"0\"\u003e"},{"lineNumber":281,"author":{"gitId":"MarcusTXK"},"content":"            \u003cButton"},{"lineNumber":282,"author":{"gitId":"MarcusTXK"},"content":"              width\u003d\"full\""},{"lineNumber":283,"author":{"gitId":"MarcusTXK"},"content":"              onClick\u003d{() \u003d\u003e {"},{"lineNumber":284,"author":{"gitId":"MarcusTXK"},"content":"                toggleAudioVideo(!isAudioRef.current, isVideo)"},{"lineNumber":285,"author":{"gitId":"MarcusTXK"},"content":"              }}"},{"lineNumber":286,"author":{"gitId":"MarcusTXK"},"content":"            \u003e"},{"lineNumber":287,"author":{"gitId":"MarcusTXK"},"content":"              {isAudio ? \u003cFaMicrophone /\u003e : \u003cFaMicrophoneSlash /\u003e}"},{"lineNumber":288,"author":{"gitId":"MarcusTXK"},"content":"            \u003c/Button\u003e"},{"lineNumber":289,"author":{"gitId":"MarcusTXK"},"content":"            \u003cButton"},{"lineNumber":290,"author":{"gitId":"MarcusTXK"},"content":"              width\u003d\"full\""},{"lineNumber":291,"author":{"gitId":"MarcusTXK"},"content":"              onClick\u003d{() \u003d\u003e {"},{"lineNumber":292,"author":{"gitId":"MarcusTXK"},"content":"                console.log(myStream)"},{"lineNumber":293,"author":{"gitId":"MarcusTXK"},"content":"                toggleAudioVideo(isAudioRef.current, !isVideo)"},{"lineNumber":294,"author":{"gitId":"MarcusTXK"},"content":"              }}"},{"lineNumber":295,"author":{"gitId":"MarcusTXK"},"content":"            \u003e"},{"lineNumber":296,"author":{"gitId":"MarcusTXK"},"content":"              {isVideo ? \u003cFaVideo /\u003e : \u003cFaVideoSlash /\u003e}"},{"lineNumber":297,"author":{"gitId":"MarcusTXK"},"content":"            \u003c/Button\u003e"},{"lineNumber":298,"author":{"gitId":"MarcusTXK"},"content":"          \u003c/ButtonGroup\u003e"},{"lineNumber":299,"author":{"gitId":"MarcusTXK"},"content":"        \u003c/Stack\u003e"},{"lineNumber":300,"author":{"gitId":"MarcusTXK"},"content":"      \u003c/HStack\u003e"},{"lineNumber":301,"author":{"gitId":"MarcusTXK"},"content":"    \u003c/\u003e"},{"lineNumber":302,"author":{"gitId":"MarcusTXK"},"content":"  )"},{"lineNumber":303,"author":{"gitId":"MarcusTXK"},"content":"}"},{"lineNumber":304,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":305,"author":{"gitId":"MarcusTXK"},"content":"export default VideoChat"}],"authorContributionMap":{"MarcusTXK":305}},{"path":"frontend/src/constants.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"export const STATUS_CODE_CREATED \u003d 201"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"export const STATUS_CODE_SUCCESS \u003d 200"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"export const STATUS_CODE_NOT_MODIFIED \u003d 304"},{"lineNumber":5,"author":{"gitId":"-"},"content":"export const STATUS_CODE_CONFLICT \u003d 409"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"export const STATUS_CODE_BAD_REQUEST \u003d 400"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"// USER SERVICE API"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"const URI_USER_SERVICE \u003d"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"  process.env.NODE_ENV \u003d\u003d\u003d \u0027production\u0027 ? \u0027\u0027 : \u0027http://localhost:8000\u0027"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"const PREFIX_USER_SERVICE \u003d \u0027/api/v1/user\u0027"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"export const URL_USER_SERVICE \u003d URI_USER_SERVICE + PREFIX_USER_SERVICE"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"export const URL_USER_LOGIN \u003d URL_USER_SERVICE + \u0027/login\u0027"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"export const URL_USER_LOGOUT \u003d URL_USER_SERVICE + \u0027/logout\u0027"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"export const URL_USER_SIGNUP \u003d URL_USER_SERVICE + \u0027/signup\u0027"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"export const URL_USER_TOKEN \u003d URL_USER_SERVICE + \u0027/token\u0027"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"export const URL_USER_TOKEN_TEST \u003d URL_USER_SERVICE + \u0027/testToken\u0027"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"// QUESTION SERVICE API"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"const URI_QUESTION_SERVICE \u003d"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"  process.env.NODE_ENV \u003d\u003d\u003d \u0027production\u0027 ? \u0027\u0027 : \u0027http://localhost:8500\u0027"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"export const URL_QUESTION_SERVICE \u003d URI_QUESTION_SERVICE + \u0027/api/v1/question\u0027"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"export const PASSWORD_REGEX \u003d"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"  /^(?\u003d.*[a-z])(?\u003d.*[A-Z])(?\u003d.*[0-9])(?\u003d.*[!@#$%]).{8,24}$/"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"export const USER_REGEX \u003d /^[A-z][A-z0-9-_]{3,23}$/"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"export const EMAIL_REGEX \u003d /^\\S+@\\S+\\.\\S+$/"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"export const URI_MATCHING_SERVICE \u003d"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"  process.env.NODE_ENV \u003d\u003d\u003d \u0027production\u0027 ? \u0027\u0027 : \u0027http://localhost:8001\u0027"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"export const URI_MATCHING_SERVICE_SOCKET_PATH \u003d \u0027/socket.io/matching\u0027"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"const PREFIX_MATCHING_SERVICE \u003d \u0027/api/v1/matching\u0027"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"export const URL_MATCHING_SERVICE \u003d"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"  URI_MATCHING_SERVICE + PREFIX_MATCHING_SERVICE"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"export const URI_ROOM_SERVICE \u003d"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"  process.env.NODE_ENV \u003d\u003d\u003d \u0027production\u0027 ? \u0027\u0027 : \u0027http://localhost:8022\u0027"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"export const URI_ROOM_SERVICE_SOCKET_PATH \u003d \u0027/socket.io/room\u0027"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"const PREFIX_ROOM_SERVICE \u003d \u0027/api/v1/room\u0027"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"export const URL_ROOM_SERVICE \u003d URI_ROOM_SERVICE + PREFIX_ROOM_SERVICE"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"export const PEERJS_HOST \u003d"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"  process.env.NODE_ENV \u003d\u003d\u003d \u0027production\u0027 ? \u0027localhost\u0027 : \u0027localhost\u0027"},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":"export const PEERJS_PORT \u003d process.env.NODE_ENV \u003d\u003d\u003d \u0027production\u0027 ? 80 : 9000"},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"export const PEERJS_PATH \u003d \u0027/myapp\u0027"},{"lineNumber":49,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":50,"author":{"gitId":"MarcusTXK"},"content":"export const EVENT_LISTEN \u003d {"},{"lineNumber":51,"author":{"gitId":"MarcusTXK"},"content":"  MATCHING: \u0027matching\u0027,"},{"lineNumber":52,"author":{"gitId":"MarcusTXK"},"content":"  MATCH_SUCCESS: \u0027matchSuccess\u0027,"},{"lineNumber":53,"author":{"gitId":"MarcusTXK"},"content":"  MATCH_FAIL: \u0027matchFail\u0027,"},{"lineNumber":54,"author":{"gitId":"MarcusTXK"},"content":"  MATCH_TIMEOUT: \u0027matchTimeout\u0027,"},{"lineNumber":55,"author":{"gitId":"MarcusTXK"},"content":"  ROOM_END: \u0027roomEnd\u0027,"},{"lineNumber":56,"author":{"gitId":"MarcusTXK"},"content":"  ROOM_UPDATE: \u0027roomUpdate\u0027,"},{"lineNumber":57,"author":{"gitId":"MarcusTXK"},"content":"}"},{"lineNumber":58,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":59,"author":{"gitId":"MarcusTXK"},"content":"export const EVENT_EMIT \u003d {"},{"lineNumber":60,"author":{"gitId":"MarcusTXK"},"content":"  MATCH_FIND: \u0027matchFind\u0027,"},{"lineNumber":61,"author":{"gitId":"MarcusTXK"},"content":"  MATCH_CANCEL: \u0027matchCancel\u0027,"},{"lineNumber":62,"author":{"gitId":"MarcusTXK"},"content":"}"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"export const RANDOM_AVATAR_URL \u003d \u0027https://avatars.dicebear.com/api/bottts/\u0027"},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"// HISTORY SERVICE API"},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":"const URI_HISTORY_SERVICE \u003d"},{"lineNumber":69,"author":{"gitId":"MarcusTXK"},"content":"  process.env.NODE_ENV \u003d\u003d\u003d \u0027production\u0027 ? \u0027\u0027 : \u0027http://localhost:8080\u0027"},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":"const PREFIX_HISTORY_SERVICE \u003d \u0027/api/v1/history\u0027"},{"lineNumber":71,"author":{"gitId":"uyencfi"},"content":"export const URL_HISTORY_USER \u003d"},{"lineNumber":72,"author":{"gitId":"uyencfi"},"content":"  URI_HISTORY_SERVICE + PREFIX_HISTORY_SERVICE + \u0027/user\u0027"},{"lineNumber":73,"author":{"gitId":"uyencfi"},"content":"export const URL_HISTORY_ROOM \u003d"},{"lineNumber":74,"author":{"gitId":"uyencfi"},"content":"  URI_HISTORY_SERVICE + PREFIX_HISTORY_SERVICE + \u0027/room\u0027"}],"authorContributionMap":{"MarcusTXK":44,"Hzxin":3,"tlylt":16,"-":2,"uyencfi":9}},{"path":"frontend/src/context/AuthProvider.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { createContext, useState } from \"react\";"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"const AuthContext \u003d createContext({});"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"export const AuthProvider \u003d ({ children }) \u003d\u003e {"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    const [auth, setAuth] \u003d useState({"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"        accessToken: \"\","},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"        username: \"\","},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"        email: \"\","},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"        school: \"\","},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"        isLoggedIn: false,"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"    });"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    const [persist, setPersist] \u003d useState(JSON.parse(localStorage.getItem(\"persist:peerprep\")) || false);"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"    return ("},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        \u003cAuthContext.Provider value\u003d{{ auth, setAuth, persist, setPersist }}\u003e"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"            {children}"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"        \u003c/AuthContext.Provider\u003e"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"    )"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"export default AuthContext;"}],"authorContributionMap":{"tlylt":22}},{"path":"frontend/src/hooks/useAuth.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { useContext, useDebugValue } from \"react\";"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import AuthContext from \"../context/AuthProvider\";"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"const useAuth \u003d () \u003d\u003e {"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"    const { auth } \u003d useContext(AuthContext);"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    useDebugValue(auth, auth \u003d\u003e auth?.username ? \"Logged In\" : \"Logged Out\")"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"    return useContext(AuthContext);"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"export default useAuth;"}],"authorContributionMap":{"tlylt":10}},{"path":"frontend/src/hooks/useAxiosPrivate.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import axios from \u0027../api/axios.js\u0027;"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { useEffect } from \"react\";"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import useRefreshToken from \"./useRefreshToken\";"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import useAuth from \"./useAuth\";"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"const axiosPrivate \u003d axios.create({"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"    withCredentials: true,"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    headers: {"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"        \u0027Content-Type\u0027: \u0027application/json\u0027,"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"});"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"const useAxiosPrivate \u003d () \u003d\u003e {"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    const refresh \u003d useRefreshToken();"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"    const { auth } \u003d useAuth();"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    useEffect(() \u003d\u003e {"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"        const requestIntercept \u003d axiosPrivate.interceptors.request.use("},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"            config \u003d\u003e {"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"                if (!config.headers[\u0027Authorization\u0027]) {"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"                    config.headers[\u0027Authorization\u0027] \u003d `Bearer ${auth?.accessToken}`;"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"                }"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"                return config;"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"            }, (error) \u003d\u003e Promise.reject(error)"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"        );"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"        const responseIntercept \u003d axiosPrivate.interceptors.response.use("},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"            response \u003d\u003e response,"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"            async (error) \u003d\u003e {"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"                const prevRequest \u003d error?.config;"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"                if (error?.response?.status \u003d\u003d\u003d 401 \u0026\u0026 !prevRequest?.sent) {"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"                    prevRequest.sent \u003d true;"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"                    const newAccessToken \u003d await refresh();"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"                    prevRequest.headers[\u0027Authorization\u0027] \u003d `Bearer ${newAccessToken}`;"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"                    return axiosPrivate(prevRequest);"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"                }"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"                return Promise.reject(error);"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"            }"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"        );"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"        return () \u003d\u003e {"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"            axiosPrivate.interceptors.request.eject(requestIntercept);"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"            axiosPrivate.interceptors.response.eject(responseIntercept);"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"    }, [auth, refresh])"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"    return axiosPrivate;"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"export default useAxiosPrivate;"}],"authorContributionMap":{"tlylt":50}},{"path":"frontend/src/hooks/useCountdown.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"import { useEffect, useState } from \u0027react\u0027"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"// Credit to https://blog.greenroots.info/how-to-create-a-countdown-timer-using-react-hooks"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"const useCountdown \u003d (targetDate) \u003d\u003e {"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"  const countDownDate \u003d new Date(targetDate).getTime()"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"  const [countDown, setCountDown] \u003d useState("},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"    countDownDate - new Date().getTime()"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"  )"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"    const interval \u003d setInterval(() \u003d\u003e {"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"      setCountDown(countDownDate - new Date().getTime())"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"    }, 1000)"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"    return () \u003d\u003e clearInterval(interval)"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"  }, [countDownDate])"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"  return getReturnValues(countDown)"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"}"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"const getReturnValues \u003d (countDown) \u003d\u003e {"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"  // calculate time left"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"  const days \u003d Math.floor(countDown / (1000 * 60 * 60 * 24))"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"  const hours \u003d Math.floor("},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"    (countDown % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"  )"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"  const minutes \u003d Math.floor((countDown % (1000 * 60 * 60)) / (1000 * 60))"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"  const seconds \u003d Math.floor((countDown % (1000 * 60)) / 1000)"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"  return [days, hours, minutes, seconds]"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"}"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"export { useCountdown }"}],"authorContributionMap":{"MarcusTXK":35}},{"path":"frontend/src/hooks/useFetchQuestionById.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"import axios from \u0027../api/axios\u0027"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"import { useState, useEffect } from \u0027react\u0027"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"import { URL_QUESTION_SERVICE } from \u0027../constants\u0027"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"const useFetchQuestionById \u003d (questionId) \u003d\u003e {"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"  const [loading, setLoading] \u003d useState(true)"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"  const [data, setData] \u003d useState()"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"    const fetchData \u003d async () \u003d\u003e {"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"      setLoading(true)"},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"      try {"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"        const { data: response } \u003d await axios.get("},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"          URL_QUESTION_SERVICE + \u0027?id\u003d\u0027 + (questionId ? questionId : \u00271\u0027)"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"        )"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"        setData(response)"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"      } catch (error) {"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"        //todo toast"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"        console.error(error)"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"      }"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"      setLoading(false)"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"    fetchData()"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"  }, [questionId])"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"  return {"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"    data,"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"    loading,"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"export default useFetchQuestionById"}],"authorContributionMap":{"MarcusTXK":15,"Hzxin":17}},{"path":"frontend/src/hooks/useLanguage.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import { useEffect, useState } from \u0027react\u0027"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"import { db } from \u0027../api/firebase\u0027"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"const DEFAULT_LANGUAGE \u003d \u0027Python\u0027"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"/** "},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":" * Hook used in collaborative editor to sync the editor\u0027s coding language between users."},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":" * Returns the current language, and a function to update it."},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":" */"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"const useLanguage \u003d (docPath) \u003d\u003e {"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"  const [language, setLanguageLocally] \u003d useState(DEFAULT_LANGUAGE)"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"    const dbRef \u003d db.ref(`${docPath}/language`)"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"    // Listen to change from the other user"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"    dbRef.on(\u0027value\u0027, (snapshot) \u003d\u003e {"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"      if (snapshot.exists() \u0026\u0026 snapshot.val() !\u003d\u003d language) {"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"        setLanguageLocally(snapshot.val())"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"    // Cleanup effect: Detach listener"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"    return () \u003d\u003e dbRef.off()"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"  })"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"  const updateLang \u003d (newLang) \u003d\u003e {"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"    if (newLang \u003d\u003d\u003d language) return"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"    setLanguageLocally(newLang)"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"    return db.ref(`${docPath}/language`).set(newLang).catch(console.log)"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"  return [language, updateLang]"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"export default useLanguage"}],"authorContributionMap":{"uyencfi":34}},{"path":"frontend/src/hooks/useLocalStorage.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"// https://usehooks.com/useLocalStorage"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { useState } from \"react\";"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"function useLocalStorage(key, initialValue) {"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"    // State to store our value"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    // Pass initial state function to useState so logic is only executed once"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"    const [storedValue, setStoredValue] \u003d useState(() \u003d\u003e {"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"        if (typeof window \u003d\u003d\u003d \"undefined\") {"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"            return initialValue;"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"        try {"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"            // Get from local storage by key"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"            const item \u003d window.localStorage.getItem(key);"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"            // Parse stored json or if none return initialValue"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"            return item ? JSON.parse(item) : initialValue;"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        } catch (error) {"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"            // If error also return initialValue"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"            console.log(error);"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"            return initialValue;"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"    });"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"    // Return a wrapped version of useState\u0027s setter function that ..."},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"    // ... persists the new value to localStorage."},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"    const setValue \u003d (value) \u003d\u003e {"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"        try {"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"            // Allow value to be a function so we have same API as useState"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"            const valueToStore \u003d"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"                value instanceof Function ? value(storedValue) : value;"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"            // Save state"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"            setStoredValue(valueToStore);"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"            // Save to local storage"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"            if (typeof window !\u003d\u003d \"undefined\") {"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"                window.localStorage.setItem(key, JSON.stringify(valueToStore));"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"            }"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"        } catch (error) {"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"            // A more advanced implementation would handle the error case"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"            console.log(error);"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"    };"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"    return [storedValue, setValue];"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"export default useLocalStorage;"}],"authorContributionMap":{"tlylt":43}},{"path":"frontend/src/hooks/useLogout.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { useNavigate } from \"react-router-dom\";"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { STATUS_CODE_SUCCESS, URL_USER_LOGOUT } from \"../constants\";"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import useAuth from \"./useAuth\";"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import useAxiosPrivate from \"./useAxiosPrivate\";"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"const useLogout \u003d () \u003d\u003e {"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"    const { setAuth } \u003d useAuth();"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    const axiosPrivate \u003d useAxiosPrivate()"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    const navigate \u003d useNavigate()"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    const logout \u003d async () \u003d\u003e {"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"        try {"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"            const res \u003d await axiosPrivate.post(URL_USER_LOGOUT, {"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"                withCredentials: true"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"            }).catch((err) \u003d\u003e {"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"                console.log(err.response.data.message)"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"            })"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"            if (res \u0026\u0026 res.status \u003d\u003d\u003d STATUS_CODE_SUCCESS) {"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"                setAuth({"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"                    accessToken: \u0027\u0027,"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"                    username: \u0027\u0027,"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"                    email: \u0027\u0027,"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"                    school: \u0027\u0027,"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"                    isLoggedIn: false"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"                })"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"                navigate(\u0027/login\u0027)"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"            }"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"        } catch (err) {"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"            console.error(err);"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"    return logout;"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"export default useLogout"}],"authorContributionMap":{"tlylt":36}},{"path":"frontend/src/hooks/useMedia.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"// https://usehooks.com/useMedia"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { useState, useEffect } from \"react\";"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"function useMedia(queries, values, defaultValue) {"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"    // Array containing a media query list for each query"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    const mediaQueryLists \u003d queries.map((q) \u003d\u003e window.matchMedia(q));"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"    // Function that gets value based on matching media query"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    const getValue \u003d () \u003d\u003e {"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"        // Get index of first media query that matches"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"        const index \u003d mediaQueryLists.findIndex((mql) \u003d\u003e mql.matches);"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"        // Return related value or defaultValue if none"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"        return typeof values[index] !\u003d\u003d \"undefined\" ? values[index] : defaultValue;"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    };"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    // State and setter for matched value"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"    const [value, setValue] \u003d useState(getValue);"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"    useEffect("},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"        () \u003d\u003e {"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"            // Event listener callback"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"            // Note: By defining getValue outside of useEffect we ensure that it has ..."},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"            // ... current values of hook args (as this hook callback is created once on mount)."},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"            const handler \u003d () \u003d\u003e setValue(getValue);"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"            // Set a listener for each media query with above handler as callback."},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"            mediaQueryLists.forEach((mql) \u003d\u003e mql.addListener(handler));"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"            // Remove listeners on cleanup"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"            return () \u003d\u003e"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"                mediaQueryLists.forEach((mql) \u003d\u003e mql.removeListener(handler));"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"        },"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"        // eslint-disable-next-line react-hooks/exhaustive-deps"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"        [] // Empty array ensures effect is only run on mount and unmount"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"    );"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"    return value;"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"export default useMedia;"}],"authorContributionMap":{"tlylt":34}},{"path":"frontend/src/hooks/useRefreshToken.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import axios from \u0027../api/axios\u0027;"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { URL_USER_TOKEN } from \u0027../constants\u0027;"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import useAuth from \u0027./useAuth\u0027;"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"const useRefreshToken \u003d () \u003d\u003e {"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    const { setAuth } \u003d useAuth();"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    const refresh \u003d async () \u003d\u003e {"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"        const response \u003d await axios.post(URL_USER_TOKEN);"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"        if (response.status \u003d\u003d\u003d 200) {"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"            setAuth(prev \u003d\u003e {"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"                return {"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"                    ...prev,"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"                    accessToken: response.data.data.accessToken,"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"                    username: response.data.data.username,"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"                    email: response.data.data.email,"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"                    school: response.data.data.school,"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"                    isLoggedIn: true"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"                }"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"            })"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"            return response.data.data.accessToken;"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"        console.error(response.data.message);"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"        setAuth({"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"            accessToken: \u0027\u0027,"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"            username: \u0027\u0027,"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"            email: \u0027\u0027,"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"            school: \u0027\u0027,"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"            isLoggedIn: false"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"        })"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"        return null;"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"    return refresh;"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"};"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"export default useRefreshToken;"}],"authorContributionMap":{"tlylt":36}},{"path":"frontend/src/hooks/useTabSize.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import { useEffect, useState } from \u0027react\u0027"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"import { db } from \u0027../api/firebase\u0027"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"const DEFAULT_TAB \u003d 4"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"/** "},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":" * Hook used in collaborative editor to sync tabSize between users."},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":" * Returns the current tab size, and a function to update it."},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":" */"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"const useTabSize \u003d (docPath) \u003d\u003e {"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"  const [tab, setTabLocally] \u003d useState(DEFAULT_TAB)"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"    const dbRef \u003d db.ref(`${docPath}/tab`)"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"    // Listen to tabSize change from the other user"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"    dbRef.on(\u0027value\u0027, (snapshot) \u003d\u003e {"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"      if (snapshot.exists() \u0026\u0026 snapshot.val() !\u003d\u003d tab) {"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"        setTabLocally(snapshot.val())"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"    // Cleanup effect: Detach listener"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"    return () \u003d\u003e dbRef.off()"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"  })"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"  const updateTab \u003d (newTab) \u003d\u003e {"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"    if (newTab \u003d\u003d\u003d tab) return"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"    setTabLocally(newTab)"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"    return db.ref(`${docPath}/tab`).set(newTab).catch(console.log)"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"  return [tab, updateTab]"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"export default useTabSize"}],"authorContributionMap":{"uyencfi":34}},{"path":"frontend/src/images/blank.svg","fileType":"svg","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"\u003csvg xmlns\u003d\"http://www.w3.org/2000/svg\" data-name\u003d\"Layer 1\" width\u003d\"550.71039\" height\u003d\"567.98584\" viewBox\u003d\"0 0 550.71039 567.98584\" xmlns:xlink\u003d\"http://www.w3.org/1999/xlink\"\u003e\u003cpath d\u003d\"M711.24677,733.99292H560.52137a6.616,6.616,0,0,1-6.60858-6.60839V622.00475a6.616,6.616,0,0,1,6.60858-6.60858h150.7254a6.616,6.616,0,0,1,6.60839,6.60858V727.38453A6.6161,6.6161,0,0,1,711.24677,733.99292Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#f2f2f2\"/\u003e\u003cpath d\u003d\"M464.93162,459.293a11.22645,11.22645,0,0,0-3.595-16.83486l-.94985-100.813-18.84219,8.64691,4.1444,97.50067A11.2873,11.2873,0,0,0,464.93162,459.293Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#9e616a\"/\u003e\u003cpath d\u003d\"M464.42409,316.12137s-18.32929-8.89112-20.86418,7.88369-12.96145,60.43336-12.96145,60.43336l31.63926-2.23768Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#9e616a\"/\u003e\u003cpath d\u003d\"M464.93162,459.293a11.22645,11.22645,0,0,0-3.595-16.83486l-.94985-100.813-18.84219,8.64691,4.1444,97.50067A11.2873,11.2873,0,0,0,464.93162,459.293Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#9e616a\"/\u003e\u003cpath d\u003d\"M464.42409,316.12137s-18.32929-8.89112-20.86418,7.88369-12.96145,60.43336-12.96145,60.43336l31.63926-2.23768Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#00b0ff\"/\u003e\u003cpath d\u003d\"M411.35263,704.46626a3.61323,3.61323,0,0,1-2.61865-6.26262c.09111-.36213.15647-.62217.24758-.9843q-.0489-.11821-.09837-.23628a9.70311,9.70311,0,0,0-17.89849.06652c-2.92739,7.05051-6.65447,14.11307-7.57216,21.5678a28.7054,28.7054,0,0,0,.5039,9.87234,115.08614,115.08614,0,0,1-10.46893-47.79893,111.07991,111.07991,0,0,1,.689-12.392q.5708-5.05966,1.58377-10.0473a116.4192,116.4192,0,0,1,23.087-49.34152,30.9826,30.9826,0,0,0,12.88556-13.36893,23.6336,23.6336,0,0,0,2.14933-6.45821c-.62729.08228-1.26489.13369-1.89217.17479-.19543.01023-.40108.02055-.59651.03087l-.07369.0033a3.57989,3.57989,0,0,1-2.9401-5.83225q.40627-.5.81305-.99948c.4114-.51423.833-1.01814,1.24434-1.53228a1.7836,1.7836,0,0,0,.13369-.15432c.47313-.58619.94609-1.16206,1.41922-1.74825a10.35176,10.35176,0,0,0-3.39367-3.28044c-4.74083-2.77661-11.28133-.85358-14.70586,3.43476-3.43476,4.28826-4.0826,10.30438-2.88976,15.66218a41.48513,41.48513,0,0,0,5.73842,12.793c-.25715.32912-.52454.64792-.78161.977a117.17121,117.17121,0,0,0-12.22973,19.37481,48.70929,48.70929,0,0,0-2.908-22.62447c-2.78346-6.71479-8.00064-12.37-12.595-18.17495-5.51857-6.97261-16.83488-3.9296-17.80713,4.90927q-.01412.12837-.02757.25665,1.02363.57749,2.004,1.22586a4.9011,4.9011,0,0,1-1.976,8.91908l-.09994.01543a48.7668,48.7668,0,0,0,1.28544,7.29124A50.20988,50.20988,0,0,0,376.56347,641.273c.40108.20565.79193.41131,1.193.60673a119.598,119.598,0,0,0-6.43767,30.296,113.43525,113.43525,0,0,0,.08228,18.31542l-.03086-.216a29.97408,29.97408,0,0,0-10.23241-17.3076c-7.87438-6.46853-18.9994-8.8505-27.49446-14.04994a5.62528,5.62528,0,0,0-8.61571,5.47252q.01709.11352.03474.227a32.92633,32.92633,0,0,1,3.69184,1.779q1.02362.57761,2.004,1.22585a4.90116,4.90116,0,0,1-1.976,8.91917l-.1.01535c-.072.01031-.13369.02063-.20557.03094a48.80758,48.80758,0,0,0,8.97767,14.05786A50.25446,50.25446,0,0,0,373.9,706.63672h.01032a119.56344,119.56344,0,0,0,8.03167,23.447h28.69167c.10291-.3188.19542-.64792.288-.96672a32.59925,32.59925,0,0,1-7.93916-.473c2.12878-2.61214,4.25747-5.24483,6.38625-7.85688a1.78139,1.78139,0,0,0,.1337-.15424c1.07978-1.33685,2.16987-2.66347,3.24965-4.00032l.00058-.00165a47.75027,47.75027,0,0,0-1.39916-12.16412Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#f2f2f2\"/\u003e\u003cpath d\u003d\"M834.35263,704.46626a3.61323,3.61323,0,0,1-2.61865-6.26262c.09111-.36213.15647-.62217.24758-.9843q-.0489-.11821-.09837-.23628a9.70311,9.70311,0,0,0-17.89849.06652c-2.92739,7.05051-6.65447,14.11307-7.57216,21.5678a28.7054,28.7054,0,0,0,.5039,9.87234,115.08614,115.08614,0,0,1-10.46893-47.79893,111.07991,111.07991,0,0,1,.689-12.392q.5708-5.05966,1.58377-10.0473a116.4192,116.4192,0,0,1,23.087-49.34152,30.9826,30.9826,0,0,0,12.88556-13.36893,23.6336,23.6336,0,0,0,2.14933-6.45821c-.62729.08228-1.26489.13369-1.89217.17479-.19543.01023-.40108.02055-.59651.03087l-.07369.0033a3.57989,3.57989,0,0,1-2.9401-5.83225q.40627-.5.813-.99948c.4114-.51423.833-1.01814,1.24434-1.53228a1.7836,1.7836,0,0,0,.13369-.15432c.47313-.58619.94609-1.16206,1.41922-1.74825a10.35176,10.35176,0,0,0-3.39367-3.28044c-4.74083-2.77661-11.28133-.85358-14.70586,3.43476-3.43476,4.28826-4.0826,10.30438-2.88976,15.66218a41.48513,41.48513,0,0,0,5.73842,12.793c-.25715.32912-.52454.64792-.78161.977a117.17121,117.17121,0,0,0-12.22973,19.37481,48.70929,48.70929,0,0,0-2.908-22.62447c-2.78346-6.71479-8.00064-12.37-12.595-18.17495-5.51857-6.97261-16.83488-3.9296-17.80713,4.90927q-.01412.12837-.02757.25665,1.02363.57749,2.004,1.22586a4.9011,4.9011,0,0,1-1.976,8.91908l-.09994.01543a48.7668,48.7668,0,0,0,1.28544,7.29124A50.20988,50.20988,0,0,0,799.56347,641.273c.40108.20565.79193.41131,1.193.60673a119.598,119.598,0,0,0-6.43767,30.296,113.43525,113.43525,0,0,0,.08228,18.31542l-.03086-.216a29.97408,29.97408,0,0,0-10.23241-17.3076c-7.87438-6.46853-18.9994-8.8505-27.49446-14.04994a5.62528,5.62528,0,0,0-8.61571,5.47252q.01708.11352.03474.227a32.92633,32.92633,0,0,1,3.69184,1.779q1.02362.57761,2.004,1.22585a4.90116,4.90116,0,0,1-1.976,8.91917l-.1.01535c-.072.01031-.13369.02063-.20557.03094a48.80758,48.80758,0,0,0,8.97767,14.05786A50.25446,50.25446,0,0,0,796.9,706.63672h.01032a119.56344,119.56344,0,0,0,8.03167,23.447h28.69167c.10291-.3188.19542-.64792.288-.96672a32.59925,32.59925,0,0,1-7.93916-.473c2.12878-2.61214,4.25747-5.24483,6.38625-7.85688a1.78139,1.78139,0,0,0,.1337-.15424c1.07978-1.33685,2.16987-2.66347,3.24965-4.00032l.00058-.00165a47.75027,47.75027,0,0,0-1.39916-12.16412Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#f2f2f2\"/\u003e\u003cpath d\u003d\"M723.86447,729.89617c-.08252,0-.165-.00195-.24756-.0039a8.169,8.169,0,0,1-7.70215-8.25488c0-12.79493-9.13965-20.25879-18.19726-21.9795-9.05762-1.71972-20.29785,1.8711-24.98926,13.77637l-4.26514,10.707a19.67152,19.67152,0,0,1-27.78662,0l-.25244-.252.15674-.32129,75.334-154.13379v-3.77734a19.488,19.488,0,0,1,.002-3.5l-.002-388.20313a7.94627,7.94627,0,0,1,8.19043-7.94287,8.16941,8.16941,0,0,1,7.70264,8.25488v387.936a19.489,19.489,0,0,1-.00195,3.5l.00195,3.73144,75.49072,154.45606-.25244.252a19.67152,19.67152,0,0,1-27.78662,0l-.11182-.16992-4.15332-10.53711c-4.6914-11.9043-15.93017-15.49316-24.98926-13.77637-9.05761,1.72071-18.19726,9.18457-18.19726,21.9795v.3125a7.94652,7.94652,0,0,1-7.94336,7.94628Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#e6e6e6\"/\u003e\u003cpath d\u003d\"M861.76287,446.99292H585.95965A12.10626,12.10626,0,0,1,573.867,434.90063v-192.828A12.10611,12.10611,0,0,1,585.95965,229.98H861.76287a12.10626,12.10626,0,0,1,12.09229,12.09264v192.828A12.10641,12.10641,0,0,1,861.76287,446.99292Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#fff\"/\u003e\u003cpath d\u003d\"M861.76291,448.49285H585.95968a13.60791,13.60791,0,0,1-13.59277-13.59179V242.07244a13.608,13.608,0,0,1,13.59277-13.59228H861.76291a13.60791,13.60791,0,0,1,13.59228,13.59228V434.90106A13.6078,13.6078,0,0,1,861.76291,448.49285ZM585.95968,231.48016a10.60442,10.60442,0,0,0-10.59277,10.59228V434.90106a10.60463,10.60463,0,0,0,10.59277,10.59179H861.76291a10.60421,10.60421,0,0,0,10.59228-10.59179V242.07244a10.604,10.604,0,0,0-10.59228-10.59228Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#f2f2f2\"/\u003e\u003cpath d\u003d\"M764.63979,242.0363H683.08263a19.52487,19.52487,0,0,1-19.5028-19.5028v-.35459H784.14258v.35459A19.52486,19.52486,0,0,1,764.63979,242.0363Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#e6e6e6\"/\u003e\u003cpath d\u003d\"M764.99438,459.04925H683.43723a19.52509,19.52509,0,0,1-19.5028-19.5028v-.35459H784.49718v.35459A19.52509,19.52509,0,0,1,764.99438,459.04925Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#e6e6e6\"/\u003e\u003cpath d\u003d\"M874.31485,730.88939a1.18647,1.18647,0,0,1-1.19006,1.19h-547.29a1.19,1.19,0,0,1,0-2.38h547.29A1.18651,1.18651,0,0,1,874.31485,730.88939Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#ccc\"/\u003e\u003cpolygon points\u003d\"184.306 537.181 198.722 537.181 205.58 481.575 184.303 481.576 184.306 537.181\" fill\u003d\"#9e616a\"/\u003e\u003cpath d\u003d\"M504.06863,696.07669l22.78907-1.3602v9.76383l21.6662,14.96345a6.09886,6.09886,0,0,1-3.46558,11.11765H517.92709l-4.67648-9.65792-1.82593,9.65792H501.19512Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#2f2e41\"/\u003e\u003cpolygon points\u003d\"135.277 227.892 133.865 234.622 132.664 259.447 180.908 252.915 184.613 224.169 179.492 215.755 135.277 227.892\" fill\u003d\"#9e616a\"/\u003e\u003cpolygon points\u003d\"111.347 537.181 125.763 537.181 132.621 481.575 111.344 481.576 111.347 537.181\" fill\u003d\"#9e616a\"/\u003e\u003cpath d\u003d\"M428.1707,604.94848l-.00054-.14891,5.39635-25.192,3.32751-12.54128-9.24939-73.42936c-2.17782-53.34848,28.7723-78.9931,29.01588-79.24519l.67116-.69775,49.63579-1.2147c26.70628,16.00123,23.683,103.51941,28.57341,163.039.34872,4.24414,4.73124,10.50859,3.654,14.54583-8.54582,32.02677-6.04255,66.6612-12.553,67.685l-19.96125-.27744-10.30939-46.78874,9.51636-35.68634c-4.22057-.77752-7.13727-21.41179-7.13727-21.41179-1.83905-2.18368-8.1881-20.75593-8.1881-20.75593l-8.46552-51.40977-13.601,88.42417,3.27551,20.74438-2.71071,7.13285-11.60823,58.88563-.12339.94878L435.44348,655.37Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#2f2e41\"/\u003e\u003cpath d\u003d\"M431.10991,696.07669l22.78906-1.3602v9.76383l21.6662,14.96345a6.09886,6.09886,0,0,1-3.46557,11.11765H444.96836l-4.67648-9.65792-1.82593,9.65792H428.23639Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#2f2e41\"/\u003e\u003cpath d\u003d\"M499.72323,296.81336l12.16793,13.51992,14.61521,27.54745-7.17925,33.96819,3.13895,15.93971,4.635,17.52209c-17.8595,9.87926-39.074-3.76443-58.5635-9.82419l-19.176,8.4722,1.014-23.32186.52-58.76042a16.46939,16.46939,0,0,1,17.73187-16.27514h0l12.84392-9.464Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#00b0ff\"/\u003e\u003ccircle cx\u003d\"171.67023\" cy\u003d\"98.07194\" r\u003d\"25.65727\" fill\u003d\"#9e616a\"/\u003e\u003cpath d\u003d\"M526.50637,254.81959c-.452,2.51394-11.2531,3.72725-10.928-.74545-2.10149,4.211-5.24175,10.322-1.24175,17.322a10.98281,10.98281,0,0,0-1.48157,12.81309,33.15262,33.15262,0,0,1,2.847,5.84463,8.87535,8.87535,0,0,1,.32512,1.51466,2.89763,2.89763,0,0,1-4.12372,2.97386c-10.88039-5.32913-29.85434-4.42589-41.75772-1.17444q.119-3.47344-.09516-6.93107a17.13363,17.13363,0,0,1-3.37832,7.91442c-2.03809.60271-4.03649,1.22919-5.97148,1.84777a1.71539,1.71539,0,0,1-2.18084-2.09361,9.64658,9.64658,0,0,0,.2062-4.203c-.49172-2.90252-1.95087-5.52745-2.9818-8.27924s-1.61781-5.916-.35687-8.57264c1.95876-4.12377,7.47826-5.38471,9.91287-9.24676,2.736-4.33784.61065-9.99215,1.03886-15.1072.60271-7.23243,6.52662-13.10875,13.204-15.94781,11.56233-4.9168,26.02719-.935,34.695,8.15314a7.93768,7.93768,0,0,1,8.303-.35687c2.56152,1.37192,4.4013,2.08567,5.5512,4.75817C529.09959,247.65062,526.96634,252.29776,526.50637,254.81959Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#2f2e41\"/\u003e\u003cpath d\u003d\"M515.48591,556.53986l-60.36453-60.36452a3.7472,3.7472,0,0,1-.00008-5.29331l42.20391-42.20391a3.74715,3.74715,0,0,1,5.29338,0l60.36453,60.36453a3.7472,3.7472,0,0,1-.00008,5.29331l-42.2039,42.2039A3.74724,3.74724,0,0,1,515.48591,556.53986Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#fff\"/\u003e\u003cpath d\u003d\"M518.13254,558.63348a4.71009,4.71009,0,0,1-3.35352-1.38672L454.41427,496.8825a4.74593,4.74593,0,0,1,0-6.707l42.20411-42.2041a4.74649,4.74649,0,0,1,6.70752,0l60.36425,60.36426a4.7459,4.7459,0,0,1,0,6.707l-42.2041,42.2041A4.71009,4.71009,0,0,1,518.13254,558.63348ZM499.97189,448.58367a2.71951,2.71951,0,0,0-1.939.80176l-42.20459,42.2041a2.74665,2.74665,0,0,0,0,3.87891l60.36474,60.36426a2.81453,2.81453,0,0,0,3.87891,0l42.2041-42.2041a2.74665,2.74665,0,0,0,0-3.87891l-60.36475-60.36426A2.72144,2.72144,0,0,0,499.97189,448.58367Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#e6e6e6\"/\u003e\u003cpath d\u003d\"M492.74166,454.293a11.22642,11.22642,0,0,1,3.595-16.83486l.94985-100.813,18.84219,8.64691-4.1444,97.50067A11.2873,11.2873,0,0,1,492.74166,454.293Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#9e616a\"/\u003e\u003cpath d\u003d\"M493.24918,311.12137s18.3293-8.89112,20.86419,7.88369,12.96145,60.43336,12.96145,60.43336l-31.63926-2.23768Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#9e616a\"/\u003e\u003cpath d\u003d\"M492.74166,454.293a11.22642,11.22642,0,0,1,3.595-16.83486l.94985-100.813,18.84219,8.64691-4.1444,97.50067A11.2873,11.2873,0,0,1,492.74166,454.293Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#9e616a\"/\u003e\u003cpath d\u003d\"M493.24918,311.12137s18.3293-8.89112,20.86419,7.88369,12.96145,60.43336,12.96145,60.43336l-31.63926-2.23768Z\" transform\u003d\"translate(-324.64481 -166.00708)\" fill\u003d\"#00b0ff\"/\u003e\u003c/svg\u003e"}],"authorContributionMap":{"uyencfi":1}},{"path":"frontend/src/images/phone-frame.svg","fileType":"svg","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"\u003csvg width\u003d\"366\" height\u003d\"729\" fill\u003d\"none\" xmlns\u003d\"http://www.w3.org/2000/svg\"\u003e"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"  \u003cg mask\u003d\"url(#mask)\"\u003e"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"    \u003cg filter\u003d\"url(#a)\"\u003e"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M363.315 64.213C363.315 22.99 341.312 1 300.092 1H66.751C25.53 1 3.528 22.99 3.528 64.213v44.68l-.857.143A2 2 0 0 0 1 111.009v24.611a2 2 0 0 0 1.671 1.973l.95.158a2.26 2.26 0 0 1-.093.236v26.173c.212.1.398.296.541.643l-1.398.233A2 2 0 0 0 1 167.009v47.611a2 2 0 0 0 1.671 1.973l1.368.228c-.139.319-.314.533-.511.653v16.637c.221.104.414.313.56.689l-1.417.236A2 2 0 0 0 1 237.009v47.611a2 2 0 0 0 1.671 1.973l1.347.225c-.135.294-.302.493-.49.607v377.681c0 41.213 22 63.208 63.223 63.208h95.074c.947-.504 2.717-.843 4.745-.843l.141.001h.194l.086-.001 33.704.005c1.849.043 3.442.37 4.323.838h95.074c41.222 0 63.223-21.999 63.223-63.212v-394.63c-.259-.275-.48-.796-.63-1.47l-.011-.133 1.655-.276A2 2 0 0 0 366 266.62v-77.611a2 2 0 0 0-1.671-1.973l-1.712-.285c.148-.839.396-1.491.698-1.811V64.213Z\""},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"url(#b)\" /\u003e"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M363.315 64.213C363.315 22.99 341.312 1 300.092 1H66.751C25.53 1 3.528 22.99 3.528 64.213v44.68l-.857.143A2 2 0 0 0 1 111.009v24.611a2 2 0 0 0 1.671 1.973l.95.158a2.26 2.26 0 0 1-.093.236v26.173c.212.1.398.296.541.643l-1.398.233A2 2 0 0 0 1 167.009v47.611a2 2 0 0 0 1.671 1.973l1.368.228c-.139.319-.314.533-.511.653v16.637c.221.104.414.313.56.689l-1.417.236A2 2 0 0 0 1 237.009v47.611a2 2 0 0 0 1.671 1.973l1.347.225c-.135.294-.302.493-.49.607v377.681c0 41.213 22 63.208 63.223 63.208h95.074c.947-.504 2.717-.843 4.745-.843l.141.001h.194l.086-.001 33.704.005c1.849.043 3.442.37 4.323.838h95.074c41.222 0 63.223-21.999 63.223-63.212v-394.63c-.259-.275-.48-.796-.63-1.47l-.011-.133 1.655-.276A2 2 0 0 0 366 266.62v-77.611a2 2 0 0 0-1.671-1.973l-1.712-.285c.148-.839.396-1.491.698-1.811V64.213Z\""},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"url(#c)\" /\u003e"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    \u003c/g\u003e"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    \u003cg filter\u003d\"url(#d)\"\u003e"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M5 133.772v-21.15c0-1.359-.54-2.661-1.5-3.622-.844-.073-2.496.257-2.496 2.157v24.562c.406 2.023 2.605 2.023 2.605 2.023A6.363 6.363 0 0 0 5 133.772Z\""},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"url(#e)\" /\u003e"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M5 133.772v-21.15c0-1.359-.54-2.661-1.5-3.622-.844-.073-2.496.257-2.496 2.157v24.562c.406 2.023 2.605 2.023 2.605 2.023A6.363 6.363 0 0 0 5 133.772Z\""},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"url(#f)\" fill-opacity\u003d\".1\" /\u003e"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"    \u003c/g\u003e"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"    \u003cg filter\u003d\"url(#g)\"\u003e"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M5 213.772v-46.15c0-1.359-.54-2.661-1.5-3.622-.844-.073-2.496.257-2.496 2.157v49.562c.406 2.023 2.605 2.023 2.605 2.023A6.363 6.363 0 0 0 5 213.772Z\""},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"url(#h)\" /\u003e"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M5 213.772v-46.15c0-1.359-.54-2.661-1.5-3.622-.844-.073-2.496.257-2.496 2.157v49.562c.406 2.023 2.605 2.023 2.605 2.023A6.363 6.363 0 0 0 5 213.772Z\""},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"url(#i)\" fill-opacity\u003d\".1\" /\u003e"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"    \u003c/g\u003e"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"    \u003cg filter\u003d\"url(#j)\"\u003e"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M5 283.772v-46.15c0-1.359-.54-2.661-1.5-3.622-.844-.073-2.496.257-2.496 2.157v49.562c.406 2.023 2.605 2.023 2.605 2.023A6.363 6.363 0 0 0 5 283.772Z\""},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"url(#k)\" /\u003e"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M5 283.772v-46.15c0-1.359-.54-2.661-1.5-3.622-.844-.073-2.496.257-2.496 2.157v49.562c.406 2.023 2.605 2.023 2.605 2.023A6.363 6.363 0 0 0 5 283.772Z\""},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"url(#l)\" fill-opacity\u003d\".1\" /\u003e"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"    \u003c/g\u003e"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"    \u003cg filter\u003d\"url(#m)\"\u003e"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M362.004 266.772v-78.15a5.12 5.12 0 0 1 1.5-3.622c.844-.073 2.496.257 2.496 2.157v81.562c-.406 2.023-2.605 2.023-2.605 2.023a6.359 6.359 0 0 1-1.391-3.97Z\""},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"url(#n)\" /\u003e"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M362.004 266.772v-78.15a5.12 5.12 0 0 1 1.5-3.622c.844-.073 2.496.257 2.496 2.157v81.562c-.406 2.023-2.605 2.023-2.605 2.023a6.359 6.359 0 0 1-1.391-3.97Z\""},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"url(#o)\" fill-opacity\u003d\".1\" /\u003e"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"    \u003c/g\u003e"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"    \u003cpath"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"      d\u003d\"M305 14.5H59c-24.577 0-44.5 19.923-44.5 44.5v615c0 23.472 19.028 42.5 42.5 42.5h250c23.472 0 42.5-19.028 42.5-42.5V59c0-24.577-19.923-44.5-44.5-44.5Z\""},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"      stroke\u003d\"url(#p)\" stroke-opacity\u003d\".5\" /\u003e"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"    \u003cg filter\u003d\"url(#q)\" shape-rendering\u003d\"crispEdges\"\u003e"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M16 59c0-23.748 19.252-43 43-43h246c23.748 0 43 19.252 43 43v615c0 23.196-18.804 42-42 42H58c-23.196 0-42-18.804-42-42V59Z\""},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"url(#r)\" fill-opacity\u003d\".3\" /\u003e"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"      \u003cpath"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M305 15.5H59c-24.024 0-43.5 19.476-43.5 43.5v615c0 23.472 19.028 42.5 42.5 42.5h248c23.472 0 42.5-19.028 42.5-42.5V59c0-24.024-19.476-43.5-43.5-43.5Z\""},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"        stroke\u003d\"#000\" stroke-opacity\u003d\".07\" /\u003e"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"    \u003c/g\u003e"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"    \u003cg filter\u003d\"url(#s)\"\u003e"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"      \u003crect x\u003d\"154\" y\u003d\"29\" width\u003d\"56\" height\u003d\"5\" rx\u003d\"2.5\" fill\u003d\"#D4D4D4\" /\u003e"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"    \u003c/g\u003e"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"  \u003c/g\u003e"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"  \u003cdefs\u003e"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"    \u003cmask id\u003d\"mask\"\u003e"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"      \u003crect width\u003d\"366\" height\u003d\"729\" fill\u003d\"#fff\" /\u003e"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"      \u003cpath fill-rule\u003d\"evenodd\" clip-rule\u003d\"evenodd\""},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"        d\u003d\"M89.728 24a4.213 4.213 0 0 1 4.213 4.212v2.527c0 10.235 8.3 18.532 18.539 18.532h139.04c10.239 0 18.539-8.297 18.539-18.532v-2.527A4.212 4.212 0 0 1 274.272 24h32.864C325.286 24 340 38.71 340 56.853v618.295c0 18.144-14.714 32.853-32.864 32.853H56.864c-18.15 0-32.864-14.709-32.864-32.853V56.853C24 38.709 38.714 24 56.864 24h32.864Z\""},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"        fill\u003d\"#000\" /\u003e"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"    \u003c/mask\u003e"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"    \u003clinearGradient id\u003d\"e\" x1\u003d\"1.004\" y1\u003d\"123.367\" x2\u003d\"5\" y2\u003d\"123.367\" gradientUnits\u003d\"userSpaceOnUse\"\u003e"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"      \u003cstop stop-color\u003d\"#D4D4D4\" /\u003e"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"      \u003cstop offset\u003d\"1\" stop-color\u003d\"#E6E6E6\" /\u003e"},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"    \u003c/linearGradient\u003e"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"    \u003clinearGradient id\u003d\"f\" x1\u003d\"3.002\" y1\u003d\"108.991\" x2\u003d\"3.002\" y2\u003d\"116.75\" gradientUnits\u003d\"userSpaceOnUse\"\u003e"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"      \u003cstop stop-color\u003d\"#171717\" /\u003e"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"      \u003cstop offset\u003d\".783\" stop-color\u003d\"#171717\" stop-opacity\u003d\"0\" /\u003e"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"    \u003c/linearGradient\u003e"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"    \u003clinearGradient id\u003d\"h\" x1\u003d\"1.004\" y1\u003d\"190.867\" x2\u003d\"5\" y2\u003d\"190.867\" gradientUnits\u003d\"userSpaceOnUse\"\u003e"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"      \u003cstop stop-color\u003d\"#D4D4D4\" /\u003e"},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"      \u003cstop offset\u003d\"1\" stop-color\u003d\"#E6E6E6\" /\u003e"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"    \u003c/linearGradient\u003e"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"    \u003clinearGradient id\u003d\"i\" x1\u003d\"3.002\" y1\u003d\"163.991\" x2\u003d\"3.002\" y2\u003d\"178.497\" gradientUnits\u003d\"userSpaceOnUse\"\u003e"},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"      \u003cstop stop-color\u003d\"#171717\" /\u003e"},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"      \u003cstop offset\u003d\".783\" stop-color\u003d\"#171717\" stop-opacity\u003d\"0\" /\u003e"},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":"    \u003c/linearGradient\u003e"},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"    \u003clinearGradient id\u003d\"k\" x1\u003d\"1.004\" y1\u003d\"260.867\" x2\u003d\"5\" y2\u003d\"260.867\" gradientUnits\u003d\"userSpaceOnUse\"\u003e"},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":"      \u003cstop stop-color\u003d\"#D4D4D4\" /\u003e"},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"      \u003cstop offset\u003d\"1\" stop-color\u003d\"#E6E6E6\" /\u003e"},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":"    \u003c/linearGradient\u003e"},{"lineNumber":85,"author":{"gitId":"tlylt"},"content":"    \u003clinearGradient id\u003d\"l\" x1\u003d\"3.002\" y1\u003d\"233.991\" x2\u003d\"3.002\" y2\u003d\"248.497\" gradientUnits\u003d\"userSpaceOnUse\"\u003e"},{"lineNumber":86,"author":{"gitId":"tlylt"},"content":"      \u003cstop stop-color\u003d\"#171717\" /\u003e"},{"lineNumber":87,"author":{"gitId":"tlylt"},"content":"      \u003cstop offset\u003d\".783\" stop-color\u003d\"#171717\" stop-opacity\u003d\"0\" /\u003e"},{"lineNumber":88,"author":{"gitId":"tlylt"},"content":"    \u003c/linearGradient\u003e"},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"    \u003clinearGradient id\u003d\"n\" x1\u003d\"362.004\" y1\u003d\"226.25\" x2\u003d\"366\" y2\u003d\"226.25\" gradientUnits\u003d\"userSpaceOnUse\"\u003e"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"      \u003cstop offset\u003d\".124\" stop-color\u003d\"#E6E6E6\" /\u003e"},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":"      \u003cstop offset\u003d\"1\" stop-color\u003d\"#D4D4D4\" /\u003e"},{"lineNumber":92,"author":{"gitId":"tlylt"},"content":"    \u003c/linearGradient\u003e"},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":"    \u003clinearGradient id\u003d\"o\" x1\u003d\"364.002\" y1\u003d\"184.991\" x2\u003d\"364.002\" y2\u003d\"208.134\" gradientUnits\u003d\"userSpaceOnUse\"\u003e"},{"lineNumber":94,"author":{"gitId":"tlylt"},"content":"      \u003cstop stop-color\u003d\"#171717\" /\u003e"},{"lineNumber":95,"author":{"gitId":"tlylt"},"content":"      \u003cstop offset\u003d\".783\" stop-color\u003d\"#171717\" stop-opacity\u003d\"0\" /\u003e"},{"lineNumber":96,"author":{"gitId":"tlylt"},"content":"    \u003c/linearGradient\u003e"},{"lineNumber":97,"author":{"gitId":"tlylt"},"content":"    \u003clinearGradient id\u003d\"p\" x1\u003d\"182\" y1\u003d\"15\" x2\u003d\"182\" y2\u003d\"716\" gradientUnits\u003d\"userSpaceOnUse\"\u003e"},{"lineNumber":98,"author":{"gitId":"tlylt"},"content":"      \u003cstop stop-color\u003d\"#fff\" /\u003e"},{"lineNumber":99,"author":{"gitId":"tlylt"},"content":"      \u003cstop offset\u003d\".381\" stop-color\u003d\"#fff\" stop-opacity\u003d\"0\" /\u003e"},{"lineNumber":100,"author":{"gitId":"tlylt"},"content":"    \u003c/linearGradient\u003e"},{"lineNumber":101,"author":{"gitId":"tlylt"},"content":"    \u003cfilter id\u003d\"a\" x\u003d\"-1\" y\u003d\"-1\" width\u003d\"367\" height\u003d\"730.314\" filterUnits\u003d\"userSpaceOnUse\""},{"lineNumber":102,"author":{"gitId":"tlylt"},"content":"      color-interpolation-filters\u003d\"sRGB\"\u003e"},{"lineNumber":103,"author":{"gitId":"tlylt"},"content":"      \u003cfeFlood flood-opacity\u003d\"0\" result\u003d\"BackgroundImageFix\" /\u003e"},{"lineNumber":104,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in\u003d\"SourceGraphic\" in2\u003d\"BackgroundImageFix\" result\u003d\"shape\" /\u003e"},{"lineNumber":105,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix in\u003d\"SourceAlpha\" values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result\u003d\"hardAlpha\" /\u003e"},{"lineNumber":106,"author":{"gitId":"tlylt"},"content":"      \u003cfeOffset dy\u003d\"-2\" /\u003e"},{"lineNumber":107,"author":{"gitId":"tlylt"},"content":"      \u003cfeGaussianBlur stdDeviation\u003d\"1.5\" /\u003e"},{"lineNumber":108,"author":{"gitId":"tlylt"},"content":"      \u003cfeComposite in2\u003d\"hardAlpha\" operator\u003d\"arithmetic\" k2\u003d\"-1\" k3\u003d\"1\" /\u003e"},{"lineNumber":109,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0\" /\u003e"},{"lineNumber":110,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in2\u003d\"shape\" result\u003d\"effect1_innerShadow_104_2007\" /\u003e"},{"lineNumber":111,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix in\u003d\"SourceAlpha\" values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result\u003d\"hardAlpha\" /\u003e"},{"lineNumber":112,"author":{"gitId":"tlylt"},"content":"      \u003cfeOffset dx\u003d\"-2\" /\u003e"},{"lineNumber":113,"author":{"gitId":"tlylt"},"content":"      \u003cfeGaussianBlur stdDeviation\u003d\"2\" /\u003e"},{"lineNumber":114,"author":{"gitId":"tlylt"},"content":"      \u003cfeComposite in2\u003d\"hardAlpha\" operator\u003d\"arithmetic\" k2\u003d\"-1\" k3\u003d\"1\" /\u003e"},{"lineNumber":115,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix values\u003d\"0 0 0 0 0.0901961 0 0 0 0 0.0901961 0 0 0 0 0.0901961 0 0 0 0.17 0\" /\u003e"},{"lineNumber":116,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in2\u003d\"effect1_innerShadow_104_2007\" result\u003d\"effect2_innerShadow_104_2007\" /\u003e"},{"lineNumber":117,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix in\u003d\"SourceAlpha\" values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result\u003d\"hardAlpha\" /\u003e"},{"lineNumber":118,"author":{"gitId":"tlylt"},"content":"      \u003cfeOffset dy\u003d\"2\" /\u003e"},{"lineNumber":119,"author":{"gitId":"tlylt"},"content":"      \u003cfeGaussianBlur stdDeviation\u003d\".5\" /\u003e"},{"lineNumber":120,"author":{"gitId":"tlylt"},"content":"      \u003cfeComposite in2\u003d\"hardAlpha\" operator\u003d\"arithmetic\" k2\u003d\"-1\" k3\u003d\"1\" /\u003e"},{"lineNumber":121,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix values\u003d\"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.6 0\" /\u003e"},{"lineNumber":122,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in2\u003d\"effect2_innerShadow_104_2007\" result\u003d\"effect3_innerShadow_104_2007\" /\u003e"},{"lineNumber":123,"author":{"gitId":"tlylt"},"content":"    \u003c/filter\u003e"},{"lineNumber":124,"author":{"gitId":"tlylt"},"content":"    \u003cfilter id\u003d\"d\" x\u003d\"1.004\" y\u003d\"108.991\" width\u003d\"4.996\" height\u003d\"28.751\" filterUnits\u003d\"userSpaceOnUse\""},{"lineNumber":125,"author":{"gitId":"tlylt"},"content":"      color-interpolation-filters\u003d\"sRGB\"\u003e"},{"lineNumber":126,"author":{"gitId":"tlylt"},"content":"      \u003cfeFlood flood-opacity\u003d\"0\" result\u003d\"BackgroundImageFix\" /\u003e"},{"lineNumber":127,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix in\u003d\"SourceAlpha\" values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result\u003d\"hardAlpha\" /\u003e"},{"lineNumber":128,"author":{"gitId":"tlylt"},"content":"      \u003cfeOffset dx\u003d\"1\" /\u003e"},{"lineNumber":129,"author":{"gitId":"tlylt"},"content":"      \u003cfeComposite in2\u003d\"hardAlpha\" operator\u003d\"out\" /\u003e"},{"lineNumber":130,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix values\u003d\"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.5 0\" /\u003e"},{"lineNumber":131,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in2\u003d\"BackgroundImageFix\" result\u003d\"effect1_dropShadow_104_2007\" /\u003e"},{"lineNumber":132,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in\u003d\"SourceGraphic\" in2\u003d\"effect1_dropShadow_104_2007\" result\u003d\"shape\" /\u003e"},{"lineNumber":133,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix in\u003d\"SourceAlpha\" values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result\u003d\"hardAlpha\" /\u003e"},{"lineNumber":134,"author":{"gitId":"tlylt"},"content":"      \u003cfeOffset dx\u003d\"-1\" /\u003e"},{"lineNumber":135,"author":{"gitId":"tlylt"},"content":"      \u003cfeComposite in2\u003d\"hardAlpha\" operator\u003d\"arithmetic\" k2\u003d\"-1\" k3\u003d\"1\" /\u003e"},{"lineNumber":136,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0\" /\u003e"},{"lineNumber":137,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in2\u003d\"shape\" result\u003d\"effect2_innerShadow_104_2007\" /\u003e"},{"lineNumber":138,"author":{"gitId":"tlylt"},"content":"    \u003c/filter\u003e"},{"lineNumber":139,"author":{"gitId":"tlylt"},"content":"    \u003cfilter id\u003d\"g\" x\u003d\"1.004\" y\u003d\"163.991\" width\u003d\"4.996\" height\u003d\"53.751\" filterUnits\u003d\"userSpaceOnUse\""},{"lineNumber":140,"author":{"gitId":"tlylt"},"content":"      color-interpolation-filters\u003d\"sRGB\"\u003e"},{"lineNumber":141,"author":{"gitId":"tlylt"},"content":"      \u003cfeFlood flood-opacity\u003d\"0\" result\u003d\"BackgroundImageFix\" /\u003e"},{"lineNumber":142,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix in\u003d\"SourceAlpha\" values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result\u003d\"hardAlpha\" /\u003e"},{"lineNumber":143,"author":{"gitId":"tlylt"},"content":"      \u003cfeOffset dx\u003d\"1\" /\u003e"},{"lineNumber":144,"author":{"gitId":"tlylt"},"content":"      \u003cfeComposite in2\u003d\"hardAlpha\" operator\u003d\"out\" /\u003e"},{"lineNumber":145,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix values\u003d\"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.5 0\" /\u003e"},{"lineNumber":146,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in2\u003d\"BackgroundImageFix\" result\u003d\"effect1_dropShadow_104_2007\" /\u003e"},{"lineNumber":147,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in\u003d\"SourceGraphic\" in2\u003d\"effect1_dropShadow_104_2007\" result\u003d\"shape\" /\u003e"},{"lineNumber":148,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix in\u003d\"SourceAlpha\" values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result\u003d\"hardAlpha\" /\u003e"},{"lineNumber":149,"author":{"gitId":"tlylt"},"content":"      \u003cfeOffset dx\u003d\"-1\" /\u003e"},{"lineNumber":150,"author":{"gitId":"tlylt"},"content":"      \u003cfeComposite in2\u003d\"hardAlpha\" operator\u003d\"arithmetic\" k2\u003d\"-1\" k3\u003d\"1\" /\u003e"},{"lineNumber":151,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0\" /\u003e"},{"lineNumber":152,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in2\u003d\"shape\" result\u003d\"effect2_innerShadow_104_2007\" /\u003e"},{"lineNumber":153,"author":{"gitId":"tlylt"},"content":"    \u003c/filter\u003e"},{"lineNumber":154,"author":{"gitId":"tlylt"},"content":"    \u003cfilter id\u003d\"j\" x\u003d\"1.004\" y\u003d\"233.991\" width\u003d\"4.996\" height\u003d\"53.751\" filterUnits\u003d\"userSpaceOnUse\""},{"lineNumber":155,"author":{"gitId":"tlylt"},"content":"      color-interpolation-filters\u003d\"sRGB\"\u003e"},{"lineNumber":156,"author":{"gitId":"tlylt"},"content":"      \u003cfeFlood flood-opacity\u003d\"0\" result\u003d\"BackgroundImageFix\" /\u003e"},{"lineNumber":157,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix in\u003d\"SourceAlpha\" values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result\u003d\"hardAlpha\" /\u003e"},{"lineNumber":158,"author":{"gitId":"tlylt"},"content":"      \u003cfeOffset dx\u003d\"1\" /\u003e"},{"lineNumber":159,"author":{"gitId":"tlylt"},"content":"      \u003cfeComposite in2\u003d\"hardAlpha\" operator\u003d\"out\" /\u003e"},{"lineNumber":160,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix values\u003d\"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.5 0\" /\u003e"},{"lineNumber":161,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in2\u003d\"BackgroundImageFix\" result\u003d\"effect1_dropShadow_104_2007\" /\u003e"},{"lineNumber":162,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in\u003d\"SourceGraphic\" in2\u003d\"effect1_dropShadow_104_2007\" result\u003d\"shape\" /\u003e"},{"lineNumber":163,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix in\u003d\"SourceAlpha\" values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result\u003d\"hardAlpha\" /\u003e"},{"lineNumber":164,"author":{"gitId":"tlylt"},"content":"      \u003cfeOffset dx\u003d\"-1\" /\u003e"},{"lineNumber":165,"author":{"gitId":"tlylt"},"content":"      \u003cfeComposite in2\u003d\"hardAlpha\" operator\u003d\"arithmetic\" k2\u003d\"-1\" k3\u003d\"1\" /\u003e"},{"lineNumber":166,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0\" /\u003e"},{"lineNumber":167,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in2\u003d\"shape\" result\u003d\"effect2_innerShadow_104_2007\" /\u003e"},{"lineNumber":168,"author":{"gitId":"tlylt"},"content":"    \u003c/filter\u003e"},{"lineNumber":169,"author":{"gitId":"tlylt"},"content":"    \u003cfilter id\u003d\"m\" x\u003d\"361.004\" y\u003d\"184.991\" width\u003d\"4.996\" height\u003d\"85.751\" filterUnits\u003d\"userSpaceOnUse\""},{"lineNumber":170,"author":{"gitId":"tlylt"},"content":"      color-interpolation-filters\u003d\"sRGB\"\u003e"},{"lineNumber":171,"author":{"gitId":"tlylt"},"content":"      \u003cfeFlood flood-opacity\u003d\"0\" result\u003d\"BackgroundImageFix\" /\u003e"},{"lineNumber":172,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix in\u003d\"SourceAlpha\" values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result\u003d\"hardAlpha\" /\u003e"},{"lineNumber":173,"author":{"gitId":"tlylt"},"content":"      \u003cfeOffset dx\u003d\"-1\" /\u003e"},{"lineNumber":174,"author":{"gitId":"tlylt"},"content":"      \u003cfeComposite in2\u003d\"hardAlpha\" operator\u003d\"out\" /\u003e"},{"lineNumber":175,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix values\u003d\"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.5 0\" /\u003e"},{"lineNumber":176,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in2\u003d\"BackgroundImageFix\" result\u003d\"effect1_dropShadow_104_2007\" /\u003e"},{"lineNumber":177,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in\u003d\"SourceGraphic\" in2\u003d\"effect1_dropShadow_104_2007\" result\u003d\"shape\" /\u003e"},{"lineNumber":178,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix in\u003d\"SourceAlpha\" values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result\u003d\"hardAlpha\" /\u003e"},{"lineNumber":179,"author":{"gitId":"tlylt"},"content":"      \u003cfeOffset dx\u003d\"1\" /\u003e"},{"lineNumber":180,"author":{"gitId":"tlylt"},"content":"      \u003cfeComposite in2\u003d\"hardAlpha\" operator\u003d\"arithmetic\" k2\u003d\"-1\" k3\u003d\"1\" /\u003e"},{"lineNumber":181,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0\" /\u003e"},{"lineNumber":182,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in2\u003d\"shape\" result\u003d\"effect2_innerShadow_104_2007\" /\u003e"},{"lineNumber":183,"author":{"gitId":"tlylt"},"content":"    \u003c/filter\u003e"},{"lineNumber":184,"author":{"gitId":"tlylt"},"content":"    \u003cfilter id\u003d\"q\" x\u003d\"15\" y\u003d\"15\" width\u003d\"334\" height\u003d\"703\" filterUnits\u003d\"userSpaceOnUse\""},{"lineNumber":185,"author":{"gitId":"tlylt"},"content":"      color-interpolation-filters\u003d\"sRGB\"\u003e"},{"lineNumber":186,"author":{"gitId":"tlylt"},"content":"      \u003cfeFlood flood-opacity\u003d\"0\" result\u003d\"BackgroundImageFix\" /\u003e"},{"lineNumber":187,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix in\u003d\"SourceAlpha\" values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result\u003d\"hardAlpha\" /\u003e"},{"lineNumber":188,"author":{"gitId":"tlylt"},"content":"      \u003cfeOffset dy\u003d\"1\" /\u003e"},{"lineNumber":189,"author":{"gitId":"tlylt"},"content":"      \u003cfeComposite in2\u003d\"hardAlpha\" operator\u003d\"out\" /\u003e"},{"lineNumber":190,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix values\u003d\"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.25 0\" /\u003e"},{"lineNumber":191,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in2\u003d\"BackgroundImageFix\" result\u003d\"effect1_dropShadow_104_2007\" /\u003e"},{"lineNumber":192,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in\u003d\"SourceGraphic\" in2\u003d\"effect1_dropShadow_104_2007\" result\u003d\"shape\" /\u003e"},{"lineNumber":193,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix in\u003d\"SourceAlpha\" values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result\u003d\"hardAlpha\" /\u003e"},{"lineNumber":194,"author":{"gitId":"tlylt"},"content":"      \u003cfeOffset dy\u003d\"1\" /\u003e"},{"lineNumber":195,"author":{"gitId":"tlylt"},"content":"      \u003cfeGaussianBlur stdDeviation\u003d\"2.5\" /\u003e"},{"lineNumber":196,"author":{"gitId":"tlylt"},"content":"      \u003cfeComposite in2\u003d\"hardAlpha\" operator\u003d\"arithmetic\" k2\u003d\"-1\" k3\u003d\"1\" /\u003e"},{"lineNumber":197,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.03 0\" /\u003e"},{"lineNumber":198,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in2\u003d\"shape\" result\u003d\"effect2_innerShadow_104_2007\" /\u003e"},{"lineNumber":199,"author":{"gitId":"tlylt"},"content":"    \u003c/filter\u003e"},{"lineNumber":200,"author":{"gitId":"tlylt"},"content":"    \u003cfilter id\u003d\"s\" x\u003d\"154\" y\u003d\"29\" width\u003d\"56\" height\u003d\"6\" filterUnits\u003d\"userSpaceOnUse\" color-interpolation-filters\u003d\"sRGB\"\u003e"},{"lineNumber":201,"author":{"gitId":"tlylt"},"content":"      \u003cfeFlood flood-opacity\u003d\"0\" result\u003d\"BackgroundImageFix\" /\u003e"},{"lineNumber":202,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix in\u003d\"SourceAlpha\" values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result\u003d\"hardAlpha\" /\u003e"},{"lineNumber":203,"author":{"gitId":"tlylt"},"content":"      \u003cfeOffset dy\u003d\"1\" /\u003e"},{"lineNumber":204,"author":{"gitId":"tlylt"},"content":"      \u003cfeComposite in2\u003d\"hardAlpha\" operator\u003d\"out\" /\u003e"},{"lineNumber":205,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix values\u003d\"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.3 0\" /\u003e"},{"lineNumber":206,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in2\u003d\"BackgroundImageFix\" result\u003d\"effect1_dropShadow_104_2007\" /\u003e"},{"lineNumber":207,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in\u003d\"SourceGraphic\" in2\u003d\"effect1_dropShadow_104_2007\" result\u003d\"shape\" /\u003e"},{"lineNumber":208,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix in\u003d\"SourceAlpha\" values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result\u003d\"hardAlpha\" /\u003e"},{"lineNumber":209,"author":{"gitId":"tlylt"},"content":"      \u003cfeOffset dy\u003d\"1\" /\u003e"},{"lineNumber":210,"author":{"gitId":"tlylt"},"content":"      \u003cfeGaussianBlur stdDeviation\u003d\".5\" /\u003e"},{"lineNumber":211,"author":{"gitId":"tlylt"},"content":"      \u003cfeComposite in2\u003d\"hardAlpha\" operator\u003d\"arithmetic\" k2\u003d\"-1\" k3\u003d\"1\" /\u003e"},{"lineNumber":212,"author":{"gitId":"tlylt"},"content":"      \u003cfeColorMatrix values\u003d\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0\" /\u003e"},{"lineNumber":213,"author":{"gitId":"tlylt"},"content":"      \u003cfeBlend in2\u003d\"shape\" result\u003d\"effect2_innerShadow_104_2007\" /\u003e"},{"lineNumber":214,"author":{"gitId":"tlylt"},"content":"    \u003c/filter\u003e"},{"lineNumber":215,"author":{"gitId":"tlylt"},"content":"    \u003cradialGradient id\u003d\"b\" cx\u003d\"0\" cy\u003d\"0\" r\u003d\"1\" gradientUnits\u003d\"userSpaceOnUse\""},{"lineNumber":216,"author":{"gitId":"tlylt"},"content":"      gradientTransform\u003d\"matrix(0 727 -642 0 184 1)\"\u003e"},{"lineNumber":217,"author":{"gitId":"tlylt"},"content":"      \u003cstop stop-color\u003d\"#FAFAFA\" /\u003e"},{"lineNumber":218,"author":{"gitId":"tlylt"},"content":"      \u003cstop offset\u003d\"1\" stop-color\u003d\"#E6E6E6\" /\u003e"},{"lineNumber":219,"author":{"gitId":"tlylt"},"content":"    \u003c/radialGradient\u003e"},{"lineNumber":220,"author":{"gitId":"tlylt"},"content":"    \u003cradialGradient id\u003d\"c\" cx\u003d\"0\" cy\u003d\"0\" r\u003d\"1\" gradientUnits\u003d\"userSpaceOnUse\""},{"lineNumber":221,"author":{"gitId":"tlylt"},"content":"      gradientTransform\u003d\"matrix(0 319 -295.5 0 183.5 1)\"\u003e"},{"lineNumber":222,"author":{"gitId":"tlylt"},"content":"      \u003cstop stop-color\u003d\"#fff\" /\u003e"},{"lineNumber":223,"author":{"gitId":"tlylt"},"content":"      \u003cstop offset\u003d\".533\" stop-color\u003d\"#fff\" stop-opacity\u003d\"0\" /\u003e"},{"lineNumber":224,"author":{"gitId":"tlylt"},"content":"    \u003c/radialGradient\u003e"},{"lineNumber":225,"author":{"gitId":"tlylt"},"content":"    \u003cradialGradient id\u003d\"r\" cx\u003d\"0\" cy\u003d\"0\" r\u003d\"1\" gradientUnits\u003d\"userSpaceOnUse\""},{"lineNumber":226,"author":{"gitId":"tlylt"},"content":"      gradientTransform\u003d\"matrix(0 689 -326.783 0 182 27)\"\u003e"},{"lineNumber":227,"author":{"gitId":"tlylt"},"content":"      \u003cstop offset\u003d\".319\" stop-color\u003d\"#D4D4D4\" /\u003e"},{"lineNumber":228,"author":{"gitId":"tlylt"},"content":"      \u003cstop offset\u003d\"1\" stop-color\u003d\"#E6E6E6\" /\u003e"},{"lineNumber":229,"author":{"gitId":"tlylt"},"content":"    \u003c/radialGradient\u003e"},{"lineNumber":230,"author":{"gitId":"tlylt"},"content":"  \u003c/defs\u003e"},{"lineNumber":231,"author":{"gitId":"tlylt"},"content":"\u003c/svg\u003e"}],"authorContributionMap":{"tlylt":231}},{"path":"frontend/src/index.css","fileType":"css","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":".errormsg {"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"  background-color: lightpink;"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"  color: firebrick;"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  font-weight: bold;"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  padding: 0.5rem;"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  margin-bottom: 0.5rem;"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"html {"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"  margin-left: calc(100vw - 100%); /* Prevent scrollbar jumping */"},{"lineNumber":11,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"tlylt":10,"-":1}},{"path":"frontend/src/index.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import React from \u0027react\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import ReactDOM from \u0027react-dom/client\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import \u0027./index.css\u0027"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import \u0027./styles/tailwind.css\u0027"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"import App from \u0027./App\u0027"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"import reportWebVitals from \u0027./reportWebVitals\u0027"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"import { ChakraProvider, ColorModeScript } from \u0027@chakra-ui/react\u0027"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"import { HelmetProvider } from \u0027react-helmet-async\u0027"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"import { AuthProvider } from \u0027./context/AuthProvider\u0027"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"import theme from \u0027./theme\u0027"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"const root \u003d ReactDOM.createRoot(document.getElementById(\u0027root\u0027))"},{"lineNumber":14,"author":{"gitId":"-"},"content":"root.render("},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"  \u003cReact.StrictMode\u003e"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"    \u003cChakraProvider theme\u003d{theme}\u003e"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"      \u003cColorModeScript initialColorMode\u003d{theme.config.initialColorMode} /\u003e"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"      \u003cHelmetProvider\u003e"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"        \u003cAuthProvider\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"          \u003cApp /\u003e"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"        \u003c/AuthProvider\u003e"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"      \u003c/HelmetProvider\u003e"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"    \u003c/ChakraProvider\u003e"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"  \u003c/React.StrictMode\u003e"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":")"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"// If you want to start measuring performance in your app, pass a function"},{"lineNumber":28,"author":{"gitId":"-"},"content":"// to log results (for example: reportWebVitals(console.log))"},{"lineNumber":29,"author":{"gitId":"-"},"content":"// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"reportWebVitals()"}],"authorContributionMap":{"tlylt":23,"-":7}},{"path":"frontend/src/pages/History.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import useAuth from \u0027../hooks/useAuth\u0027"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"import { Helmet } from \u0027react-helmet-async\u0027"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"import { useState, useEffect, useMemo } from \u0027react\u0027"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"import useAxiosPrivate from \u0027../hooks/useAxiosPrivate\u0027"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"import {"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  URL_HISTORY_USER,"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  STATUS_CODE_BAD_REQUEST,"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"  STATUS_CODE_SUCCESS,"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"} from \u0027../constants\u0027"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"import { useTable, useSortBy } from \u0027react-table\u0027"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"import {"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"  Table,"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"  Thead,"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"  Tbody,"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"  Tr,"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"  Th,"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"  Td,"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"  TableContainer,"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"  Spinner,"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"} from \u0027@chakra-ui/react\u0027"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"import { Link } from \u0027react-router-dom\u0027"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"import blank from \u0027../images/blank.svg\u0027"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"import { Image } from \u0027@chakra-ui/react\u0027"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"const History \u003d () \u003d\u003e {"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"  const { auth } \u003d useAuth()"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"  const axiosPrivate \u003d useAxiosPrivate()"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"  const [hist, setHist] \u003d useState([])"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"  const [isValid, setIsValid] \u003d useState(false)"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"  const [isLoading, setIsLoading] \u003d useState(true)"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"    const fetchHist \u003d async () \u003d\u003e {"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"      const res \u003d await axiosPrivate"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"        .get(`${URL_HISTORY_USER}/${auth.username}`)"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"        .catch((e) \u003d\u003e {"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"          if (e.response.status \u003d\u003d\u003d STATUS_CODE_BAD_REQUEST) {"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"            setIsValid(false) // no username given"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"            return setIsLoading(false)"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"          }"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"        })"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"      if (res \u0026\u0026 res.status \u003d\u003d\u003d STATUS_CODE_SUCCESS) {"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"        setHist(res.data.data)"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":"        setIsValid(true)"},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"        setIsLoading(false)"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"    fetchHist()"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"    // eslint-disable-next-line react-hooks/exhaustive-deps"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"  }, [])"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"  const getHelmet \u003d () \u003d\u003e {"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"    return ("},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"      \u003cHelmet\u003e"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"        \u003ctitle\u003eHistory | LeetWithFriend\u003c/title\u003e"},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"        \u003cmeta charSet\u003d\"utf-8\" /\u003e"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"        \u003cmeta"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"          name\u003d\"description\""},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"          content\u003d\"An interview preparation platform and peer matching system, where students can find peers to practice whiteboard-style interview questions together.\""},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"        /\u003e"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"      \u003c/Helmet\u003e"},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"  const columns \u003d useMemo("},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"    () \u003d\u003e ["},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":"      {"},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":"        Header: \u0027Partner\u0027,"},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":"        accessor: \u0027partner\u0027,"},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":"        widthProp: \u0027w-1/6\u0027, // Own property to style column width (not react-table\u0027s property)"},{"lineNumber":71,"author":{"gitId":"uyencfi"},"content":"        disableSortBy: true,"},{"lineNumber":72,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":73,"author":{"gitId":"uyencfi"},"content":"      {"},{"lineNumber":74,"author":{"gitId":"uyencfi"},"content":"        Header: \u0027Question id\u0027,"},{"lineNumber":75,"author":{"gitId":"uyencfi"},"content":"        accessor: \u0027id\u0027,"},{"lineNumber":76,"author":{"gitId":"uyencfi"},"content":"        widthProp: \u0027w-1/5\u0027,"},{"lineNumber":77,"author":{"gitId":"uyencfi"},"content":"        disableSortBy: true,"},{"lineNumber":78,"author":{"gitId":"uyencfi"},"content":"        Cell: (cellInfo) \u003d\u003e ("},{"lineNumber":79,"author":{"gitId":"uyencfi"},"content":"          \u003cLink"},{"lineNumber":80,"author":{"gitId":"uyencfi"},"content":"            to\u003d{`/question/${cellInfo.row.original.id}`}"},{"lineNumber":81,"author":{"gitId":"uyencfi"},"content":"            className\u003d\"font-semibold text-gray-500 hover:underline dark:text-gray-300\""},{"lineNumber":82,"author":{"gitId":"uyencfi"},"content":"          \u003e"},{"lineNumber":83,"author":{"gitId":"uyencfi"},"content":"            {cellInfo.row.original.name}"},{"lineNumber":84,"author":{"gitId":"uyencfi"},"content":"          \u003c/Link\u003e"},{"lineNumber":85,"author":{"gitId":"uyencfi"},"content":"        ),"},{"lineNumber":86,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":87,"author":{"gitId":"uyencfi"},"content":"      {"},{"lineNumber":88,"author":{"gitId":"uyencfi"},"content":"        Header: \u0027Answer\u0027,"},{"lineNumber":89,"author":{"gitId":"uyencfi"},"content":"        accessor: \u0027answer\u0027,"},{"lineNumber":90,"author":{"gitId":"uyencfi"},"content":"        widthProp: \u0027w-1/2\u0027,"},{"lineNumber":91,"author":{"gitId":"uyencfi"},"content":"        disableSortBy: true,"},{"lineNumber":92,"author":{"gitId":"uyencfi"},"content":"        Cell: ({ cell: { value } }) \u003d\u003e ("},{"lineNumber":93,"author":{"gitId":"uyencfi"},"content":"          \u003cdiv className\u003d\"font-mono text-sm whitespace-pre-wrap\"\u003e{value}\u003c/div\u003e"},{"lineNumber":94,"author":{"gitId":"uyencfi"},"content":"        ),"},{"lineNumber":95,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":96,"author":{"gitId":"uyencfi"},"content":"      {"},{"lineNumber":97,"author":{"gitId":"uyencfi"},"content":"        Header: \u0027Completed at\u0027,"},{"lineNumber":98,"author":{"gitId":"uyencfi"},"content":"        accessor: \u0027completedAt\u0027,"},{"lineNumber":99,"author":{"gitId":"uyencfi"},"content":"        Cell: ({ cell: { value } }) \u003d\u003e {"},{"lineNumber":100,"author":{"gitId":"uyencfi"},"content":"          return new Date(value).toLocaleString(\u0027en-GB\u0027, {"},{"lineNumber":101,"author":{"gitId":"uyencfi"},"content":"            hour12: \u0027true\u0027,"},{"lineNumber":102,"author":{"gitId":"uyencfi"},"content":"            dateStyle: \u0027medium\u0027,"},{"lineNumber":103,"author":{"gitId":"uyencfi"},"content":"            timeStyle: \u0027medium\u0027,"},{"lineNumber":104,"author":{"gitId":"uyencfi"},"content":"          })"},{"lineNumber":105,"author":{"gitId":"uyencfi"},"content":"        },"},{"lineNumber":106,"author":{"gitId":"uyencfi"},"content":"        sortType: \u0027basic\u0027,"},{"lineNumber":107,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":108,"author":{"gitId":"uyencfi"},"content":"    ],"},{"lineNumber":109,"author":{"gitId":"uyencfi"},"content":"    []"},{"lineNumber":110,"author":{"gitId":"uyencfi"},"content":"  )"},{"lineNumber":111,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":112,"author":{"gitId":"uyencfi"},"content":"  return ("},{"lineNumber":113,"author":{"gitId":"uyencfi"},"content":"    \u003c\u003e"},{"lineNumber":114,"author":{"gitId":"uyencfi"},"content":"      {getHelmet()}"},{"lineNumber":115,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":116,"author":{"gitId":"tlylt"},"content":"      \u003cmain className\u003d\"flex flex-col items-center justify-start h-full\"\u003e"},{"lineNumber":117,"author":{"gitId":"uyencfi"},"content":"        {isLoading \u0026\u0026 ("},{"lineNumber":118,"author":{"gitId":"uyencfi"},"content":"          \u003cSpinner"},{"lineNumber":119,"author":{"gitId":"uyencfi"},"content":"            thickness\u003d\"4px\""},{"lineNumber":120,"author":{"gitId":"uyencfi"},"content":"            speed\u003d\"0.65s\""},{"lineNumber":121,"author":{"gitId":"uyencfi"},"content":"            emptyColor\u003d\"gray.200\""},{"lineNumber":122,"author":{"gitId":"uyencfi"},"content":"            color\u003d\"blue.500\""},{"lineNumber":123,"author":{"gitId":"uyencfi"},"content":"          /\u003e"},{"lineNumber":124,"author":{"gitId":"uyencfi"},"content":"        )}"},{"lineNumber":125,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":126,"author":{"gitId":"uyencfi"},"content":"        {!isLoading \u0026\u0026 !isValid ? ("},{"lineNumber":127,"author":{"gitId":"uyencfi"},"content":"          \u003ch1\u003eUnable to retrieve your learning history\u003c/h1\u003e"},{"lineNumber":128,"author":{"gitId":"uyencfi"},"content":"        ) : hist !\u003d\u003d undefined \u0026\u0026 hist.length \u003e 0 ? ("},{"lineNumber":129,"author":{"gitId":"uyencfi"},"content":"          \u003cHistTable columns\u003d{columns} data\u003d{hist} /\u003e"},{"lineNumber":130,"author":{"gitId":"uyencfi"},"content":"        ) : ("},{"lineNumber":131,"author":{"gitId":"uyencfi"},"content":"          \u003cdiv\u003e"},{"lineNumber":132,"author":{"gitId":"uyencfi"},"content":"            \u003ch1 className\u003d\"flex justify-center h-20 font-semibold\"\u003e"},{"lineNumber":133,"author":{"gitId":"uyencfi"},"content":"              You have not completed any questions yet..."},{"lineNumber":134,"author":{"gitId":"uyencfi"},"content":"            \u003c/h1\u003e"},{"lineNumber":135,"author":{"gitId":"uyencfi"},"content":"            \u003cdiv className\u003d\"flex items-center gap-4 px-4 py-3\"\u003e"},{"lineNumber":136,"author":{"gitId":"uyencfi"},"content":"              \u003cImage"},{"lineNumber":137,"author":{"gitId":"uyencfi"},"content":"                src\u003d{blank}"},{"lineNumber":138,"author":{"gitId":"uyencfi"},"content":"                alt\u003d\"blank\""},{"lineNumber":139,"author":{"gitId":"uyencfi"},"content":"                className\u003d\"inset-0 w-full pointer-events-none\""},{"lineNumber":140,"author":{"gitId":"uyencfi"},"content":"                unoptimized"},{"lineNumber":141,"author":{"gitId":"uyencfi"},"content":"              /\u003e"},{"lineNumber":142,"author":{"gitId":"uyencfi"},"content":"            \u003c/div\u003e"},{"lineNumber":143,"author":{"gitId":"uyencfi"},"content":"          \u003c/div\u003e"},{"lineNumber":144,"author":{"gitId":"uyencfi"},"content":"        )}"},{"lineNumber":145,"author":{"gitId":"uyencfi"},"content":"      \u003c/main\u003e"},{"lineNumber":146,"author":{"gitId":"uyencfi"},"content":"    \u003c/\u003e"},{"lineNumber":147,"author":{"gitId":"uyencfi"},"content":"  )"},{"lineNumber":148,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":149,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":150,"author":{"gitId":"uyencfi"},"content":"const HistTable \u003d ({ columns, data }) \u003d\u003e {"},{"lineNumber":151,"author":{"gitId":"uyencfi"},"content":"  const { getTableProps, getTableBodyProps, headerGroups, rows, prepareRow } \u003d"},{"lineNumber":152,"author":{"gitId":"uyencfi"},"content":"    useTable("},{"lineNumber":153,"author":{"gitId":"uyencfi"},"content":"      {"},{"lineNumber":154,"author":{"gitId":"uyencfi"},"content":"        columns,"},{"lineNumber":155,"author":{"gitId":"uyencfi"},"content":"        data,"},{"lineNumber":156,"author":{"gitId":"uyencfi"},"content":"        disableSortRemove: true,"},{"lineNumber":157,"author":{"gitId":"uyencfi"},"content":"        initialState: {"},{"lineNumber":158,"author":{"gitId":"uyencfi"},"content":"          sortBy: ["},{"lineNumber":159,"author":{"gitId":"uyencfi"},"content":"            {"},{"lineNumber":160,"author":{"gitId":"uyencfi"},"content":"              id: \u0027completedAt\u0027,"},{"lineNumber":161,"author":{"gitId":"uyencfi"},"content":"              desc: true,"},{"lineNumber":162,"author":{"gitId":"uyencfi"},"content":"            },"},{"lineNumber":163,"author":{"gitId":"uyencfi"},"content":"          ],"},{"lineNumber":164,"author":{"gitId":"uyencfi"},"content":"        },"},{"lineNumber":165,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":166,"author":{"gitId":"uyencfi"},"content":"      useSortBy"},{"lineNumber":167,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":168,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":169,"author":{"gitId":"uyencfi"},"content":"  return ("},{"lineNumber":170,"author":{"gitId":"tlylt"},"content":"    \u003cTableContainer overflowY\u003d\"auto\" whiteSpace\u003d\"pre-wrap\" maxHeight\u003d\"100vh\"\u003e"},{"lineNumber":171,"author":{"gitId":"uyencfi"},"content":"      \u003cTable"},{"lineNumber":172,"author":{"gitId":"uyencfi"},"content":"        variant\u003d\"striped\""},{"lineNumber":173,"author":{"gitId":"uyencfi"},"content":"        className\u003d\"w-full max-w-screen-xl table-fixed\""},{"lineNumber":174,"author":{"gitId":"uyencfi"},"content":"        {...getTableProps()}"},{"lineNumber":175,"author":{"gitId":"uyencfi"},"content":"      \u003e"},{"lineNumber":176,"author":{"gitId":"tlylt"},"content":"        \u003cThead className\u003d\"sticky top-0 bg-blue-200 dark:bg-blue-900\"\u003e"},{"lineNumber":177,"author":{"gitId":"uyencfi"},"content":"          {headerGroups.map((headerGroup) \u003d\u003e ("},{"lineNumber":178,"author":{"gitId":"uyencfi"},"content":"            \u003cTr {...headerGroup.getHeaderGroupProps()}\u003e"},{"lineNumber":179,"author":{"gitId":"uyencfi"},"content":"              {headerGroup.headers.map((column) \u003d\u003e ("},{"lineNumber":180,"author":{"gitId":"uyencfi"},"content":"                \u003cTh"},{"lineNumber":181,"author":{"gitId":"uyencfi"},"content":"                  className\u003d{column.widthProp}"},{"lineNumber":182,"author":{"gitId":"uyencfi"},"content":"                  {...column.getHeaderProps(column.getSortByToggleProps())}"},{"lineNumber":183,"author":{"gitId":"uyencfi"},"content":"                \u003e"},{"lineNumber":184,"author":{"gitId":"uyencfi"},"content":"                  {column.render(\u0027Header\u0027)}"},{"lineNumber":185,"author":{"gitId":"uyencfi"},"content":"                  {column.isSorted \u0026\u0026 ("},{"lineNumber":186,"author":{"gitId":"uyencfi"},"content":"                    \u003cspan\u003e{column.isSortedDesc ? \u0027 \u0027 : \u0027 \u0027}\u003c/span\u003e"},{"lineNumber":187,"author":{"gitId":"uyencfi"},"content":"                  )}"},{"lineNumber":188,"author":{"gitId":"uyencfi"},"content":"                \u003c/Th\u003e"},{"lineNumber":189,"author":{"gitId":"uyencfi"},"content":"              ))}"},{"lineNumber":190,"author":{"gitId":"uyencfi"},"content":"            \u003c/Tr\u003e"},{"lineNumber":191,"author":{"gitId":"uyencfi"},"content":"          ))}"},{"lineNumber":192,"author":{"gitId":"uyencfi"},"content":"        \u003c/Thead\u003e"},{"lineNumber":193,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":194,"author":{"gitId":"uyencfi"},"content":"        \u003cTbody {...getTableBodyProps()}\u003e"},{"lineNumber":195,"author":{"gitId":"uyencfi"},"content":"          {rows.map((row) \u003d\u003e {"},{"lineNumber":196,"author":{"gitId":"uyencfi"},"content":"            prepareRow(row)"},{"lineNumber":197,"author":{"gitId":"uyencfi"},"content":"            return ("},{"lineNumber":198,"author":{"gitId":"uyencfi"},"content":"              \u003cTr {...row.getRowProps()}\u003e"},{"lineNumber":199,"author":{"gitId":"uyencfi"},"content":"                {row.cells.map((cell) \u003d\u003e ("},{"lineNumber":200,"author":{"gitId":"uyencfi"},"content":"                  \u003cTd className\u003d\"align-text-top\" {...cell.getCellProps()}\u003e"},{"lineNumber":201,"author":{"gitId":"uyencfi"},"content":"                    {cell.render(\u0027Cell\u0027)}"},{"lineNumber":202,"author":{"gitId":"uyencfi"},"content":"                  \u003c/Td\u003e"},{"lineNumber":203,"author":{"gitId":"uyencfi"},"content":"                ))}"},{"lineNumber":204,"author":{"gitId":"uyencfi"},"content":"              \u003c/Tr\u003e"},{"lineNumber":205,"author":{"gitId":"uyencfi"},"content":"            )"},{"lineNumber":206,"author":{"gitId":"uyencfi"},"content":"          })}"},{"lineNumber":207,"author":{"gitId":"uyencfi"},"content":"        \u003c/Tbody\u003e"},{"lineNumber":208,"author":{"gitId":"uyencfi"},"content":"      \u003c/Table\u003e"},{"lineNumber":209,"author":{"gitId":"uyencfi"},"content":"    \u003c/TableContainer\u003e"},{"lineNumber":210,"author":{"gitId":"uyencfi"},"content":"  )"},{"lineNumber":211,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":212,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":213,"author":{"gitId":"uyencfi"},"content":"export default History"}],"authorContributionMap":{"tlylt":23,"uyencfi":190}},{"path":"frontend/src/pages/Home.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import useAuth from \u0027../hooks/useAuth\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { Helmet } from \u0027react-helmet-async\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import { SecondaryFeatures } from \u0027../components/SecondaryFeatures\u0027"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"const Home \u003d () \u003d\u003e {"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  const { auth } \u003d useAuth()"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    \u003cdiv\u003e"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"      \u003cHelmet\u003e"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"        \u003ctitle\u003eHome | LeetWithFriend\u003c/title\u003e"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"        \u003cmeta charSet\u003d\"utf-8\" /\u003e"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        \u003cmeta"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"          name\u003d\"description\""},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"          content\u003d\"An interview preparation platform and peer matching system, where students can find peers to practice whiteboard-style interview questions together.\""},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        /\u003e"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"      \u003c/Helmet\u003e"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"      \u003cmain className\u003d\"flex flex-col items-center justify-center h-full\"\u003e"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"        \u003cSecondaryFeatures username\u003d{auth.username} /\u003e"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"      \u003c/main\u003e"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"    \u003c/div\u003e"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"export default Home"}],"authorContributionMap":{"tlylt":25}},{"path":"frontend/src/pages/Login.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { AuthLayout } from \u0027../components/AuthLayout\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { Button } from \u0027../components/Button\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import { TextField } from \u0027../components/Fields\u0027"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import { useEffect, useRef, useState } from \u0027react\u0027"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"import axios from \u0027../api/axios\u0027"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"import { Link, useLocation, useNavigate } from \u0027react-router-dom\u0027"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"import {"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"  URL_USER_LOGIN,"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"  STATUS_CODE_SUCCESS,"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"  STATUS_CODE_BAD_REQUEST,"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"} from \u0027../constants\u0027"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"import useAuth from \u0027../hooks/useAuth\u0027"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"import { Helmet } from \u0027react-helmet-async\u0027"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"function Login() {"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"  const { auth, setAuth, persist, setPersist } \u003d useAuth()"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"  const navigate \u003d useNavigate()"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"  const location \u003d useLocation()"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"  const from \u003d location.state?.from?.pathname || \u0027/\u0027"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"  const errRef \u003d useRef()"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"  const togglePersist \u003d () \u003d\u003e {"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"    setPersist((prev) \u003d\u003e !prev)"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"  }"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"    localStorage.setItem(\u0027persist:peerprep\u0027, persist)"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"  }, [persist])"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"  const [username, setUsername] \u003d useState(\u0027\u0027)"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"  const [password, setPassword] \u003d useState(\u0027\u0027)"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"  const [errorMsg, setErrorMsg] \u003d useState(\u0027\u0027)"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"  const handleLogin \u003d async () \u003d\u003e {"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"    const res \u003d await axios"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"      .post(URL_USER_LOGIN, { username, password })"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"      .catch((err) \u003d\u003e {"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"        if (err.response.status \u003d\u003d\u003d STATUS_CODE_BAD_REQUEST) {"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"          setErrorMsg(err.response.data.message)"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"        } else {"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"          setErrorMsg(\u0027Server Error\u0027)"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"      })"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"    if (res \u0026\u0026 res.status \u003d\u003d\u003d STATUS_CODE_SUCCESS) {"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"      setAuth({"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"        username,"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"        school: res.data.data.school,"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"        email: res.data.data.email,"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"        accessToken: res.data.data.accessToken,"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"        isLoggedIn: true,"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"      })"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"      setUsername(\u0027\u0027)"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"      setPassword(\u0027\u0027)"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"      navigate(from, { replace: true })"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"  }"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"    setErrorMsg(\u0027\u0027)"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"  }, [username, password])"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"    console.log(auth)"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"  }, [auth])"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"    \u003c\u003e"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"      \u003cHelmet\u003e"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"        \u003ctitle\u003eLogin | LeetWithFriend\u003c/title\u003e"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"        \u003cmeta charSet\u003d\"utf-8\" /\u003e"},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"        \u003cmeta"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"          name\u003d\"description\""},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"          content\u003d\"An interview preparation platform and peer matching system, where students can find peers to practice whiteboard-style interview questions together.\""},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"        /\u003e"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"      \u003c/Helmet\u003e"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"      {auth?.username \u003d\u003d\u003d \u0027\u0027 ? ("},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"        \u003cAuthLayout"},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"          title\u003d\"Sign in to account\""},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"          subtitle\u003d{"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"            \u003c\u003e"},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"              Dont have an account?{\u0027 \u0027}"},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"              \u003cLink to\u003d\"/signup\" className\u003d\"text-cyan-600\"\u003e"},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":"                Sign up"},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"              \u003c/Link\u003e"},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":"            \u003c/\u003e"},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"          }"},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":"        \u003e"},{"lineNumber":85,"author":{"gitId":"tlylt"},"content":"          \u003cdiv\u003e"},{"lineNumber":86,"author":{"gitId":"tlylt"},"content":"            \u003cdiv className\u003d\"space-y-6\"\u003e"},{"lineNumber":87,"author":{"gitId":"tlylt"},"content":"              \u003cTextField"},{"lineNumber":88,"author":{"gitId":"tlylt"},"content":"                label\u003d\"Username\""},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"                value\u003d{username}"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"                autoComplete\u003d\"off\""},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":"                onChange\u003d{(e) \u003d\u003e setUsername(e.target.value)}"},{"lineNumber":92,"author":{"gitId":"tlylt"},"content":"                sx\u003d{{ marginBottom: \u00271rem\u0027 }}"},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":"                autoFocus"},{"lineNumber":94,"author":{"gitId":"tlylt"},"content":"                required"},{"lineNumber":95,"author":{"gitId":"tlylt"},"content":"              /\u003e"},{"lineNumber":96,"author":{"gitId":"tlylt"},"content":"              \u003cTextField"},{"lineNumber":97,"author":{"gitId":"tlylt"},"content":"                label\u003d\"Password\""},{"lineNumber":98,"author":{"gitId":"tlylt"},"content":"                id\u003d\"password\""},{"lineNumber":99,"author":{"gitId":"tlylt"},"content":"                name\u003d\"password\""},{"lineNumber":100,"author":{"gitId":"tlylt"},"content":"                type\u003d\"password\""},{"lineNumber":101,"author":{"gitId":"tlylt"},"content":"                autoComplete\u003d\"current-password\""},{"lineNumber":102,"author":{"gitId":"tlylt"},"content":"                required"},{"lineNumber":103,"author":{"gitId":"tlylt"},"content":"                value\u003d{password}"},{"lineNumber":104,"author":{"gitId":"tlylt"},"content":"                onChange\u003d{(e) \u003d\u003e setPassword(e.target.value)}"},{"lineNumber":105,"author":{"gitId":"tlylt"},"content":"                sx\u003d{{ marginBottom: \u00272rem\u0027 }}"},{"lineNumber":106,"author":{"gitId":"tlylt"},"content":"              /\u003e"},{"lineNumber":107,"author":{"gitId":"tlylt"},"content":"            \u003c/div\u003e"},{"lineNumber":108,"author":{"gitId":"tlylt"},"content":"            \u003cdiv className\u003d\"flex items-center justify-center gap-2 mt-2\"\u003e"},{"lineNumber":109,"author":{"gitId":"tlylt"},"content":"              \u003cinput"},{"lineNumber":110,"author":{"gitId":"tlylt"},"content":"                type\u003d\"checkbox\""},{"lineNumber":111,"author":{"gitId":"tlylt"},"content":"                id\u003d\"persist\""},{"lineNumber":112,"author":{"gitId":"tlylt"},"content":"                onChange\u003d{togglePersist}"},{"lineNumber":113,"author":{"gitId":"tlylt"},"content":"                checked\u003d{persist}"},{"lineNumber":114,"author":{"gitId":"tlylt"},"content":"              /\u003e"},{"lineNumber":115,"author":{"gitId":"tlylt"},"content":"              \u003clabel htmlFor\u003d\"persist\" className\u003d\"dark:text-black\"\u003e"},{"lineNumber":116,"author":{"gitId":"tlylt"},"content":"                Trust This Device (Persist Sign In)"},{"lineNumber":117,"author":{"gitId":"tlylt"},"content":"              \u003c/label\u003e"},{"lineNumber":118,"author":{"gitId":"tlylt"},"content":"            \u003c/div\u003e"},{"lineNumber":119,"author":{"gitId":"tlylt"},"content":"            \u003cButton color\u003d\"cyan\" className\u003d\"w-full mt-8\" onClick\u003d{handleLogin}\u003e"},{"lineNumber":120,"author":{"gitId":"tlylt"},"content":"              Sign In"},{"lineNumber":121,"author":{"gitId":"tlylt"},"content":"            \u003c/Button\u003e"},{"lineNumber":122,"author":{"gitId":"tlylt"},"content":"            \u003cdiv"},{"lineNumber":123,"author":{"gitId":"tlylt"},"content":"              ref\u003d{errRef}"},{"lineNumber":124,"author":{"gitId":"tlylt"},"content":"              className\u003d{`mt-2 text-center ${errorMsg ? \u0027errormsg\u0027 : \u0027hidden\u0027}`}"},{"lineNumber":125,"author":{"gitId":"tlylt"},"content":"              aria-live\u003d\"assertive\""},{"lineNumber":126,"author":{"gitId":"tlylt"},"content":"            \u003e"},{"lineNumber":127,"author":{"gitId":"tlylt"},"content":"              {errorMsg}"},{"lineNumber":128,"author":{"gitId":"tlylt"},"content":"            \u003c/div\u003e"},{"lineNumber":129,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":130,"author":{"gitId":"tlylt"},"content":"        \u003c/AuthLayout\u003e"},{"lineNumber":131,"author":{"gitId":"tlylt"},"content":"      ) : ("},{"lineNumber":132,"author":{"gitId":"tlylt"},"content":"        \u003cdiv className\u003d\"mx-auto text-center\"\u003eYou have logged in!\u003c/div\u003e"},{"lineNumber":133,"author":{"gitId":"tlylt"},"content":"      )}"},{"lineNumber":134,"author":{"gitId":"tlylt"},"content":"    \u003c/\u003e"},{"lineNumber":135,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":136,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":137,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":138,"author":{"gitId":"tlylt"},"content":"export default Login"}],"authorContributionMap":{"tlylt":138}},{"path":"frontend/src/pages/Match.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"import { useEffect, useState } from \u0027react\u0027"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"import MatchDialog from \u0027../components/match/MatchDialog\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import { Helmet } from \u0027react-helmet-async\u0027"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"import useAxiosPrivate from \u0027../hooks/useAxiosPrivate\u0027"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"import { URL_ROOM_SERVICE, STATUS_CODE_SUCCESS } from \u0027../constants\u0027"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"import { Button } from \u0027@chakra-ui/react\u0027"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"import { PrimaryFeatures } from \u0027../components/PrimaryFeatures\u0027"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"import { ArrowForwardIcon } from \u0027@chakra-ui/icons\u0027"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"const Match \u003d () \u003d\u003e {"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"  const [roomId, setRoomId] \u003d useState()"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"  const [isInRoom, setInRoom] \u003d useState(false)"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"  const axiosPrivate \u003d useAxiosPrivate()"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"    axiosPrivate"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"      .get(URL_ROOM_SERVICE)"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"      .then((res) \u003d\u003e {"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"        if (res \u0026\u0026 res.status \u003d\u003d\u003d STATUS_CODE_SUCCESS) {"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"          setRoomId(res.data.data.roomId)"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"          setInRoom(res.data.data.isInRoom)"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"        }"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"      .catch((e) \u003d\u003e {"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"        console.log(e)"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"  }, [axiosPrivate])"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"  return ("},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"    \u003cdiv\u003e"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"      \u003cHelmet\u003e"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"        \u003ctitle\u003eMatch | LeetWithFriend\u003c/title\u003e"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"        \u003cmeta charSet\u003d\"utf-8\" /\u003e"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"        \u003cmeta"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"          name\u003d\"description\""},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"          content\u003d\"An interview preparation platform and peer matching system, where students can find peers to practice whiteboard-style interview questions together.\""},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"        /\u003e"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"      \u003c/Helmet\u003e"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"      \u003cmain className\u003d\"flex flex-col items-center justify-center h-full\"\u003e"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"        {isInRoom ? ("},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"          \u003cPrimaryFeatures"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"            content\u003d{"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"              \u003cdiv className\u003d\"flex items-center justify-center max-w-2xl gap-4 mx-auto lg:mx-0 lg:max-w-3xl\"\u003e"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"                \u003ch2 className\u003d\"text-3xl font-medium tracking-tight text-gray-600 dark:text-white\"\u003e"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"                  Already in room!"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"                \u003c/h2\u003e"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"                \u003cButton"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"                  as\u003d\"a\""},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"                  href\u003d{`/room/${roomId}`}"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"                  variant\u003d\"outline\""},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"                  rightIcon\u003d{\u003cArrowForwardIcon /\u003e}"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"                \u003e"},{"lineNumber":52,"author":{"gitId":"MarcusTXK"},"content":"                  Rejoin"},{"lineNumber":53,"author":{"gitId":"MarcusTXK"},"content":"                \u003c/Button\u003e"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"              \u003c/div\u003e"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"            }"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"          /\u003e"},{"lineNumber":57,"author":{"gitId":"MarcusTXK"},"content":"        ) : ("},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"          \u003cPrimaryFeatures"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"            content\u003d{"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"              \u003cdiv className\u003d\"flex items-center justify-center max-w-2xl gap-4 mx-auto lg:mx-0 lg:max-w-3xl\"\u003e"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"                \u003ch2 className\u003d\"text-3xl font-medium tracking-tight text-gray-600 dark:text-white\"\u003e"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"                  Ready to match? Select your criteria and"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"                \u003c/h2\u003e"},{"lineNumber":64,"author":{"gitId":"MarcusTXK"},"content":"                \u003cMatchDialog isDisabled\u003d{isInRoom} /\u003e"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"              \u003c/div\u003e"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"            }"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"          /\u003e"},{"lineNumber":68,"author":{"gitId":"MarcusTXK"},"content":"        )}"},{"lineNumber":69,"author":{"gitId":"MarcusTXK"},"content":"      \u003c/main\u003e"},{"lineNumber":70,"author":{"gitId":"MarcusTXK"},"content":"    \u003c/div\u003e"},{"lineNumber":71,"author":{"gitId":"MarcusTXK"},"content":"  )"},{"lineNumber":72,"author":{"gitId":"MarcusTXK"},"content":"}"},{"lineNumber":73,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":74,"author":{"gitId":"MarcusTXK"},"content":"export default Match"}],"authorContributionMap":{"MarcusTXK":37,"tlylt":37}},{"path":"frontend/src/pages/PageNotFound.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { Helmet } from \u0027react-helmet-async\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { Link } from \u0027react-router-dom\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"const PageNotFound \u003d () \u003d\u003e {"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    \u003cmain className\u003d\"flex h-screen w-full flex-col items-center justify-center bg-[#1A2238]\"\u003e"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"      \u003cHelmet\u003e"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"        \u003ctitle\u003e404 | LeetWithFriend\u003c/title\u003e"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"        \u003cmeta charSet\u003d\"utf-8\" /\u003e"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"        \u003cmeta"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"          name\u003d\"description\""},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"          content\u003d\"An interview preparation platform and peer matching system, where students can find peers to practice whiteboard-style interview questions together.\""},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        /\u003e"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"      \u003c/Helmet\u003e"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"      \u003ch1 className\u003d\"font-extrabold tracking-widest text-white text-9xl\"\u003e"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        404"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"      \u003c/h1\u003e"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"      \u003cdiv className\u003d\"absolute rotate-12 rounded bg-[#FF6A3D] px-2 text-sm\"\u003e"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"        Page Not Found"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"      \u003c/div\u003e"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"      \u003cdiv className\u003d\"group relative mt-5 inline-block text-sm font-medium text-[#FF6A3D] focus:outline-none focus:ring active:text-orange-500\"\u003e"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"        \u003cspan className\u003d\"absolute inset-0 translate-x-0.5 translate-y-0.5 bg-[#FF6A3D] transition-transform group-hover:translate-y-0 group-hover:translate-x-0\"\u003e\u003c/span\u003e"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"        \u003cspan className\u003d\"relative block border border-current bg-[#1A2238] px-8 py-3\"\u003e"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"          \u003cLink to\u003d\"/home\"\u003eHome\u003c/Link\u003e"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"        \u003c/span\u003e"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"      \u003c/div\u003e"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"      \u003cdiv className\u003d\"group relative mt-5 inline-block text-sm font-medium text-[#FF6A3D] focus:outline-none focus:ring active:text-orange-500\"\u003e"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"        \u003cspan className\u003d\"absolute inset-0 translate-x-0.5 translate-y-0.5 bg-[#FF6A3D] transition-transform group-hover:translate-y-0 group-hover:translate-x-0\"\u003e\u003c/span\u003e"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"        \u003cspan className\u003d\"relative block border border-current bg-[#1A2238] px-8 py-3\"\u003e"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"          \u003cLink to\u003d\"/login\"\u003eLogin\u003c/Link\u003e"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"        \u003c/span\u003e"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"      \u003c/div\u003e"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"    \u003c/main\u003e"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"export default PageNotFound"}],"authorContributionMap":{"tlylt":38}},{"path":"frontend/src/pages/Profile.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { useNavigate } from \u0027react-router-dom\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import {"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"  STATUS_CODE_BAD_REQUEST,"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  STATUS_CODE_SUCCESS,"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  URL_USER_SERVICE,"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  PASSWORD_REGEX,"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  EMAIL_REGEX,"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"} from \u0027../constants\u0027"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"import useAuth from \u0027../hooks/useAuth\u0027"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"import useAxiosPrivate from \u0027../hooks/useAxiosPrivate\u0027"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"import { Tooltip } from \u0027@chakra-ui/react\u0027"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"import { useState } from \u0027react\u0027"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"import { useToast } from \u0027@chakra-ui/react\u0027"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"import { Helmet } from \u0027react-helmet-async\u0027"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"import { getUserProfileUrl } from \u0027../utils\u0027"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"const Profile \u003d () \u003d\u003e {"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"  const { auth, setAuth } \u003d useAuth()"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"  const [deleteConfirmation, setDeleteConfirmation] \u003d useState(\u0027\u0027)"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"  const toast \u003d useToast()"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"  const navigate \u003d useNavigate()"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"  const axiosPrivate \u003d useAxiosPrivate()"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"  const [school, setSchool] \u003d useState(auth.school)"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"  const [email, setEmail] \u003d useState(auth.email)"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"  const [currentPassword, setCurrentPassword] \u003d useState(\u0027\u0027)"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"  const [newPassword, setNewPassword] \u003d useState(\u0027\u0027)"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"  const [repeatPassword, setRepeatPassword] \u003d useState(\u0027\u0027)"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"  const updateAccountInfo \u003d async (e) \u003d\u003e {"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"    e.preventDefault()"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"    if (school \u003d\u003d\u003d auth.school \u0026\u0026 email \u003d\u003d\u003d auth.email) {"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"      toast({"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"        title: `Nothing to update!`,"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"        status: \u0027warning\u0027,"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"        isClosable: true,"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"      })"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"      return"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"    if (!EMAIL_REGEX.test(email)) {"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"      toast({"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"        title: \u0027Invalid email!\u0027,"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"        status: \u0027error\u0027,"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"        isClosable: true,"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"      })"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"      return"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"    const res \u003d await axiosPrivate"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"      .put(URL_USER_SERVICE, {"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"        school,"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"        email,"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"      })"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"      .catch((err) \u003d\u003e {"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"        if (err.response.status \u003d\u003d\u003d STATUS_CODE_BAD_REQUEST) {"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"          console.log(err.response.data.message)"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"        } else {"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"          console.log(\u0027Server Error\u0027)"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"      })"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"    if (res \u0026\u0026 res.status \u003d\u003d\u003d STATUS_CODE_SUCCESS) {"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"      toast({"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"        title: `Account info changed!`,"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"        status: \u0027success\u0027,"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"        isClosable: true,"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"      })"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"      setAuth({"},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"        ...auth,"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"        school,"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"        email,"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"      })"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"  }"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"  const updateAccountPassword \u003d async () \u003d\u003e {"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"    if (newPassword !\u003d\u003d repeatPassword) {"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"      toast({"},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"        title: `New password doesn\u0027t match`,"},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"        status: \u0027warning\u0027,"},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":"        isClosable: true,"},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"      })"},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":"      return"},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":"    if (!PASSWORD_REGEX.test(newPassword)) {"},{"lineNumber":85,"author":{"gitId":"tlylt"},"content":"      toast({"},{"lineNumber":86,"author":{"gitId":"tlylt"},"content":"        title: `New password not valid`,"},{"lineNumber":87,"author":{"gitId":"tlylt"},"content":"        status: \u0027warning\u0027,"},{"lineNumber":88,"author":{"gitId":"tlylt"},"content":"        isClosable: true,"},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"      })"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"      return"},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":92,"author":{"gitId":"tlylt"},"content":"    const res \u003d await axiosPrivate"},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":"      .put(URL_USER_SERVICE, {"},{"lineNumber":94,"author":{"gitId":"tlylt"},"content":"        previousPassword: currentPassword,"},{"lineNumber":95,"author":{"gitId":"tlylt"},"content":"        updatedPassword: newPassword,"},{"lineNumber":96,"author":{"gitId":"tlylt"},"content":"      })"},{"lineNumber":97,"author":{"gitId":"tlylt"},"content":"      .catch((err) \u003d\u003e {"},{"lineNumber":98,"author":{"gitId":"tlylt"},"content":"        if (err.response.status \u003d\u003d\u003d STATUS_CODE_BAD_REQUEST) {"},{"lineNumber":99,"author":{"gitId":"tlylt"},"content":"          console.log(err.response.data.message)"},{"lineNumber":100,"author":{"gitId":"tlylt"},"content":"        } else {"},{"lineNumber":101,"author":{"gitId":"tlylt"},"content":"          console.log(\u0027Server Error\u0027)"},{"lineNumber":102,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":103,"author":{"gitId":"tlylt"},"content":"      })"},{"lineNumber":104,"author":{"gitId":"tlylt"},"content":"    if (res \u0026\u0026 res.status \u003d\u003d\u003d STATUS_CODE_SUCCESS) {"},{"lineNumber":105,"author":{"gitId":"tlylt"},"content":"      toast({"},{"lineNumber":106,"author":{"gitId":"tlylt"},"content":"        title: `Account password changed!`,"},{"lineNumber":107,"author":{"gitId":"tlylt"},"content":"        status: \u0027success\u0027,"},{"lineNumber":108,"author":{"gitId":"tlylt"},"content":"        isClosable: true,"},{"lineNumber":109,"author":{"gitId":"tlylt"},"content":"      })"},{"lineNumber":110,"author":{"gitId":"tlylt"},"content":"      setTimeout(() \u003d\u003e {"},{"lineNumber":111,"author":{"gitId":"tlylt"},"content":"        setAuth({"},{"lineNumber":112,"author":{"gitId":"tlylt"},"content":"          accessToken: \u0027\u0027,"},{"lineNumber":113,"author":{"gitId":"tlylt"},"content":"          username: \u0027\u0027,"},{"lineNumber":114,"author":{"gitId":"tlylt"},"content":"        })"},{"lineNumber":115,"author":{"gitId":"tlylt"},"content":"      }, 2000)"},{"lineNumber":116,"author":{"gitId":"tlylt"},"content":"      setTimeout(() \u003d\u003e {"},{"lineNumber":117,"author":{"gitId":"tlylt"},"content":"        navigate(\u0027/login\u0027)"},{"lineNumber":118,"author":{"gitId":"tlylt"},"content":"      }, 4000)"},{"lineNumber":119,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":120,"author":{"gitId":"tlylt"},"content":"  }"},{"lineNumber":121,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":122,"author":{"gitId":"tlylt"},"content":"  const deleteAccount \u003d async () \u003d\u003e {"},{"lineNumber":123,"author":{"gitId":"tlylt"},"content":"    if (deleteConfirmation !\u003d\u003d auth.username) {"},{"lineNumber":124,"author":{"gitId":"tlylt"},"content":"      toast({"},{"lineNumber":125,"author":{"gitId":"tlylt"},"content":"        title: `Username doesn\u0027t match`,"},{"lineNumber":126,"author":{"gitId":"tlylt"},"content":"        status: \u0027error\u0027,"},{"lineNumber":127,"author":{"gitId":"tlylt"},"content":"        isClosable: true,"},{"lineNumber":128,"author":{"gitId":"tlylt"},"content":"      })"},{"lineNumber":129,"author":{"gitId":"tlylt"},"content":"      return"},{"lineNumber":130,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":131,"author":{"gitId":"tlylt"},"content":"    const res \u003d await axiosPrivate.delete(URL_USER_SERVICE).catch((err) \u003d\u003e {"},{"lineNumber":132,"author":{"gitId":"tlylt"},"content":"      if (err.response.status \u003d\u003d\u003d STATUS_CODE_BAD_REQUEST) {"},{"lineNumber":133,"author":{"gitId":"tlylt"},"content":"        console.log(err.response.data.message)"},{"lineNumber":134,"author":{"gitId":"tlylt"},"content":"      } else {"},{"lineNumber":135,"author":{"gitId":"tlylt"},"content":"        console.log(\u0027Server Error\u0027)"},{"lineNumber":136,"author":{"gitId":"tlylt"},"content":"      }"},{"lineNumber":137,"author":{"gitId":"tlylt"},"content":"    })"},{"lineNumber":138,"author":{"gitId":"tlylt"},"content":"    if (res \u0026\u0026 res.status \u003d\u003d\u003d STATUS_CODE_SUCCESS) {"},{"lineNumber":139,"author":{"gitId":"tlylt"},"content":"      toast({"},{"lineNumber":140,"author":{"gitId":"tlylt"},"content":"        title: `Account deleted!`,"},{"lineNumber":141,"author":{"gitId":"tlylt"},"content":"        status: \u0027success\u0027,"},{"lineNumber":142,"author":{"gitId":"tlylt"},"content":"        isClosable: true,"},{"lineNumber":143,"author":{"gitId":"tlylt"},"content":"      })"},{"lineNumber":144,"author":{"gitId":"tlylt"},"content":"      setTimeout(() \u003d\u003e {"},{"lineNumber":145,"author":{"gitId":"tlylt"},"content":"        setAuth({"},{"lineNumber":146,"author":{"gitId":"tlylt"},"content":"          accessToken: \u0027\u0027,"},{"lineNumber":147,"author":{"gitId":"tlylt"},"content":"          username: \u0027\u0027,"},{"lineNumber":148,"author":{"gitId":"tlylt"},"content":"        })"},{"lineNumber":149,"author":{"gitId":"tlylt"},"content":"      }, 2000)"},{"lineNumber":150,"author":{"gitId":"tlylt"},"content":"      setTimeout(() \u003d\u003e {"},{"lineNumber":151,"author":{"gitId":"tlylt"},"content":"        navigate(\u0027/login\u0027)"},{"lineNumber":152,"author":{"gitId":"tlylt"},"content":"      }, 4000)"},{"lineNumber":153,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":154,"author":{"gitId":"tlylt"},"content":"  }"},{"lineNumber":155,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":156,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":157,"author":{"gitId":"tlylt"},"content":"    \u003cform className\u003d\"container max-w-2xl mx-auto my-4 mt-4 shadow-md md:w-3/4\"\u003e"},{"lineNumber":158,"author":{"gitId":"tlylt"},"content":"      \u003cHelmet\u003e"},{"lineNumber":159,"author":{"gitId":"tlylt"},"content":"        \u003ctitle\u003eProfile | LeetWithFriend\u003c/title\u003e"},{"lineNumber":160,"author":{"gitId":"tlylt"},"content":"        \u003cmeta charSet\u003d\"utf-8\" /\u003e"},{"lineNumber":161,"author":{"gitId":"tlylt"},"content":"        \u003cmeta"},{"lineNumber":162,"author":{"gitId":"tlylt"},"content":"          name\u003d\"description\""},{"lineNumber":163,"author":{"gitId":"tlylt"},"content":"          content\u003d\"An interview preparation platform and peer matching system, where students can find peers to practice whiteboard-style interview questions together.\""},{"lineNumber":164,"author":{"gitId":"tlylt"},"content":"        /\u003e"},{"lineNumber":165,"author":{"gitId":"tlylt"},"content":"      \u003c/Helmet\u003e"},{"lineNumber":166,"author":{"gitId":"tlylt"},"content":"      \u003cdiv className\u003d\"p-4 bg-gray-100 border-t-2 rounded-lg bg-opacity-5\"\u003e"},{"lineNumber":167,"author":{"gitId":"tlylt"},"content":"        \u003cdiv className\u003d\"max-w-sm mx-auto md:mx-0 md:w-full\"\u003e"},{"lineNumber":168,"author":{"gitId":"tlylt"},"content":"          \u003cdiv className\u003d\"inline-flex items-center space-x-4\"\u003e"},{"lineNumber":169,"author":{"gitId":"tlylt"},"content":"            \u003cimg"},{"lineNumber":170,"author":{"gitId":"tlylt"},"content":"              alt\u003d\"profil\""},{"lineNumber":171,"author":{"gitId":"tlylt"},"content":"              src\u003d{getUserProfileUrl(auth.username)}"},{"lineNumber":172,"author":{"gitId":"tlylt"},"content":"              className\u003d\"object-cover w-16 h-16 mx-auto rounded-full \""},{"lineNumber":173,"author":{"gitId":"tlylt"},"content":"            /\u003e"},{"lineNumber":174,"author":{"gitId":"tlylt"},"content":"            \u003ch1\u003eUser Profile\u003c/h1\u003e"},{"lineNumber":175,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":176,"author":{"gitId":"tlylt"},"content":"        \u003c/div\u003e"},{"lineNumber":177,"author":{"gitId":"tlylt"},"content":"      \u003c/div\u003e"},{"lineNumber":178,"author":{"gitId":"tlylt"},"content":"      \u003cdiv className\u003d\"space-y-6 bg-white dark:bg-opacity-10\"\u003e"},{"lineNumber":179,"author":{"gitId":"tlylt"},"content":"        \u003cdiv className\u003d\"items-center w-full p-4 space-y-4 text-gray-500 md:inline-flex md:space-y-0\"\u003e"},{"lineNumber":180,"author":{"gitId":"tlylt"},"content":"          \u003ch2 className\u003d\"max-w-sm pl-3 mx-auto md:w-1/3\"\u003eAccount Username\u003c/h2\u003e"},{"lineNumber":181,"author":{"gitId":"tlylt"},"content":"          \u003cdiv className\u003d\"max-w-sm mx-auto md:w-2/3\"\u003e"},{"lineNumber":182,"author":{"gitId":"tlylt"},"content":"            \u003cTooltip"},{"lineNumber":183,"author":{"gitId":"tlylt"},"content":"              hasArrow"},{"lineNumber":184,"author":{"gitId":"tlylt"},"content":"              placement\u003d\"top\""},{"lineNumber":185,"author":{"gitId":"tlylt"},"content":"              label\u003d\"Username cannot be modified\""},{"lineNumber":186,"author":{"gitId":"tlylt"},"content":"              aria-label\u003d\"Username cannot be modified\""},{"lineNumber":187,"author":{"gitId":"tlylt"},"content":"            \u003e"},{"lineNumber":188,"author":{"gitId":"tlylt"},"content":"              \u003cdiv className\u003d\"relative\"\u003e"},{"lineNumber":189,"author":{"gitId":"tlylt"},"content":"                \u003cinput"},{"lineNumber":190,"author":{"gitId":"tlylt"},"content":"                  type\u003d\"text\""},{"lineNumber":191,"author":{"gitId":"tlylt"},"content":"                  disabled\u003d{true}"},{"lineNumber":192,"author":{"gitId":"tlylt"},"content":"                  className\u003d\"flex-1 w-full px-4 py-2 text-base text-gray-700 placeholder-gray-400 bg-white border border-transparent border-gray-300 rounded-lg shadow-sm appearance-none focus:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600\""},{"lineNumber":193,"author":{"gitId":"tlylt"},"content":"                  placeholder\u003d{auth.username}"},{"lineNumber":194,"author":{"gitId":"tlylt"},"content":"                /\u003e"},{"lineNumber":195,"author":{"gitId":"tlylt"},"content":"              \u003c/div\u003e"},{"lineNumber":196,"author":{"gitId":"tlylt"},"content":"            \u003c/Tooltip\u003e"},{"lineNumber":197,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":198,"author":{"gitId":"tlylt"},"content":"        \u003c/div\u003e"},{"lineNumber":199,"author":{"gitId":"tlylt"},"content":"        \u003chr /\u003e"},{"lineNumber":200,"author":{"gitId":"tlylt"},"content":"        \u003cdiv className\u003d\"items-center w-full p-4 space-y-4 text-gray-500 md:inline-flex md:space-y-0\"\u003e"},{"lineNumber":201,"author":{"gitId":"tlylt"},"content":"          \u003ch2 className\u003d\"max-w-sm pl-3 mx-auto md:w-1/3\"\u003ePersonal info\u003c/h2\u003e"},{"lineNumber":202,"author":{"gitId":"tlylt"},"content":"          \u003cdiv className\u003d\"max-w-sm mx-auto space-y-5 md:w-2/3\"\u003e"},{"lineNumber":203,"author":{"gitId":"tlylt"},"content":"            \u003cdiv\u003e"},{"lineNumber":204,"author":{"gitId":"tlylt"},"content":"              \u003cdiv className\u003d\"relative\"\u003e"},{"lineNumber":205,"author":{"gitId":"tlylt"},"content":"                \u003cinput"},{"lineNumber":206,"author":{"gitId":"tlylt"},"content":"                  type\u003d\"text\""},{"lineNumber":207,"author":{"gitId":"tlylt"},"content":"                  id\u003d\"school\""},{"lineNumber":208,"author":{"gitId":"tlylt"},"content":"                  className\u003d\"flex-1 w-full px-4 py-2 text-base text-gray-700 placeholder-gray-400 bg-white border border-transparent border-gray-300 rounded-lg shadow-sm appearance-none focus:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600\""},{"lineNumber":209,"author":{"gitId":"tlylt"},"content":"                  placeholder\u003d\"School\""},{"lineNumber":210,"author":{"gitId":"tlylt"},"content":"                  value\u003d{school}"},{"lineNumber":211,"author":{"gitId":"tlylt"},"content":"                  onChange\u003d{(e) \u003d\u003e setSchool(e.target.value)}"},{"lineNumber":212,"author":{"gitId":"tlylt"},"content":"                /\u003e"},{"lineNumber":213,"author":{"gitId":"tlylt"},"content":"              \u003c/div\u003e"},{"lineNumber":214,"author":{"gitId":"tlylt"},"content":"            \u003c/div\u003e"},{"lineNumber":215,"author":{"gitId":"tlylt"},"content":"            \u003cdiv\u003e"},{"lineNumber":216,"author":{"gitId":"tlylt"},"content":"              \u003cdiv className\u003d\"relative\"\u003e"},{"lineNumber":217,"author":{"gitId":"tlylt"},"content":"                \u003cinput"},{"lineNumber":218,"author":{"gitId":"tlylt"},"content":"                  type\u003d\"email\""},{"lineNumber":219,"author":{"gitId":"tlylt"},"content":"                  id\u003d\"email\""},{"lineNumber":220,"author":{"gitId":"tlylt"},"content":"                  className\u003d\"flex-1 w-full px-4 py-2 text-base text-gray-700 placeholder-gray-400 bg-white border border-transparent border-gray-300 rounded-lg shadow-sm appearance-none focus:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600\""},{"lineNumber":221,"author":{"gitId":"tlylt"},"content":"                  autoComplete\u003d\"off\""},{"lineNumber":222,"author":{"gitId":"tlylt"},"content":"                  placeholder\u003d\"Email\""},{"lineNumber":223,"author":{"gitId":"tlylt"},"content":"                  value\u003d{email}"},{"lineNumber":224,"author":{"gitId":"tlylt"},"content":"                  onChange\u003d{(e) \u003d\u003e setEmail(e.target.value)}"},{"lineNumber":225,"author":{"gitId":"tlylt"},"content":"                /\u003e"},{"lineNumber":226,"author":{"gitId":"tlylt"},"content":"              \u003c/div\u003e"},{"lineNumber":227,"author":{"gitId":"tlylt"},"content":"            \u003c/div\u003e"},{"lineNumber":228,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":229,"author":{"gitId":"tlylt"},"content":"        \u003c/div\u003e"},{"lineNumber":230,"author":{"gitId":"tlylt"},"content":"        \u003cdiv className\u003d\"w-full px-2 ml-auto text-center text-gray-500 md:w-3/12 \"\u003e"},{"lineNumber":231,"author":{"gitId":"tlylt"},"content":"          \u003cbutton"},{"lineNumber":232,"author":{"gitId":"tlylt"},"content":"            onClick\u003d{(e) \u003d\u003e updateAccountInfo(e)}"},{"lineNumber":233,"author":{"gitId":"tlylt"},"content":"            className\u003d\"px-6 py-2 text-base font-semibold text-center text-white transition duration-200 ease-in bg-blue-600 rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-blue-200\""},{"lineNumber":234,"author":{"gitId":"tlylt"},"content":"          \u003e"},{"lineNumber":235,"author":{"gitId":"tlylt"},"content":"            Update"},{"lineNumber":236,"author":{"gitId":"tlylt"},"content":"          \u003c/button\u003e"},{"lineNumber":237,"author":{"gitId":"tlylt"},"content":"        \u003c/div\u003e"},{"lineNumber":238,"author":{"gitId":"tlylt"},"content":"        \u003chr /\u003e"},{"lineNumber":239,"author":{"gitId":"tlylt"},"content":"        \u003cdiv className\u003d\"items-center w-full p-8 space-y-4 text-gray-500 md:inline-flex md:space-y-0\"\u003e"},{"lineNumber":240,"author":{"gitId":"tlylt"},"content":"          \u003ch2 className\u003d\"max-w-sm mx-auto md:w-4/12\"\u003eChange password\u003c/h2\u003e"},{"lineNumber":241,"author":{"gitId":"tlylt"},"content":"          \u003cdiv className\u003d\"flex flex-col w-full max-w-sm pl-2 mx-auto space-y-5 md:inline-flex md:w-7/12 md:pl-12\"\u003e"},{"lineNumber":242,"author":{"gitId":"tlylt"},"content":"            \u003cdiv className\u003d\"\"\u003e"},{"lineNumber":243,"author":{"gitId":"tlylt"},"content":"              \u003cinput"},{"lineNumber":244,"author":{"gitId":"tlylt"},"content":"                type\u003d\"password\""},{"lineNumber":245,"author":{"gitId":"tlylt"},"content":"                id\u003d\"current-password\""},{"lineNumber":246,"author":{"gitId":"tlylt"},"content":"                value\u003d{currentPassword}"},{"lineNumber":247,"author":{"gitId":"tlylt"},"content":"                autoComplete\u003d\"off\""},{"lineNumber":248,"author":{"gitId":"tlylt"},"content":"                onChange\u003d{(e) \u003d\u003e setCurrentPassword(e.target.value)}"},{"lineNumber":249,"author":{"gitId":"tlylt"},"content":"                className\u003d\"flex-1 w-full px-2 py-2 text-base text-gray-700 placeholder-gray-400 bg-white border border-transparent border-gray-300 rounded-lg shadow-sm appearance-none focus:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600\""},{"lineNumber":250,"author":{"gitId":"tlylt"},"content":"                placeholder\u003d\"Current Password\""},{"lineNumber":251,"author":{"gitId":"tlylt"},"content":"              /\u003e"},{"lineNumber":252,"author":{"gitId":"tlylt"},"content":"            \u003c/div\u003e"},{"lineNumber":253,"author":{"gitId":"tlylt"},"content":"            \u003cdiv className\u003d\"\"\u003e"},{"lineNumber":254,"author":{"gitId":"tlylt"},"content":"              \u003cinput"},{"lineNumber":255,"author":{"gitId":"tlylt"},"content":"                type\u003d\"password\""},{"lineNumber":256,"author":{"gitId":"tlylt"},"content":"                id\u003d\"new-password\""},{"lineNumber":257,"author":{"gitId":"tlylt"},"content":"                value\u003d{newPassword}"},{"lineNumber":258,"author":{"gitId":"tlylt"},"content":"                autoComplete\u003d\"off\""},{"lineNumber":259,"author":{"gitId":"tlylt"},"content":"                onChange\u003d{(e) \u003d\u003e setNewPassword(e.target.value)}"},{"lineNumber":260,"author":{"gitId":"tlylt"},"content":"                className\u003d\"flex-1 w-full px-2 py-2 text-base text-gray-700 placeholder-gray-400 bg-white border border-transparent border-gray-300 rounded-lg shadow-sm appearance-none focus:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600\""},{"lineNumber":261,"author":{"gitId":"tlylt"},"content":"                placeholder\u003d\"New Password\""},{"lineNumber":262,"author":{"gitId":"tlylt"},"content":"              /\u003e"},{"lineNumber":263,"author":{"gitId":"tlylt"},"content":"            \u003c/div\u003e"},{"lineNumber":264,"author":{"gitId":"tlylt"},"content":"            \u003cdiv className\u003d\"\"\u003e"},{"lineNumber":265,"author":{"gitId":"tlylt"},"content":"              \u003cinput"},{"lineNumber":266,"author":{"gitId":"tlylt"},"content":"                type\u003d\"password\""},{"lineNumber":267,"author":{"gitId":"tlylt"},"content":"                id\u003d\"repeat-password\""},{"lineNumber":268,"author":{"gitId":"tlylt"},"content":"                value\u003d{repeatPassword}"},{"lineNumber":269,"author":{"gitId":"tlylt"},"content":"                autoComplete\u003d\"off\""},{"lineNumber":270,"author":{"gitId":"tlylt"},"content":"                onChange\u003d{(e) \u003d\u003e setRepeatPassword(e.target.value)}"},{"lineNumber":271,"author":{"gitId":"tlylt"},"content":"                className\u003d\"flex-1 w-full px-2 py-2 text-base text-gray-700 placeholder-gray-400 bg-white border border-transparent border-gray-300 rounded-lg shadow-sm appearance-none focus:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600\""},{"lineNumber":272,"author":{"gitId":"tlylt"},"content":"                placeholder\u003d\"Repeat New Password\""},{"lineNumber":273,"author":{"gitId":"tlylt"},"content":"              /\u003e"},{"lineNumber":274,"author":{"gitId":"tlylt"},"content":"            \u003c/div\u003e"},{"lineNumber":275,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":276,"author":{"gitId":"tlylt"},"content":"          \u003cdiv className\u003d\"text-center md:w-3/12 md:pl-6\"\u003e"},{"lineNumber":277,"author":{"gitId":"tlylt"},"content":"            \u003cbutton"},{"lineNumber":278,"author":{"gitId":"tlylt"},"content":"              type\u003d\"button\""},{"lineNumber":279,"author":{"gitId":"tlylt"},"content":"              onClick\u003d{updateAccountPassword}"},{"lineNumber":280,"author":{"gitId":"tlylt"},"content":"              className\u003d\"w-full px-4 py-2 text-base font-semibold text-center text-white transition duration-200 ease-in bg-pink-600 rounded-lg shadow-md hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 focus:ring-offset-pink-200 \""},{"lineNumber":281,"author":{"gitId":"tlylt"},"content":"            \u003e"},{"lineNumber":282,"author":{"gitId":"tlylt"},"content":"              Change"},{"lineNumber":283,"author":{"gitId":"tlylt"},"content":"            \u003c/button\u003e"},{"lineNumber":284,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":285,"author":{"gitId":"tlylt"},"content":"        \u003c/div\u003e"},{"lineNumber":286,"author":{"gitId":"tlylt"},"content":"        \u003chr /\u003e"},{"lineNumber":287,"author":{"gitId":"tlylt"},"content":"        \u003cdiv className\u003d\"items-center w-full p-8 space-y-4 text-gray-500 md:inline-flex md:space-y-0\"\u003e"},{"lineNumber":288,"author":{"gitId":"tlylt"},"content":"          \u003ch2 className\u003d\"max-w-sm mx-auto md:w-4/12\"\u003eDelete Account\u003c/h2\u003e"},{"lineNumber":289,"author":{"gitId":"tlylt"},"content":"          \u003cdiv className\u003d\"w-full max-w-sm pl-2 mx-auto space-y-5 md:inline-flex md:w-6/12 md:pl-7\"\u003e"},{"lineNumber":290,"author":{"gitId":"tlylt"},"content":"            \u003cdiv className\u003d\"relative\"\u003e"},{"lineNumber":291,"author":{"gitId":"tlylt"},"content":"              \u003cinput"},{"lineNumber":292,"author":{"gitId":"tlylt"},"content":"                type\u003d\"text\""},{"lineNumber":293,"author":{"gitId":"tlylt"},"content":"                className\u003d\"flex-1 w-full px-4 py-2 text-base text-gray-700 placeholder-gray-400 bg-white border border-transparent border-gray-300 rounded-lg shadow-sm appearance-none focus:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600\""},{"lineNumber":294,"author":{"gitId":"tlylt"},"content":"                placeholder\u003d\"Type Your Username\""},{"lineNumber":295,"author":{"gitId":"tlylt"},"content":"                value\u003d{deleteConfirmation}"},{"lineNumber":296,"author":{"gitId":"tlylt"},"content":"                onChange\u003d{(e) \u003d\u003e setDeleteConfirmation(e.target.value)}"},{"lineNumber":297,"author":{"gitId":"tlylt"},"content":"              /\u003e"},{"lineNumber":298,"author":{"gitId":"tlylt"},"content":"            \u003c/div\u003e"},{"lineNumber":299,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":300,"author":{"gitId":"tlylt"},"content":"          \u003cdiv className\u003d\"text-center md:w-3/12 md:pl-8\"\u003e"},{"lineNumber":301,"author":{"gitId":"tlylt"},"content":"            \u003cbutton"},{"lineNumber":302,"author":{"gitId":"tlylt"},"content":"              type\u003d\"button\""},{"lineNumber":303,"author":{"gitId":"tlylt"},"content":"              onClick\u003d{deleteAccount}"},{"lineNumber":304,"author":{"gitId":"tlylt"},"content":"              className\u003d\"py-2 text-base font-semibold text-center text-white transition duration-200 ease-in bg-red-600 rounded-lg shadow-md px-7 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-pink-200 \""},{"lineNumber":305,"author":{"gitId":"tlylt"},"content":"            \u003e"},{"lineNumber":306,"author":{"gitId":"tlylt"},"content":"              Delete"},{"lineNumber":307,"author":{"gitId":"tlylt"},"content":"            \u003c/button\u003e"},{"lineNumber":308,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":309,"author":{"gitId":"tlylt"},"content":"        \u003c/div\u003e"},{"lineNumber":310,"author":{"gitId":"tlylt"},"content":"        \u003chr /\u003e"},{"lineNumber":311,"author":{"gitId":"tlylt"},"content":"      \u003c/div\u003e"},{"lineNumber":312,"author":{"gitId":"tlylt"},"content":"    \u003c/form\u003e"},{"lineNumber":313,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":314,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":315,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":316,"author":{"gitId":"tlylt"},"content":"export default Profile"}],"authorContributionMap":{"tlylt":316}},{"path":"frontend/src/pages/QuestionBank.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"import React, { useMemo } from \u0027react\u0027"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"import { Badge, Button, TableContainer } from \u0027@chakra-ui/react\u0027"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"import { useState, useEffect } from \u0027react\u0027"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"import { useNavigate } from \u0027react-router-dom\u0027"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"import QuestionTable from \u0027../components/QuestionTable\u0027"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"import { AuthLayout } from \u0027../components/AuthLayout\u0027"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"import TypesStack from \u0027../components/TypesStack\u0027"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"import axios from \u0027../api/axios\u0027"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"import { URL_QUESTION_SERVICE } from \u0027../constants\u0027"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"const difficultyColorMap \u003d new Map(["},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"  [\u0027easy\u0027, \u0027green\u0027],"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"  [\u0027medium\u0027, \u0027orange\u0027],"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"  [\u0027hard\u0027, \u0027red\u0027],"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"])"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"const QuestionBank \u003d () \u003d\u003e {"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"  const [loading, setLoading] \u003d useState(true)"},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"  const [data, setData] \u003d useState()"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"  const navigate \u003d useNavigate()"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"    const fetchData \u003d async () \u003d\u003e {"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"      setLoading(true)"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"      try {"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"        const { data: response } \u003d await axios.get("},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"          URL_QUESTION_SERVICE + \u0027/allQuestions\u0027"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"        )"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"        setData(response.questions)"},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":"      } catch (error) {"},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":"        //todo toast"},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"        console.error(error)"},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"      }"},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":"      setLoading(false)"},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"Hzxin"},"content":"    if (!data || data.length \u003d\u003d\u003d 0) {"},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":"      fetchData()"},{"lineNumber":37,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"Hzxin"},"content":"  })"},{"lineNumber":39,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":40,"author":{"gitId":"Hzxin"},"content":"  const columns \u003d useMemo("},{"lineNumber":41,"author":{"gitId":"Hzxin"},"content":"    () \u003d\u003e ["},{"lineNumber":42,"author":{"gitId":"Hzxin"},"content":"      {"},{"lineNumber":43,"author":{"gitId":"Hzxin"},"content":"        Header: \u0027Title\u0027,"},{"lineNumber":44,"author":{"gitId":"Hzxin"},"content":"        accessor: (row) \u003d\u003e row,"},{"lineNumber":45,"author":{"gitId":"Hzxin"},"content":"        Cell: ({ cell: { value } }) \u003d\u003e ("},{"lineNumber":46,"author":{"gitId":"Hzxin"},"content":"          \u003cButton"},{"lineNumber":47,"author":{"gitId":"Hzxin"},"content":"            variant\u003d\"link\""},{"lineNumber":48,"author":{"gitId":"Hzxin"},"content":"            fontWeight\u003d\"bold\""},{"lineNumber":49,"author":{"gitId":"Hzxin"},"content":"            color\u003d\"gray.600\""},{"lineNumber":50,"author":{"gitId":"Hzxin"},"content":"            onClick\u003d{() \u003d\u003e navigate(\u0027/question/\u0027 + value.id)}"},{"lineNumber":51,"author":{"gitId":"Hzxin"},"content":"          \u003e"},{"lineNumber":52,"author":{"gitId":"Hzxin"},"content":"            {\u0027 \u0027}"},{"lineNumber":53,"author":{"gitId":"Hzxin"},"content":"            {value.id + \u0027. \u0027 + value.name}{\u0027 \u0027}"},{"lineNumber":54,"author":{"gitId":"Hzxin"},"content":"          \u003c/Button\u003e"},{"lineNumber":55,"author":{"gitId":"Hzxin"},"content":"        ),"},{"lineNumber":56,"author":{"gitId":"Hzxin"},"content":"      },"},{"lineNumber":57,"author":{"gitId":"Hzxin"},"content":"      {"},{"lineNumber":58,"author":{"gitId":"Hzxin"},"content":"        Header: \u0027Types\u0027,"},{"lineNumber":59,"author":{"gitId":"Hzxin"},"content":"        accessor: \u0027Category.types\u0027,"},{"lineNumber":60,"author":{"gitId":"Hzxin"},"content":"        Cell: ({ cell: { value } }) \u003d\u003e TypesStack(value),"},{"lineNumber":61,"author":{"gitId":"Hzxin"},"content":"      },"},{"lineNumber":62,"author":{"gitId":"Hzxin"},"content":"      {"},{"lineNumber":63,"author":{"gitId":"Hzxin"},"content":"        Header: \u0027Difficulty\u0027,"},{"lineNumber":64,"author":{"gitId":"Hzxin"},"content":"        accessor: \u0027Category.difficulty\u0027,"},{"lineNumber":65,"author":{"gitId":"Hzxin"},"content":"        Cell: ({ cell: { value } }) \u003d\u003e ("},{"lineNumber":66,"author":{"gitId":"Hzxin"},"content":"          \u003cBadge"},{"lineNumber":67,"author":{"gitId":"Hzxin"},"content":"            fontWeight\u003d\"bold\""},{"lineNumber":68,"author":{"gitId":"Hzxin"},"content":"            color\u003d\"gray.600\""},{"lineNumber":69,"author":{"gitId":"Hzxin"},"content":"            borderRadius\u003d\"full\""},{"lineNumber":70,"author":{"gitId":"Hzxin"},"content":"            px\u003d\"2\""},{"lineNumber":71,"author":{"gitId":"Hzxin"},"content":"            colorScheme\u003d{difficultyColorMap.get(value)}"},{"lineNumber":72,"author":{"gitId":"Hzxin"},"content":"          \u003e"},{"lineNumber":73,"author":{"gitId":"Hzxin"},"content":"            {value}"},{"lineNumber":74,"author":{"gitId":"Hzxin"},"content":"          \u003c/Badge\u003e"},{"lineNumber":75,"author":{"gitId":"Hzxin"},"content":"        ),"},{"lineNumber":76,"author":{"gitId":"Hzxin"},"content":"      },"},{"lineNumber":77,"author":{"gitId":"Hzxin"},"content":"    ],"},{"lineNumber":78,"author":{"gitId":"Hzxin"},"content":"    [navigate]"},{"lineNumber":79,"author":{"gitId":"Hzxin"},"content":"  )"},{"lineNumber":80,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":81,"author":{"gitId":"Hzxin"},"content":"  return !loading ? ("},{"lineNumber":82,"author":{"gitId":"Hzxin"},"content":"    \u003cTableContainer overflowY\u003d\"auto\" maxHeight\u003d\"100%\"\u003e"},{"lineNumber":83,"author":{"gitId":"Hzxin"},"content":"      \u003cQuestionTable columns\u003d{columns} data\u003d{data} /\u003e"},{"lineNumber":84,"author":{"gitId":"Hzxin"},"content":"    \u003c/TableContainer\u003e"},{"lineNumber":85,"author":{"gitId":"Hzxin"},"content":"  ) : ("},{"lineNumber":86,"author":{"gitId":"Hzxin"},"content":"    \u003cAuthLayout title\u003d\"Retrieving question...\"\u003e"},{"lineNumber":87,"author":{"gitId":"Hzxin"},"content":"      \u003cdiv className\u003d\"text-center text-xl\"\u003e\u003c/div\u003e"},{"lineNumber":88,"author":{"gitId":"Hzxin"},"content":"    \u003c/AuthLayout\u003e"},{"lineNumber":89,"author":{"gitId":"Hzxin"},"content":"  )"},{"lineNumber":90,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":91,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":92,"author":{"gitId":"Hzxin"},"content":"export default QuestionBank"}],"authorContributionMap":{"Hzxin":92}},{"path":"frontend/src/pages/QuestionPage.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"import {"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"  Text,"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"  Code,"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"  HStack,"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"  StackDivider,"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"  VStack,"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"  Box,"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"  useToast,"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"  Image,"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"  Badge,"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"  Heading,"},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"  IconButton,"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"} from \u0027@chakra-ui/react\u0027"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"import { ArrowBackIcon, ArrowForwardIcon } from \u0027@chakra-ui/icons\u0027"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"import ChakraUIRenderer from \u0027chakra-ui-markdown-renderer\u0027"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"import { AuthLayout } from \u0027../components/AuthLayout\u0027"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"import ReactMarkdown from \u0027react-markdown\u0027"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"import { URL_QUESTION_SERVICE } from \u0027../constants\u0027"},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"import axios from \u0027../api/axios\u0027"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"import { useEffect, useState } from \u0027react\u0027"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"import { useParams, useNavigate } from \u0027react-router-dom\u0027"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"const difficultyColorMap \u003d new Map(["},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"  [\u0027easy\u0027, \u0027green\u0027],"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"  [\u0027medium\u0027, \u0027orange\u0027],"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"  [\u0027hard\u0027, \u0027red\u0027],"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"])"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":"const supTheme \u003d {"},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":"  em: ({ node, ...props }) \u003d\u003e {"},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"    if ("},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"      props.children[0] \u0026\u0026"},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":"      typeof props.children[0] \u003d\u003d\u003d \u0027string\u0027 \u0026\u0026"},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"      props.children[0].startsWith(\u0027^\u0027)"},{"lineNumber":35,"author":{"gitId":"Hzxin"},"content":"    ) {"},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":"      return \u003csup\u003e{props.children[0].substring(1, 2)}\u003c/sup\u003e"},{"lineNumber":37,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"Hzxin"},"content":"    if ("},{"lineNumber":39,"author":{"gitId":"Hzxin"},"content":"      props.children[0] \u0026\u0026"},{"lineNumber":40,"author":{"gitId":"Hzxin"},"content":"      typeof props.children[0] \u003d\u003d\u003d \u0027string\u0027 \u0026\u0026"},{"lineNumber":41,"author":{"gitId":"Hzxin"},"content":"      props.children[0].startsWith(\u0027~\u0027)"},{"lineNumber":42,"author":{"gitId":"Hzxin"},"content":"    ) {"},{"lineNumber":43,"author":{"gitId":"Hzxin"},"content":"      return \u003csub\u003e{props.children[0].substring(1, 2)}\u003c/sub\u003e"},{"lineNumber":44,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":45,"author":{"gitId":"Hzxin"},"content":"    return \u003ci {...props} /\u003e"},{"lineNumber":46,"author":{"gitId":"Hzxin"},"content":"  },"},{"lineNumber":47,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":48,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":49,"author":{"gitId":"Hzxin"},"content":"const newTheme \u003d {"},{"lineNumber":50,"author":{"gitId":"Hzxin"},"content":"  img: ({ node, children, ...props }) \u003d\u003e {"},{"lineNumber":51,"author":{"gitId":"Hzxin"},"content":"    return \u003cImage m\u003d{4} src\u003d{node.properties.src}\u003e\u003c/Image\u003e"},{"lineNumber":52,"author":{"gitId":"Hzxin"},"content":"  },"},{"lineNumber":53,"author":{"gitId":"Hzxin"},"content":"  code: ({ node, inline, children, ...props }) \u003d\u003e {"},{"lineNumber":54,"author":{"gitId":"Hzxin"},"content":"    return !inline ? ("},{"lineNumber":55,"author":{"gitId":"Hzxin"},"content":"      \u003cCode overflow\u003d\"auto\" fontSize\u003d\"lg\" w\u003d\"100%\" p\u003d{2} mt\u003d{4} mb\u003d{4}\u003e"},{"lineNumber":56,"author":{"gitId":"Hzxin"},"content":"        \u003cReactMarkdown"},{"lineNumber":57,"author":{"gitId":"Hzxin"},"content":"          components\u003d{ChakraUIRenderer(supTheme)}"},{"lineNumber":58,"author":{"gitId":"Hzxin"},"content":"          children\u003d{children[0]}"},{"lineNumber":59,"author":{"gitId":"Hzxin"},"content":"        /\u003e"},{"lineNumber":60,"author":{"gitId":"Hzxin"},"content":"      \u003c/Code\u003e"},{"lineNumber":61,"author":{"gitId":"Hzxin"},"content":"    ) : ("},{"lineNumber":62,"author":{"gitId":"Hzxin"},"content":"      \u003cCode fontSize\u003d\"lg\"\u003e"},{"lineNumber":63,"author":{"gitId":"Hzxin"},"content":"        \u003cReactMarkdown"},{"lineNumber":64,"author":{"gitId":"Hzxin"},"content":"          components\u003d{ChakraUIRenderer(supTheme)}"},{"lineNumber":65,"author":{"gitId":"Hzxin"},"content":"          children\u003d{children[0]}"},{"lineNumber":66,"author":{"gitId":"Hzxin"},"content":"        /\u003e"},{"lineNumber":67,"author":{"gitId":"Hzxin"},"content":"      \u003c/Code\u003e"},{"lineNumber":68,"author":{"gitId":"Hzxin"},"content":"    )"},{"lineNumber":69,"author":{"gitId":"Hzxin"},"content":"  },"},{"lineNumber":70,"author":{"gitId":"Hzxin"},"content":"  p: (props) \u003d\u003e {"},{"lineNumber":71,"author":{"gitId":"Hzxin"},"content":"    const { children } \u003d props"},{"lineNumber":72,"author":{"gitId":"Hzxin"},"content":"    return ("},{"lineNumber":73,"author":{"gitId":"Hzxin"},"content":"      \u003cText overflow\u003d\"auto\" mb\u003d{1} className\u003d\"text-lg\"\u003e"},{"lineNumber":74,"author":{"gitId":"Hzxin"},"content":"        {children}"},{"lineNumber":75,"author":{"gitId":"Hzxin"},"content":"      \u003c/Text\u003e"},{"lineNumber":76,"author":{"gitId":"Hzxin"},"content":"    )"},{"lineNumber":77,"author":{"gitId":"Hzxin"},"content":"  },"},{"lineNumber":78,"author":{"gitId":"Hzxin"},"content":"  em: ({ node, ...props }) \u003d\u003e {"},{"lineNumber":79,"author":{"gitId":"Hzxin"},"content":"    if ("},{"lineNumber":80,"author":{"gitId":"Hzxin"},"content":"      props.children[0] \u0026\u0026"},{"lineNumber":81,"author":{"gitId":"Hzxin"},"content":"      typeof props.children[0] \u003d\u003d\u003d \u0027string\u0027 \u0026\u0026"},{"lineNumber":82,"author":{"gitId":"Hzxin"},"content":"      props.children[0].startsWith(\u0027^\u0027)"},{"lineNumber":83,"author":{"gitId":"Hzxin"},"content":"    ) {"},{"lineNumber":84,"author":{"gitId":"Hzxin"},"content":"      return \u003csup\u003e{props.children[0].substring(1, 2)}\u003c/sup\u003e"},{"lineNumber":85,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"Hzxin"},"content":"    if ("},{"lineNumber":87,"author":{"gitId":"Hzxin"},"content":"      props.children[0] \u0026\u0026"},{"lineNumber":88,"author":{"gitId":"Hzxin"},"content":"      typeof props.children[0] \u003d\u003d\u003d \u0027string\u0027 \u0026\u0026"},{"lineNumber":89,"author":{"gitId":"Hzxin"},"content":"      props.children[0].startsWith(\u0027~\u0027)"},{"lineNumber":90,"author":{"gitId":"Hzxin"},"content":"    ) {"},{"lineNumber":91,"author":{"gitId":"Hzxin"},"content":"      return \u003csub\u003e{props.children[0].substring(1, 2)}\u003c/sub\u003e"},{"lineNumber":92,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":93,"author":{"gitId":"Hzxin"},"content":"    return \u003ci {...props} /\u003e"},{"lineNumber":94,"author":{"gitId":"Hzxin"},"content":"  },"},{"lineNumber":95,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":96,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":97,"author":{"gitId":"Hzxin"},"content":"const parse \u003d (text) \u003d\u003e {"},{"lineNumber":98,"author":{"gitId":"Hzxin"},"content":"  text \u003d text.replace(\u0027\\n\u0027, \u0027\\n\\n\u0027)"},{"lineNumber":99,"author":{"gitId":"Hzxin"},"content":"  return text"},{"lineNumber":100,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":101,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":102,"author":{"gitId":"Hzxin"},"content":"const QuestionPage \u003d () \u003d\u003e {"},{"lineNumber":103,"author":{"gitId":"Hzxin"},"content":"  const [questionData, setQuestionData] \u003d useState([])"},{"lineNumber":104,"author":{"gitId":"Hzxin"},"content":"  const [end, setEnd] \u003d useState(false)"},{"lineNumber":105,"author":{"gitId":"Hzxin"},"content":"  const { questionId } \u003d useParams()"},{"lineNumber":106,"author":{"gitId":"Hzxin"},"content":"  const navigate \u003d useNavigate()"},{"lineNumber":107,"author":{"gitId":"Hzxin"},"content":"  const toast \u003d useToast()"},{"lineNumber":108,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":109,"author":{"gitId":"Hzxin"},"content":"  const nextQuestion \u003d async () \u003d\u003e {"},{"lineNumber":110,"author":{"gitId":"Hzxin"},"content":"    if (!end) {"},{"lineNumber":111,"author":{"gitId":"Hzxin"},"content":"      navigate(\u0027/question/\u0027 + (parseInt(questionId) + 1))"},{"lineNumber":112,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":113,"author":{"gitId":"Hzxin"},"content":"  }"},{"lineNumber":114,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":115,"author":{"gitId":"Hzxin"},"content":"  const previousQuestion \u003d async () \u003d\u003e {"},{"lineNumber":116,"author":{"gitId":"Hzxin"},"content":"    if (questionId \u003e 1) {"},{"lineNumber":117,"author":{"gitId":"Hzxin"},"content":"      navigate(\u0027/question/\u0027 + (parseInt(questionId) - 1))"},{"lineNumber":118,"author":{"gitId":"Hzxin"},"content":"    } else {"},{"lineNumber":119,"author":{"gitId":"Hzxin"},"content":"      toast({"},{"lineNumber":120,"author":{"gitId":"Hzxin"},"content":"        title: \u0027You have reached the start of the questions!\u0027,"},{"lineNumber":121,"author":{"gitId":"Hzxin"},"content":"        position: \u0027top\u0027,"},{"lineNumber":122,"author":{"gitId":"Hzxin"},"content":"        status: \u0027warning\u0027,"},{"lineNumber":123,"author":{"gitId":"Hzxin"},"content":"        duration: 3000,"},{"lineNumber":124,"author":{"gitId":"Hzxin"},"content":"        isClosable: true,"},{"lineNumber":125,"author":{"gitId":"Hzxin"},"content":"      })"},{"lineNumber":126,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":127,"author":{"gitId":"Hzxin"},"content":"  }"},{"lineNumber":128,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":129,"author":{"gitId":"Hzxin"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":130,"author":{"gitId":"Hzxin"},"content":"    const getQuestion \u003d async () \u003d\u003e {"},{"lineNumber":131,"author":{"gitId":"Hzxin"},"content":"      await axios"},{"lineNumber":132,"author":{"gitId":"Hzxin"},"content":"        .get(URL_QUESTION_SERVICE + \u0027?id\u003d\u0027 + questionId)"},{"lineNumber":133,"author":{"gitId":"Hzxin"},"content":"        .then((response) \u003d\u003e {"},{"lineNumber":134,"author":{"gitId":"Hzxin"},"content":"          const newData \u003d response.data"},{"lineNumber":135,"author":{"gitId":"Hzxin"},"content":"          setQuestionData(newData)"},{"lineNumber":136,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":137,"author":{"gitId":"Hzxin"},"content":"        .catch((error) \u003d\u003e {"},{"lineNumber":138,"author":{"gitId":"Hzxin"},"content":"          toast({"},{"lineNumber":139,"author":{"gitId":"Hzxin"},"content":"            title: \u0027You have reached the end of the questions!\u0027,"},{"lineNumber":140,"author":{"gitId":"Hzxin"},"content":"            position: \u0027top\u0027,"},{"lineNumber":141,"author":{"gitId":"Hzxin"},"content":"            status: \u0027warning\u0027,"},{"lineNumber":142,"author":{"gitId":"Hzxin"},"content":"            duration: 3000,"},{"lineNumber":143,"author":{"gitId":"Hzxin"},"content":"            isClosable: true,"},{"lineNumber":144,"author":{"gitId":"Hzxin"},"content":"          })"},{"lineNumber":145,"author":{"gitId":"Hzxin"},"content":"          setEnd(true)"},{"lineNumber":146,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":147,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":148,"author":{"gitId":"Hzxin"},"content":"    if ("},{"lineNumber":149,"author":{"gitId":"Hzxin"},"content":"      typeof questionData.id \u003d\u003d\u003d \u0027undefined\u0027 ||"},{"lineNumber":150,"author":{"gitId":"Hzxin"},"content":"      Number(questionData.id) !\u003d\u003d Number(questionId)"},{"lineNumber":151,"author":{"gitId":"Hzxin"},"content":"    ) {"},{"lineNumber":152,"author":{"gitId":"Hzxin"},"content":"      getQuestion()"},{"lineNumber":153,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":154,"author":{"gitId":"Hzxin"},"content":"  }, [questionData, end, questionId, toast])"},{"lineNumber":155,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":156,"author":{"gitId":"Hzxin"},"content":"  if ("},{"lineNumber":157,"author":{"gitId":"Hzxin"},"content":"    !questionData ||"},{"lineNumber":158,"author":{"gitId":"Hzxin"},"content":"    typeof questionData \u003d\u003d\u003d \u0027undefined\u0027 ||"},{"lineNumber":159,"author":{"gitId":"Hzxin"},"content":"    questionData.length \u003d\u003d\u003d 0"},{"lineNumber":160,"author":{"gitId":"Hzxin"},"content":"  ) {"},{"lineNumber":161,"author":{"gitId":"Hzxin"},"content":"    return ("},{"lineNumber":162,"author":{"gitId":"Hzxin"},"content":"      \u003cAuthLayout title\u003d\"Retrieving question...\"\u003e"},{"lineNumber":163,"author":{"gitId":"Hzxin"},"content":"        \u003cdiv className\u003d\"text-center text-xl\"\u003e\u003c/div\u003e"},{"lineNumber":164,"author":{"gitId":"Hzxin"},"content":"      \u003c/AuthLayout\u003e"},{"lineNumber":165,"author":{"gitId":"Hzxin"},"content":"    )"},{"lineNumber":166,"author":{"gitId":"Hzxin"},"content":"  }"},{"lineNumber":167,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":168,"author":{"gitId":"Hzxin"},"content":"  const difficultyColor \u003d (difficulty) \u003d\u003e difficultyColorMap.get(difficulty)"},{"lineNumber":169,"author":{"gitId":"Hzxin"},"content":"  return ("},{"lineNumber":170,"author":{"gitId":"Hzxin"},"content":"    \u003c\u003e"},{"lineNumber":171,"author":{"gitId":"Hzxin"},"content":"      \u003cBox className\u003d\"rounded-lg border\"\u003e"},{"lineNumber":172,"author":{"gitId":"Hzxin"},"content":"        \u003cVStack h\u003d\"100vh\" divider\u003d{\u003cStackDivider borderColor\u003d\"gray.200\" /\u003e}\u003e"},{"lineNumber":173,"author":{"gitId":"Hzxin"},"content":"          \u003cHeading size\u003d\"lg\" fontWeight\u003d\"semibold\" color\u003d\"gray 500\"\u003e"},{"lineNumber":174,"author":{"gitId":"Hzxin"},"content":"            {questionData.name}"},{"lineNumber":175,"author":{"gitId":"Hzxin"},"content":"          \u003c/Heading\u003e"},{"lineNumber":176,"author":{"gitId":"Hzxin"},"content":"          \u003cHStack spacing\u003d{350}\u003e"},{"lineNumber":177,"author":{"gitId":"Hzxin"},"content":"            \u003cIconButton"},{"lineNumber":178,"author":{"gitId":"Hzxin"},"content":"              onClick\u003d{previousQuestion}"},{"lineNumber":179,"author":{"gitId":"Hzxin"},"content":"              aria-label\u003d\"Back\""},{"lineNumber":180,"author":{"gitId":"Hzxin"},"content":"              icon\u003d{\u003cArrowBackIcon /\u003e}"},{"lineNumber":181,"author":{"gitId":"Hzxin"},"content":"            \u003e\u003c/IconButton\u003e"},{"lineNumber":182,"author":{"gitId":"Hzxin"},"content":"            \u003cBadge"},{"lineNumber":183,"author":{"gitId":"Hzxin"},"content":"              align\u003d\"center\""},{"lineNumber":184,"author":{"gitId":"Hzxin"},"content":"              textAlign\u003d\"center\""},{"lineNumber":185,"author":{"gitId":"Hzxin"},"content":"              borderRadius\u003d\"full\""},{"lineNumber":186,"author":{"gitId":"Hzxin"},"content":"              px\u003d\"2\""},{"lineNumber":187,"author":{"gitId":"Hzxin"},"content":"              colorScheme\u003d{difficultyColor(questionData.difficulty)}"},{"lineNumber":188,"author":{"gitId":"Hzxin"},"content":"            \u003e"},{"lineNumber":189,"author":{"gitId":"Hzxin"},"content":"              {questionData.difficulty}"},{"lineNumber":190,"author":{"gitId":"Hzxin"},"content":"            \u003c/Badge\u003e"},{"lineNumber":191,"author":{"gitId":"Hzxin"},"content":"            \u003cIconButton"},{"lineNumber":192,"author":{"gitId":"Hzxin"},"content":"              onClick\u003d{nextQuestion}"},{"lineNumber":193,"author":{"gitId":"Hzxin"},"content":"              aria-label\u003d\"Back\""},{"lineNumber":194,"author":{"gitId":"Hzxin"},"content":"              icon\u003d{\u003cArrowForwardIcon /\u003e}"},{"lineNumber":195,"author":{"gitId":"Hzxin"},"content":"            \u003e\u003c/IconButton\u003e"},{"lineNumber":196,"author":{"gitId":"Hzxin"},"content":"          \u003c/HStack\u003e"},{"lineNumber":197,"author":{"gitId":"Hzxin"},"content":"          \u003cdiv className\u003d\"mx-2 max-h-full overflow-y-auto px-2\"\u003e"},{"lineNumber":198,"author":{"gitId":"Hzxin"},"content":"            \u003cReactMarkdown"},{"lineNumber":199,"author":{"gitId":"Hzxin"},"content":"              components\u003d{ChakraUIRenderer(newTheme)}"},{"lineNumber":200,"author":{"gitId":"Hzxin"},"content":"              children\u003d{parse(questionData.content)}"},{"lineNumber":201,"author":{"gitId":"Hzxin"},"content":"              skipHtml"},{"lineNumber":202,"author":{"gitId":"Hzxin"},"content":"            /\u003e"},{"lineNumber":203,"author":{"gitId":"Hzxin"},"content":"          \u003c/div\u003e"},{"lineNumber":204,"author":{"gitId":"Hzxin"},"content":"        \u003c/VStack\u003e"},{"lineNumber":205,"author":{"gitId":"Hzxin"},"content":"      \u003c/Box\u003e"},{"lineNumber":206,"author":{"gitId":"Hzxin"},"content":"    \u003c/\u003e"},{"lineNumber":207,"author":{"gitId":"Hzxin"},"content":"  )"},{"lineNumber":208,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":209,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":210,"author":{"gitId":"Hzxin"},"content":"export default QuestionPage"}],"authorContributionMap":{"Hzxin":210}},{"path":"frontend/src/pages/Room.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import { useNavigate, useParams } from \u0027react-router-dom\u0027"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"import { useEffect, useState } from \u0027react\u0027"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"import {"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"  EVENT_LISTEN,"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  URL_ROOM_SERVICE,"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"  STATUS_CODE_SUCCESS,"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"  STATUS_CODE_BAD_REQUEST,"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"  STATUS_CODE_NOT_MODIFIED,"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"  URI_ROOM_SERVICE_SOCKET_PATH,"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"  URI_ROOM_SERVICE,"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"  URL_HISTORY_ROOM,"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"} from \u0027../constants\u0027"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"import { Button, useToast, Stack, Text } from \u0027@chakra-ui/react\u0027"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"import { Helmet } from \u0027react-helmet-async\u0027"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"import QuestionPane from \u0027../components/QuestionPane\u0027"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"import Editor from \u0027../components/collaboration/Editor\u0027"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"import RoomEndDialog from \u0027../components/room/RoomEndDialog\u0027"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"import io from \u0027socket.io-client\u0027"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"import useAuth from \u0027../hooks/useAuth\u0027"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"import useAxiosPrivate from \u0027../hooks/useAxiosPrivate\u0027"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"import VideoChat from \u0027../components/room/VideoChat\u0027"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"const Room \u003d () \u003d\u003e {"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"  const navigate \u003d useNavigate()"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"  const { roomId } \u003d useParams()"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"  const [questionId, setQuestionId] \u003d useState()"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"  const [isFirstQuestion, setFirstQuestion] \u003d useState(true)"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"  const [room, setRoom] \u003d useState()"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"  const [socket, setSocket] \u003d useState()"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"  const [editor, setEditor] \u003d useState()"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"  const [isValid, setIsValid] \u003d useState(true)"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"  const toast \u003d useToast()"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"  const { auth } \u003d useAuth()"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"  const axiosPrivate \u003d useAxiosPrivate()"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"    axiosPrivate"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"      .get(`${URL_ROOM_SERVICE}/${roomId}`)"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"      .then((res) \u003d\u003e {"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"        if ("},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"          res \u0026\u0026"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"          (res.status \u003d\u003d\u003d STATUS_CODE_SUCCESS ||"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"            res.status \u003d\u003d\u003d STATUS_CODE_NOT_MODIFIED)"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"        ) {"},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"          setQuestionId(res.data.data.questionId)"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"          setRoom(res.data.data)"},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":"          setFirstQuestion(res.data.data.isFirst)"},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"        }"},{"lineNumber":49,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":50,"author":{"gitId":"MarcusTXK"},"content":"      .catch((e) \u003d\u003e {"},{"lineNumber":51,"author":{"gitId":"MarcusTXK"},"content":"        if (e.response.status \u003d\u003d\u003d STATUS_CODE_BAD_REQUEST) {"},{"lineNumber":52,"author":{"gitId":"MarcusTXK"},"content":"          // Room not found"},{"lineNumber":53,"author":{"gitId":"MarcusTXK"},"content":"          setIsValid(false)"},{"lineNumber":54,"author":{"gitId":"MarcusTXK"},"content":"        }"},{"lineNumber":55,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":56,"author":{"gitId":"MarcusTXK"},"content":"  }, [axiosPrivate, roomId])"},{"lineNumber":57,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":58,"author":{"gitId":"MarcusTXK"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":59,"author":{"gitId":"MarcusTXK"},"content":"    const newSocket \u003d io(URI_ROOM_SERVICE, {"},{"lineNumber":60,"author":{"gitId":"MarcusTXK"},"content":"      path: URI_ROOM_SERVICE_SOCKET_PATH,"},{"lineNumber":61,"author":{"gitId":"MarcusTXK"},"content":"      auth: {"},{"lineNumber":62,"author":{"gitId":"MarcusTXK"},"content":"        token: auth.accessToken,"},{"lineNumber":63,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":64,"author":{"gitId":"MarcusTXK"},"content":"    })"},{"lineNumber":65,"author":{"gitId":"MarcusTXK"},"content":"    newSocket.on(`${roomId}-${EVENT_LISTEN.ROOM_END}`, () \u003d\u003e {"},{"lineNumber":66,"author":{"gitId":"MarcusTXK"},"content":"      toast({"},{"lineNumber":67,"author":{"gitId":"MarcusTXK"},"content":"        title: \u0027Session ended!\u0027,"},{"lineNumber":68,"author":{"gitId":"MarcusTXK"},"content":"        description: \u0027Going to Home...\u0027,"},{"lineNumber":69,"author":{"gitId":"MarcusTXK"},"content":"        status: \u0027success\u0027,"},{"lineNumber":70,"author":{"gitId":"MarcusTXK"},"content":"        duration: 4000,"},{"lineNumber":71,"author":{"gitId":"MarcusTXK"},"content":"        isClosable: true,"},{"lineNumber":72,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":73,"author":{"gitId":"MarcusTXK"},"content":"      setTimeout(() \u003d\u003e {"},{"lineNumber":74,"author":{"gitId":"MarcusTXK"},"content":"        navigate(\u0027/\u0027)"},{"lineNumber":75,"author":{"gitId":"MarcusTXK"},"content":"      }, 4000)"},{"lineNumber":76,"author":{"gitId":"MarcusTXK"},"content":"    })"},{"lineNumber":77,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":78,"author":{"gitId":"MarcusTXK"},"content":"    newSocket.on(`${roomId}-${EVENT_LISTEN.ROOM_UPDATE}`, (payload) \u003d\u003e {"},{"lineNumber":79,"author":{"gitId":"MarcusTXK"},"content":"      toast({"},{"lineNumber":80,"author":{"gitId":"MarcusTXK"},"content":"        title: \u0027Updated current question\u0027,"},{"lineNumber":81,"author":{"gitId":"MarcusTXK"},"content":"        description: \u0027Fetch question success\u0027,"},{"lineNumber":82,"author":{"gitId":"MarcusTXK"},"content":"        status: \u0027success\u0027,"},{"lineNumber":83,"author":{"gitId":"MarcusTXK"},"content":"        duration: 4000,"},{"lineNumber":84,"author":{"gitId":"MarcusTXK"},"content":"        isClosable: true,"},{"lineNumber":85,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":86,"author":{"gitId":"MarcusTXK"},"content":"      setQuestionId(payload.question)"},{"lineNumber":87,"author":{"gitId":"MarcusTXK"},"content":"      setFirstQuestion(payload.isFirst)"},{"lineNumber":88,"author":{"gitId":"MarcusTXK"},"content":"    })"},{"lineNumber":89,"author":{"gitId":"MarcusTXK"},"content":"    setSocket(newSocket)"},{"lineNumber":90,"author":{"gitId":"MarcusTXK"},"content":"    return () \u003d\u003e newSocket.close()"},{"lineNumber":91,"author":{"gitId":"MarcusTXK"},"content":"  }, [auth.accessToken, navigate, roomId, toast])"},{"lineNumber":92,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":93,"author":{"gitId":"uyencfi"},"content":"  const endSession \u003d async () \u003d\u003e {"},{"lineNumber":94,"author":{"gitId":"MarcusTXK"},"content":"    await axiosPrivate"},{"lineNumber":95,"author":{"gitId":"MarcusTXK"},"content":"      .delete(`${URL_ROOM_SERVICE}/${roomId}`)"},{"lineNumber":96,"author":{"gitId":"MarcusTXK"},"content":"      .catch(console.log)"},{"lineNumber":97,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":98,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":99,"author":{"gitId":"uyencfi"},"content":"  const markCompleted \u003d async () \u003d\u003e {"},{"lineNumber":100,"author":{"gitId":"MarcusTXK"},"content":"    console.log(editor.getText())"},{"lineNumber":101,"author":{"gitId":"uyencfi"},"content":"    await axiosPrivate"},{"lineNumber":102,"author":{"gitId":"uyencfi"},"content":"      .put(`${URL_HISTORY_ROOM}/${roomId}`, {"},{"lineNumber":103,"author":{"gitId":"uyencfi"},"content":"        questionId,"},{"lineNumber":104,"author":{"gitId":"uyencfi"},"content":"        answer: editor.getText(), // accessing Firepad"},{"lineNumber":105,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":106,"author":{"gitId":"uyencfi"},"content":"      .then(() \u003d\u003e {"},{"lineNumber":107,"author":{"gitId":"uyencfi"},"content":"        toast({"},{"lineNumber":108,"author":{"gitId":"uyencfi"},"content":"          title: \u0027Marked question as completed!\u0027,"},{"lineNumber":109,"author":{"gitId":"uyencfi"},"content":"          status: \u0027success\u0027,"},{"lineNumber":110,"author":{"gitId":"uyencfi"},"content":"          duration: 3000,"},{"lineNumber":111,"author":{"gitId":"uyencfi"},"content":"          isClosable: true,"},{"lineNumber":112,"author":{"gitId":"uyencfi"},"content":"        })"},{"lineNumber":113,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":114,"author":{"gitId":"uyencfi"},"content":"      .catch((e) \u003d\u003e {"},{"lineNumber":115,"author":{"gitId":"uyencfi"},"content":"        toast({"},{"lineNumber":116,"author":{"gitId":"uyencfi"},"content":"          title: \"Couldn\u0027t mark as completed...\","},{"lineNumber":117,"author":{"gitId":"uyencfi"},"content":"          status: \u0027error\u0027,"},{"lineNumber":118,"author":{"gitId":"uyencfi"},"content":"          duration: 3000,"},{"lineNumber":119,"author":{"gitId":"uyencfi"},"content":"          isClosable: true,"},{"lineNumber":120,"author":{"gitId":"uyencfi"},"content":"        })"},{"lineNumber":121,"author":{"gitId":"uyencfi"},"content":"        return console.log(e)"},{"lineNumber":122,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":123,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":124,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":125,"author":{"gitId":"uyencfi"},"content":"  const getHelmet \u003d () \u003d\u003e {"},{"lineNumber":126,"author":{"gitId":"uyencfi"},"content":"    return ("},{"lineNumber":127,"author":{"gitId":"uyencfi"},"content":"      \u003cHelmet\u003e"},{"lineNumber":128,"author":{"gitId":"tlylt"},"content":"        \u003ctitle\u003eRoom | LeetWithFriend\u003c/title\u003e"},{"lineNumber":129,"author":{"gitId":"uyencfi"},"content":"        \u003cmeta charSet\u003d\"utf-8\" /\u003e"},{"lineNumber":130,"author":{"gitId":"tlylt"},"content":"        \u003cmeta"},{"lineNumber":131,"author":{"gitId":"tlylt"},"content":"          name\u003d\"description\""},{"lineNumber":132,"author":{"gitId":"tlylt"},"content":"          content\u003d\"An interview preparation platform and peer matching system, where students can find peers to practice whiteboard-style interview questions together.\""},{"lineNumber":133,"author":{"gitId":"tlylt"},"content":"        /\u003e"},{"lineNumber":134,"author":{"gitId":"uyencfi"},"content":"      \u003c/Helmet\u003e"},{"lineNumber":135,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":136,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":137,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":138,"author":{"gitId":"uyencfi"},"content":"  return ("},{"lineNumber":139,"author":{"gitId":"uyencfi"},"content":"    \u003c\u003e"},{"lineNumber":140,"author":{"gitId":"uyencfi"},"content":"      {getHelmet()}"},{"lineNumber":141,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":142,"author":{"gitId":"MarcusTXK"},"content":"      {!isValid || !questionId ? ("},{"lineNumber":143,"author":{"gitId":"MarcusTXK"},"content":"        \u003cmain className\u003d\"flex h-full flex-col items-center justify-start\"\u003e"},{"lineNumber":144,"author":{"gitId":"MarcusTXK"},"content":"          \u003ch1\u003e"},{"lineNumber":145,"author":{"gitId":"MarcusTXK"},"content":"            {isValid ? ("},{"lineNumber":146,"author":{"gitId":"MarcusTXK"},"content":"              \u0027Retrieving room...\u0027"},{"lineNumber":147,"author":{"gitId":"MarcusTXK"},"content":"            ) : ("},{"lineNumber":148,"author":{"gitId":"MarcusTXK"},"content":"              \u003c\u003e"},{"lineNumber":149,"author":{"gitId":"MarcusTXK"},"content":"                \u003cStack spacing\u003d{10} textAlign\u003d\"center\"\u003e"},{"lineNumber":150,"author":{"gitId":"MarcusTXK"},"content":"                  \u003cText fontSize\u003d\"2xl\"\u003eInvalid Room\u003c/Text\u003e"},{"lineNumber":151,"author":{"gitId":"MarcusTXK"},"content":"                  \u003cText\u003e"},{"lineNumber":152,"author":{"gitId":"MarcusTXK"},"content":"                    The session has ended or you are not a valid participant."},{"lineNumber":153,"author":{"gitId":"MarcusTXK"},"content":"                  \u003c/Text\u003e"},{"lineNumber":154,"author":{"gitId":"MarcusTXK"},"content":"                  \u003cButton as\u003d\"a\" href\u003d\"/\"\u003e"},{"lineNumber":155,"author":{"gitId":"MarcusTXK"},"content":"                    Return Home"},{"lineNumber":156,"author":{"gitId":"MarcusTXK"},"content":"                  \u003c/Button\u003e"},{"lineNumber":157,"author":{"gitId":"MarcusTXK"},"content":"                \u003c/Stack\u003e"},{"lineNumber":158,"author":{"gitId":"MarcusTXK"},"content":"              \u003c/\u003e"},{"lineNumber":159,"author":{"gitId":"MarcusTXK"},"content":"            )}"},{"lineNumber":160,"author":{"gitId":"MarcusTXK"},"content":"          \u003c/h1\u003e"},{"lineNumber":161,"author":{"gitId":"MarcusTXK"},"content":"        \u003c/main\u003e"},{"lineNumber":162,"author":{"gitId":"MarcusTXK"},"content":"      ) : ("},{"lineNumber":163,"author":{"gitId":"MarcusTXK"},"content":"        \u003c\u003e"},{"lineNumber":164,"author":{"gitId":"MarcusTXK"},"content":"          \u003cVideoChat"},{"lineNumber":165,"author":{"gitId":"MarcusTXK"},"content":"            userId\u003d{auth.username}"},{"lineNumber":166,"author":{"gitId":"MarcusTXK"},"content":"            otherUserId\u003d{"},{"lineNumber":167,"author":{"gitId":"MarcusTXK"},"content":"              room.userId1 \u003d\u003d\u003d auth.username ? room.userId2 : room.userId1"},{"lineNumber":168,"author":{"gitId":"MarcusTXK"},"content":"            }"},{"lineNumber":169,"author":{"gitId":"MarcusTXK"},"content":"            roomId\u003d{roomId}"},{"lineNumber":170,"author":{"gitId":"MarcusTXK"},"content":"            socket\u003d{socket}"},{"lineNumber":171,"author":{"gitId":"MarcusTXK"},"content":"          /\u003e"},{"lineNumber":172,"author":{"gitId":"uyencfi"},"content":"          \u003cdiv className\u003d\"grid h-screen grid-cols-2 gap-4\"\u003e"},{"lineNumber":173,"author":{"gitId":"MarcusTXK"},"content":"            \u003cQuestionPane"},{"lineNumber":174,"author":{"gitId":"MarcusTXK"},"content":"              questionId\u003d{questionId}"},{"lineNumber":175,"author":{"gitId":"MarcusTXK"},"content":"              roomId\u003d{roomId}"},{"lineNumber":176,"author":{"gitId":"MarcusTXK"},"content":"              isFirstQuestion\u003d{isFirstQuestion}"},{"lineNumber":177,"author":{"gitId":"MarcusTXK"},"content":"            /\u003e"},{"lineNumber":178,"author":{"gitId":"uyencfi"},"content":"            \u003cdiv className\u003d\"flex flex-col justify-start\"\u003e"},{"lineNumber":179,"author":{"gitId":"uyencfi"},"content":"              \u003cEditor roomId\u003d{roomId} setEditorComponent\u003d{setEditor} /\u003e"},{"lineNumber":180,"author":{"gitId":"uyencfi"},"content":"              \u003cdiv className\u003d\"flex flex-row items-center justify-center\"\u003e"},{"lineNumber":181,"author":{"gitId":"MarcusTXK"},"content":"                \u003cButton className\u003d\"mx-2\" onClick\u003d{markCompleted}\u003e"},{"lineNumber":182,"author":{"gitId":"MarcusTXK"},"content":"                  Mark completed"},{"lineNumber":183,"author":{"gitId":"MarcusTXK"},"content":"                \u003c/Button\u003e"},{"lineNumber":184,"author":{"gitId":"MarcusTXK"},"content":"                \u003cRoomEndDialog handleClick\u003d{endSession} /\u003e"},{"lineNumber":185,"author":{"gitId":"uyencfi"},"content":"              \u003c/div\u003e"},{"lineNumber":186,"author":{"gitId":"uyencfi"},"content":"            \u003c/div\u003e"},{"lineNumber":187,"author":{"gitId":"MarcusTXK"},"content":"          \u003c/div\u003e"},{"lineNumber":188,"author":{"gitId":"MarcusTXK"},"content":"        \u003c/\u003e"},{"lineNumber":189,"author":{"gitId":"MarcusTXK"},"content":"      )}"},{"lineNumber":190,"author":{"gitId":"uyencfi"},"content":"    \u003c/\u003e"},{"lineNumber":191,"author":{"gitId":"MarcusTXK"},"content":"  )"},{"lineNumber":192,"author":{"gitId":"MarcusTXK"},"content":"}"},{"lineNumber":193,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":194,"author":{"gitId":"MarcusTXK"},"content":"export default Room"}],"authorContributionMap":{"MarcusTXK":130,"tlylt":5,"uyencfi":59}},{"path":"frontend/src/pages/Signup.jsx","fileType":"jsx","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { faInfoCircle } from \u0027@fortawesome/free-solid-svg-icons\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { FontAwesomeIcon } from \u0027@fortawesome/react-fontawesome\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import { useEffect, useRef, useState } from \u0027react\u0027"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import axios from \u0027../api/axios\u0027"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"import { URL_USER_SERVICE, USER_REGEX, PASSWORD_REGEX } from \u0027../constants\u0027"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"import { STATUS_CODE_CONFLICT, STATUS_CODE_CREATED } from \u0027../constants\u0027"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"import { AuthLayout } from \u0027../components/AuthLayout\u0027"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"import { Button } from \u0027../components/Button\u0027"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"import { FormTextField } from \u0027../components/Fields\u0027"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"import { Link } from \u0027react-router-dom\u0027"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"import { Helmet } from \u0027react-helmet-async\u0027"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"function Signup() {"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"  const [username, setUsername] \u003d useState(\u0027\u0027)"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"  const [password, setPassword] \u003d useState(\u0027\u0027)"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"  const [repeatPassword, setRepeatPassword] \u003d useState(\u0027\u0027)"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"  const [errorMsg, setErrorMsg] \u003d useState(\u0027\u0027)"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"  const [validName, setValidName] \u003d useState(false)"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"  const [validPassword, setValidPassword] \u003d useState(false)"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"  const [validMatch, setValidMatch] \u003d useState(false)"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"  const [usernameFocus, setUsernameFocus] \u003d useState(false)"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"  const [passwordFocus, setPasswordFocus] \u003d useState(false)"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"  const [repeatPasswordFocus, setRepeatPasswordFocus] \u003d useState(false)"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"  const [success, setSuccess] \u003d useState(false)"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"  const errRef \u003d useRef()"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"  const handleSignup \u003d async () \u003d\u003e {"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"    const v1 \u003d USER_REGEX.test(username)"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"    const v2 \u003d PASSWORD_REGEX.test(password)"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"    if (!v1 || !v2) {"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"      setErrorMsg(\u0027Invalid Entry\u0027)"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"      return"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"    const res \u003d await axios"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"      .post(URL_USER_SERVICE, { username, password })"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"      .catch((err) \u003d\u003e {"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"        console.log(err.response.data.message)"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"        if (err.response.status \u003d\u003d\u003d STATUS_CODE_CONFLICT) {"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"          setErrorMsg(\u0027This username already exists\u0027)"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"        } else {"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"          setErrorMsg(\u0027Please try again later\u0027)"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"      })"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"    if (res \u0026\u0026 res.status \u003d\u003d\u003d STATUS_CODE_CREATED) {"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"      setSuccess(true)"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"      setUsername(\u0027\u0027)"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"      setPassword(\u0027\u0027)"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"      setRepeatPassword(\u0027\u0027)"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"  }"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"    setValidName(USER_REGEX.test(username))"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"  }, [username])"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"    setValidPassword(PASSWORD_REGEX.test(password))"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"    setValidMatch(password \u003d\u003d\u003d repeatPassword)"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"  }, [password, repeatPassword])"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"  useEffect(() \u003d\u003e {"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"    setErrorMsg(\u0027\u0027)"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"  }, [username, password, repeatPassword])"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"  return ("},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"    \u003c\u003e"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"      \u003cHelmet\u003e"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"        \u003ctitle\u003eSignup | LeetWithFriend\u003c/title\u003e"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"        \u003cmeta charSet\u003d\"utf-8\" /\u003e"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"        \u003cmeta"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"          name\u003d\"description\""},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"          content\u003d\"An interview preparation platform and peer matching system, where students can find peers to practice whiteboard-style interview questions together.\""},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"        /\u003e"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"      \u003c/Helmet\u003e"},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"      {success ? ("},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"        \u003cAuthLayout title\u003d\"Sign up successful!\"\u003e"},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":"          \u003cdiv className\u003d\"text-xl text-center\"\u003e"},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"            \u003cLink to\u003d\"/login\" className\u003d\"underline text-cyan-600\"\u003e"},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":"              Sign in"},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"            \u003c/Link\u003e{\u0027 \u0027}"},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":"            to your account now!"},{"lineNumber":85,"author":{"gitId":"tlylt"},"content":"          \u003c/div\u003e"},{"lineNumber":86,"author":{"gitId":"tlylt"},"content":"        \u003c/AuthLayout\u003e"},{"lineNumber":87,"author":{"gitId":"tlylt"},"content":"      ) : ("},{"lineNumber":88,"author":{"gitId":"tlylt"},"content":"        \u003c\u003e"},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"          \u003cAuthLayout"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"            title\u003d\"Sign up for an account\""},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":"            subtitle\u003d{"},{"lineNumber":92,"author":{"gitId":"tlylt"},"content":"              \u003c\u003e"},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":"                Already registered?{\u0027 \u0027}"},{"lineNumber":94,"author":{"gitId":"tlylt"},"content":"                \u003cLink to\u003d\"/login\" className\u003d\"text-cyan-600\"\u003e"},{"lineNumber":95,"author":{"gitId":"tlylt"},"content":"                  Sign in"},{"lineNumber":96,"author":{"gitId":"tlylt"},"content":"                \u003c/Link\u003e{\u0027 \u0027}"},{"lineNumber":97,"author":{"gitId":"tlylt"},"content":"                to your account."},{"lineNumber":98,"author":{"gitId":"tlylt"},"content":"              \u003c/\u003e"},{"lineNumber":99,"author":{"gitId":"tlylt"},"content":"            }"},{"lineNumber":100,"author":{"gitId":"tlylt"},"content":"          \u003e"},{"lineNumber":101,"author":{"gitId":"tlylt"},"content":"            \u003cdiv\u003e"},{"lineNumber":102,"author":{"gitId":"tlylt"},"content":"              \u003cdiv className\u003d\"grid grid-cols-2 gap-2\"\u003e"},{"lineNumber":103,"author":{"gitId":"tlylt"},"content":"                \u003cFormTextField"},{"lineNumber":104,"author":{"gitId":"tlylt"},"content":"                  label\u003d\"Username\""},{"lineNumber":105,"author":{"gitId":"tlylt"},"content":"                  id\u003d\"username\""},{"lineNumber":106,"author":{"gitId":"tlylt"},"content":"                  name\u003d\"username\""},{"lineNumber":107,"author":{"gitId":"tlylt"},"content":"                  minLength\u003d{4}"},{"lineNumber":108,"author":{"gitId":"tlylt"},"content":"                  isValid\u003d{validName}"},{"lineNumber":109,"author":{"gitId":"tlylt"},"content":"                  isFocused\u003d{usernameFocus}"},{"lineNumber":110,"author":{"gitId":"tlylt"},"content":"                  value\u003d{username}"},{"lineNumber":111,"author":{"gitId":"tlylt"},"content":"                  className\u003d\"col-span-full\""},{"lineNumber":112,"author":{"gitId":"tlylt"},"content":"                  type\u003d\"text\""},{"lineNumber":113,"author":{"gitId":"tlylt"},"content":"                  autoComplete\u003d\"off\""},{"lineNumber":114,"author":{"gitId":"tlylt"},"content":"                  required"},{"lineNumber":115,"author":{"gitId":"tlylt"},"content":"                  onChange\u003d{(e) \u003d\u003e setUsername(e.target.value)}"},{"lineNumber":116,"author":{"gitId":"tlylt"},"content":"                  autoFocus"},{"lineNumber":117,"author":{"gitId":"tlylt"},"content":"                  onFocus\u003d{() \u003d\u003e setUsernameFocus(true)}"},{"lineNumber":118,"author":{"gitId":"tlylt"},"content":"                  onBlur\u003d{() \u003d\u003e setUsernameFocus(false)}"},{"lineNumber":119,"author":{"gitId":"tlylt"},"content":"                /\u003e"},{"lineNumber":120,"author":{"gitId":"tlylt"},"content":"                \u003cdiv"},{"lineNumber":121,"author":{"gitId":"tlylt"},"content":"                  id\u003d\"uidnote\""},{"lineNumber":122,"author":{"gitId":"tlylt"},"content":"                  className\u003d{"},{"lineNumber":123,"author":{"gitId":"tlylt"},"content":"                    usernameFocus \u0026\u0026 username \u0026\u0026 !validName"},{"lineNumber":124,"author":{"gitId":"tlylt"},"content":"                      ? \u0027relative col-span-full flex items-center gap-2 bg-slate-500 px-1 text-white\u0027"},{"lineNumber":125,"author":{"gitId":"tlylt"},"content":"                      : \u0027hidden\u0027"},{"lineNumber":126,"author":{"gitId":"tlylt"},"content":"                  }"},{"lineNumber":127,"author":{"gitId":"tlylt"},"content":"                \u003e"},{"lineNumber":128,"author":{"gitId":"tlylt"},"content":"                  \u003cFontAwesomeIcon icon\u003d{faInfoCircle} /\u003e"},{"lineNumber":129,"author":{"gitId":"tlylt"},"content":"                  4 to 24 characters."},{"lineNumber":130,"author":{"gitId":"tlylt"},"content":"                  \u003cbr /\u003e"},{"lineNumber":131,"author":{"gitId":"tlylt"},"content":"                  Must begin with a letter."},{"lineNumber":132,"author":{"gitId":"tlylt"},"content":"                  \u003cbr /\u003e"},{"lineNumber":133,"author":{"gitId":"tlylt"},"content":"                  Letters, numbers, underscores, hyphens allowed."},{"lineNumber":134,"author":{"gitId":"tlylt"},"content":"                \u003c/div\u003e"},{"lineNumber":135,"author":{"gitId":"tlylt"},"content":"                \u003cFormTextField"},{"lineNumber":136,"author":{"gitId":"tlylt"},"content":"                  className\u003d\"col-span-full\""},{"lineNumber":137,"author":{"gitId":"tlylt"},"content":"                  id\u003d\"password\""},{"lineNumber":138,"author":{"gitId":"tlylt"},"content":"                  name\u003d\"password\""},{"lineNumber":139,"author":{"gitId":"tlylt"},"content":"                  type\u003d\"password\""},{"lineNumber":140,"author":{"gitId":"tlylt"},"content":"                  autoComplete\u003d\"off\""},{"lineNumber":141,"author":{"gitId":"tlylt"},"content":"                  required"},{"lineNumber":142,"author":{"gitId":"tlylt"},"content":"                  isValid\u003d{validPassword}"},{"lineNumber":143,"author":{"gitId":"tlylt"},"content":"                  isFocused\u003d{passwordFocus}"},{"lineNumber":144,"author":{"gitId":"tlylt"},"content":"                  label\u003d\"Password\""},{"lineNumber":145,"author":{"gitId":"tlylt"},"content":"                  value\u003d{password}"},{"lineNumber":146,"author":{"gitId":"tlylt"},"content":"                  onChange\u003d{(e) \u003d\u003e setPassword(e.target.value)}"},{"lineNumber":147,"author":{"gitId":"tlylt"},"content":"                  onFocus\u003d{() \u003d\u003e setPasswordFocus(true)}"},{"lineNumber":148,"author":{"gitId":"tlylt"},"content":"                  onBlur\u003d{() \u003d\u003e setPasswordFocus(false)}"},{"lineNumber":149,"author":{"gitId":"tlylt"},"content":"                /\u003e"},{"lineNumber":150,"author":{"gitId":"tlylt"},"content":"                \u003cdiv"},{"lineNumber":151,"author":{"gitId":"tlylt"},"content":"                  className\u003d{"},{"lineNumber":152,"author":{"gitId":"tlylt"},"content":"                    passwordFocus \u0026\u0026 !validPassword"},{"lineNumber":153,"author":{"gitId":"tlylt"},"content":"                      ? \u0027relative col-span-full flex items-center gap-2 bg-slate-500 px-1 text-white\u0027"},{"lineNumber":154,"author":{"gitId":"tlylt"},"content":"                      : \u0027hidden\u0027"},{"lineNumber":155,"author":{"gitId":"tlylt"},"content":"                  }"},{"lineNumber":156,"author":{"gitId":"tlylt"},"content":"                \u003e"},{"lineNumber":157,"author":{"gitId":"tlylt"},"content":"                  \u003cFontAwesomeIcon icon\u003d{faInfoCircle} /\u003e"},{"lineNumber":158,"author":{"gitId":"tlylt"},"content":"                  \u003cdiv\u003e"},{"lineNumber":159,"author":{"gitId":"tlylt"},"content":"                    8 to 24 characters."},{"lineNumber":160,"author":{"gitId":"tlylt"},"content":"                    \u003cbr /\u003e"},{"lineNumber":161,"author":{"gitId":"tlylt"},"content":"                    Must include uppercase and lowercase letters, a number and a"},{"lineNumber":162,"author":{"gitId":"tlylt"},"content":"                    special character."},{"lineNumber":163,"author":{"gitId":"tlylt"},"content":"                    \u003cbr /\u003e"},{"lineNumber":164,"author":{"gitId":"tlylt"},"content":"                    Allowed special characters:{\u0027 \u0027}"},{"lineNumber":165,"author":{"gitId":"tlylt"},"content":"                    \u003cspan aria-label\u003d\"exclamation mark\"\u003e!\u003c/span\u003e"},{"lineNumber":166,"author":{"gitId":"tlylt"},"content":"                    \u003cspan aria-label\u003d\"at symbol\"\u003e@\u003c/span\u003e{\u0027 \u0027}"},{"lineNumber":167,"author":{"gitId":"tlylt"},"content":"                    \u003cspan aria-label\u003d\"hashtag\"\u003e#\u003c/span\u003e{\u0027 \u0027}"},{"lineNumber":168,"author":{"gitId":"tlylt"},"content":"                    \u003cspan aria-label\u003d\"dollar sign\"\u003e$\u003c/span\u003e{\u0027 \u0027}"},{"lineNumber":169,"author":{"gitId":"tlylt"},"content":"                    \u003cspan aria-label\u003d\"percent\"\u003e%\u003c/span\u003e"},{"lineNumber":170,"author":{"gitId":"tlylt"},"content":"                  \u003c/div\u003e"},{"lineNumber":171,"author":{"gitId":"tlylt"},"content":"                \u003c/div\u003e"},{"lineNumber":172,"author":{"gitId":"tlylt"},"content":"                \u003cFormTextField"},{"lineNumber":173,"author":{"gitId":"tlylt"},"content":"                  label\u003d\"Confirm Password\""},{"lineNumber":174,"author":{"gitId":"tlylt"},"content":"                  type\u003d\"password\""},{"lineNumber":175,"author":{"gitId":"tlylt"},"content":"                  required"},{"lineNumber":176,"author":{"gitId":"tlylt"},"content":"                  className\u003d\"col-span-2\""},{"lineNumber":177,"author":{"gitId":"tlylt"},"content":"                  isValid\u003d{validMatch}"},{"lineNumber":178,"author":{"gitId":"tlylt"},"content":"                  isFocused\u003d{repeatPasswordFocus}"},{"lineNumber":179,"author":{"gitId":"tlylt"},"content":"                  value\u003d{repeatPassword}"},{"lineNumber":180,"author":{"gitId":"tlylt"},"content":"                  onChange\u003d{(e) \u003d\u003e setRepeatPassword(e.target.value)}"},{"lineNumber":181,"author":{"gitId":"tlylt"},"content":"                  onFocus\u003d{() \u003d\u003e setRepeatPasswordFocus(true)}"},{"lineNumber":182,"author":{"gitId":"tlylt"},"content":"                  onBlur\u003d{() \u003d\u003e setRepeatPasswordFocus(false)}"},{"lineNumber":183,"author":{"gitId":"tlylt"},"content":"                /\u003e"},{"lineNumber":184,"author":{"gitId":"tlylt"},"content":"                \u003cdiv"},{"lineNumber":185,"author":{"gitId":"tlylt"},"content":"                  className\u003d{"},{"lineNumber":186,"author":{"gitId":"tlylt"},"content":"                    repeatPasswordFocus \u0026\u0026 !validMatch"},{"lineNumber":187,"author":{"gitId":"tlylt"},"content":"                      ? \u0027relative col-span-full flex items-center gap-2 bg-slate-500 px-1 text-white\u0027"},{"lineNumber":188,"author":{"gitId":"tlylt"},"content":"                      : \u0027hidden\u0027"},{"lineNumber":189,"author":{"gitId":"tlylt"},"content":"                  }"},{"lineNumber":190,"author":{"gitId":"tlylt"},"content":"                \u003e"},{"lineNumber":191,"author":{"gitId":"tlylt"},"content":"                  \u003cFontAwesomeIcon icon\u003d{faInfoCircle} /\u003e"},{"lineNumber":192,"author":{"gitId":"tlylt"},"content":"                  Must match the password input field."},{"lineNumber":193,"author":{"gitId":"tlylt"},"content":"                \u003c/div\u003e"},{"lineNumber":194,"author":{"gitId":"tlylt"},"content":"              \u003c/div\u003e"},{"lineNumber":195,"author":{"gitId":"tlylt"},"content":"              \u003cButton"},{"lineNumber":196,"author":{"gitId":"tlylt"},"content":"                className\u003d\"w-full mt-8\""},{"lineNumber":197,"author":{"gitId":"tlylt"},"content":"                color\u003d{`${"},{"lineNumber":198,"author":{"gitId":"tlylt"},"content":"                  !validName || !validPassword || !validMatch ? \u0027gray\u0027 : \u0027cyan\u0027"},{"lineNumber":199,"author":{"gitId":"tlylt"},"content":"                }`}"},{"lineNumber":200,"author":{"gitId":"tlylt"},"content":"                onClick\u003d{handleSignup}"},{"lineNumber":201,"author":{"gitId":"tlylt"},"content":"                disabled\u003d{"},{"lineNumber":202,"author":{"gitId":"tlylt"},"content":"                  !validName || !validPassword || !validMatch ? true : false"},{"lineNumber":203,"author":{"gitId":"tlylt"},"content":"                }"},{"lineNumber":204,"author":{"gitId":"tlylt"},"content":"              \u003e"},{"lineNumber":205,"author":{"gitId":"tlylt"},"content":"                Let\u0027s Go"},{"lineNumber":206,"author":{"gitId":"tlylt"},"content":"              \u003c/Button\u003e"},{"lineNumber":207,"author":{"gitId":"tlylt"},"content":"              \u003cp"},{"lineNumber":208,"author":{"gitId":"tlylt"},"content":"                ref\u003d{errRef}"},{"lineNumber":209,"author":{"gitId":"tlylt"},"content":"                className\u003d{`mt-2 text-center ${"},{"lineNumber":210,"author":{"gitId":"tlylt"},"content":"                  errorMsg ? \u0027errormsg\u0027 : \u0027offscreen\u0027"},{"lineNumber":211,"author":{"gitId":"tlylt"},"content":"                }`}"},{"lineNumber":212,"author":{"gitId":"tlylt"},"content":"                aria-live\u003d\"assertive\""},{"lineNumber":213,"author":{"gitId":"tlylt"},"content":"              \u003e"},{"lineNumber":214,"author":{"gitId":"tlylt"},"content":"                {errorMsg}"},{"lineNumber":215,"author":{"gitId":"tlylt"},"content":"              \u003c/p\u003e"},{"lineNumber":216,"author":{"gitId":"tlylt"},"content":"            \u003c/div\u003e"},{"lineNumber":217,"author":{"gitId":"tlylt"},"content":"          \u003c/AuthLayout\u003e"},{"lineNumber":218,"author":{"gitId":"tlylt"},"content":"        \u003c/\u003e"},{"lineNumber":219,"author":{"gitId":"tlylt"},"content":"      )}"},{"lineNumber":220,"author":{"gitId":"tlylt"},"content":"    \u003c/\u003e"},{"lineNumber":221,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":222,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":223,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":224,"author":{"gitId":"tlylt"},"content":"export default Signup"}],"authorContributionMap":{"tlylt":224}},{"path":"frontend/src/pages/UserTokenTest.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { useEffect } from \"react\";"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import useAxiosPrivate from \"../hooks/useAxiosPrivate\";"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import { useNavigate, useLocation } from \"react-router-dom\";"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import { URL_USER_TOKEN_TEST } from \"../constants\";"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"import useAuth from \"../hooks/useAuth\";"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"const Users \u003d () \u003d\u003e {"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    const { auth } \u003d useAuth()"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    const axiosPrivate \u003d useAxiosPrivate();"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    const navigate \u003d useNavigate();"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    const location \u003d useLocation();"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    useEffect(() \u003d\u003e {"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"        const testToken \u003d async () \u003d\u003e {"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"            try {"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"                const response \u003d await axiosPrivate.post(URL_USER_TOKEN_TEST);"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"                console.log(response.data);"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"            } catch (err) {"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"                console.error(err);"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"                navigate(\u0027/login\u0027, { state: { from: location }, replace: true });"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"            }"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"        testToken();"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"    }, [axiosPrivate, navigate, location]);"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"    return ("},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"        \u003carticle\u003e"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"            \u003ch2\u003eUser Token Test\u003c/h2\u003e"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"            {auth.username?.length"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"                ? ("},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"                    \u003cul\u003e"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"                        \u003cp\u003e{auth?.username}\u003c/p\u003e"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"                    \u003c/ul\u003e"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"                ) : \u003cp\u003eUser not ready\u003c/p\u003e"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"            }"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"        \u003c/article\u003e"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"    );"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"};"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"export default Users;"}],"authorContributionMap":{"tlylt":42}},{"path":"frontend/src/prettier.config.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"module.exports \u003d {"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"  singleQuote: true,"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"  semi: false,"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  plugins: [require(\u0027prettier-plugin-tailwindcss\u0027)],"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":5}},{"path":"frontend/src/styles/tailwind.css","fileType":"css","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"@tailwind base;"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"@tailwind components;"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"@tailwind utilities;"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"#__next {"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    min-height: 100%;"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":7}},{"path":"frontend/src/theme.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"// theme.js"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"// 1. import `extendTheme` function"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import { extendTheme } from \u0027@chakra-ui/react\u0027"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"// 2. Add your color mode config"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"const config \u003d {"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    initialColorMode: \u0027system\u0027,"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"// 3. extend the theme"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"const theme \u003d extendTheme({ config })"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"export default theme"}],"authorContributionMap":{"tlylt":14}},{"path":"frontend/src/utils/index.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { RANDOM_AVATAR_URL } from \"../constants\";"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"export function getUserProfileUrl(username) {"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"    return `${RANDOM_AVATAR_URL}${username}.svg`"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":5}},{"path":"frontend/tailwind.config.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"const defaultTheme \u003d require(\u0027tailwindcss/defaultTheme\u0027)"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"/** @type {import(\u0027tailwindcss\u0027).Config} */"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"module.exports \u003d {"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  content: [\u0027./src/**/*.{js,jsx}\u0027],"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  darkMode: [\u0027class\u0027, \u0027[data-theme\u003d\"dark\"]\u0027],"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  theme: {"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    fontSize: {"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"      xs: [\u00270.75rem\u0027, { lineHeight: \u00271rem\u0027 }],"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"      sm: [\u00270.875rem\u0027, { lineHeight: \u00271.5rem\u0027 }],"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"      base: [\u00271rem\u0027, { lineHeight: \u00271.5rem\u0027 }],"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      lg: [\u00271.125rem\u0027, { lineHeight: \u00272rem\u0027 }],"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"      xl: [\u00271.25rem\u0027, { lineHeight: \u00271.75rem\u0027 }],"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"      \u00272xl\u0027: [\u00271.5rem\u0027, { lineHeight: \u00272rem\u0027 }],"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"      \u00273xl\u0027: [\u00272rem\u0027, { lineHeight: \u00273rem\u0027 }],"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"      \u00274xl\u0027: [\u00272.5rem\u0027, { lineHeight: \u00273rem\u0027 }],"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"      \u00275xl\u0027: [\u00273rem\u0027, { lineHeight: \u00271\u0027 }],"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"      \u00276xl\u0027: [\u00273.75rem\u0027, { lineHeight: \u00271\u0027 }],"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"      \u00277xl\u0027: [\u00274.5rem\u0027, { lineHeight: \u00271\u0027 }],"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"      \u00278xl\u0027: [\u00276rem\u0027, { lineHeight: \u00271\u0027 }],"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"      \u00279xl\u0027: [\u00278rem\u0027, { lineHeight: \u00271\u0027 }],"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"    extend: {"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"      animation: {"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"        \u0027fade-in\u0027: \u0027fade-in 0.5s linear forwards\u0027,"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"        marquee: \u0027marquee var(--marquee-duration) linear infinite\u0027,"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"        \u0027spin-slow\u0027: \u0027spin 4s linear infinite\u0027,"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"        \u0027spin-slower\u0027: \u0027spin 6s linear infinite\u0027,"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"        \u0027spin-reverse\u0027: \u0027spin-reverse 1s linear infinite\u0027,"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"        \u0027spin-reverse-slow\u0027: \u0027spin-reverse 4s linear infinite\u0027,"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"        \u0027spin-reverse-slower\u0027: \u0027spin-reverse 6s linear infinite\u0027,"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"      },"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"      borderRadius: {"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"        \u00274xl\u0027: \u00272rem\u0027,"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"        \u00275xl\u0027: \u00272.5rem\u0027,"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"      },"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"      colors: ({ colors }) \u003d\u003e ({"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"        gray: colors.neutral,"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"      }),"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"      fontFamily: {"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"        sans: [\u0027Inter\u0027, ...defaultTheme.fontFamily.sans],"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"      },"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"      height: {"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":"        \u002785v\u0027: \u002785vh\u0027,"},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"      keyframes: {"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"        \u0027fade-in\u0027: {"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"          from: {"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"            opacity: 0,"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"          },"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"          to: {"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"            opacity: 1,"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"          },"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"        },"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"        marquee: {"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"          \u0027100%\u0027: {"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"            transform: \u0027translateY(-50%)\u0027,"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"          },"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"        },"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"        \u0027spin-reverse\u0027: {"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"          to: {"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"            transform: \u0027rotate(-360deg)\u0027,"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"          },"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"        },"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"      },"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"      maxWidth: {"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"        \u00272xl\u0027: \u002740rem\u0027,"},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"      },"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"  },"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"  plugins: [require(\u0027@tailwindcss/forms\u0027)],"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":69,"uyencfi":3}},{"path":"history-service/.dockerignore","fileType":"dockerignore","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"node_modules"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"npm-debug.log"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":".env"}],"authorContributionMap":{"uyencfi":4}},{"path":"history-service/.env.example","fileType":"example","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"ENV\u003dDEV"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"DB_URI_PROD\u003d"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"DB_LOCAL_URI\u003d"}],"authorContributionMap":{"tlylt":1,"uyencfi":2}},{"path":"history-service/.eslintignore","fileType":"eslintignore","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"node_modules/*"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"package-lock.json"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"build"}],"authorContributionMap":{"uyencfi":3}},{"path":"history-service/.gitignore","fileType":"gitignore","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"# See https://help.github.com/articles/ignoring-files/ for more about ignoring files."},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"# dependencies"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"/node_modules"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"/.pnp"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":".pnp.js"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"# testing"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"/coverage"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"# misc"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":".DS_Store"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"*.pem"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"# debug"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"npm-debug.log*"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"yarn-debug.log*"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"yarn-error.log*"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"# local env files"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":".env.local"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":".env.development.local"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":".env.test.local"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":".env.production.local"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":".env"}],"authorContributionMap":{"uyencfi":25}},{"path":"history-service/Dockerfile","fileType":"Dockerfile","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"FROM node:14.17.0"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"# Create the working directory"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"WORKDIR /app"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"# Install dependencies"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"COPY package*.json ./"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"RUN npm ci --quiet"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"# Copy source files"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"COPY . ."},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"EXPOSE 8080"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"# Run the app"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"CMD [\"npm\", \"start\"]"}],"authorContributionMap":{"tlylt":1,"uyencfi":15}},{"path":"history-service/README.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"# History service"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"For recording a user\u0027s matching history and the questions completed in each match."},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"## Usage and Local development"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"1. Install Node 14 and above"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"2. Rename file `.env.example` to `.env`. The default environment is `DEV`, but you can also change to `PROD`. Provide the mongoDB URI for the variable `DB_LOCAL_URI` or `DB_URI_PROD` accordingly."},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"    * For example, `DB_LOCAL_URI\u003dmongodb://localhost:27017/leetwithfriend` and make sure mongoDB is running on localhost port 27017"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"    * Or, `DB_URI_PROD\u003d\u003cmongoDB Atlas cluster URI\u003e`"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"3. Install dependencies with `npm install`."},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"4. Run with `npm run dev`."},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"## Run with Docker"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"- Via docker-compose: `docker-compose up --build`"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"- Via docker"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"Provide your mongoDB URI in the docker run command. This **must** be a cloud URI (e.g. Atlas cluster). Recommended to encase the URL within quotes like `\u0027your_URI\u0027` to avoid any parsing error in the shell."},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"```bash"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"docker build -t history-service ."},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"docker run -d -p 8080:8080 -e DB_LOCAL_URI\u003d{your_URI} history-service"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"```"}],"authorContributionMap":{"uyencfi":20}},{"path":"history-service/constants/const.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"const questionServiceFallback \u003d"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"  process.env.ENV \u003d\u003d\u003d \u0027production\u0027 // production means using Docker"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"    ? `http://${process.env.QUESTION_SERVICE_HOST}:8500`"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"    : \u0027http://localhost:8500\u0027"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"const URI_QUESTION_SERVICE \u003d"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"  process.env.URI_QUESTION_SERVICE || questionServiceFallback"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"const PREFIX_QUESTION_SERVICE \u003d \u0027/api/v1/question\u0027"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"export const URL_QUESTION_SERVICE_QUESTION_NAMES \u003d"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"  URI_QUESTION_SERVICE + PREFIX_QUESTION_SERVICE + \u0027/questionNames\u0027"}],"authorContributionMap":{"uyencfi":12}},{"path":"history-service/docker-compose.test.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"version: \"3.9\""},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"services:"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"  web:"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"    build: "},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"      context: ."},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"      dockerfile: Dockerfile"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"    container_name: history-test-web"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"    ports:"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"      - \"8080:8080\""},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"    links:"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"      - mongo"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"    environment:"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"      - ENV\u003dTEST"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"      - DB_LOCAL_URI\u003dmongodb://mongo:27017/historyTest"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"    command: npm run test"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"  "},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"  mongo:"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"    image: mongo"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"    container_name: history-test-mongo"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"    ports:"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"      - \"27017:27017\""},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"    command: mongod --quiet --logpath /dev/null"}],"authorContributionMap":{"uyencfi":23}},{"path":"history-service/docker-compose.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"version: \"3.9\""},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"services:"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"  web:"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"    build: "},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"      context: ."},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"      dockerfile: Dockerfile"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"    ports:"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"      - \"8080:8080\""},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"    links:"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"      - mongo"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"    env_file:"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"      - .env"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"  mongo:"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"    image: mongo"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"    ports:"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"      - \"27017:27017\""}],"authorContributionMap":{"uyencfi":17}},{"path":"history-service/handler/handler.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import HistoryService from \u0027../service/service.js\u0027"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"export async function getHistory(req, res) {"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"  try {"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"    const { uid } \u003d req.params"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"    if (!uid) {"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"      return res.status(400).json({ message: \u0027user ID is missing\u0027 })"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"    const resp \u003d await HistoryService.getUserHistory(uid)"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"    if (resp.err) {"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"      const msg \u003d `Could not get history for user ${uid}`"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"      console.log(`${msg}: ${resp.err}`)"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"      return res.status(400).json({ message: msg })"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"    return res.status(200).json({"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"      message: \u0027Get history successfully\u0027,"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"      data: resp,"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"    })"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"  } catch (err) {"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"    console.log(err)"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"    return res.status(500).json({ message: err.message })"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"export async function createHistory(req, res) {"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"  try {"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"    const { roomId, u1, u2 } \u003d req.body"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"    if (!roomId) {"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"      return res.status(400).json({ message: \u0027roomId is missing\u0027 })"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"    } else if (!u1 || !u2) {"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"      return res.status(400).json({ message: \u0027u1 or u2 missing, must provide usernames\u0027 })"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"    const resp \u003d await HistoryService.createRoomHistory(roomId, u1, u2)"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"    if (resp?.err) {"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"      const msg \u003d `Could not create room history for roomId ${roomId}`"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"      console.log(`${msg}: ${resp.err}`)"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"      return res.status(400).json({ message: msg })"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"    return res.status(201).json({ message: \u0027Created room history\u0027 })"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"  } catch (err) {"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"    console.log(err)"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"    return res.status(500).json({ message: err.message })"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"export async function updateHistory(req, res) {"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"  try {"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"    const { roomId } \u003d req.params"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"    const { questionId, answer } \u003d req.body"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"    if (!roomId) {"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"      return res.status(400).json({ message: \u0027roomId is missing\u0027 })"},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"    if (!questionId) {"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"      return res.status(400).json({ message: \u0027questionId is missing\u0027 })"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"    const resp \u003d await HistoryService.updateRoomHistory(roomId, questionId, answer)"},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"    if (resp?.err) {"},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":"      const msg \u003d `Could not update history for room ${roomId}`"},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"      console.log(`${msg}: ${resp.err}`)"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"      return res.status(400).json({ message: msg })"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"    return res.status(200).json({ message: \u0027Update history successfully\u0027 })"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"  } catch (err) {"},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":"    console.log(err)"},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"    return res.status(500).json({ message: err.message })"},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":"export async function deleteHistory(req, res) {"},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":"  try {"},{"lineNumber":71,"author":{"gitId":"uyencfi"},"content":"    const { roomId } \u003d req.body"},{"lineNumber":72,"author":{"gitId":"uyencfi"},"content":"    if (!roomId) {"},{"lineNumber":73,"author":{"gitId":"uyencfi"},"content":"      return res.status(400).json({ message: \u0027roomId is missing\u0027 })"},{"lineNumber":74,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":75,"author":{"gitId":"uyencfi"},"content":"    const resp \u003d await HistoryService.deleteRoomHistory(roomId)"},{"lineNumber":76,"author":{"gitId":"uyencfi"},"content":"    if (resp?.err) {"},{"lineNumber":77,"author":{"gitId":"uyencfi"},"content":"      const msg \u003d `Could not delete room ${roomId}`"},{"lineNumber":78,"author":{"gitId":"uyencfi"},"content":"      console.log(`${msg}: ${resp.err}`)"},{"lineNumber":79,"author":{"gitId":"uyencfi"},"content":"      return res.status(400).json({ message: msg })"},{"lineNumber":80,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":81,"author":{"gitId":"uyencfi"},"content":"    return res.status(200).json({ message: \u0027Deleted all history for room\u0027 })"},{"lineNumber":82,"author":{"gitId":"uyencfi"},"content":"  } catch (err) {"},{"lineNumber":83,"author":{"gitId":"uyencfi"},"content":"    console.log(err)"},{"lineNumber":84,"author":{"gitId":"uyencfi"},"content":"    return res.status(500).json({ message: err.message })"},{"lineNumber":85,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":86,"author":{"gitId":"uyencfi"},"content":"}"}],"authorContributionMap":{"uyencfi":86}},{"path":"history-service/index.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import express from \u0027express\u0027"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"import cors from \u0027cors\u0027"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"import { getHistory, createHistory, deleteHistory, updateHistory } from \u0027./handler/handler.js\u0027"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"import \u0027dotenv/config\u0027"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"const app \u003d express()"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"app.use(express.urlencoded({ extended: true }))"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"app.use(express.json())"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"if (process.env.ENV \u003d\u003d\u003d \"production\") {"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"  app.use(cors())"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"  app.options(\u0027*\u0027, cors())"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"} else {"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"  app.use("},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    cors({"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"      origin: `http://localhost:${process.env.PORT || 3000}`,"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"      credentials: true,"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    })"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"  )"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"const router \u003d express.Router()"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"router.get(\u0027/user/:uid\u0027, getHistory)"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"router.post(\u0027/room/\u0027, createHistory)"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"router.put(\u0027/room/:roomId\u0027, updateHistory)"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"// Delete room (for test only)"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"router.delete(\u0027/room/testDelete\u0027, deleteHistory)"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"const URL_PREFIX \u003d \u0027/api/v1/history\u0027"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"app.use(URL_PREFIX, router).all((_, res) \u003d\u003e {"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"  res.setHeader(\u0027content-type\u0027, \u0027application/json\u0027)"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"  res.setHeader(\u0027Access-Control-Allow-Origin\u0027, \u0027*\u0027)"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"})"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"// Test server alive"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"app.get(\u0027/\u0027, (_, res) \u003d\u003e {"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"  res.send(\u0027Hello World from history-service\u0027)"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"})"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"app.listen(8080, () \u003d\u003e console.log(\u0027history-service listening on port 8080\u0027))"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"export { app }"}],"authorContributionMap":{"tlylt":11,"uyencfi":31}},{"path":"history-service/model/history.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import mongoose from \u0027mongoose\u0027"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"var Schema \u003d mongoose.Schema"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"const CompletedQuestionSchema \u003d new Schema({"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"  id: {"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"    type: String,"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"    immutable: true,"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"  },"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"  answer: {"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"    type: String,"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"    immutable: true,"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"  },"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"  completedAt: {"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"    type: Date,"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"    immutable: true,"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"    default: () \u003d\u003e Date.now(),"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"  },"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"})"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"const HistoryModelSchema \u003d new Schema("},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"  {"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"    roomId: {"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"      type: String,"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"      unique: true,"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"      immutable: true,"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"    },"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"    u1: {"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"      type: String,"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"      immutable: true,"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"    },"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"    u2: {"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"      type: String,"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"      immutable: true,"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"    },"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"    // Array of nested sub-documents "},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"    completed: [CompletedQuestionSchema],"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"  },"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"  // Schema options to enable createdAt and updatedAt timestamps"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"  {"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"    timestamps: true,"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":")"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"export default mongoose.model(\u0027History\u0027, HistoryModelSchema)"}],"authorContributionMap":{"uyencfi":45}},{"path":"history-service/repository/repository.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import mongoose from \u0027mongoose\u0027"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"import HistoryModel from \u0027../model/history.js\u0027"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"import { MongoServerError } from \u0027mongodb\u0027"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"import \u0027dotenv/config\u0027"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"const uri \u003d"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"  process.env.ENV \u003d\u003d \u0027PROD\u0027"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"    ? process.env.DB_URI_PROD"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    : process.env.DB_LOCAL_URI"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"mongoose.connect(uri, { useNewUrlParser: true, useUnifiedTopology: true })"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"const db \u003d mongoose.connection"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"db.on(\u0027error\u0027, () \u003d\u003e console.error(\u0027MongoDB connection error\u0027))"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"db.on(\u0027connected\u0027, () \u003d\u003e console.info(\u0027Connected to MongoDB\u0027))"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"const HistoryRepository \u003d {"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"  /** Returns an array of rooms the user has been in. */"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"  getByUid: function (uid) {"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"    return HistoryModel.find({ $or: [{ u1: uid }, { u2: uid }] })"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"  },"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"  /** Creates a new room for History service. Returns an error if roomId already exists. */"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"  create: async function (roomId, u1, u2) {"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"    try {"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"      await HistoryModel.create({ roomId, u1, u2 })"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"    } catch (err) {"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"      // Check for duplicate roomId"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"      if (err instanceof MongoServerError \u0026\u0026 err.code \u003d\u003d\u003d 11000) {"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"        return { err: \u0027roomId already exists\u0027 }"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"  },"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"  /** Adds a completed question and its answer to the room history. Returns an error if roomId does not exist. */"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"  add: async function (roomId, questionId, answer) {"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"    const doc \u003d await HistoryModel.findOneAndUpdate("},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"      { roomId: roomId },"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"      {"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"        $push: {"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"          \u0027completed\u0027: { id: questionId, answer: answer },"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"      },"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"      { new: true }"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"    )"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"    if (!doc) {"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":"      return { err: \u0027roomId does not exist\u0027 }"},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"  },"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"  /** Deletes all history of room if exists. */"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"  delete: function (roomId) {"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"    return HistoryModel.deleteOne({ roomId: roomId })"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"export default HistoryRepository"}],"authorContributionMap":{"tlylt":1,"uyencfi":52}},{"path":"history-service/requests.rest","fileType":"rest","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"### TEST SERVER ALIVE"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"GET http://localhost:8080/"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"### CREATE ROOM HISTORY"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"### expect: Success if roomId is not missing"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"POST http://localhost:8080/api/v1/history/room"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"Content-Type: application/json"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"{"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"    \"roomId\": \"room1\","},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"    \"u1\": \"qwe\","},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"    \"u2\": \"asd\""},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"### CREATE ANOTHER ROOM"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"POST http://localhost:8080/api/v1/history/room"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"Content-Type: application/json"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"{"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"    \"roomId\": \"room2\","},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"    \"u1\": \"qwe\","},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"    \"u2\": \"zxc\""},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"### GET HISTORY OF USER qwe"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"### expect: array of qwe\u0027s rooms"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"GET http://localhost:8080/api/v1/history/user/qwe"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"### GET HISTORY OF USER asd"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"GET http://localhost:8080/api/v1/history/user/asd"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"### GET HISTORY OF USER zxc"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"GET http://localhost:8080/api/v1/history/user/zxc"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"### UPDATE ROOM HISTORY room1 (ADD COMPLETED QUESTIONS)"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"PUT http://localhost:8080/api/v1/history/room/room1"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"Content-Type: application/json"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"{"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"    \"questionId\": \"two sum\","},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"    \"answer\": \"test\""},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"### UPDATE ROOM HISTORY room2"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"PUT http://localhost:8080/api/v1/history/room/room2"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"Content-Type: application/json"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"{"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"    \"questionId\": \"Shortest path\","},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"    \"answer\": \"from queue import PriorityQueue\\n\\nclass Graph:\\n    def __init__(self, num_of_vertices):\\n        self.v \u003d num_of_vertices\\n        self.edges \u003d [[-1 for i in range(num_of_vertices)] for j in range(num_of_vertices)]\\n        self.visited \u003d []\\n\\n    def add_edge(self, u, v, weight):\\n        self.edges[u][v] \u003d weight\\n        self.edges[v][u] \u003d weight\\n\\n# Dijkstra\u0027s algorithm for SSSP\\ndef dijkstra(graph, start_vertex):\\n    D \u003d {v:float(\u0027inf\u0027) for v in range(graph.v)}\\n    D[start_vertex] \u003d 0\\n\\n    pq \u003d PriorityQueue()\\n    pq.put((0, start_vertex))\\n\\n    while not pq.empty():\\n        (dist, current_vertex) \u003d pq.get()\\n        graph.visited.append(current_vertex)\\n\\n        for neighbor in range(graph.v):\\n            if graph.edges[current_vertex][neighbor] !\u003d -1:\\n                distance \u003d graph.edges[current_vertex][neighbor]\\n                if neighbor not in graph.visited:\\n                    old_cost \u003d D[neighbor]\\n                    new_cost \u003d D[current_vertex] + distance\\n                    if new_cost \u003c old_cost:\\n                        pq.put((new_cost, neighbor))\\n                        D[neighbor] \u003d new_cost\\n    return D\\n\""},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"### UPDATE ROOM HISTORY room3"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":"### expect: 400 roomId not exist (room3 has not been created)"},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"PUT http://localhost:8080/api/v1/history/room/room3"},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"Content-Type: application/json"},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"{"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"    \"questionId\": \"palindrome\","},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"    \"answer\": \"nil\""},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":""}],"authorContributionMap":{"uyencfi":63}},{"path":"history-service/service/service.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import HistoryRepository from \u0027../repository/repository.js\u0027"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"import { URL_QUESTION_SERVICE_QUESTION_NAMES } from \u0027../constants/const.js\u0027"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"import axios from \u0027axios\u0027"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"const HistoryService \u003d {"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"  /** Returns an array of questions the user has completed, including questions from any current room. */"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"  getUserHistory: async function (uid) {"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"    const resp \u003d await HistoryRepository.getByUid(uid).lean() // an array of rooms"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"    if (resp.length \u003d\u003d\u003d 0) {"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"      return []"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"    const questions \u003d flattenHist(uid, resp)"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"    const params \u003d getIdParams(questions)"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"    const res \u003d await axios"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"      .get(URL_QUESTION_SERVICE_QUESTION_NAMES, { params: params })"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":"      .catch(console.log)"},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"    // insert question name into the response"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"    questions.forEach((q) \u003d\u003e q.name \u003d res.data.data[q.id])"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"    questions.sort((x, y) \u003d\u003e new Date(y.completedAt) - new Date(x.completedAt))"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"    return questions"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"  },"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"  /** Creates a new room for History purposes. To be called when the room is created by Matching service. */"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"  createRoomHistory: async function (roomId, u1, u2) {"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"    return HistoryRepository.create(roomId, u1, u2)"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"  },"},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"  /** Adds a completed question to this room. Also records the final answer when the question was completed. */"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"  updateRoomHistory: async function (roomId, questionId, answer) {"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"    if (!answer) {"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"      answer \u003d \u0027\u0027"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"    return HistoryRepository.add(roomId, questionId, answer)"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"  },"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"  /** Deletes the entire history of room. For used in tests only. */"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"  deleteRoomHistory: async function (roomId) {"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"    return HistoryRepository.delete(roomId)"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"  }"},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"/**"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":" * Data is a list of room documents; within each room is a list of question documents."},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":" * We flatten it into a list of question objects, where each question consists of a partner,"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":" * question details, and a key property for React child."},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":" */"},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"function flattenHist(uid, data) {"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"  return data.flatMap((room) \u003d\u003e {"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"    const partner \u003d room.u1 \u003d\u003d\u003d uid ? room.u2 : room.u1"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"    function transformer(question) {"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":"      return {"},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"        partner,"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"        roomId: room.roomId,"},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"        ...question,"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"      }"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":"    return room.completed.map(transformer)"},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"  })"},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"/** Constructs a query param string consisting of the question IDs. */"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"function getIdParams(questions) {"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"  const ids \u003d new Set(questions.map((q) \u003d\u003e {"},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"    return q.id"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"  }))"},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":"  const params \u003d new URLSearchParams()"},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"  ids.forEach((id) \u003d\u003e params.append(\u0027id\u0027, id))"},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"  return params"},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":"}"},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":"export default HistoryService"}],"authorContributionMap":{"uyencfi":69}},{"path":"history-service/test/index.test.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"uyencfi"},"content":"import request from \u0027supertest\u0027"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"import { expect } from \u0027chai\u0027"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"import { app } from \u0027../index.js\u0027"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":"import axios from \u0027axios\u0027"},{"lineNumber":5,"author":{"gitId":"uyencfi"},"content":"import MockAdapter from \u0027axios-mock-adapter\u0027"},{"lineNumber":6,"author":{"gitId":"uyencfi"},"content":"import { URL_QUESTION_SERVICE_QUESTION_NAMES } from \u0027../constants/const.js\u0027"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"const URI_PREFIX \u003d \u0027/api/v1/history\u0027"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"describe(\u0027Get service status\u0027, function () {"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"  it(\u0027responds server alive\u0027, function (done) {"},{"lineNumber":12,"author":{"gitId":"uyencfi"},"content":"    request(app)"},{"lineNumber":13,"author":{"gitId":"uyencfi"},"content":"      .get(\u0027/\u0027)"},{"lineNumber":14,"author":{"gitId":"uyencfi"},"content":"      .expect(200, \u0027Hello World from history-service\u0027, done)"},{"lineNumber":15,"author":{"gitId":"uyencfi"},"content":"  })"},{"lineNumber":16,"author":{"gitId":"uyencfi"},"content":"})"},{"lineNumber":17,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":18,"author":{"gitId":"uyencfi"},"content":"describe(\u0027POST /room (create room history)\u0027, function () {"},{"lineNumber":19,"author":{"gitId":"uyencfi"},"content":"  it(\u0027creates room successfully\u0027, async function () {"},{"lineNumber":20,"author":{"gitId":"uyencfi"},"content":"    // Delete existing room if any"},{"lineNumber":21,"author":{"gitId":"uyencfi"},"content":"    await request(app)"},{"lineNumber":22,"author":{"gitId":"uyencfi"},"content":"      .delete(`${URI_PREFIX}/room/testDelete`)"},{"lineNumber":23,"author":{"gitId":"uyencfi"},"content":"      .send({"},{"lineNumber":24,"author":{"gitId":"uyencfi"},"content":"        \u0027roomId\u0027: \u0027testRoom\u0027,"},{"lineNumber":25,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":26,"author":{"gitId":"uyencfi"},"content":"    "},{"lineNumber":27,"author":{"gitId":"uyencfi"},"content":"    const resp \u003d await request(app)"},{"lineNumber":28,"author":{"gitId":"uyencfi"},"content":"      .post(`${URI_PREFIX}/room`)"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"      .send({"},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"        \u0027roomId\u0027: \u0027testRoom\u0027,"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"        \u0027u1\u0027: \u0027testUser1\u0027,"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"        \u0027u2\u0027: \u0027testUser2\u0027,"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"    expect(resp.statusCode).to.equal(201)"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"    expect(resp.body.message).to.equal(\u0027Created room history\u0027)"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"  })"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"  it(\u0027fails for duplicate roomId\u0027, function (done) {"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"    request(app)"},{"lineNumber":40,"author":{"gitId":"uyencfi"},"content":"      .post(`${URI_PREFIX}/room`)"},{"lineNumber":41,"author":{"gitId":"uyencfi"},"content":"      .send({"},{"lineNumber":42,"author":{"gitId":"uyencfi"},"content":"        \u0027roomId\u0027: \u0027testRoom\u0027,"},{"lineNumber":43,"author":{"gitId":"uyencfi"},"content":"        \u0027u1\u0027: \u0027testUser1\u0027,"},{"lineNumber":44,"author":{"gitId":"uyencfi"},"content":"        \u0027u2\u0027: \u0027testUser2\u0027,"},{"lineNumber":45,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":46,"author":{"gitId":"uyencfi"},"content":"      .expect(400)"},{"lineNumber":47,"author":{"gitId":"uyencfi"},"content":"      .expect({ message: \u0027Could not create room history for roomId testRoom\u0027 }, done)"},{"lineNumber":48,"author":{"gitId":"uyencfi"},"content":"  })"},{"lineNumber":49,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":50,"author":{"gitId":"uyencfi"},"content":"  it(\u0027fails for missing fields in request body\u0027, function (done) {"},{"lineNumber":51,"author":{"gitId":"uyencfi"},"content":"    request(app)"},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"      .post(`${URI_PREFIX}/room`)"},{"lineNumber":53,"author":{"gitId":"uyencfi"},"content":"      .send({})"},{"lineNumber":54,"author":{"gitId":"uyencfi"},"content":"      .expect(400)"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":"      .expect({ message: \u0027roomId is missing\u0027 }, done)"},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"  })"},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"})"},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"describe(\u0027PUT /room/:roomId (update room history)\u0027, function () {"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"  it(\u0027updates room history successfully\u0027, function (done) {"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"    // testRoom is created from previous test"},{"lineNumber":62,"author":{"gitId":"uyencfi"},"content":"    request(app)"},{"lineNumber":63,"author":{"gitId":"uyencfi"},"content":"    .put(`${URI_PREFIX}/room/testRoom`)"},{"lineNumber":64,"author":{"gitId":"uyencfi"},"content":"    .send({"},{"lineNumber":65,"author":{"gitId":"uyencfi"},"content":"      \u0027questionId\u0027: 1234,"},{"lineNumber":66,"author":{"gitId":"uyencfi"},"content":"      \u0027answer\u0027: \u0027test\u0027,"},{"lineNumber":67,"author":{"gitId":"uyencfi"},"content":"  })"},{"lineNumber":68,"author":{"gitId":"uyencfi"},"content":"    .expect(200)"},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":"    .expect({ message: \u0027Update history successfully\u0027 }, done)"},{"lineNumber":70,"author":{"gitId":"uyencfi"},"content":"  })"},{"lineNumber":71,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":72,"author":{"gitId":"uyencfi"},"content":"  it(\u0027fails for non-existent roomId\u0027, function (done) {"},{"lineNumber":73,"author":{"gitId":"uyencfi"},"content":"    request(app)"},{"lineNumber":74,"author":{"gitId":"uyencfi"},"content":"      .put(`${URI_PREFIX}/room/not-exist`)"},{"lineNumber":75,"author":{"gitId":"uyencfi"},"content":"      .send({"},{"lineNumber":76,"author":{"gitId":"uyencfi"},"content":"        \u0027questionId\u0027: 1234,"},{"lineNumber":77,"author":{"gitId":"uyencfi"},"content":"        \u0027answer\u0027: \u0027test\u0027,"},{"lineNumber":78,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":79,"author":{"gitId":"uyencfi"},"content":"      .expect(400)"},{"lineNumber":80,"author":{"gitId":"uyencfi"},"content":"      .expect({ message: \u0027Could not update history for room not-exist\u0027 }, done)"},{"lineNumber":81,"author":{"gitId":"uyencfi"},"content":"  })"},{"lineNumber":82,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":83,"author":{"gitId":"uyencfi"},"content":"  it(\u0027fails for missing fields in request body\u0027, function (done) {"},{"lineNumber":84,"author":{"gitId":"uyencfi"},"content":"    request(app)"},{"lineNumber":85,"author":{"gitId":"uyencfi"},"content":"      .put(`${URI_PREFIX}/room/testRoom`)"},{"lineNumber":86,"author":{"gitId":"uyencfi"},"content":"      .send({})"},{"lineNumber":87,"author":{"gitId":"uyencfi"},"content":"      .expect(400)"},{"lineNumber":88,"author":{"gitId":"uyencfi"},"content":"      .expect({ message: \u0027questionId is missing\u0027 }, done)"},{"lineNumber":89,"author":{"gitId":"uyencfi"},"content":"  })"},{"lineNumber":90,"author":{"gitId":"uyencfi"},"content":"})"},{"lineNumber":91,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":92,"author":{"gitId":"uyencfi"},"content":"describe(\u0027GET /user/:uid (get user history)\u0027, function () {"},{"lineNumber":93,"author":{"gitId":"uyencfi"},"content":"  it(\u0027gets successfully for empty history\u0027, function (done) {"},{"lineNumber":94,"author":{"gitId":"uyencfi"},"content":"    request(app)"},{"lineNumber":95,"author":{"gitId":"uyencfi"},"content":"      .get(`${URI_PREFIX}/user/emptyUser`)"},{"lineNumber":96,"author":{"gitId":"uyencfi"},"content":"      .expect(200)"},{"lineNumber":97,"author":{"gitId":"uyencfi"},"content":"      .expect({ "},{"lineNumber":98,"author":{"gitId":"uyencfi"},"content":"        message: \u0027Get history successfully\u0027,"},{"lineNumber":99,"author":{"gitId":"uyencfi"},"content":"        data: [],"},{"lineNumber":100,"author":{"gitId":"uyencfi"},"content":"      }, done)"},{"lineNumber":101,"author":{"gitId":"uyencfi"},"content":"  })"},{"lineNumber":102,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":103,"author":{"gitId":"uyencfi"},"content":"  // testUser1 has history in testRoom, which was updated in previous test"},{"lineNumber":104,"author":{"gitId":"uyencfi"},"content":"  it(\u0027gets successfully for non-empty history\u0027, async function () {"},{"lineNumber":105,"author":{"gitId":"uyencfi"},"content":"    const mockAxios \u003d new MockAdapter(axios)"},{"lineNumber":106,"author":{"gitId":"uyencfi"},"content":"    // Mock the response from Question Service. Mock any GET request to /questionNames endpoint"},{"lineNumber":107,"author":{"gitId":"uyencfi"},"content":"    mockAxios"},{"lineNumber":108,"author":{"gitId":"uyencfi"},"content":"      .onGet(new RegExp(`^${URL_QUESTION_SERVICE_QUESTION_NAMES}`))"},{"lineNumber":109,"author":{"gitId":"uyencfi"},"content":"      .reply(200, {"},{"lineNumber":110,"author":{"gitId":"uyencfi"},"content":"        data: { 1234: \u0027testQuestion\u0027 },"},{"lineNumber":111,"author":{"gitId":"uyencfi"},"content":"      })"},{"lineNumber":112,"author":{"gitId":"uyencfi"},"content":"    "},{"lineNumber":113,"author":{"gitId":"uyencfi"},"content":"    const resp \u003d await request(app).get(`${URI_PREFIX}/user/testUser1`)"},{"lineNumber":114,"author":{"gitId":"uyencfi"},"content":"    "},{"lineNumber":115,"author":{"gitId":"uyencfi"},"content":"    expect(resp.statusCode).to.equal(200)"},{"lineNumber":116,"author":{"gitId":"uyencfi"},"content":"    expect(resp.body.message).to.equal(\u0027Get history successfully\u0027)"},{"lineNumber":117,"author":{"gitId":"uyencfi"},"content":"    expect(resp.body.data).to.be.a(\u0027array\u0027)"},{"lineNumber":118,"author":{"gitId":"uyencfi"},"content":"    expect(resp.body.data.length).to.be.greaterThanOrEqual(1)"},{"lineNumber":119,"author":{"gitId":"uyencfi"},"content":"    // Check the fields required for History page"},{"lineNumber":120,"author":{"gitId":"uyencfi"},"content":"    expect(resp.body.data[0]).to.be.a(\u0027object\u0027)"},{"lineNumber":121,"author":{"gitId":"uyencfi"},"content":"    expect(resp.body.data[0]).to.have.property(\u0027partner\u0027)"},{"lineNumber":122,"author":{"gitId":"uyencfi"},"content":"    expect(resp.body.data[0]).to.have.property(\u0027id\u0027)"},{"lineNumber":123,"author":{"gitId":"uyencfi"},"content":"    expect(resp.body.data[0]).to.have.property(\u0027name\u0027)"},{"lineNumber":124,"author":{"gitId":"uyencfi"},"content":"    expect(resp.body.data[0]).to.have.property(\u0027answer\u0027)"},{"lineNumber":125,"author":{"gitId":"uyencfi"},"content":"    expect(resp.body.data[0]).to.have.property(\u0027completedAt\u0027)"},{"lineNumber":126,"author":{"gitId":"uyencfi"},"content":"    mockAxios.restore()"},{"lineNumber":127,"author":{"gitId":"uyencfi"},"content":"  })"},{"lineNumber":128,"author":{"gitId":"uyencfi"},"content":"})"}],"authorContributionMap":{"uyencfi":128}},{"path":"k8s/.gitignore","fileType":"gitignore","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":".env"}],"authorContributionMap":{"tlylt":1}},{"path":"k8s/README.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"# Deployment Guide"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"## Docker"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"Container images are deployed under the b9jmthkk account on Docker Hub. E.g https://hub.docker.com/repository/docker/b9jmthkk/question"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"## Production"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"- Go to Google Cloud console and create a new project"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"- Enable billing"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"- Create new cluster"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"  - choose zone near the region"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"- Run the required commands in `init.sh` from the Google Cloud Shell"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"- Push to branch `production`"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"## Local Deployment in KIND"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"- Ensure KIND is installed"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"- Run the required commands in `init.sh` from the root of the repository"}],"authorContributionMap":{"tlylt":19}},{"path":"k8s/full-flow.sh","fileType":"sh","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"## Note: this is for local testing and debugging only, refer to init.sh instead"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"## Frontend"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/frontend-deployment.yaml"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/frontend-cluster-ip-service.yaml"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"## User Service"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/mongo-deployment.yaml"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/mongo-cluster-ip-service.yaml"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/redis-deployment.yaml"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/redis-cluster-ip-service.yaml"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"## Secrets"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"kubectl create secret generic access-token-secret --from-literal ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"kubectl create secret generic refresh-token-secret --from-literal REFRESH_TOKEN_SECRET\u003dd094b5d45a93e9b1f9bc6dee9aff27e26bf7a875333db0df955415e87151c16a49a72b6ee85ce483e6a243a0fbf8b93989dc150cacdd970c29053a650d4fb908"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"kubectl create secret generic postgres-password --from-literal POSTGRES_PASSWORD\u003dpostgres"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"## User"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/user-deployment.yaml"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/user-cluster-ip-service.yaml"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"## Question"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/postgres-deployment.yaml"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/postgres-cluster-ip-service.yaml"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/postgres-persistent-volume-claim.yaml"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/question-deployment.yaml"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/question-cluster-ip-service.yaml"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"## Room"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/room-deployment.yaml"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/room-cluster-ip-service.yaml"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"## Matching"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/matching-deployment.yaml"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/matching-cluster-ip-service.yaml"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"## Ingress"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/ingress-service.yaml"}],"authorContributionMap":{"tlylt":41}},{"path":"k8s/init.sh","fileType":"sh","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"# Initialization for PRODUCTION environment"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"## setup the google cloud via the cloud terminal"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"gcloud config set project cs3219-365909"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"gcloud config set compute/zone asia-southeast1-a"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"gcloud container clusters get-credentials cs3219-cluster"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"## Create secrets (actual secrets will not be the following)"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"kubectl create secret generic access-token-secret --from-literal ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"kubectl create secret generic refresh-token-secret --from-literal REFRESH_TOKEN_SECRET\u003dd094b5d45a93e9b1f9bc6dee9aff27e26bf7a875333db0df955415e87151c16a49a72b6ee85ce483e6a243a0fbf8b93989dc150cacdd970c29053a650d4fb908"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"kubectl create secret generic postgres-password --from-literal POSTGRES_PASSWORD\u003dpostgres"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"## Install Helm https://helm.sh/docs/intro/install/#from-script"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"chmod 700 get_helm.sh"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"./get_helm.sh"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"## Install ingress-nginx"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"helm install my-release ingress-nginx/ingress-nginx"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"## Install metrics server for HPA"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"## Install https cert manager"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"helm repo add jetstack https://charts.jetstack.io"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"helm repo update"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"helm install \\"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"  cert-manager jetstack/cert-manager \\"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"  --namespace cert-manager \\"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"  --create-namespace \\"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"  --version v1.8.0 \\"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"  --set installCRDs\u003dtrue"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"## get certificates"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"kubectl get certificates"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"kubectl describe certificates"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"################################################################################################################"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"################################################################################################################"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"# Initialization for LOCAL environment"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"kind create cluster --name kind-1 --config k8s/kind/cluster-config.yaml"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"## Create secrets (actual secrets will not be the following)"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"kubectl create secret generic access-token-secret --from-literal ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"kubectl create secret generic refresh-token-secret --from-literal REFRESH_TOKEN_SECRET\u003dd094b5d45a93e9b1f9bc6dee9aff27e26bf7a875333db0df955415e87151c16a49a72b6ee85ce483e6a243a0fbf8b93989dc150cacdd970c29053a650d4fb908"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"kubectl create secret generic postgres-password --from-literal POSTGRES_PASSWORD\u003dpostgres"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"## Install ingress-nginx"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"## Update all the docker images"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"docker build -t b9jmthkk/frontend:latest -f ./frontend/Dockerfile.production ./frontend"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"docker build -t b9jmthkk/user:latest -f ./user-service/Dockerfile ./user-service"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"docker build -t b9jmthkk/question:latest -f ./question-service/Dockerfile ./question-service"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"docker build -t b9jmthkk/matching:latest -f ./matching-service/Dockerfile ./matching-service"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"docker build -t b9jmthkk/room:latest -f ./room-service/Dockerfile ./room-service"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"## Login"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"docker login -u xxxxx -p xxxxxxxxxx"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"## Push all images"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"docker push b9jmthkk/frontend:latest"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"docker push b9jmthkk/user:latest"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"docker push b9jmthkk/question:latest"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"docker push b9jmthkk/matching:latest"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"docker push b9jmthkk/room:latest"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"## Apply all manifests"},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"# (Note that may need to wait a few minutes for the above ingress-nginx to be ready)"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"# use the following to check status"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"kubectl -n ingress-nginx get deploy"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"# finally apply all"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"# check status (Took about 4 mintues for me)"},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"kubectl get all"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"# visit http://localhost !!!!"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"## Clean up"},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"# delete deployments"},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":"kubectl delete -f k8s/manifests"},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"# delete ingress-nginx"},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":"kubectl delete -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml"},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"# delete kind cluster"},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":"kind delete cluster --name kind-1"}],"authorContributionMap":{"tlylt":84}},{"path":"k8s/kind/cluster-config.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"kind: Cluster"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"apiVersion: kind.x-k8s.io/v1alpha4"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"name: kind-cluster-1"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"nodes:"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  - role: control-plane"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  - role: worker"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"    kubeadmConfigPatches:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"      - |"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"        kind: JoinConfiguration"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"        nodeRegistration:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"          kubeletExtraArgs:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"            node-labels: \"ingress-ready\u003dtrue,topology.kubernetes.io/zone\u003da\""},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    extraPortMappings:"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"      - containerPort: 80"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"        hostPort: 80"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        protocol: TCP"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"  # - role: worker"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"  #   kubeadmConfigPatches:"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"  #     - |"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"  #       kind: JoinConfiguration"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"  #       nodeRegistration:"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"  #         kubeletExtraArgs:"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"  #           node-labels: \"topology.kubernetes.io/zone\u003da\""},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"  # - role: worker"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"  #   kubeadmConfigPatches:"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"  #     - |"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"  #       kind: JoinConfiguration"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"  #       nodeRegistration:"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"  #         kubeletExtraArgs:"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"  #           node-labels: \"topology.kubernetes.io/zone\u003db\""}],"authorContributionMap":{"tlylt":30}},{"path":"k8s/manifests/certificate.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: cert-manager.io/v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Certificate"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: leetwithfriend-com-tls"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  secretName: leetwithfriend-com"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  issuerRef:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    name: letsencrypt-prod"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    kind: ClusterIssuer"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"  commonName: leetwithfriend.com"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"  dnsNames:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"    - leetwithfriend.com"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    - www.leetwithfriend.com"}],"authorContributionMap":{"tlylt":13}},{"path":"k8s/manifests/frontend-cluster-ip-service.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Service"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: frontend-cluster-ip-service"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  type: ClusterIP"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    app: frontend"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"  ports:"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    - name: http"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"      port: 3000"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      targetPort: 3000"}],"authorContributionMap":{"tlylt":12}},{"path":"k8s/manifests/frontend-deployment.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: apps/v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Deployment"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: frontend-deployment"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  replicas: 1"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    matchLabels:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"      app: frontend"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"  template:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    metadata:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      labels:"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        app: frontend"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    spec:"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"      containers:"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        - name: frontend"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"          image: b9jmthkk/frontend"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"          ports:"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"            - name: http"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"              containerPort: 3000"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"          resources:"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"            requests:"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"              cpu: 2m"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"              memory: 20Mi"}],"authorContributionMap":{"tlylt":24}},{"path":"k8s/manifests/history-cluster-ip-service.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Service"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: history-cluster-ip-service"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  type: ClusterIP"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    app: history"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"  ports:"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    - name: http"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"      port: 8080"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      targetPort: 8080"}],"authorContributionMap":{"tlylt":12}},{"path":"k8s/manifests/history-deployment.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: apps/v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Deployment"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: history-deployment"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  replicas: 1"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    matchLabels:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"      app: history"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"  template:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    metadata:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      labels:"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        app: history"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    spec:"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"      containers:"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        - name: history"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"          image: b9jmthkk/history"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"          ports:"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"            - name: http"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"              containerPort: 8080"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"          env:"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"            - name: REDIS_HOST"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"              value: redis-cluster-ip-service"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"            - name: DB_LOCAL_URI"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"              value: mongodb://mongo-cluster-ip-service:27017/peerprep"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"            - name: ENV"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"              value: production"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"            - name: PORT"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"              value: \u002780\u0027"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"            - name: URI_QUESTION_SERVICE"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"              value: http://question-cluster-ip-service:8500"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"          resources:"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"            requests:"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"              cpu: 5m"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"              memory: 80Mi"}],"authorContributionMap":{"tlylt":35}},{"path":"k8s/manifests/hpa.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: autoscaling/v2"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: HorizontalPodAutoscaler"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: frontend-hpa"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  namespace: default"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  metrics:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    - resource:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"        name: cpu"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"        target:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"          averageUtilization: 80"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"          type: Utilization"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"      type: Resource"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"  minReplicas: 1"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"  maxReplicas: 5"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"  scaleTargetRef:"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    apiVersion: apps/v1"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"    kind: Deployment"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"    name: frontend-deployment"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"---"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"apiVersion: autoscaling/v2"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"kind: HorizontalPodAutoscaler"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"  name: matching-hpa"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"  namespace: default"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"  metrics:"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"    - resource:"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"        name: cpu"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"        target:"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"          averageUtilization: 80"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"          type: Utilization"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"      type: Resource"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"  minReplicas: 1"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"  maxReplicas: 5"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"  scaleTargetRef:"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"    apiVersion: apps/v1"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"    kind: Deployment"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"    name: matching-deployment"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"---"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"apiVersion: autoscaling/v2"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"kind: HorizontalPodAutoscaler"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"  name: question-hpa"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"  namespace: default"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"  metrics:"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"    - resource:"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"        name: cpu"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"        target:"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"          averageUtilization: 80"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"          type: Utilization"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"      type: Resource"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"  minReplicas: 1"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"  maxReplicas: 5"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"  scaleTargetRef:"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"    apiVersion: apps/v1"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"    kind: Deployment"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"    name: question-deployment"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"---"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"apiVersion: autoscaling/v2"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"kind: HorizontalPodAutoscaler"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"  name: room-hpa"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"  namespace: default"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"  metrics:"},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"    - resource:"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"        name: cpu"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"        target:"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"          averageUtilization: 80"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"          type: Utilization"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"      type: Resource"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"  minReplicas: 1"},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"  maxReplicas: 5"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"  scaleTargetRef:"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"    apiVersion: apps/v1"},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"    kind: Deployment"},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"    name: room-deployment"},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":"---"},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"apiVersion: autoscaling/v2"},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":"kind: HorizontalPodAutoscaler"},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":"  name: user-hpa"},{"lineNumber":85,"author":{"gitId":"tlylt"},"content":"  namespace: default"},{"lineNumber":86,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":87,"author":{"gitId":"tlylt"},"content":"  metrics:"},{"lineNumber":88,"author":{"gitId":"tlylt"},"content":"    - resource:"},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"        name: cpu"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"        target:"},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":"          averageUtilization: 80"},{"lineNumber":92,"author":{"gitId":"tlylt"},"content":"          type: Utilization"},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":"      type: Resource"},{"lineNumber":94,"author":{"gitId":"tlylt"},"content":"  minReplicas: 1"},{"lineNumber":95,"author":{"gitId":"tlylt"},"content":"  maxReplicas: 5"},{"lineNumber":96,"author":{"gitId":"tlylt"},"content":"  scaleTargetRef:"},{"lineNumber":97,"author":{"gitId":"tlylt"},"content":"    apiVersion: apps/v1"},{"lineNumber":98,"author":{"gitId":"tlylt"},"content":"    kind: Deployment"},{"lineNumber":99,"author":{"gitId":"tlylt"},"content":"    name: user-deployment"},{"lineNumber":100,"author":{"gitId":"tlylt"},"content":"---"},{"lineNumber":101,"author":{"gitId":"tlylt"},"content":"apiVersion: autoscaling/v2"},{"lineNumber":102,"author":{"gitId":"tlylt"},"content":"kind: HorizontalPodAutoscaler"},{"lineNumber":103,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":104,"author":{"gitId":"tlylt"},"content":"  name: history-hpa"},{"lineNumber":105,"author":{"gitId":"tlylt"},"content":"  namespace: default"},{"lineNumber":106,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":107,"author":{"gitId":"tlylt"},"content":"  metrics:"},{"lineNumber":108,"author":{"gitId":"tlylt"},"content":"    - resource:"},{"lineNumber":109,"author":{"gitId":"tlylt"},"content":"        name: cpu"},{"lineNumber":110,"author":{"gitId":"tlylt"},"content":"        target:"},{"lineNumber":111,"author":{"gitId":"tlylt"},"content":"          averageUtilization: 80"},{"lineNumber":112,"author":{"gitId":"tlylt"},"content":"          type: Utilization"},{"lineNumber":113,"author":{"gitId":"tlylt"},"content":"      type: Resource"},{"lineNumber":114,"author":{"gitId":"tlylt"},"content":"  minReplicas: 1"},{"lineNumber":115,"author":{"gitId":"tlylt"},"content":"  maxReplicas: 5"},{"lineNumber":116,"author":{"gitId":"tlylt"},"content":"  scaleTargetRef:"},{"lineNumber":117,"author":{"gitId":"tlylt"},"content":"    apiVersion: apps/v1"},{"lineNumber":118,"author":{"gitId":"tlylt"},"content":"    kind: Deployment"},{"lineNumber":119,"author":{"gitId":"tlylt"},"content":"    name: history-deployment"}],"authorContributionMap":{"tlylt":119}},{"path":"k8s/manifests/ingress-service.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: networking.k8s.io/v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Ingress"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: ingress-service"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  annotations:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    kubernetes.io/ingress.class: nginx"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"    nginx.ingress.kubernetes.io/use-regex: \u0027true\u0027"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    # nginx.ingress.kubernetes.io/rewrite-target: /$1"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    cert-manager.io/cluster-issuer: \u0027letsencrypt-prod\u0027"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    nginx.ingress.kubernetes.io/ssl-redirect: \u0027true\u0027"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"  tls: # https"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    - hosts:"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"        - leetwithfriend.com"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"        - www.leetwithfriend.com"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"      secretName: leetwithfriend-com"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"  rules:"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"    - host: \u0027leetwithfriend.com\u0027 # https"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"      http:"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"        paths:"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"          - path: /?(.*)"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"            pathType: Prefix"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"            backend:"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"              service:"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"                name: frontend-cluster-ip-service"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"                port:"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"                  number: 3000"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"          - path: /api/v1/user?(.*)"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"            pathType: Prefix"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"            backend:"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"              service:"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"                name: user-cluster-ip-service"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"                port:"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"                  number: 8000"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"          - path: /api/v1/matching?(.*)"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"            pathType: Prefix"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"            backend:"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"              service:"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"                name: matching-cluster-ip-service"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"                port:"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"                  number: 8001"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"          - path: /api/v1/question?(.*)"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"            pathType: Prefix"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"            backend:"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"              service:"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"                name: question-cluster-ip-service"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"                port:"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"                  number: 8500"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"          - path: /socket.io/room?(.*)"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"            pathType: Prefix"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"            backend:"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"              service:"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"                name: room-cluster-ip-service"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"                port:"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"                  number: 8022"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"          - path: /socket.io/matching?(.*)"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"            pathType: Prefix"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"            backend:"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"              service:"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"                name: matching-cluster-ip-service"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"                port:"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"                  number: 8001"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"          - path: /api/v1/room?(.*)"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"            pathType: Prefix"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"            backend:"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"              service:"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"                name: room-cluster-ip-service"},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"                port:"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"                  number: 8022"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"          - path: /api/v1/history?(.*)"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"            pathType: Prefix"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"            backend:"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"              service:"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"                name: history-cluster-ip-service"},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"                port:"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"                  number: 8080"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"    - host: \u0027www.leetwithfriend.com\u0027 # https"},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"      http:"},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"        paths:"},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":"          - path: /?(.*)"},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"            pathType: Prefix"},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":"            backend:"},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"              service:"},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":"                name: frontend-cluster-ip-service"},{"lineNumber":85,"author":{"gitId":"tlylt"},"content":"                port:"},{"lineNumber":86,"author":{"gitId":"tlylt"},"content":"                  number: 3000"},{"lineNumber":87,"author":{"gitId":"tlylt"},"content":"          - path: /api/v1/user?(.*)"},{"lineNumber":88,"author":{"gitId":"tlylt"},"content":"            pathType: Prefix"},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"            backend:"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"              service:"},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":"                name: user-cluster-ip-service"},{"lineNumber":92,"author":{"gitId":"tlylt"},"content":"                port:"},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":"                  number: 8000"},{"lineNumber":94,"author":{"gitId":"tlylt"},"content":"          - path: /api/v1/matching?(.*)"},{"lineNumber":95,"author":{"gitId":"tlylt"},"content":"            pathType: Prefix"},{"lineNumber":96,"author":{"gitId":"tlylt"},"content":"            backend:"},{"lineNumber":97,"author":{"gitId":"tlylt"},"content":"              service:"},{"lineNumber":98,"author":{"gitId":"tlylt"},"content":"                name: matching-cluster-ip-service"},{"lineNumber":99,"author":{"gitId":"tlylt"},"content":"                port:"},{"lineNumber":100,"author":{"gitId":"tlylt"},"content":"                  number: 8001"},{"lineNumber":101,"author":{"gitId":"tlylt"},"content":"          - path: /api/v1/question?(.*)"},{"lineNumber":102,"author":{"gitId":"tlylt"},"content":"            pathType: Prefix"},{"lineNumber":103,"author":{"gitId":"tlylt"},"content":"            backend:"},{"lineNumber":104,"author":{"gitId":"tlylt"},"content":"              service:"},{"lineNumber":105,"author":{"gitId":"tlylt"},"content":"                name: question-cluster-ip-service"},{"lineNumber":106,"author":{"gitId":"tlylt"},"content":"                port:"},{"lineNumber":107,"author":{"gitId":"tlylt"},"content":"                  number: 8500"},{"lineNumber":108,"author":{"gitId":"tlylt"},"content":"          - path: /socket.io/room?(.*)"},{"lineNumber":109,"author":{"gitId":"tlylt"},"content":"            pathType: Prefix"},{"lineNumber":110,"author":{"gitId":"tlylt"},"content":"            backend:"},{"lineNumber":111,"author":{"gitId":"tlylt"},"content":"              service:"},{"lineNumber":112,"author":{"gitId":"tlylt"},"content":"                name: room-cluster-ip-service"},{"lineNumber":113,"author":{"gitId":"tlylt"},"content":"                port:"},{"lineNumber":114,"author":{"gitId":"tlylt"},"content":"                  number: 8022"},{"lineNumber":115,"author":{"gitId":"tlylt"},"content":"          - path: /socket.io/matching?(.*)"},{"lineNumber":116,"author":{"gitId":"tlylt"},"content":"            pathType: Prefix"},{"lineNumber":117,"author":{"gitId":"tlylt"},"content":"            backend:"},{"lineNumber":118,"author":{"gitId":"tlylt"},"content":"              service:"},{"lineNumber":119,"author":{"gitId":"tlylt"},"content":"                name: matching-cluster-ip-service"},{"lineNumber":120,"author":{"gitId":"tlylt"},"content":"                port:"},{"lineNumber":121,"author":{"gitId":"tlylt"},"content":"                  number: 8001"},{"lineNumber":122,"author":{"gitId":"tlylt"},"content":"          - path: /api/v1/room?(.*)"},{"lineNumber":123,"author":{"gitId":"tlylt"},"content":"            pathType: Prefix"},{"lineNumber":124,"author":{"gitId":"tlylt"},"content":"            backend:"},{"lineNumber":125,"author":{"gitId":"tlylt"},"content":"              service:"},{"lineNumber":126,"author":{"gitId":"tlylt"},"content":"                name: room-cluster-ip-service"},{"lineNumber":127,"author":{"gitId":"tlylt"},"content":"                port:"},{"lineNumber":128,"author":{"gitId":"tlylt"},"content":"                  number: 8022"},{"lineNumber":129,"author":{"gitId":"tlylt"},"content":"          - path: /api/v1/history?(.*)"},{"lineNumber":130,"author":{"gitId":"tlylt"},"content":"            pathType: Prefix"},{"lineNumber":131,"author":{"gitId":"tlylt"},"content":"            backend:"},{"lineNumber":132,"author":{"gitId":"tlylt"},"content":"              service:"},{"lineNumber":133,"author":{"gitId":"tlylt"},"content":"                name: history-cluster-ip-service"},{"lineNumber":134,"author":{"gitId":"tlylt"},"content":"                port:"},{"lineNumber":135,"author":{"gitId":"tlylt"},"content":"                  number: 8080"}],"authorContributionMap":{"tlylt":135}},{"path":"k8s/manifests/issuer.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: cert-manager.io/v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: ClusterIssuer"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: letsencrypt-prod"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  acme:"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"    server: https://acme-v02.api.letsencrypt.org/directory"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    email: \u0027test@test.com\u0027"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    privateKeySecretRef:"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"      name: letsencrypt-prod"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    solvers:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      - http01:"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"          ingress:"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"            class: nginx"}],"authorContributionMap":{"tlylt":14}},{"path":"k8s/manifests/matching-cluster-ip-service.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Service"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: matching-cluster-ip-service"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  type: ClusterIP"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    app: matching"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"  ports:"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    - name: http"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"      port: 8001"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      targetPort: 8001"}],"authorContributionMap":{"tlylt":12}},{"path":"k8s/manifests/matching-deployment.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: apps/v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Deployment"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: matching-deployment"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  replicas: 1"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    matchLabels:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"      app: matching"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"  template:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    metadata:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      labels:"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        app: matching"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    spec:"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"      containers:"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        - name: matching"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"          image: b9jmthkk/matching"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"          ports:"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"            - name: http"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"              containerPort: 8001"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"          env:"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"            - name: PORT"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"              value: \u002780\u0027"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"            - name: ENV"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"              value: production"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"            - name: URI_QUESTION_SERVICE"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"              value: http://question-cluster-ip-service:8500"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"            - name: URI_ROOM_SERVICE"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"              value: http://room-cluster-ip-service:8022"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"            - name: URI_HISTORY_SERVICE"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"              value: http://history-cluster-ip-service:8080"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"            - name: ACCESS_TOKEN_SECRET"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"              valueFrom:"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"                secretKeyRef:"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"                  name: access-token-secret"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"                  key: ACCESS_TOKEN_SECRET"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"          resources:"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"            requests:"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"              cpu: 5m"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"              memory: 80Mi"}],"authorContributionMap":{"tlylt":40}},{"path":"k8s/manifests/mongo-cluster-ip-service.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Service"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: mongo-cluster-ip-service"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  type: ClusterIP"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    app: mongo"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"  ports:"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    - name: http"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"      port: 27017"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      targetPort: 27017"}],"authorContributionMap":{"tlylt":12}},{"path":"k8s/manifests/mongo-deployment.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: apps/v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Deployment"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: mongo-deployment"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  replicas: 1"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    matchLabels:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"      app: mongo"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"  template:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    metadata:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      labels:"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        app: mongo"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    spec:"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"      volumes:"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        - name: mongo-storage"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"          persistentVolumeClaim:"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"            claimName: mongo-persistent-volume-claim"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"      containers:"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"        - name: mongo"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"          image: mongo"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"          ports:"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"            - name: http"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"              containerPort: 27017"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"          resources:"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"            requests:"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"              cpu: 10m"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"              memory: 100Mi"}],"authorContributionMap":{"tlylt":28}},{"path":"k8s/manifests/mongo-persistent-volume-claim.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: PersistentVolumeClaim"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: mongo-persistent-volume-claim"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  accessModes:"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"    - ReadWriteOnce"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"  resources:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    requests:"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"      storage: 1Gi"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"  storageClassName: standard"}],"authorContributionMap":{"tlylt":11}},{"path":"k8s/manifests/postgres-cluster-ip-service.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Service"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: postgres-cluster-ip-service"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  type: ClusterIP"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    app: postgres"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"  ports:"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    - name: http"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"      port: 5432"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      targetPort: 5432"}],"authorContributionMap":{"tlylt":12}},{"path":"k8s/manifests/postgres-deployment.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: apps/v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Deployment"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: postgres-deployment"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  replicas: 1"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    matchLabels:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"      app: postgres"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"  template:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    metadata:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      labels:"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        app: postgres"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    spec:"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"      volumes:"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        - name: postgres-storage"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"          persistentVolumeClaim:"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"            claimName: postgres-persistent-volume-claim"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"      containers:"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"        - name: postgres"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"          image: postgres"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"          ports:"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"            - name: http"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"              containerPort: 5432"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"          env:"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"            - name: POSTGRES_DB"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"              value: postgres_db"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"            - name: POSTGRES_USER"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"              value: postgres"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"            - name: POSTGRES_HOST"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"              value: localhost"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"            - name: POSTGRES_PORT"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"              value: \u00275432\u0027"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"            - name: POSTGRES_PASSWORD"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"              valueFrom:"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"                secretKeyRef:"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"                  name: postgres-password"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"                  key: POSTGRES_PASSWORD"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"          resources:"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"            requests:"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"              cpu: 5m"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"              memory: 60Mi"}],"authorContributionMap":{"tlylt":42}},{"path":"k8s/manifests/postgres-persistent-volume-claim.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: PersistentVolumeClaim"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: postgres-persistent-volume-claim"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  accessModes:"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"    - ReadWriteOnce"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"  resources:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    requests:"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"      storage: 1Gi"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"  storageClassName: standard"}],"authorContributionMap":{"tlylt":11}},{"path":"k8s/manifests/question-cluster-ip-service.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Service"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: question-cluster-ip-service"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  type: ClusterIP"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    app: question"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"  ports:"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    - name: http"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"      port: 8500"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      targetPort: 8500"}],"authorContributionMap":{"tlylt":12}},{"path":"k8s/manifests/question-deployment.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: apps/v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Deployment"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: question-deployment"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  replicas: 1"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    matchLabels:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"      app: question"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"  template:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    metadata:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      labels:"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        app: question"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    spec:"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"      containers:"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        - name: question"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"          image: b9jmthkk/question"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"          ports:"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"            - name: http"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"              containerPort: 8500"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"          env:"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"            - name: PORT"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"              value: \u002780\u0027"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"            - name: ENV"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"              value: production"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"            - name: POSTGRES_USER"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"              value: postgres"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"            - name: POSTGRES_HOST"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"              value: postgres-cluster-ip-service"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"            - name: POSTGRES_PORT"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"              value: \u00275432\u0027"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"            - name: POSTGRES_PASSWORD"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"              valueFrom:"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"                secretKeyRef:"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"                  name: postgres-password"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"                  key: POSTGRES_PASSWORD"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"          resources:"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"            requests:"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"              cpu: 5m"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"              memory: 120Mi"}],"authorContributionMap":{"tlylt":40}},{"path":"k8s/manifests/redis-cluster-ip-service.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Service"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: redis-cluster-ip-service"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  type: ClusterIP"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    app: redis"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"  ports:"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    - name: http"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"      port: 6379"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      targetPort: 6379"}],"authorContributionMap":{"tlylt":12}},{"path":"k8s/manifests/redis-deployment.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: apps/v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Deployment"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: redis-deployment"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  replicas: 1"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    matchLabels:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"      app: redis"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"  template:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    metadata:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      labels:"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        app: redis"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    spec:"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"      containers:"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        - name: redis"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"          image: redis:alpine"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"          ports:"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"            - name: http"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"              containerPort: 6379"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"          resources:"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"            requests:"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"              cpu: 8m"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"              memory: 10Mi"}],"authorContributionMap":{"tlylt":24}},{"path":"k8s/manifests/room-cluster-ip-service.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Service"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: room-cluster-ip-service"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  type: ClusterIP"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    app: room"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"  ports:"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    - name: http"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"      port: 8022"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      targetPort: 8022"}],"authorContributionMap":{"tlylt":12}},{"path":"k8s/manifests/room-deployment.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: apps/v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Deployment"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: room-deployment"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  replicas: 1"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    matchLabels:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"      app: room"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"  template:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    metadata:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      labels:"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        app: room"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    spec:"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"      containers:"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        - name: room"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"          image: b9jmthkk/room"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"          ports:"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"            - name: http"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"              containerPort: 8022"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"          env:"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"            - name: PORT"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"              value: \u002780\u0027"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"            - name: ENV"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"              value: production"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"            - name: URI_QUESTION_SERVICE"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"              value: http://question-cluster-ip-service:8500"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"            - name: ACCESS_TOKEN_SECRET"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"              valueFrom:"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"                secretKeyRef:"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"                  name: access-token-secret"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"                  key: ACCESS_TOKEN_SECRET"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"          resources:"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"            requests:"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"              cpu: 5m"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"              memory: 100Mi"}],"authorContributionMap":{"tlylt":36}},{"path":"k8s/manifests/user-cluster-ip-service.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Service"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: user-cluster-ip-service"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  type: ClusterIP"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    app: user"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"  ports:"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    - name: http"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"      port: 8000"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      targetPort: 8000"}],"authorContributionMap":{"tlylt":12}},{"path":"k8s/manifests/user-deployment.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"apiVersion: apps/v1"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"kind: Deployment"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"metadata:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  name: user-deployment"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"spec:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"  replicas: 1"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  selector:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    matchLabels:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"      app: user"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"  template:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    metadata:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"      labels:"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        app: user"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    spec:"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"      containers:"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        - name: user"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"          image: b9jmthkk/user"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"          ports:"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"            - name: http"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"              containerPort: 8000"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"          env:"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"            - name: REDIS_HOST"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"              value: redis-cluster-ip-service"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"            - name: DB_LOCAL_URI"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"              value: mongodb://mongo-cluster-ip-service:27017/peerprep"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"            - name: ENV"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"              value: production"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"            - name: PORT"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"              value: \u002780\u0027"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"            - name: ACCESS_TOKEN_SECRET"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"              valueFrom:"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"                secretKeyRef:"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"                  name: access-token-secret"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"                  key: ACCESS_TOKEN_SECRET"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"            - name: REFRESH_TOKEN_SECRET"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"              valueFrom:"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"                secretKeyRef:"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"                  name: refresh-token-secret"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"                  key: REFRESH_TOKEN_SECRET"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"          resources:"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"            requests:"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"              cpu: 8m"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"              memory: 100Mi"}],"authorContributionMap":{"tlylt":43}},{"path":"k8s/setup.sh","fileType":"sh","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"## Note: this is for local testing and debugging only, refer to init.sh instead"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"# apply all the yaml files in the directory"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"kubectl apply manifests"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/frontend-deployment.yaml"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/frontend-cluster-ip-service.yaml"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"## Ingress"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/ingress-service.yaml"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"## User Service"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/mongo-deployment.yaml"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/mongo-cluster-ip-service.yaml"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/redis-deployment.yaml"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/redis-cluster-ip-service.yaml"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"kubectl create secret generic access-token-secret --from-literal ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"kubectl create secret generic refresh-token-secret --from-literal REFRESH_TOKEN_SECRET\u003dd094b5d45a93e9b1f9bc6dee9aff27e26bf7a875333db0df955415e87151c16a49a72b6ee85ce483e6a243a0fbf8b93989dc150cacdd970c29053a650d4fb908"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/user-deployment.yaml"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/user-cluster-ip-service.yaml"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"## Question"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"kubectl create secret generic postgres-password --from-literal POSTGRES_PASSWORD\u003dpostgres"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/postgres-deployment.yaml"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/postgres-cluster-ip-service.yaml"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/question-deployment.yaml"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/question-cluster-ip-service.yaml"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"# create secrets required (actual secrets will be different from the following)"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"kubectl create secret generic access-token-secret --from-literal ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"kubectl create secret generic refresh-token-secret --from-literal REFRESH_TOKEN_SECRET\u003dd094b5d45a93e9b1f9bc6dee9aff27e26bf7a875333db0df955415e87151c16a49a72b6ee85ce483e6a243a0fbf8b93989dc150cacdd970c29053a650d4fb908"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"kubectl create secret generic postgres-password --from-literal POSTGRES_PASSWORD\u003dpostgres"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"## Room"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/room-deployment.yaml"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/room-cluster-ip-service.yaml"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"## Matching"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/matching-deployment.yaml"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"kubectl apply -f k8s/manifests/matching-cluster-ip-service.yaml"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"# https required setup"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"# populate question bank"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"# build and push docker images"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"docker build -f Dockerfile.production -t b9jmthkk/frontend ."},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"docker push b9jmthkk/frontend"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"docker build -f Dockerfile -t b9jmthkk/user ."},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"docker push b9jmthkk/user"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"docker build -f Dockerfile -t b9jmthkk/matching ."},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"docker push b9jmthkk/matching"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"docker build -f Dockerfile -t b9jmthkk/question ."},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"docker push b9jmthkk/question"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"docker build -f Dockerfile -t b9jmthkk/room ."},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"docker push b9jmthkk/room"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"# local testing"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"kind create cluster --name kind-1 --config k8s/kind/cluster-config.yaml"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"# clean up"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"kubectl delete -f k8s/manifests/question-deployment.yaml"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"kind delete cluster --name kind-1"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"# logs"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"kubectl logs --selector\u003dapp\u003dquestion"}],"authorContributionMap":{"tlylt":76}},{"path":"matching-service/.dockerignore","fileType":"dockerignore","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"node_modules"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"npm-debug.log"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":".env"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"*.sqlite3"}],"authorContributionMap":{"MarcusTXK":5}},{"path":"matching-service/.env.example","fileType":"example","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"}],"authorContributionMap":{"MarcusTXK":1}},{"path":"matching-service/.env.local","fileType":"local","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"}],"authorContributionMap":{"MarcusTXK":1}},{"path":"matching-service/.env.prod","fileType":"prod","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"POSTGRES_HOST\u003d\u0027host.docker.internal\u0027"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"POSTGRES_USER\u003d\u0027postgres\u0027"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"POSTGRES_DB\u003d\u0027postgres_db\u0027"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"POSTGRES_PASSWORD\u003d\u0027postgres\u0027"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"POSTGRES_PORT\u003d5432"}],"authorContributionMap":{"MarcusTXK":6}},{"path":"matching-service/.gitignore","fileType":"gitignore","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"# See https://help.github.com/articles/ignoring-files/ for more about ignoring files."},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"# dependencies"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"/node_modules"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"/.pnp"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":".pnp.js"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"# testing"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"/coverage"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"# misc"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":".DS_Store"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"*.pem"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"# debug"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"npm-debug.log*"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"yarn-debug.log*"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"yarn-error.log*"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"# sqlite"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"*.sqlite3"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"# env "},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":".env"}],"authorContributionMap":{"MarcusTXK":5,"tlylt":19}},{"path":"matching-service/Dockerfile","fileType":"Dockerfile","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"# Use node alpine image"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"FROM node:14.17.0"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"# Set working directory"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"WORKDIR /app"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"# Copy package-lock.json and package.json"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"COPY package*.json ./"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"# Install node modules"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"RUN npm install --quiet"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"# Copy all files from project excluding node_modules (via .dockerignore)"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"COPY . ."},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"# Expose port "},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"EXPOSE 8001"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"# Exec form to avoid starting a shell session"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"CMD [\"npm\", \"start\"]"}],"authorContributionMap":{"MarcusTXK":15}},{"path":"matching-service/README.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"# Matching Service"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"# Setup environment variables"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"1. Rename `.env.example` to `.env`"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"## Usage"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"1. Install npm packages using `npm install`."},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"2. Set up SQLite database using `npm run db:migrate`."},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"3. Run Matching Service using `npm run dev`."},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"## Docker"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"- Via docker-compose: `docker-compose up --build`"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"- Via docker"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"```bash"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"docker build . -t matching-service"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"docker run -p 8001:8001 -d matching-service"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"```"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"## Continuous integration (CI)"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"- Running automated tests in docker"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"```bash"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"docker-compose -f docker-compose.test.yml up --exit-code-from nodeserver --build"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"```"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"### How to test with Postman"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"1. Run `docker-compose up --build`"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"2. Run postman and create a new WebSocket Request (click the top left New button)"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"   ![image](https://user-images.githubusercontent.com/50147457/188167251-15b4bb10-a4d8-41c2-8727-382224a8ebac.png)"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"3. Choose Socket.io in upper left dropdown, add the url `http://localhost:8001` and the message `{\"difficulty\":\"easy\"}`"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"   ![image](https://user-images.githubusercontent.com/50147457/188167374-825174fd-9d5a-4a04-9256-302ddd14143a.png)"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"4. Select `JSON` and input `matchFind` for the event to emit (image outdated)"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"   ![image](https://user-images.githubusercontent.com/50147457/188168120-c66974f4-b773-4cc2-9954-eee17cc1b1c1.png)"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"5. At the bottom right, add the any [events](https://github.com/CS3219-AY2223S1/cs3219-project-ay2223s1-g58/blob/main/matching-service/const/constants.json) you are interested in:"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"   ![image](https://user-images.githubusercontent.com/50147457/188168182-03431725-bbe2-4537-a0aa-2afb87d99bf4.png)"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"6. Click Send and you should see that the message was emitted to the `match` event, and is is currently `matching`"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"   ![image](https://user-images.githubusercontent.com/50147457/188168685-647fea55-e36b-4802-9fa4-e8a913da478d.png)"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"7. Repeat steps 3 to 6 for a second user. If done right, both users will be matched up, with the room id being emitted to the `matchSuccess` event for both users."},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"   ![image](https://user-images.githubusercontent.com/50147457/188168885-47fa43c9-3779-4e52-83bf-f743733dac89.png)"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":"Note: If the instructions above were unclear, please refer [here](https://blog.postman.com/postman-now-supports-socket-io/) for more instructions on how to setup postman for socket.io. Unfortunately, postman does not currently support exporting of postman collections testing socket.io, so this has to be manually set up by the tester."}],"authorContributionMap":{"MarcusTXK":45,"uyencfi":2}},{"path":"matching-service/config/config.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"require(\"dotenv\").config();"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"const {"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"  POSTGRES_HOST,"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  POSTGRES_USER,"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"  POSTGRES_DB,"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"  POSTGRES_PASSWORD,"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"  POSTGRES_PORT,"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"} \u003d process.env;"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"module.exports \u003d {"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"  LOCAL: {"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"    username: POSTGRES_USER,"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"    password: POSTGRES_PASSWORD,"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"    database: POSTGRES_DB,"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"    host: POSTGRES_HOST,"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"    port: POSTGRES_PORT,"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"    dialect: \"postgres\","},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"  development: {"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"    username: POSTGRES_USER,"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"    password: POSTGRES_PASSWORD,"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"    database: POSTGRES_DB,"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"    host: \"localhost\","},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"    port: 5432,"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"    dialect: \"postgres\","},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"  test: {"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"    username: POSTGRES_USER,"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"    password: POSTGRES_PASSWORD,"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"    database: POSTGRES_DB,"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"    host: POSTGRES_HOST,"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"    port: POSTGRES_PORT,"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"    dialect: \"postgres\","},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"  production: {"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"    username: POSTGRES_USER,"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"    password: POSTGRES_PASSWORD,"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"    database: POSTGRES_DB,"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"    host: POSTGRES_HOST,"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"    port: POSTGRES_PORT,"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"    dialect: \"postgres\","},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"};"}],"authorContributionMap":{"MarcusTXK":44}},{"path":"matching-service/const/constants.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"exports.EVENT_EMIT \u003d {"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"  MATCHING: \"matching\","},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"  MATCH_SUCCESS: \"matchSuccess\","},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"  MATCH_FAIL: \"matchFail\","},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  MATCH_TIMEOUT: \"matchTimeout\","},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"exports.EVENT_LISTEN \u003d {"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"  MATCH_FIND: \"matchFind\","},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"  MATCH_CANCEL: \"matchCancel\","},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"exports.DIFFICULTY \u003d {"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"  EASY: \"easy\","},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"  MEDIUM: \"medium\","},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"  HARD: \"hard\","},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"const roomServiceFallback \u003d"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"  process.env.ENV \u003d\u003d\u003d \"production\" // production means using Docker"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"    ? `http://${process.env.ROOM_SERVICE_HOST}:8022`"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"    : \"http://localhost:8022\";"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"const URI_ROOM_SERVICE \u003d process.env.URI_ROOM_SERVICE || roomServiceFallback;"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"const PREFIX_ROOM_SERVICE \u003d \"/api/v1/room\";"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"exports.URL_ROOM_SERVICE \u003d URI_ROOM_SERVICE + PREFIX_ROOM_SERVICE;"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":30,"author":{"gitId":"uyencfi"},"content":"const historyServiceFallback \u003d"},{"lineNumber":31,"author":{"gitId":"uyencfi"},"content":"  process.env.ENV \u003d\u003d\u003d \"production\""},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"    ? `http://${process.env.HISTORY_SERVICE_HOST}:8080`"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"    : \"http://localhost:8080\";"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"const URI_HISTORY_SERVICE \u003d"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"  process.env.URI_HISTORY_SERVICE || historyServiceFallback;"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"const HISTORY_SERVICE_ROOM_PATH \u003d \"/api/v1/history/room\";"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":38,"author":{"gitId":"uyencfi"},"content":"exports.URL_HISTORY_SERVICE_ROOM_PATH \u003d"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"  URI_HISTORY_SERVICE + HISTORY_SERVICE_ROOM_PATH;"}],"authorContributionMap":{"MarcusTXK":28,"uyencfi":11}},{"path":"matching-service/controller/match-controller.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"const MatchService \u003d require(\"../service/match-service\");"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const { isSocketActive } \u003d require(\"../utils/socket-io\");"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"const { EVENT_EMIT } \u003d require(\"../const/constants\");"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"const { matchDto } \u003d require(\"../dto/match-dto\");"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"exports.findMatch \u003d async function (payload) {"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"  const socket \u003d this;"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"  try {"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"    const { value, error } \u003d matchDto.validate(payload);"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"    if (error) {"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"      throw error;"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"    const match \u003d await MatchService.findByDifficulty("},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"      value.difficulty,"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"      socket.id"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"    );"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"    // no other user with same requirements ready for match, or other user is not active"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"    if (!match || !isSocketActive(match.socketId)) {"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"      // matched but socket inactive"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"      if (match) {"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"        console.log(\"Inactive user found\");"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"        MatchService.deleteMatch(match.socketId);"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"      }"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"      await MatchService.createMatch("},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"        socket.id,"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"        value.difficulty,"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"        socket.userId"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"      );"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"      console.log(EVENT_EMIT.MATCHING);"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"      socket.emit(EVENT_EMIT.MATCHING, {"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"        status: EVENT_EMIT.MATCHING,"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"      });"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"      return;"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"    // TODO additional validations"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"    await MatchService.matchSuccess("},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"      match.socketId,"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"      match.userId,"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"      socket.id,"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"      socket.userId,"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"      value.difficulty"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"    );"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"  } catch (e) {"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"    // TODO add custom error messages"},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"    console.error(e);"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"    console.log(EVENT_EMIT.MATCH_FAIL);"},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":"    socket.emit(EVENT_EMIT.MATCH_FAIL, {"},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"      status: EVENT_EMIT.MATCH_FAIL,"},{"lineNumber":49,"author":{"gitId":"MarcusTXK"},"content":"      error: e.message,"},{"lineNumber":50,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":51,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":52,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":53,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":54,"author":{"gitId":"MarcusTXK"},"content":"exports.cancelMatch \u003d async function () {"},{"lineNumber":55,"author":{"gitId":"MarcusTXK"},"content":"  const socket \u003d this;"},{"lineNumber":56,"author":{"gitId":"MarcusTXK"},"content":"  console.log(\"Cancel Match\");"},{"lineNumber":57,"author":{"gitId":"MarcusTXK"},"content":"  MatchService.deleteMatch(socket.id);"},{"lineNumber":58,"author":{"gitId":"MarcusTXK"},"content":"};"}],"authorContributionMap":{"MarcusTXK":58}},{"path":"matching-service/docker-compose.test.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"version: \"3.8\""},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"services:"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"  postgres_db:"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"    image: postgres:latest"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"    restart: always"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"    ports:"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"      - \"5432:5432\""},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"    healthcheck:"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"      test: [\"CMD\", \"pg_isready\", \"-q\", \"-d\", \"postgres_db\", \"-U\", \"postgres\"]"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"      interval: 5s"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"      timeout: 5s"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"      retries: 5"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"    environment:"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_PASSWORD: postgres"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_DB: postgres_db"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_USER: postgres"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_HOST: postgres_db"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_PORT: 5432"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"  nodeserver:"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"    build:"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"      context: ."},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"    ports:"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"      - \"8001:8001\""},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"    depends_on:"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"      postgres_db:"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"        condition: service_healthy"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"    restart: on-failure"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"    links:"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"      - postgres_db"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"    env_file:"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"      - .env.prod"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"    environment:"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"      ENV: production"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"      HISTORY_SERVICE_HOST: host.docker.internal"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"      QUESTION_SERVICE_HOST: host.docker.internal"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_PASSWORD: postgres"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_DB: postgres_db"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_USER: postgres"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_HOST: postgres_db"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_PORT: 5432"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"    command: npm run test:ci"}],"authorContributionMap":{"MarcusTXK":43}},{"path":"matching-service/docker-compose.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"version: \"3.8\""},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"services:"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"  postgres_db:"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"    image: postgres:latest"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"    restart: always"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"    ports:"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"      - \"5432:5432\""},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"    healthcheck:"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"      test: [\"CMD\", \"pg_isready\", \"-q\", \"-d\", \"postgres_db\", \"-U\", \"postgres\"]"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"      interval: 5s"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"      timeout: 5s"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"      retries: 5"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"    environment:"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_PASSWORD: postgres"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_DB: postgres_db"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_USER: postgres"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_HOST: postgres_db"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_PORT: 5432"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"  nodeserver:"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"    build:"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"      context: ."},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"    ports:"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"      - \"8001:8001\""},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"    depends_on:"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"      postgres_db:"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"        condition: service_healthy"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"    restart: on-failure"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"    links:"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"      - postgres_db"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"    env_file:"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"      - .env.prod"},{"lineNumber":34,"author":{"gitId":"uyencfi"},"content":"    environment:"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"      ENV: production"},{"lineNumber":36,"author":{"gitId":"uyencfi"},"content":"      HISTORY_SERVICE_HOST: host.docker.internal"},{"lineNumber":37,"author":{"gitId":"uyencfi"},"content":"      QUESTION_SERVICE_HOST: host.docker.internal"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_PASSWORD: postgres"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_DB: postgres_db"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_USER: postgres"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_HOST: postgres_db"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_PORT: 5432"}],"authorContributionMap":{"MarcusTXK":38,"uyencfi":4}},{"path":"matching-service/dto/match-dto.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"const Joi \u003d require(\"joi\");"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const { DIFFICULTY } \u003d require(\"../const/constants\");"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"exports.matchDto \u003d Joi.object({"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  difficulty: Joi.string()"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"    .valid(...Object.values(DIFFICULTY))"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"    .error(new Error(\"Invalid/missing difficulty\"))"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"    .required(),"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"  type: Joi.string(),"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"});"}],"authorContributionMap":{"MarcusTXK":10}},{"path":"matching-service/index.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"const express \u003d require(\"express\");"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const cors \u003d require(\"cors\");"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"const { createServer } \u003d require(\"http\");"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"const { initSocket } \u003d require(\"./utils/socket-io\");"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"const { findMatch, cancelMatch } \u003d require(\"./controller/match-controller\");"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"require(\"dotenv\").config();"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"const app \u003d express();"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"app.use(express.urlencoded({ extended: true }));"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"app.use(express.json());"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"if (process.env.ENV \u003d\u003d\u003d \"production\") {"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"  app.use(cors());"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"  app.options(\"*\", cors());"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"} else {"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"  app.use("},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    cors({"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"      origin: `http://localhost:${process.env.PORT || 3000}`,"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"      credentials: true,"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"    })"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"  );"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"app.get(\"/\", (req, res) \u003d\u003e {"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"  res.send(\"Hello World from matching-service\");"},{"lineNumber":26,"author":{"gitId":"-"},"content":"});"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"const httpServer \u003d createServer(app);"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"initSocket(httpServer, findMatch, cancelMatch);"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"httpServer.listen(8001);"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"module.exports \u003d app;"}],"authorContributionMap":{"MarcusTXK":16,"tlylt":10,"-":7}},{"path":"matching-service/migrations/20220901090816-create-match.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"/* eslint-disable no-unused-vars */"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"module.exports \u003d {"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"  async up(queryInterface, Sequelize) {"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"    await queryInterface.createTable(\"Matches\", {"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"      id: {"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"        allowNull: false,"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"        autoIncrement: true,"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"        primaryKey: true,"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"        type: Sequelize.INTEGER,"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"      socket_id: {"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"        type: Sequelize.STRING,"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"        allowNull: false,"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"        unique: true,"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"      difficulty: {"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"        type: Sequelize.STRING,"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"      user_id: {"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"        type: Sequelize.STRING,"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"        allowNull: false,"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"        unique: true,"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"      createdAt: {"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"        allowNull: false,"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"        type: Sequelize.DATE,"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"      updatedAt: {"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"        allowNull: false,"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"        type: Sequelize.DATE,"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"  async down(queryInterface, Sequelize) {"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"    await queryInterface.dropTable(\"Matches\");"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"};"}],"authorContributionMap":{"MarcusTXK":37}},{"path":"matching-service/models/index.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"/* eslint-disable import/no-dynamic-require */"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const fs \u003d require(\"fs\");"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"const path \u003d require(\"path\");"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"const Sequelize \u003d require(\"sequelize\");"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"const basename \u003d path.basename(__filename);"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"const env \u003d process.env.ENV || \"development\";"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"const config \u003d require(`${__dirname}/../config/config.js`)[env];"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"const db \u003d {};"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"const sequelize \u003d new Sequelize(config);"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"fs.readdirSync(__dirname)"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"  .filter("},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"    (file) \u003d\u003e"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"      file.indexOf(\".\") !\u003d\u003d 0 \u0026\u0026 file !\u003d\u003d basename \u0026\u0026 file.slice(-3) \u003d\u003d\u003d \".js\""},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"  )"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"  .forEach((file) \u003d\u003e {"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"    // eslint-disable-next-line global-require"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"    const model \u003d require(path.join(__dirname, file))("},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"      sequelize,"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"      Sequelize.DataTypes"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"    );"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"    db[model.name] \u003d model;"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"Object.keys(db).forEach((modelName) \u003d\u003e {"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"  if (db[modelName].associate) {"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"    db[modelName].associate(db);"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"});"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"db.sequelize \u003d sequelize;"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"db.Sequelize \u003d Sequelize;"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"module.exports \u003d db;"}],"authorContributionMap":{"MarcusTXK":35,"Hzxin":1}},{"path":"matching-service/models/match.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"/* eslint-disable no-unused-vars */"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const { Model } \u003d require(\"sequelize\");"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"module.exports \u003d (sequelize, DataTypes) \u003d\u003e {"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  class Match extends Model {"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"    /**"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"     * Helper method for defining associations."},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"     * This method is not a part of Sequelize lifecycle."},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"     * The `models/index` file will call this method automatically."},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"     */"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"    static associate(models) {"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"      // define association here"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"  Match.init("},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"    {"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"      id: {"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"        type: DataTypes.INTEGER,"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"        autoIncrement: true,"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"        primaryKey: true,"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"      socketId: {"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"        type: DataTypes.STRING,"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"        field: \"socket_id\","},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"      difficulty: {"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"        type: DataTypes.STRING,"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"      userId: {"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"        type: DataTypes.STRING,"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"        field: \"user_id\","},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"    },"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"    {"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"      sequelize,"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"      modelName: \"Match\","},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"  );"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"  return Match;"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"};"}],"authorContributionMap":{"MarcusTXK":40}},{"path":"matching-service/repository/match-repository.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"const Sequelize \u003d require(\"sequelize\");"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const db \u003d require(\"../models/index\");"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"const MatchRepository \u003d {"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  findByDifficulty: function (difficulty, socketId) {"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"    return db.Match.findOne({"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"      where: {"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"        difficulty,"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"        socketId: {"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"          [Sequelize.Op.ne]: socketId,"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"        },"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"  findBySocketId: function (socketId) {"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"    return db.Match.findOne({"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"      where: {"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"        socketId,"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"  findById: function (id) {"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"    return db.Match.findOne({"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"      where: {"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"        id,"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"  create: function (socketId, difficulty, userId) {"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"    return db.Match.create({ socketId, difficulty, userId });"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"  deleteBySocketId: function (socketId) {"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"    return db.Match.destroy({"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"      where: {"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"        socketId,"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"  deleteById: function (id) {"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"    return db.Match.destroy({"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"      where: {"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"        id,"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"module.exports \u003d MatchRepository;"}],"authorContributionMap":{"MarcusTXK":48}},{"path":"matching-service/service/match-service.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"const schedule \u003d require(\"node-schedule\");"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const axios \u003d require(\"axios\").default;"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"const nanoid \u003d require(\"nanoid\");"},{"lineNumber":4,"author":{"gitId":"uyencfi"},"content":""},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"const MatchRepository \u003d require(\"../repository/match-repository\");"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"const { sendMessageToOne, sendMessageToBoth } \u003d require(\"../utils/socket-io\");"},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"const {"},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"  EVENT_EMIT,"},{"lineNumber":9,"author":{"gitId":"uyencfi"},"content":"  URL_ROOM_SERVICE,"},{"lineNumber":10,"author":{"gitId":"uyencfi"},"content":"  URL_HISTORY_SERVICE_ROOM_PATH,"},{"lineNumber":11,"author":{"gitId":"uyencfi"},"content":"} \u003d require(\"../const/constants\");"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"const MATCH_TIMEOUT_SECONDS \u003d 30;"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"const MATCH_TIMEOUT \u003d MATCH_TIMEOUT_SECONDS * 1000;"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"const scheduleTimeout \u003d (id, socketId) \u003d\u003e {"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"  const date \u003d new Date();"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"  schedule.scheduleJob(new Date(date.getTime() + MATCH_TIMEOUT), async () \u003d\u003e {"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"    const match \u003d await MatchRepository.findById(id);"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"    console.log(\"30s after match, is match found? \", match !\u003d null);"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"    if (match !\u003d null) {"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"      MatchRepository.deleteById(id);"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"      console.log(EVENT_EMIT.MATCH_TIMEOUT);"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"      sendMessageToOne("},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"        socketId,"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"        EVENT_EMIT.MATCH_TIMEOUT,"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"        `Match timeout after ${MATCH_TIMEOUT_SECONDS}s`"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"      );"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"const MatchService \u003d {"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"  findByDifficulty: function (difficulty, socketId) {"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"    return MatchRepository.findByDifficulty(difficulty, socketId);"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"  createMatch: async function (socketId, difficulty, userId) {"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"    const created \u003d await MatchRepository.create(socketId, difficulty, userId);"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"    scheduleTimeout(created.id, socketId);"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"    return created;"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"  deleteMatch: function (socketId) {"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"    return MatchRepository.deleteBySocketId(socketId);"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"  matchSuccess: async function ("},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"    socketIdWaiting,"},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":"    userWaiting,"},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"    socketIdNew,"},{"lineNumber":49,"author":{"gitId":"MarcusTXK"},"content":"    userNew,"},{"lineNumber":50,"author":{"gitId":"MarcusTXK"},"content":"    difficulty"},{"lineNumber":51,"author":{"gitId":"MarcusTXK"},"content":"  ) {"},{"lineNumber":52,"author":{"gitId":"uyencfi"},"content":"    await MatchService.deleteMatch(socketIdWaiting);"},{"lineNumber":53,"author":{"gitId":"MarcusTXK"},"content":"    console.log(EVENT_EMIT.MATCH_SUCCESS);"},{"lineNumber":54,"author":{"gitId":"MarcusTXK"},"content":"    const roomId \u003d nanoid(7) + new Date().getTime();"},{"lineNumber":55,"author":{"gitId":"uyencfi"},"content":"    // Record match history in History Service. Will throw an error (400 response) if the roomId is a duplicate"},{"lineNumber":56,"author":{"gitId":"uyencfi"},"content":"    await axios.post(URL_HISTORY_SERVICE_ROOM_PATH, {"},{"lineNumber":57,"author":{"gitId":"uyencfi"},"content":"      roomId,"},{"lineNumber":58,"author":{"gitId":"uyencfi"},"content":"      u1: userWaiting,"},{"lineNumber":59,"author":{"gitId":"uyencfi"},"content":"      u2: userNew,"},{"lineNumber":60,"author":{"gitId":"uyencfi"},"content":"    });"},{"lineNumber":61,"author":{"gitId":"uyencfi"},"content":"    // Create room in Room Service"},{"lineNumber":62,"author":{"gitId":"MarcusTXK"},"content":"    await axios.post(URL_ROOM_SERVICE, {"},{"lineNumber":63,"author":{"gitId":"MarcusTXK"},"content":"      roomId,"},{"lineNumber":64,"author":{"gitId":"MarcusTXK"},"content":"      userId1: userWaiting,"},{"lineNumber":65,"author":{"gitId":"MarcusTXK"},"content":"      userId2: userNew,"},{"lineNumber":66,"author":{"gitId":"MarcusTXK"},"content":"      difficulty,"},{"lineNumber":67,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":68,"author":{"gitId":"MarcusTXK"},"content":"    console.log(`Created room ${roomId} for ${userWaiting} and ${userNew}`);"},{"lineNumber":69,"author":{"gitId":"uyencfi"},"content":"    sendMessageToBoth(socketIdWaiting, socketIdNew, EVENT_EMIT.MATCH_SUCCESS, {"},{"lineNumber":70,"author":{"gitId":"MarcusTXK"},"content":"      status: EVENT_EMIT.MATCH_SUCCESS,"},{"lineNumber":71,"author":{"gitId":"MarcusTXK"},"content":"      room: roomId,"},{"lineNumber":72,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":73,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":74,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":75,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":76,"author":{"gitId":"MarcusTXK"},"content":"module.exports \u003d MatchService;"}],"authorContributionMap":{"MarcusTXK":61,"uyencfi":15}},{"path":"matching-service/test/index.spec.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"/* eslint-disable node/no-unpublished-require */"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"/* eslint-disable no-undef */"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"const request \u003d require(\"supertest\");"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"const app \u003d require(\"../index\");"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"describe(\"Get service status\", () \u003d\u003e {"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"  it(\"responds Hello World\", (done) \u003d\u003e {"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"    request(app)"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"      .get(`/`)"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"      .expect(200, \"Hello World from matching-service\", done);"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"});"}],"authorContributionMap":{"MarcusTXK":13}},{"path":"matching-service/utils/socket-io.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"/* eslint-disable no-param-reassign */"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const { Server } \u003d require(\"socket.io\");"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"const jwt \u003d require(\"jsonwebtoken\");"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"const { EVENT_LISTEN } \u003d require(\"../const/constants\");"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"let io;"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"exports.initSocket \u003d (httpServer, matchHandler, cancelHandler) \u003d\u003e {"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"  io \u003d new Server(httpServer, {"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"    cors: {"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"      origin: \"*\","},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"      methods: [\"GET\", \"POST\"],"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"    },"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"  io.path(\"/socket.io/matching\");"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"  io.use((socket, next) \u003d\u003e {"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"    try {"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"      const { token } \u003d socket.handshake.auth;"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"      // TODO update to verify when expired token is fixed"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"      const payload \u003d jwt.decode(token, process.env.ACCESS_TOKEN_SECRET);"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"      console.log(\"middleware payload\", payload);"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"      socket.userId \u003d payload.username;"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"      next();"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"    } catch (e) {"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"      console.log(e);"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"      next(e);"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"  io.on(\"connection\", (socket) \u003d\u003e {"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"    socket.on(EVENT_LISTEN.MATCH_FIND, matchHandler);"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"    socket.on(EVENT_LISTEN.MATCH_CANCEL, cancelHandler);"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"exports.sendMessageToBoth \u003d (firstSocket, secondSocket, event, message) \u003d\u003e"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"  io.to(firstSocket).to(secondSocket).emit(event, message);"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"exports.sendMessageToOne \u003d (socket, event, message) \u003d\u003e"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"  io.to(socket).emit(event, message);"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"exports.emit \u003d (event, message) \u003d\u003e io.emit(event, message);"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"exports.isSocketActive \u003d (socket) \u003d\u003e"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"  io.sockets.sockets.get(socket) !\u003d\u003d undefined;"}],"authorContributionMap":{"MarcusTXK":43}},{"path":"question-service/.dockerignore","fileType":"dockerignore","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"node_modules"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"npm-debug.log"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":".env"}],"authorContributionMap":{"Hzxin":4}},{"path":"question-service/.env.prod","fileType":"prod","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"POSTGRES_HOST\u003d\u0027postgres_db\u0027"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"POSTGRES_USER\u003d\u0027postgres\u0027"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"POSTGRES_DB\u003d\u0027postgres_db\u0027"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"POSTGRES_PASSWORD\u003d\u0027postgres\u0027"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"POSTGRES_PORT\u003d5432"}],"authorContributionMap":{"Hzxin":5}},{"path":"question-service/.env.sample","fileType":"sample","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"POSTGRES_HOST\u003d\u0027localhost\u0027"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"POSTGRES_USER\u003d\u0027postgres\u0027"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"POSTGRES_DB\u003d\u0027postgres_db\u0027"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"POSTGRES_PASSWORD\u003d\u0027postgres\u0027"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"POSTGRES_PORT\u003d5432"}],"authorContributionMap":{"Hzxin":5}},{"path":"question-service/.eslintignore","fileType":"eslintignore","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"node_modules/*"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"package-lock.json"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"migrations/*"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"seeders/*"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"test/*"}],"authorContributionMap":{"Hzxin":5}},{"path":"question-service/.gitignore","fileType":"gitignore","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"# See https://help.github.com/articles/ignoring-files/ for more about ignoring files."},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"# dependencies"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"/node_modules"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"/.pnp"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":".pnp.js"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"# testing"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"/coverage"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"# misc"},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":".DS_Store"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"*.pem"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"# debug"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"npm-debug.log*"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"yarn-debug.log*"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"yarn-error.log*"},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"# local env files"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":".env"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":".env.local"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":".env.development.local"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":".env.test.local"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":".env.production.local"}],"authorContributionMap":{"Hzxin":25}},{"path":"question-service/Dockerfile","fileType":"Dockerfile","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"# Use node alpine image"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"FROM node:14.17.0"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"# Create app directory"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"WORKDIR /app"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"# Copy package-lock.json and package.json"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"COPY package*.json ./"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"# Install node modules"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"RUN npm install --quiet"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"# Copy all files from project excluding node_modules (via .dockerignore)"},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"COPY . ."},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"# Expose port "},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"EXPOSE 8500"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"# Exec form to avoid starting a shell session"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"CMD [\"npm\", \"start\"]"}],"authorContributionMap":{"Hzxin":17}},{"path":"question-service/README.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"# Question service"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"## Usage"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"1. Rename .env.sample to .env"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"2. Install npm packages using `npm install`."},{"lineNumber":7,"author":{"gitId":"uyencfi"},"content":"3. Ensure postgresdb is available locally."},{"lineNumber":8,"author":{"gitId":"uyencfi"},"content":"4. Run Question Service using `npm run dev`."},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"## Docker"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"-   Via docker-compose: `docker-compose up --build`"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"Then visit `http://localhost:8500/api/question` to see that hello world!"}],"authorContributionMap":{"Hzxin":12,"uyencfi":2}},{"path":"question-service/config/config.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"require(\u0027dotenv\u0027).config()"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"const { POSTGRES_HOST, POSTGRES_USER,POSTGRES_DB, POSTGRES_PASSWORD, POSTGRES_PORT } \u003d process.env;"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"module.exports \u003d "},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"{   "},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"    LOCAL: {"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"        username: POSTGRES_USER,"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"        password: POSTGRES_PASSWORD,"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"        database: POSTGRES_DB,"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"        host: POSTGRES_HOST,"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"        port: POSTGRES_PORT,"},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"        dialect: \u0027postgres\u0027,"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"    development: {"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"        username: POSTGRES_USER,"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"        password: POSTGRES_PASSWORD,"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"        database: POSTGRES_DB,"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"        host: \"localhost\","},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"        port: 5432,"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"        dialect: \u0027postgres\u0027,"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"    test: {"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"        username: POSTGRES_USER,"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"        password: POSTGRES_PASSWORD,"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"        database: POSTGRES_DB,"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"        host: POSTGRES_HOST,"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"        port: POSTGRES_PORT,"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"        dialect: \u0027postgres\u0027,"},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":"    production: {"},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"        username: POSTGRES_USER,"},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"        password: POSTGRES_PASSWORD,"},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":"        database: POSTGRES_DB,"},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"        host: POSTGRES_HOST,"},{"lineNumber":35,"author":{"gitId":"Hzxin"},"content":"        port: POSTGRES_PORT,"},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":"        dialect: \u0027postgres\u0027,"},{"lineNumber":37,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"Hzxin"},"content":"}"}],"authorContributionMap":{"Hzxin":38}},{"path":"question-service/controller/question-controller.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"const QuestionRepository \u003d require(\u0027../repository/question-repository\u0027)"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"const CategoryRepository \u003d require(\u0027../repository/category-repository\u0027)"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"async function createQuestion(req, res) {"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"    try {"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"        const { name, type, content, difficulty } \u003d req.body"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"        if (name \u0026\u0026 content \u0026\u0026 difficulty) {"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"            difficulty.toLowerCase()"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"            const question \u003d await QuestionRepository.create(name, content)"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"            await CategoryRepository.create(question.id, difficulty, type)"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"            return res"},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"                .status(201)"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"                .json({ message: \u0027Create new question successfully!\u0027 })"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"        } else {"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"            return res.status(400).json({"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"                message:"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"                    \u0027Question name, difficulty and/or content are missing!\u0027,"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"            })"},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"    } catch (err) {"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"        return res.status(500).json({"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"            message: \u0027Database failure when creating new question! \u0027 + err,"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"async function getQuestionNames(req, res) {"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"    try {"},{"lineNumber":29,"author":{"gitId":"uyencfi"},"content":"        let { id } \u003d req.query"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"        if (!(id instanceof Array)) {"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"            // If there is only 1 id, the value will not be an array"},{"lineNumber":32,"author":{"gitId":"uyencfi"},"content":"            id \u003d [id]"},{"lineNumber":33,"author":{"gitId":"uyencfi"},"content":"        }"},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"        const questionArray \u003d await QuestionRepository.findQuestionsById(id)"},{"lineNumber":35,"author":{"gitId":"uyencfi"},"content":"        const id2name \u003d {}"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"        questionArray.forEach((q) \u003d\u003e (id2name[q.id] \u003d q.name))"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"        return res.status(200).json({"},{"lineNumber":38,"author":{"gitId":"Hzxin"},"content":"            message: \u0027Question names successfully!\u0027,"},{"lineNumber":39,"author":{"gitId":"uyencfi"},"content":"            data: id2name,"},{"lineNumber":40,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":41,"author":{"gitId":"Hzxin"},"content":"    } catch (err) {"},{"lineNumber":42,"author":{"gitId":"Hzxin"},"content":"        return res.status(500).json({"},{"lineNumber":43,"author":{"gitId":"Hzxin"},"content":"            message: \u0027Database failure when retriving question names! \u0027 + err,"},{"lineNumber":44,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":45,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":47,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":48,"author":{"gitId":"Hzxin"},"content":"async function getAllQuestions(req, res) {"},{"lineNumber":49,"author":{"gitId":"Hzxin"},"content":"    try {"},{"lineNumber":50,"author":{"gitId":"Hzxin"},"content":"        const questions \u003d await QuestionRepository.getAllQuestion()"},{"lineNumber":51,"author":{"gitId":"Hzxin"},"content":"        return res.status(200).json({"},{"lineNumber":52,"author":{"gitId":"Hzxin"},"content":"            message: \u0027All questions retrieved!\u0027,"},{"lineNumber":53,"author":{"gitId":"Hzxin"},"content":"            questions: questions,"},{"lineNumber":54,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":55,"author":{"gitId":"Hzxin"},"content":"    } catch (err) {"},{"lineNumber":56,"author":{"gitId":"Hzxin"},"content":"        return res.status(500).json({"},{"lineNumber":57,"author":{"gitId":"Hzxin"},"content":"            message: \u0027Database failure when retriving all questions! \u0027 + err,"},{"lineNumber":58,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":59,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":61,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":62,"author":{"gitId":"Hzxin"},"content":"async function getAllTypes(req, res) {"},{"lineNumber":63,"author":{"gitId":"Hzxin"},"content":"    try {"},{"lineNumber":64,"author":{"gitId":"Hzxin"},"content":"        const allTypes \u003d await CategoryRepository.getAllTypes()"},{"lineNumber":65,"author":{"gitId":"Hzxin"},"content":"        let union \u003d []"},{"lineNumber":66,"author":{"gitId":"MarcusTXK"},"content":"        allTypes.map("},{"lineNumber":67,"author":{"gitId":"MarcusTXK"},"content":"            (arr) \u003d\u003e (union \u003d Array.from(new Set([...union, ...arr.types])))"},{"lineNumber":68,"author":{"gitId":"Hzxin"},"content":"        )"},{"lineNumber":69,"author":{"gitId":"Hzxin"},"content":"        return res.status(200).json({"},{"lineNumber":70,"author":{"gitId":"Hzxin"},"content":"            message: \u0027All types retrieved!\u0027,"},{"lineNumber":71,"author":{"gitId":"MarcusTXK"},"content":"            types: union,"},{"lineNumber":72,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":73,"author":{"gitId":"Hzxin"},"content":"    } catch (err) {"},{"lineNumber":74,"author":{"gitId":"Hzxin"},"content":"        return res.status(500).json({"},{"lineNumber":75,"author":{"gitId":"Hzxin"},"content":"            message: \u0027Database failure when retriving all questions! \u0027 + err,"},{"lineNumber":76,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":77,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":79,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":80,"author":{"gitId":"Hzxin"},"content":"async function getNextQuestion(req, res) {"},{"lineNumber":81,"author":{"gitId":"Hzxin"},"content":"    try {"},{"lineNumber":82,"author":{"gitId":"Hzxin"},"content":"        var category, question"},{"lineNumber":83,"author":{"gitId":"Hzxin"},"content":"        const { past_id, difficulty, types } \u003d req.query"},{"lineNumber":84,"author":{"gitId":"MarcusTXK"},"content":"        console.log(past_id)"},{"lineNumber":85,"author":{"gitId":"Hzxin"},"content":"        if (!types \u0026\u0026 !difficulty) {"},{"lineNumber":86,"author":{"gitId":"Hzxin"},"content":"            return res"},{"lineNumber":87,"author":{"gitId":"Hzxin"},"content":"                .status(400)"},{"lineNumber":88,"author":{"gitId":"Hzxin"},"content":"                .json({ message: `The difficulty/types is missing!` })"},{"lineNumber":89,"author":{"gitId":"Hzxin"},"content":"        } else if (types) {"},{"lineNumber":90,"author":{"gitId":"Hzxin"},"content":"            category \u003d await CategoryRepository.findNextQuestionOfSameTypes("},{"lineNumber":91,"author":{"gitId":"Hzxin"},"content":"                types,"},{"lineNumber":92,"author":{"gitId":"Hzxin"},"content":"                past_id"},{"lineNumber":93,"author":{"gitId":"Hzxin"},"content":"            )"},{"lineNumber":94,"author":{"gitId":"Hzxin"},"content":"            question \u003d await QuestionRepository.findById(category.questionId)"},{"lineNumber":95,"author":{"gitId":"Hzxin"},"content":"        } else if (difficulty) {"},{"lineNumber":96,"author":{"gitId":"Hzxin"},"content":"            category \u003d"},{"lineNumber":97,"author":{"gitId":"Hzxin"},"content":"                await CategoryRepository.findNextQuestionOfSameDifficulty("},{"lineNumber":98,"author":{"gitId":"Hzxin"},"content":"                    difficulty,"},{"lineNumber":99,"author":{"gitId":"Hzxin"},"content":"                    past_id"},{"lineNumber":100,"author":{"gitId":"Hzxin"},"content":"                )"},{"lineNumber":101,"author":{"gitId":"Hzxin"},"content":"            question \u003d await QuestionRepository.findById(category.questionId)"},{"lineNumber":102,"author":{"gitId":"Hzxin"},"content":"        } else {"},{"lineNumber":103,"author":{"gitId":"Hzxin"},"content":"            return res.status(400).json({ message: `Unexpected format` })"},{"lineNumber":104,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":105,"author":{"gitId":"Hzxin"},"content":"        return res.status(200).json({"},{"lineNumber":106,"author":{"gitId":"Hzxin"},"content":"            id: question.id,"},{"lineNumber":107,"author":{"gitId":"Hzxin"},"content":"            name: question.name,"},{"lineNumber":108,"author":{"gitId":"Hzxin"},"content":"            content: question.content,"},{"lineNumber":109,"author":{"gitId":"Hzxin"},"content":"            difficulty: category.difficulty,"},{"lineNumber":110,"author":{"gitId":"Hzxin"},"content":"            types: category.types,"},{"lineNumber":111,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":112,"author":{"gitId":"Hzxin"},"content":"    } catch (err) {"},{"lineNumber":113,"author":{"gitId":"Hzxin"},"content":"        return res.status(500).json({"},{"lineNumber":114,"author":{"gitId":"Hzxin"},"content":"            message: \u0027Database failure when retrieving the question! \u0027 + err,"},{"lineNumber":115,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":116,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":117,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":118,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":119,"author":{"gitId":"Hzxin"},"content":"async function getQuestion(req, res) {"},{"lineNumber":120,"author":{"gitId":"Hzxin"},"content":"    try {"},{"lineNumber":121,"author":{"gitId":"Hzxin"},"content":"        const { difficulty, id, types } \u003d req.query"},{"lineNumber":122,"author":{"gitId":"Hzxin"},"content":"        var category, question"},{"lineNumber":123,"author":{"gitId":"Hzxin"},"content":"        if (difficulty) {"},{"lineNumber":124,"author":{"gitId":"Hzxin"},"content":"            category \u003d await CategoryRepository.findByDifficulty(difficulty)"},{"lineNumber":125,"author":{"gitId":"Hzxin"},"content":"            question \u003d await QuestionRepository.findById(category.questionId)"},{"lineNumber":126,"author":{"gitId":"Hzxin"},"content":"        } else if (types) {"},{"lineNumber":127,"author":{"gitId":"Hzxin"},"content":"            category \u003d await CategoryRepository.findByQuestionTypes(types)"},{"lineNumber":128,"author":{"gitId":"Hzxin"},"content":"            question \u003d await QuestionRepository.findById(category.questionId)"},{"lineNumber":129,"author":{"gitId":"Hzxin"},"content":"        } else if (id) {"},{"lineNumber":130,"author":{"gitId":"Hzxin"},"content":"            question \u003d await QuestionRepository.findById(id)"},{"lineNumber":131,"author":{"gitId":"Hzxin"},"content":"            category \u003d await CategoryRepository.findByQuestionId(id)"},{"lineNumber":132,"author":{"gitId":"Hzxin"},"content":"        } else {"},{"lineNumber":133,"author":{"gitId":"Hzxin"},"content":"            return res"},{"lineNumber":134,"author":{"gitId":"Hzxin"},"content":"                .status(400)"},{"lineNumber":135,"author":{"gitId":"Hzxin"},"content":"                .json({ message: `Difficulty/Question ID is missing!` })"},{"lineNumber":136,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":137,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":138,"author":{"gitId":"Hzxin"},"content":"        return res.status(200).json({"},{"lineNumber":139,"author":{"gitId":"Hzxin"},"content":"            id: question.id,"},{"lineNumber":140,"author":{"gitId":"Hzxin"},"content":"            name: question.name,"},{"lineNumber":141,"author":{"gitId":"Hzxin"},"content":"            content: question.content,"},{"lineNumber":142,"author":{"gitId":"Hzxin"},"content":"            difficulty: category.difficulty,"},{"lineNumber":143,"author":{"gitId":"Hzxin"},"content":"            types: category.types,"},{"lineNumber":144,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":145,"author":{"gitId":"Hzxin"},"content":"    } catch (err) {"},{"lineNumber":146,"author":{"gitId":"Hzxin"},"content":"        return res.status(500).json({"},{"lineNumber":147,"author":{"gitId":"Hzxin"},"content":"            message: \u0027Database failure when retrieving the question! \u0027 + err,"},{"lineNumber":148,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":149,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":150,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":151,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":152,"author":{"gitId":"Hzxin"},"content":"async function deleteQuestionById(req, res) {"},{"lineNumber":153,"author":{"gitId":"Hzxin"},"content":"    try {"},{"lineNumber":154,"author":{"gitId":"Hzxin"},"content":"        const { id } \u003d req.query"},{"lineNumber":155,"author":{"gitId":"Hzxin"},"content":"        if (id) {"},{"lineNumber":156,"author":{"gitId":"Hzxin"},"content":"            await QuestionRepository.deleteById(id)"},{"lineNumber":157,"author":{"gitId":"Hzxin"},"content":"            return res"},{"lineNumber":158,"author":{"gitId":"Hzxin"},"content":"                .status(200)"},{"lineNumber":159,"author":{"gitId":"Hzxin"},"content":"                .json({ message: `Question deleted succesfully` })"},{"lineNumber":160,"author":{"gitId":"Hzxin"},"content":"        } else {"},{"lineNumber":161,"author":{"gitId":"Hzxin"},"content":"            return res"},{"lineNumber":162,"author":{"gitId":"Hzxin"},"content":"                .status(400)"},{"lineNumber":163,"author":{"gitId":"Hzxin"},"content":"                .json({ message: \u0027Question id is missing for deletion\u0027 })"},{"lineNumber":164,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":165,"author":{"gitId":"Hzxin"},"content":"    } catch (err) {"},{"lineNumber":166,"author":{"gitId":"Hzxin"},"content":"        return res.status(500).json({"},{"lineNumber":167,"author":{"gitId":"Hzxin"},"content":"            message: \u0027Database failure when retrieving the question! \u0027 + err,"},{"lineNumber":168,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":169,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":170,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":171,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":172,"author":{"gitId":"Hzxin"},"content":"async function updateQuestion(req, res) {"},{"lineNumber":173,"author":{"gitId":"Hzxin"},"content":"    try {"},{"lineNumber":174,"author":{"gitId":"Hzxin"},"content":"        const id \u003d req.body.id"},{"lineNumber":175,"author":{"gitId":"Hzxin"},"content":"        const question \u003d await QuestionRepository.findById(id)"},{"lineNumber":176,"author":{"gitId":"Hzxin"},"content":"        const category \u003d await CategoryRepository.findByQuestionId(id)"},{"lineNumber":177,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":178,"author":{"gitId":"Hzxin"},"content":"        if (req.body?.name) {"},{"lineNumber":179,"author":{"gitId":"Hzxin"},"content":"            question.name \u003d req.body.name"},{"lineNumber":180,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":181,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":182,"author":{"gitId":"Hzxin"},"content":"        if (req.body?.content) {"},{"lineNumber":183,"author":{"gitId":"Hzxin"},"content":"            question.content \u003d req.body.content"},{"lineNumber":184,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":185,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":186,"author":{"gitId":"Hzxin"},"content":"        if (req.body?.difficulty) {"},{"lineNumber":187,"author":{"gitId":"Hzxin"},"content":"            category.difficulty \u003d req.body.difficulty"},{"lineNumber":188,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":189,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":190,"author":{"gitId":"Hzxin"},"content":"        if (req.body?.types) {"},{"lineNumber":191,"author":{"gitId":"Hzxin"},"content":"            category.types \u003d req.body.types"},{"lineNumber":192,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":193,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":194,"author":{"gitId":"Hzxin"},"content":"        await QuestionRepository.update(question)"},{"lineNumber":195,"author":{"gitId":"Hzxin"},"content":"        await CategoryRepository.update(category)"},{"lineNumber":196,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":197,"author":{"gitId":"Hzxin"},"content":"        return res.status(200).json({"},{"lineNumber":198,"author":{"gitId":"Hzxin"},"content":"            message: \u0027Question updated succesfully\u0027,"},{"lineNumber":199,"author":{"gitId":"Hzxin"},"content":"            id: question.id,"},{"lineNumber":200,"author":{"gitId":"Hzxin"},"content":"            name: question.name,"},{"lineNumber":201,"author":{"gitId":"Hzxin"},"content":"            difficulty: category.difficulty,"},{"lineNumber":202,"author":{"gitId":"Hzxin"},"content":"            types: category.types,"},{"lineNumber":203,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":204,"author":{"gitId":"Hzxin"},"content":"    } catch (err) {"},{"lineNumber":205,"author":{"gitId":"Hzxin"},"content":"        return res.status(500).json({"},{"lineNumber":206,"author":{"gitId":"Hzxin"},"content":"            message: \u0027Database failure when retrieving the question! \u0027 + err,"},{"lineNumber":207,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":208,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":209,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":210,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":211,"author":{"gitId":"Hzxin"},"content":"module.exports \u003d {"},{"lineNumber":212,"author":{"gitId":"Hzxin"},"content":"    createQuestion,"},{"lineNumber":213,"author":{"gitId":"Hzxin"},"content":"    getQuestionNames,"},{"lineNumber":214,"author":{"gitId":"Hzxin"},"content":"    getAllQuestions,"},{"lineNumber":215,"author":{"gitId":"Hzxin"},"content":"    getQuestion,"},{"lineNumber":216,"author":{"gitId":"Hzxin"},"content":"    deleteQuestionById,"},{"lineNumber":217,"author":{"gitId":"Hzxin"},"content":"    updateQuestion,"},{"lineNumber":218,"author":{"gitId":"Hzxin"},"content":"    getNextQuestion,"},{"lineNumber":219,"author":{"gitId":"Hzxin"},"content":"    getAllTypes,"},{"lineNumber":220,"author":{"gitId":"Hzxin"},"content":"}"}],"authorContributionMap":{"MarcusTXK":8,"Hzxin":207,"uyencfi":5}},{"path":"question-service/docker-compose.test.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"version: \u00273.3\u0027"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"services:"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"    postgres_db:"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"        image: postgres:latest"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"        restart: always"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"        ports:"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"            - \u00275432:5432\u0027"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"        environment:"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"            POSTGRES_PASSWORD: postgres"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"            POSTGRES_DB: postgres_db"},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"            POSTGRES_USER: postgres"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"            POSTGRES_HOST: postgres_db"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"            POSTGRES_PORT: 5432"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"        healthcheck:"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"            test:"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"                ["},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"                    \u0027CMD\u0027,"},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"                    \u0027pg_isready\u0027,"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"                    \u0027-q\u0027,"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"                    \u0027-d\u0027,"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"                    \u0027postgres_db\u0027,"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"                    \u0027-U\u0027,"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"                    \u0027postgres\u0027,"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"                ]"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"            interval: 5s"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"            timeout: 5s"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"            retries: 5"},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":"    web:"},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":"        build:"},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"            context: ."},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"            dockerfile: Dockerfile"},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":"        ports:"},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"            - \u00278500:8500\u0027"},{"lineNumber":35,"author":{"gitId":"Hzxin"},"content":"        depends_on:"},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":"            postgres_db:"},{"lineNumber":37,"author":{"gitId":"Hzxin"},"content":"                condition: service_healthy"},{"lineNumber":38,"author":{"gitId":"Hzxin"},"content":"        environment:"},{"lineNumber":39,"author":{"gitId":"Hzxin"},"content":"            ENV: test"},{"lineNumber":40,"author":{"gitId":"Hzxin"},"content":"        env_file:"},{"lineNumber":41,"author":{"gitId":"Hzxin"},"content":"            - .env.prod"},{"lineNumber":42,"author":{"gitId":"Hzxin"},"content":"        links:"},{"lineNumber":43,"author":{"gitId":"Hzxin"},"content":"            - postgres_db"},{"lineNumber":44,"author":{"gitId":"Hzxin"},"content":"        restart: on-failure"},{"lineNumber":45,"author":{"gitId":"Hzxin"},"content":"        command: npm run test:ci"}],"authorContributionMap":{"Hzxin":45}},{"path":"question-service/docker-compose.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"version: \u00273.3\u0027"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"services:"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"    postgres_db:"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"        image: postgres:latest"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"        restart: always"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"        ports:"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"            - \u00275432:5432\u0027"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"        environment:"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"            POSTGRES_PASSWORD: postgres"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"            POSTGRES_DB: postgres_db"},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"            POSTGRES_USER: postgres"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"            POSTGRES_HOST: postgres_db"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"            POSTGRES_PORT: 5432"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"        healthcheck:"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"            test:"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"                ["},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"                    \u0027CMD\u0027,"},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"                    \u0027pg_isready\u0027,"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"                    \u0027-q\u0027,"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"                    \u0027-d\u0027,"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"                    \u0027postgres_db\u0027,"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"                    \u0027-U\u0027,"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"                    \u0027postgres\u0027,"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"                ]"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"            interval: 5s"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"            timeout: 5s"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"            retries: 5"},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":"    web:"},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":"        build:"},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"            context: ."},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"            dockerfile: Dockerfile"},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":"        ports:"},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"            - \u00278500:8500\u0027"},{"lineNumber":35,"author":{"gitId":"Hzxin"},"content":"        depends_on:"},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":"            postgres_db:"},{"lineNumber":37,"author":{"gitId":"Hzxin"},"content":"                condition: service_healthy"},{"lineNumber":38,"author":{"gitId":"Hzxin"},"content":"        environment:"},{"lineNumber":39,"author":{"gitId":"Hzxin"},"content":"            ENV: production"},{"lineNumber":40,"author":{"gitId":"Hzxin"},"content":"        env_file:"},{"lineNumber":41,"author":{"gitId":"Hzxin"},"content":"            - .env.prod"},{"lineNumber":42,"author":{"gitId":"Hzxin"},"content":"        links:"},{"lineNumber":43,"author":{"gitId":"Hzxin"},"content":"            - postgres_db"},{"lineNumber":44,"author":{"gitId":"Hzxin"},"content":"        restart: on-failure"}],"authorContributionMap":{"Hzxin":44}},{"path":"question-service/index.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"const express \u003d require(\u0027express\u0027)"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"const cors \u003d require(\u0027cors\u0027)"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"const app \u003d express()"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"app.use(express.urlencoded({ extended: true }))"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"app.use(express.json())"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"if (process.env.ENV \u003d\u003d\u003d \"production\") {"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    app.use(cors())"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    app.options(\"*\", cors());"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"} else {"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    app.use("},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"        cors({"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"            origin: `http://localhost:${process.env.PORT || 3000}`,"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"            credentials: true,"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"        })"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"    )"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"const {"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"    createQuestion,"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"    getQuestion,"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"    deleteQuestionById,"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"    updateQuestion,"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"    getNextQuestion,"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"    getAllQuestions,"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"    getAllTypes,"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"    getQuestionNames,"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"} \u003d require(\u0027./controller/question-controller\u0027)"},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":"const router \u003d express.Router()"},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"// Controller will contain all the User-defined Routes"},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":"router.get(\u0027/status\u0027, (_, res) \u003d\u003e {"},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"    res.status(200).send({ message: \u0027Hello World from question-service\u0027 })"},{"lineNumber":35,"author":{"gitId":"Hzxin"},"content":"})"},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":37,"author":{"gitId":"Hzxin"},"content":"router.get(\u0027\u0027, getQuestion)"},{"lineNumber":38,"author":{"gitId":"Hzxin"},"content":"router.get(\u0027/nextQuestion\u0027, getNextQuestion)"},{"lineNumber":39,"author":{"gitId":"Hzxin"},"content":"router.get(\u0027/allQuestions\u0027, getAllQuestions)"},{"lineNumber":40,"author":{"gitId":"Hzxin"},"content":"router.get(\u0027/questionNames\u0027, getQuestionNames)"},{"lineNumber":41,"author":{"gitId":"Hzxin"},"content":"router.get(\u0027/allTypes\u0027, getAllTypes)"},{"lineNumber":42,"author":{"gitId":"Hzxin"},"content":"router.post(\u0027/\u0027, createQuestion)"},{"lineNumber":43,"author":{"gitId":"Hzxin"},"content":"router.put(\u0027/\u0027, updateQuestion)"},{"lineNumber":44,"author":{"gitId":"Hzxin"},"content":"router.delete(\u0027\u0027, deleteQuestionById)"},{"lineNumber":45,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":46,"author":{"gitId":"Hzxin"},"content":"app.use(\u0027/api/v1/question\u0027, router).all((_, res) \u003d\u003e {"},{"lineNumber":47,"author":{"gitId":"Hzxin"},"content":"    res.setHeader(\u0027content-type\u0027, \u0027application/json\u0027)"},{"lineNumber":48,"author":{"gitId":"Hzxin"},"content":"    res.setHeader(\u0027Access-Control-Allow-Origin\u0027, \u0027*\u0027)"},{"lineNumber":49,"author":{"gitId":"Hzxin"},"content":"})"},{"lineNumber":50,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":51,"author":{"gitId":"Hzxin"},"content":"app.listen(8500, () \u003d\u003e console.log(\u0027question-service listening on port 8500\u0027))"},{"lineNumber":52,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":53,"author":{"gitId":"Hzxin"},"content":"module.exports \u003d app"}],"authorContributionMap":{"Hzxin":42,"tlylt":11}},{"path":"question-service/migrations/20220910135435-create-question.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"\u0027use strict\u0027"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"module.exports \u003d {"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"    async up(queryInterface, Sequelize) {"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"        await queryInterface.createTable(\u0027Questions\u0027, {"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"            id: {"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"                allowNull: false,"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"                autoIncrement: true,"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"                primaryKey: true,"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"                type: Sequelize.INTEGER,"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"            name: {"},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"                type: Sequelize.STRING,"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"                allowNull: false,"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"            content: {"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"                type: Sequelize.TEXT,"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"                allowNull: false,"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"            createdAt: {"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"                allowNull: false,"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"                type: Sequelize.DATE,"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"            updatedAt: {"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"                allowNull: false,"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"                type: Sequelize.DATE,"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":"    async down(queryInterface, Sequelize) {"},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":"        await queryInterface.dropTable(\u0027Questions\u0027)"},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"}"}],"authorContributionMap":{"Hzxin":32}},{"path":"question-service/migrations/20220910135944-create-category.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"\u0027use strict\u0027"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"module.exports \u003d {"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"    async up(queryInterface, Sequelize) {"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"        await queryInterface.createTable(\u0027Categories\u0027, {"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"            id: {"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"                allowNull: false,"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"                autoIncrement: true,"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"                primaryKey: true,"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"                type: Sequelize.INTEGER,"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"            difficulty: {"},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"                type: Sequelize.STRING,"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"                allowNull: false,"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"            types: {"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"                type: Sequelize.ARRAY(Sequelize.STRING),"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"            questionId: {"},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"                type: Sequelize.INTEGER,"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"                allowNull: false,"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"                unique: true,"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"                references: { model: \u0027Questions\u0027, key: \u0027id\u0027 },"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"                onDelete: \u0027cascade\u0027,"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"                onUpdate: \u0027cascade\u0027,"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"            createdAt: {"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"                allowNull: false,"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"                type: Sequelize.DATE,"},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":"            updatedAt: {"},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"                allowNull: false,"},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"                type: Sequelize.DATE,"},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":35,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":"    async down(queryInterface, Sequelize) {"},{"lineNumber":37,"author":{"gitId":"Hzxin"},"content":"        await queryInterface.dropTable(\u0027Categories\u0027)"},{"lineNumber":38,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":39,"author":{"gitId":"Hzxin"},"content":"}"}],"authorContributionMap":{"Hzxin":39}},{"path":"question-service/models/category.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"\u0027use strict\u0027"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"const { Model } \u003d require(\u0027sequelize\u0027)"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"module.exports \u003d (sequelize, DataTypes) \u003d\u003e {"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"    class Category extends Model {"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"        static associate(models) {"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"            Category.belongsTo(models.Question, {"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"                foreignKey: \u0027questionId\u0027,"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"            })"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"    Category.init("},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"        {"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"            difficulty: {"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"                type: DataTypes.STRING,"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"                allowNull: false,"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"            types: {"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"                type: DataTypes.ARRAY(DataTypes.STRING),"},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"                allowNull: true,"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"            questionId: {"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"                type: DataTypes.INTEGER,"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"                allowNull: false,"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"                unique: true,"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"                references: { model: \u0027Questions\u0027, key: \u0027id\u0027 },"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"                onDelete: \u0027cascade\u0027,"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"                onUpdate: \u0027cascade\u0027,"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":"        },"},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":"        {"},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"            sequelize,"},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"            modelName: \u0027Category\u0027,"},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"    )"},{"lineNumber":35,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":"    return Category"},{"lineNumber":37,"author":{"gitId":"Hzxin"},"content":"}"}],"authorContributionMap":{"Hzxin":37}},{"path":"question-service/models/index.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"\u0027use strict\u0027"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"const fs \u003d require(\u0027fs\u0027)"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"const path \u003d require(\u0027path\u0027)"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"const Sequelize \u003d require(\u0027sequelize\u0027)"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"const envConfigs \u003d  require(\u0027../config/config\u0027)"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"const basename \u003d path.basename(__filename)"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"const env \u003d process.env.ENV || \u0027development\u0027;"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"const config \u003d envConfigs[env];"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"const db \u003d {}"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"let sequelize \u003d new Sequelize(config)"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"fs.readdirSync(__dirname)"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"    .filter((file) \u003d\u003e {"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"        return ("},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"            file.indexOf(\u0027.\u0027) !\u003d\u003d 0 \u0026\u0026"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"            file !\u003d\u003d basename \u0026\u0026"},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"            file.slice(-3) \u003d\u003d\u003d \u0027.js\u0027"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"        )"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"    })"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"    .forEach((file) \u003d\u003e {"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"        const model \u003d require(path.join(__dirname, file))("},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"            sequelize,"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"            Sequelize.DataTypes"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"        )"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"        db[model.name] \u003d model"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"    })"},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":"Object.keys(db).forEach((modelName) \u003d\u003e {"},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"    if (db[modelName].associate) {"},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"        db[modelName].associate(db)"},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"})"},{"lineNumber":35,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":"db.sequelize \u003d sequelize"},{"lineNumber":37,"author":{"gitId":"Hzxin"},"content":"db.Sequelize \u003d Sequelize"},{"lineNumber":38,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":39,"author":{"gitId":"Hzxin"},"content":"module.exports \u003d db"}],"authorContributionMap":{"Hzxin":39}},{"path":"question-service/models/question.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"\u0027use strict\u0027"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"const { Model } \u003d require(\u0027sequelize\u0027)"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"module.exports \u003d (sequelize, DataTypes) \u003d\u003e {"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"    class Question extends Model {"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"        static associate(models) {"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"            Question.hasOne(models.Category, {"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"                foreignKey: \u0027questionId\u0027,"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"            })"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"    }"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"    Question.init("},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"        {"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"            name: {"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"                type: DataTypes.STRING,"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"                allowNull: false,"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"            content: {"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"                type: DataTypes.TEXT,"},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"                allowNull: false,"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"        },"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"        {"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"            sequelize,"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"            modelName: \u0027Question\u0027,"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"    )"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"    return Question"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"}"}],"authorContributionMap":{"Hzxin":28}},{"path":"question-service/repository/category-repository.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"const db \u003d require(\u0027../models\u0027)"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"const { Op } \u003d require(\u0027sequelize\u0027)"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"const CategoryRepository \u003d {"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"    create: function (id, difficulty, type) {"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"        return db.Category.create({"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"            difficulty: difficulty,"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"            types: type,"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"            questionId: id,"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"    findByDifficulty: function (difficulty) {"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"        return db.Category.findOne({"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"            where: {"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"                difficulty: difficulty,"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"            order: db.sequelize.random(),"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"            limit: 1,"},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"    findByQuestionId: function (id) {"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"        return db.Category.findOne({"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"            where: {"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"                questionId: id,"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"    findByQuestionTypes: function (types) {"},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":"        if (!Array.isArray(types)) {"},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":"            types \u003d [types]"},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"        return db.Category.findOne({"},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":"            where: {"},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"                types: {"},{"lineNumber":35,"author":{"gitId":"Hzxin"},"content":"                    [Op.overlap]: types,"},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":"                },"},{"lineNumber":37,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":38,"author":{"gitId":"Hzxin"},"content":"            order: db.sequelize.random(),"},{"lineNumber":39,"author":{"gitId":"Hzxin"},"content":"            limit: 1,"},{"lineNumber":40,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":41,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":42,"author":{"gitId":"Hzxin"},"content":"    update: function (category) {"},{"lineNumber":43,"author":{"gitId":"Hzxin"},"content":"        return db.Category.update("},{"lineNumber":44,"author":{"gitId":"Hzxin"},"content":"            {"},{"lineNumber":45,"author":{"gitId":"Hzxin"},"content":"                difficulty: category.difficulty,"},{"lineNumber":46,"author":{"gitId":"Hzxin"},"content":"                types: category.types,"},{"lineNumber":47,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":48,"author":{"gitId":"Hzxin"},"content":"            {"},{"lineNumber":49,"author":{"gitId":"Hzxin"},"content":"                where: {"},{"lineNumber":50,"author":{"gitId":"Hzxin"},"content":"                    questionId: category.questionId,"},{"lineNumber":51,"author":{"gitId":"Hzxin"},"content":"                },"},{"lineNumber":52,"author":{"gitId":"Hzxin"},"content":"            }"},{"lineNumber":53,"author":{"gitId":"Hzxin"},"content":"        )"},{"lineNumber":54,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":55,"author":{"gitId":"Hzxin"},"content":"    findNextQuestionOfSameDifficulty: function (difficulty, id) {"},{"lineNumber":56,"author":{"gitId":"Hzxin"},"content":"        // filter out questions in id"},{"lineNumber":57,"author":{"gitId":"Hzxin"},"content":"        const numberIds \u003d []"},{"lineNumber":58,"author":{"gitId":"Hzxin"},"content":"        console.log(id)"},{"lineNumber":59,"author":{"gitId":"Hzxin"},"content":"        for (var i \u003d 0; i \u003c id.length; i++) {"},{"lineNumber":60,"author":{"gitId":"Hzxin"},"content":"            numberIds.push(parseInt(id[i]))"},{"lineNumber":61,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":62,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":63,"author":{"gitId":"Hzxin"},"content":"        return db.Category.findOne({"},{"lineNumber":64,"author":{"gitId":"Hzxin"},"content":"            where: {"},{"lineNumber":65,"author":{"gitId":"Hzxin"},"content":"                difficulty: difficulty,"},{"lineNumber":66,"author":{"gitId":"Hzxin"},"content":"                questionId: {"},{"lineNumber":67,"author":{"gitId":"Hzxin"},"content":"                    [Op.notIn]: numberIds,"},{"lineNumber":68,"author":{"gitId":"Hzxin"},"content":"                },"},{"lineNumber":69,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":70,"author":{"gitId":"Hzxin"},"content":"            order: db.sequelize.random(),"},{"lineNumber":71,"author":{"gitId":"Hzxin"},"content":"            limit: 1,"},{"lineNumber":72,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":73,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":74,"author":{"gitId":"Hzxin"},"content":"    findNextQuestionOfSameTypes: function (types, id) {"},{"lineNumber":75,"author":{"gitId":"Hzxin"},"content":"        const numberIds \u003d []"},{"lineNumber":76,"author":{"gitId":"Hzxin"},"content":"        for (var i \u003d 0; i \u003c id.length; i++) {"},{"lineNumber":77,"author":{"gitId":"Hzxin"},"content":"            numberIds.push(parseInt(id[i]))"},{"lineNumber":78,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":79,"author":{"gitId":"Hzxin"},"content":"        if (!Array.isArray(types)) {"},{"lineNumber":80,"author":{"gitId":"Hzxin"},"content":"            types \u003d [types]"},{"lineNumber":81,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":82,"author":{"gitId":"Hzxin"},"content":"        console.log(types)"},{"lineNumber":83,"author":{"gitId":"Hzxin"},"content":"        return db.Category.findOne({"},{"lineNumber":84,"author":{"gitId":"Hzxin"},"content":"            where: {"},{"lineNumber":85,"author":{"gitId":"Hzxin"},"content":"                types: {"},{"lineNumber":86,"author":{"gitId":"Hzxin"},"content":"                    [Op.overlap]: types,"},{"lineNumber":87,"author":{"gitId":"Hzxin"},"content":"                },"},{"lineNumber":88,"author":{"gitId":"Hzxin"},"content":"                questionId: {"},{"lineNumber":89,"author":{"gitId":"Hzxin"},"content":"                    [Op.notIn]: id,"},{"lineNumber":90,"author":{"gitId":"Hzxin"},"content":"                },"},{"lineNumber":91,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":92,"author":{"gitId":"Hzxin"},"content":"            order: db.sequelize.random(),"},{"lineNumber":93,"author":{"gitId":"Hzxin"},"content":"            limit: 1,"},{"lineNumber":94,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":95,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":96,"author":{"gitId":"Hzxin"},"content":"    getAllTypes: function () {"},{"lineNumber":97,"author":{"gitId":"Hzxin"},"content":"        return db.Category.findAll({"},{"lineNumber":98,"author":{"gitId":"Hzxin"},"content":"            distinct: true,"},{"lineNumber":99,"author":{"gitId":"Hzxin"},"content":"            attributes: [\u0027types\u0027]"},{"lineNumber":100,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":101,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":102,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":103,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":104,"author":{"gitId":"Hzxin"},"content":"module.exports \u003d CategoryRepository"}],"authorContributionMap":{"Hzxin":104}},{"path":"question-service/repository/question-repository.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"const db \u003d require(\u0027../models\u0027)"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"const { Op } \u003d require(\u0027sequelize\u0027)"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"const QuestionRepository \u003d {"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"    findById: function (id) {"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"        return db.Question.findOne({"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"            where: {"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"                id: id,"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"    findQuestionsById: function(ids) {"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"        return db.Question.findAll({"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"            attributes: [\u0027id\u0027, \u0027name\u0027],"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"            where: {"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"                id: {"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"                    [Op.in]: ids,"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"                }"},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"            }"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"    create: function (name, content) {"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"        return db.Question.create({"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"            name: name,"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"            content: content,"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"    deleteById: function (id) {"},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":"        return db.Question.destroy({"},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":"            where: {"},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"                id: id,"},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":35,"author":{"gitId":"Hzxin"},"content":"    update: function (question) {"},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":"        return db.Question.update("},{"lineNumber":37,"author":{"gitId":"Hzxin"},"content":"            {"},{"lineNumber":38,"author":{"gitId":"Hzxin"},"content":"                name: question.name,"},{"lineNumber":39,"author":{"gitId":"Hzxin"},"content":"                content: question.content,"},{"lineNumber":40,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":41,"author":{"gitId":"Hzxin"},"content":"            { where: { id: question.id } }"},{"lineNumber":42,"author":{"gitId":"Hzxin"},"content":"        )"},{"lineNumber":43,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":44,"author":{"gitId":"Hzxin"},"content":"    getRandomQuestion: function () {"},{"lineNumber":45,"author":{"gitId":"Hzxin"},"content":"        return db.Question.findAll({"},{"lineNumber":46,"author":{"gitId":"Hzxin"},"content":"            order: db.sequelize.random(),"},{"lineNumber":47,"author":{"gitId":"Hzxin"},"content":"            limit: 1,"},{"lineNumber":48,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":49,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":50,"author":{"gitId":"Hzxin"},"content":"    getAllQuestion: function () {"},{"lineNumber":51,"author":{"gitId":"Hzxin"},"content":"        return db.Question.findAll({"},{"lineNumber":52,"author":{"gitId":"Hzxin"},"content":"            distinct: true,"},{"lineNumber":53,"author":{"gitId":"Hzxin"},"content":"            include: [db.Category],"},{"lineNumber":54,"author":{"gitId":"Hzxin"},"content":"        })"},{"lineNumber":55,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":56,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":57,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":58,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":59,"author":{"gitId":"Hzxin"},"content":"module.exports \u003d QuestionRepository"}],"authorContributionMap":{"Hzxin":59}},{"path":"question-service/requests.rest","fileType":"rest","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"### CHECK SERVER ALIVE"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"GET http://localhost:8500/api/v1/question/status"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"### CREATE QUESTION"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"POST http://localhost:8500/api/v1/question"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"Content-Type: application/json"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"{"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"    \"name\":\"Two Sum\","},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"    \"type\":[\"Array\", \"Hashmap\"],"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"    \"content\": \"# [1\\\\. Two Sum](https://leetcode.com/problems/two-sum/)\\n\\n## Description\\n\\nDifficulty: **Easy**  \\n\\nRelated Topics: [Array](https://leetcode.com/tag/array/), [Hash Table](https://leetcode.com/tag/hash-table/)\\n\\n\\nGiven an array of integers `nums` and an integer `target`, return _indices of the two numbers such that they add up to `target`_.\\n\\nYou may assume that each input would have **_exactly_ one solution**, and you may not use the _same_ element twice.\\n\\nYou can return the answer in any order.\\n\\n**Example 1:**\\n\\n```\\nInput: nums \u003d [2,7,11,15], target \u003d 9\\nOutput: [0,1]\\nExplanation: Because nums[0] + nums[1] \u003d\u003d 9, we return [0, 1].\\n```\\n\\n**Example 2:**\\n\\n```\\nInput: nums \u003d [3,2,4], target \u003d 6\\nOutput: [1,2]\\n```\\n\\n**Example 3:**\\n\\n```\\nInput: nums \u003d [3,3], target \u003d 6\\nOutput: [0,1]\\n```\\n\\n**Constraints:**\\n\\n*   2 \u003c\u003d nums.length \u003c\u003d 10\u003csup\u003e4\u003c/sup\u003e\\n*   -10\u003csup\u003e9\u003c/sup\u003e \u003c\u003d nums[i] \u003c\u003d 10\u003csup\u003e9\u003c/sup\u003e\\n*   -10\u003csup\u003e9\u003c/sup\u003e \u003c\u003d target \u003c\u003d 10\u003csup\u003e9\u003c/sup\u003e\\n*   **Only one valid answer exists.**\\n\\n**Follow-up:** Can you come up with an algorithm that is less than O(n\u003csup\u003e2\u003c/sup\u003e) time complexity?\\n\\n\""},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":","},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"    \"difficulty\":\"easy\""},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"### GET ALL QUESTIONS"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"GET http://localhost:8500/api/v1/question/allQuestions"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"### GET ALL TYPES"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"GET http://localhost:8500/api/v1/question/allTypes"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"### GET Question Names"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"GET http://localhost:8500/api/v1/question/questionNames?id\u003d1\u0026id\u003d2\u0026id\u003d3"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"### GET QUESTION By difficulty"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"GET http://localhost:8500/api/v1/question?difficulty\u003deasy"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"### GET QUESTION By types"},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":"GET http://localhost:8500/api/v1/question?types\u003dArray\u0026types\u003dHash+Table"},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"### GET QUESTION By id"},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"GET http://localhost:8500/api/v1/question?id\u003d1"},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"### Get Next Question given a list of id by difficulty"},{"lineNumber":35,"author":{"gitId":"Hzxin"},"content":"GET http://localhost:8500/api/v1/question/nextQuestion?past_id\u003d1\u0026difficulty\u003deasy"},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":37,"author":{"gitId":"Hzxin"},"content":"### Get Next Question given a list of id by types"},{"lineNumber":38,"author":{"gitId":"Hzxin"},"content":"GET http://localhost:8500/api/v1/question/nextQuestion?past_id\u003d1\u0026past_id\u003d4\u0026types\u003dString\u0026types\u003dHash+Table"},{"lineNumber":39,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":40,"author":{"gitId":"Hzxin"},"content":"### UPDATE QUESTION"},{"lineNumber":41,"author":{"gitId":"Hzxin"},"content":"PUT http://localhost:8500/api/v1/question"},{"lineNumber":42,"author":{"gitId":"Hzxin"},"content":"Content-Type: application/json"},{"lineNumber":43,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":44,"author":{"gitId":"Hzxin"},"content":"{   "},{"lineNumber":45,"author":{"gitId":"Hzxin"},"content":"    \"id\": 1,"},{"lineNumber":46,"author":{"gitId":"Hzxin"},"content":"    \"name\":\"Updated question\","},{"lineNumber":47,"author":{"gitId":"Hzxin"},"content":"    \"difficulty\":\"medium\""},{"lineNumber":48,"author":{"gitId":"Hzxin"},"content":"}"},{"lineNumber":49,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":50,"author":{"gitId":"Hzxin"},"content":"### DELETE QUESTION By id"},{"lineNumber":51,"author":{"gitId":"Hzxin"},"content":"DELETE http://localhost:8500/api/v1/question?id\u003d7"}],"authorContributionMap":{"Hzxin":51}},{"path":"question-service/seeders/20220912131629-questions.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"\u0027use strict\u0027"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":"module.exports \u003d {"},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"    async up(queryInterface, Sequelize) {"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"        const fs \u003d require(\u0027fs\u0027)"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"        const questionPath \u003d \u0027./seeders/question.json\u0027"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"        const categoryPath \u003d \u0027./seeders/category.json\u0027"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"        const questions \u003d await queryInterface.rawSelect("},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"            \u0027Questions\u0027,"},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"            { "},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"                where: {"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"                    id: 1"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"                },"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"                plain: false "},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"            },"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"            [\u0027id\u0027]"},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"        )"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":"        if (questions.length \u003d\u003d 0) {"},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"            const data \u003d JSON.parse(fs.readFileSync(questionPath))"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"            await queryInterface.bulkInsert(\u0027Questions\u0027, data)"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"        const categories \u003d await queryInterface.rawSelect("},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"            \u0027Categories\u0027,"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"            { where: {"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"                questionId: 1"},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":"            }, "},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":"            plain: false },"},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"            [\u0027id\u0027]"},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"        )"},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"        if (categories.length \u003d\u003d\u003d 0) {"},{"lineNumber":35,"author":{"gitId":"Hzxin"},"content":"            const data \u003d JSON.parse(fs.readFileSync(categoryPath))"},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":"            await queryInterface.bulkInsert(\u0027Categories\u0027, data)"},{"lineNumber":37,"author":{"gitId":"Hzxin"},"content":"        }"},{"lineNumber":38,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":39,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":40,"author":{"gitId":"Hzxin"},"content":"    async down(queryInterface, Sequelize) {"},{"lineNumber":41,"author":{"gitId":"Hzxin"},"content":"        /**"},{"lineNumber":42,"author":{"gitId":"Hzxin"},"content":"         * Add commands to revert seed here."},{"lineNumber":43,"author":{"gitId":"Hzxin"},"content":"         *"},{"lineNumber":44,"author":{"gitId":"Hzxin"},"content":"         * Example:"},{"lineNumber":45,"author":{"gitId":"Hzxin"},"content":"         * await queryInterface.bulkDelete(\u0027People\u0027, null, {});"},{"lineNumber":46,"author":{"gitId":"Hzxin"},"content":"         */"},{"lineNumber":47,"author":{"gitId":"Hzxin"},"content":"        await queryInterface.bulkDelete(\u0027Categories\u0027, null, {})"},{"lineNumber":48,"author":{"gitId":"Hzxin"},"content":"        await queryInterface.bulkDelete(\u0027Questions\u0027, null, {})"},{"lineNumber":49,"author":{"gitId":"Hzxin"},"content":"    },"},{"lineNumber":50,"author":{"gitId":"Hzxin"},"content":"}"}],"authorContributionMap":{"Hzxin":50}},{"path":"question-service/test/index.spec.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"Hzxin"},"content":"const request \u003d require(\u0027supertest\u0027)"},{"lineNumber":2,"author":{"gitId":"Hzxin"},"content":"const app \u003d require(\u0027../index.js\u0027)"},{"lineNumber":3,"author":{"gitId":"Hzxin"},"content":"const { expect } \u003d require(\u0027chai\u0027)"},{"lineNumber":4,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":5,"author":{"gitId":"Hzxin"},"content":"describe(\u0027GET service status\u0027, function () {"},{"lineNumber":6,"author":{"gitId":"Hzxin"},"content":"    it(\u0027responds successfully\u0027, function (done) {"},{"lineNumber":7,"author":{"gitId":"Hzxin"},"content":"        request(app)"},{"lineNumber":8,"author":{"gitId":"Hzxin"},"content":"            .get(\u0027/api/v1/question/status\u0027)"},{"lineNumber":9,"author":{"gitId":"Hzxin"},"content":"            .set(\u0027Accept\u0027, \u0027application/json\u0027)"},{"lineNumber":10,"author":{"gitId":"Hzxin"},"content":"            .expect(\u0027Content-Type\u0027, /json/)"},{"lineNumber":11,"author":{"gitId":"Hzxin"},"content":"            .expect("},{"lineNumber":12,"author":{"gitId":"Hzxin"},"content":"                200,"},{"lineNumber":13,"author":{"gitId":"Hzxin"},"content":"                {"},{"lineNumber":14,"author":{"gitId":"Hzxin"},"content":"                    message: \u0027Hello World from question-service\u0027,"},{"lineNumber":15,"author":{"gitId":"Hzxin"},"content":"                },"},{"lineNumber":16,"author":{"gitId":"Hzxin"},"content":"                done"},{"lineNumber":17,"author":{"gitId":"Hzxin"},"content":"            )"},{"lineNumber":18,"author":{"gitId":"Hzxin"},"content":"    })"},{"lineNumber":19,"author":{"gitId":"Hzxin"},"content":"})"},{"lineNumber":20,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":21,"author":{"gitId":"Hzxin"},"content":"describe(\u0027GET Question by id\u0027, function () {"},{"lineNumber":22,"author":{"gitId":"Hzxin"},"content":"    it(\u0027Responds with retrieved question id\u0027, function (done) {"},{"lineNumber":23,"author":{"gitId":"Hzxin"},"content":"        request(app)"},{"lineNumber":24,"author":{"gitId":"Hzxin"},"content":"            .get(\u0027/api/v1/question?id\u003d1\u0027)"},{"lineNumber":25,"author":{"gitId":"Hzxin"},"content":"            .set(\u0027Accept\u0027, \u0027application/json\u0027)"},{"lineNumber":26,"author":{"gitId":"Hzxin"},"content":"            .expect(200, done)"},{"lineNumber":27,"author":{"gitId":"Hzxin"},"content":"    })"},{"lineNumber":28,"author":{"gitId":"Hzxin"},"content":"})"},{"lineNumber":29,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":30,"author":{"gitId":"Hzxin"},"content":"describe(\u0027POST new Question\u0027, function () {"},{"lineNumber":31,"author":{"gitId":"Hzxin"},"content":"    it(\u0027responds successfully for creating question\u0027, async function () {"},{"lineNumber":32,"author":{"gitId":"Hzxin"},"content":"        const response \u003d await request(app)"},{"lineNumber":33,"author":{"gitId":"Hzxin"},"content":"            .post(\u0027/api/v1/question\u0027)"},{"lineNumber":34,"author":{"gitId":"Hzxin"},"content":"            .set(\u0027Accept\u0027, \u0027application/json\u0027)"},{"lineNumber":35,"author":{"gitId":"Hzxin"},"content":"            .send({"},{"lineNumber":36,"author":{"gitId":"Hzxin"},"content":"                name: \u0027test\u0027,"},{"lineNumber":37,"author":{"gitId":"Hzxin"},"content":"                type: [\u0027test\u0027],"},{"lineNumber":38,"author":{"gitId":"Hzxin"},"content":"                content: \u0027test\u0027,"},{"lineNumber":39,"author":{"gitId":"Hzxin"},"content":"                difficulty: \u0027easy\u0027,"},{"lineNumber":40,"author":{"gitId":"Hzxin"},"content":"            })"},{"lineNumber":41,"author":{"gitId":"Hzxin"},"content":"        expect(\u0027Content-Type\u0027, /json/)"},{"lineNumber":42,"author":{"gitId":"Hzxin"},"content":"        expect(201)"},{"lineNumber":43,"author":{"gitId":"Hzxin"},"content":"        expect(response.body.message).equal(\u0027Create new question successfully!\u0027)"},{"lineNumber":44,"author":{"gitId":"Hzxin"},"content":"    })"},{"lineNumber":45,"author":{"gitId":"Hzxin"},"content":"})"},{"lineNumber":46,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":47,"author":{"gitId":"Hzxin"},"content":"describe(\u0027GET Next Question of same difficulty\u0027, function () {"},{"lineNumber":48,"author":{"gitId":"Hzxin"},"content":"    it(\u0027Responds with retrieved question id\u0027, function (done) {"},{"lineNumber":49,"author":{"gitId":"Hzxin"},"content":"        request(app)"},{"lineNumber":50,"author":{"gitId":"Hzxin"},"content":"            .get("},{"lineNumber":51,"author":{"gitId":"Hzxin"},"content":"                \u0027/api/v1/question/nextQuestion?past_id\u003d1\u0026past_id\u003d2\u0026difficulty\u003deasy\u0027"},{"lineNumber":52,"author":{"gitId":"Hzxin"},"content":"            )"},{"lineNumber":53,"author":{"gitId":"Hzxin"},"content":"            .set(\u0027Accept\u0027, \u0027application/json\u0027)"},{"lineNumber":54,"author":{"gitId":"Hzxin"},"content":"            .expect(\u0027Content-Type\u0027, /json/)"},{"lineNumber":55,"author":{"gitId":"Hzxin"},"content":"            .expect("},{"lineNumber":56,"author":{"gitId":"Hzxin"},"content":"                200,"},{"lineNumber":57,"author":{"gitId":"Hzxin"},"content":"                done"},{"lineNumber":58,"author":{"gitId":"Hzxin"},"content":"            )"},{"lineNumber":59,"author":{"gitId":"Hzxin"},"content":"    })"},{"lineNumber":60,"author":{"gitId":"Hzxin"},"content":"})"},{"lineNumber":61,"author":{"gitId":"Hzxin"},"content":""},{"lineNumber":62,"author":{"gitId":"Hzxin"},"content":"describe(\u0027Delete a question\u0027, function () {"},{"lineNumber":63,"author":{"gitId":"Hzxin"},"content":"    it(\u0027responds successfully for delete\u0027, function (done) {"},{"lineNumber":64,"author":{"gitId":"Hzxin"},"content":"        request(app)"},{"lineNumber":65,"author":{"gitId":"Hzxin"},"content":"            .delete(\u0027/api/v1/question?id\u003d7\u0027)"},{"lineNumber":66,"author":{"gitId":"Hzxin"},"content":"            .set(\u0027Accept\u0027, \u0027application/json\u0027)"},{"lineNumber":67,"author":{"gitId":"Hzxin"},"content":"            .expect(\u0027Content-Type\u0027, /json/)"},{"lineNumber":68,"author":{"gitId":"Hzxin"},"content":"            .expect("},{"lineNumber":69,"author":{"gitId":"Hzxin"},"content":"                200,"},{"lineNumber":70,"author":{"gitId":"Hzxin"},"content":"                {"},{"lineNumber":71,"author":{"gitId":"Hzxin"},"content":"                    message: \u0027Question deleted succesfully\u0027,"},{"lineNumber":72,"author":{"gitId":"Hzxin"},"content":"                },"},{"lineNumber":73,"author":{"gitId":"Hzxin"},"content":"                done"},{"lineNumber":74,"author":{"gitId":"Hzxin"},"content":"            )"},{"lineNumber":75,"author":{"gitId":"Hzxin"},"content":"    })"},{"lineNumber":76,"author":{"gitId":"Hzxin"},"content":"})"}],"authorContributionMap":{"Hzxin":76}},{"path":"room-service/.dockerignore","fileType":"dockerignore","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"node_modules"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"npm-debug.log"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":".env"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"*.sqlite3"}],"authorContributionMap":{"MarcusTXK":5}},{"path":"room-service/.env.example","fileType":"example","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"}],"authorContributionMap":{"MarcusTXK":1}},{"path":"room-service/.env.local","fileType":"local","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"ENV\u003d\u0027production\u0027"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"POSTGRES_HOST\u003d\u0027host.docker.internal\u0027"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"POSTGRES_USER\u003d\u0027postgres\u0027"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"POSTGRES_DB\u003d\u0027postgres_db\u0027"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"POSTGRES_PASSWORD\u003d\u0027postgres\u0027"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"POSTGRES_PORT\u003d5432"}],"authorContributionMap":{"MarcusTXK":7}},{"path":"room-service/.env.prod","fileType":"prod","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"POSTGRES_HOST\u003d\u0027host.docker.internal\u0027"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"POSTGRES_USER\u003d\u0027postgres\u0027"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"POSTGRES_DB\u003d\u0027postgres_db\u0027"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"POSTGRES_PASSWORD\u003d\u0027postgres\u0027"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"POSTGRES_PORT\u003d5432"}],"authorContributionMap":{"MarcusTXK":6}},{"path":"room-service/.gitignore","fileType":"gitignore","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"# See https://help.github.com/articles/ignoring-files/ for more about ignoring files."},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"# dependencies"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"/node_modules"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"/.pnp"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":".pnp.js"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"# testing"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"/coverage"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"# misc"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":".DS_Store"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"*.pem"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"# debug"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"npm-debug.log*"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"yarn-debug.log*"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"yarn-error.log*"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"# sqlite"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"*.sqlite3"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"# env "},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":".env"}],"authorContributionMap":{"MarcusTXK":24}},{"path":"room-service/Dockerfile","fileType":"Dockerfile","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"# Use node alpine image"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"FROM node:14.17.0"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"# Set working directory"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"WORKDIR /app"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"# Copy package-lock.json and package.json"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"COPY package*.json ./"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"# Install node modules"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"RUN npm install --quiet"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"# Copy all files from project excluding node_modules (via .dockerignore)"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"COPY . ."},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"# Expose port "},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"EXPOSE 8022"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"# Exec form to avoid starting a shell session"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"CMD [\"npm\", \"start\"]"}],"authorContributionMap":{"MarcusTXK":15}},{"path":"room-service/README.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"# Matching Service"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"# Setup environment variables"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"1. Rename `.env.example` to `.env`"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"## Usage"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"1. Install npm packages using `npm install`."},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"2. Set up SQLite database using `npm run db:migrate`."},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"3. Run Matching Service using `npm run dev`."},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"## Docker"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"- Via docker-compose: `docker-compose up --build`"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"- Via docker"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"```bash"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"docker build . -t room-service"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"docker run -p 8022:8022 -d room-service"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"```"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"## Continuous integration (CI)"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"- Running automated tests in docker"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"```bash"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"docker-compose -f docker-compose.test.yml up --exit-code-from nodeserver --build"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"```"}],"authorContributionMap":{"MarcusTXK":29}},{"path":"room-service/config/config.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"require(\"dotenv\").config();"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"const {"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"  POSTGRES_HOST,"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  POSTGRES_USER,"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"  POSTGRES_DB,"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"  POSTGRES_PASSWORD,"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"  POSTGRES_PORT,"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"} \u003d process.env;"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"module.exports \u003d {"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"  LOCAL: {"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"    username: POSTGRES_USER,"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"    password: POSTGRES_PASSWORD,"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"    database: POSTGRES_DB,"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"    host: POSTGRES_HOST,"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"    port: POSTGRES_PORT,"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"    dialect: \"postgres\","},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"  development: {"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"    username: POSTGRES_USER,"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"    password: POSTGRES_PASSWORD,"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"    database: POSTGRES_DB,"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"    host: \"localhost\","},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"    port: 5432,"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"    dialect: \"postgres\","},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"  test: {"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"    username: POSTGRES_USER,"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"    password: POSTGRES_PASSWORD,"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"    database: POSTGRES_DB,"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"    host: POSTGRES_HOST,"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"    port: POSTGRES_PORT,"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"    dialect: \"postgres\","},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"  production: {"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"    username: POSTGRES_USER,"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"    password: POSTGRES_PASSWORD,"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"    database: POSTGRES_DB,"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"    host: POSTGRES_HOST,"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"    port: POSTGRES_PORT,"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"    dialect: \"postgres\","},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"};"}],"authorContributionMap":{"MarcusTXK":44}},{"path":"room-service/const/constants.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"exports.EVENT_EMIT \u003d {"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"  ROOM_UPDATE: \"roomUpdate\","},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"  ROOM_END: \"roomEnd\","},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"exports.DIFFICULTY \u003d {"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"  EASY: \"easy\","},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"  MEDIUM: \"medium\","},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"  HARD: \"hard\","},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"const questionServiceFallback \u003d"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"  process.env.ENV \u003d\u003d\u003d \"production\" // production means using Docker"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"    ? `http://${process.env.QUESTION_SERVICE_HOST}:8500`"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"    : \"http://localhost:8500\";"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"const URI_QUESTION_SERVICE \u003d"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"  process.env.URI_QUESTION_SERVICE || questionServiceFallback;"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"const PREFIX_QUESTION_SERVICE \u003d \"/api/v1/question\";"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"exports.URL_QUESTION_SERVICE \u003d URI_QUESTION_SERVICE + PREFIX_QUESTION_SERVICE;"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"exports.URL_QUESTION_SERVICE_NEXT_QUESTION \u003d `${this.URL_QUESTION_SERVICE}/nextQuestion`;"}],"authorContributionMap":{"MarcusTXK":24}},{"path":"room-service/controller/room-controller.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"const { createRoomDto } \u003d require(\"../dto/room-dto\");"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const RoomService \u003d require(\"../service/room-service\");"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"const { setBetween } \u003d require(\"../utils/common\");"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"exports.getRoomById \u003d async function (req, res) {"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"  try {"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"    const room \u003d await RoomService.findByRoomId(req.params.roomId);"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"    // room not found or user does not belong to room"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"    const userId \u003d req.user.username;"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"    if (!room || (room.userId1 !\u003d\u003d userId \u0026\u0026 room.userId2 !\u003d\u003d userId)) {"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"      return res.status(400).json({ message: \"Could not get Room info\" });"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"    console.log(\"getRoom\", room);"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"    return res.status(200).json({"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"      message: \"Get Room info successfully\","},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"      data: {"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"        roomId: room.roomId,"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"        userId1: room.userId1,"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"        userId2: room.userId2,"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"        questionId:"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"          room.questionIds["},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"            setBetween(room.current, room.questionIds.length - 1, 0)"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"          ],"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"        isFirst: room.current \u003d\u003d\u003d 0,"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"  } catch (err) {"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"    console.log(err);"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"    return res.status(500).json({ message: err.message });"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"exports.getRoomByUserId \u003d async function (req, res) {"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"  try {"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"    const room \u003d await RoomService.findByUserId(req.user.username);"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"    const data \u003d {"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"      isInRoom: room !\u003d\u003d null,"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"    };"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"    if (room) {"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"      data.roomId \u003d room.roomId;"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"    return res.status(200).json({"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"      message: \"Get Room info successfully\","},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"      data,"},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"  } catch (err) {"},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":"    console.log(err);"},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"    return res.status(500).json({ message: err.message });"},{"lineNumber":49,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":50,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":51,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":52,"author":{"gitId":"MarcusTXK"},"content":"exports.nextRoomQuestionId \u003d async function (req, res) {"},{"lineNumber":53,"author":{"gitId":"MarcusTXK"},"content":"  try {"},{"lineNumber":54,"author":{"gitId":"MarcusTXK"},"content":"    const room \u003d await RoomService.findByRoomId(req.params.roomId);"},{"lineNumber":55,"author":{"gitId":"MarcusTXK"},"content":"    // room not found or user does not belong to room"},{"lineNumber":56,"author":{"gitId":"MarcusTXK"},"content":"    const userId \u003d req.user.username;"},{"lineNumber":57,"author":{"gitId":"MarcusTXK"},"content":"    if (!room || (room.userId1 !\u003d\u003d userId \u0026\u0026 room.userId2 !\u003d\u003d userId)) {"},{"lineNumber":58,"author":{"gitId":"MarcusTXK"},"content":"      return res.status(400).json({ message: \"Could not update Room info\" });"},{"lineNumber":59,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"MarcusTXK"},"content":"    await RoomService.updateRoomQuestionIds(req.params.roomId, 1);"},{"lineNumber":61,"author":{"gitId":"MarcusTXK"},"content":"    return res.status(200).json({"},{"lineNumber":62,"author":{"gitId":"MarcusTXK"},"content":"      message: \"Update Room next questionId successfully\","},{"lineNumber":63,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":64,"author":{"gitId":"MarcusTXK"},"content":"  } catch (err) {"},{"lineNumber":65,"author":{"gitId":"MarcusTXK"},"content":"    console.log(err);"},{"lineNumber":66,"author":{"gitId":"MarcusTXK"},"content":"    return res.status(500).json({ message: err.message });"},{"lineNumber":67,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":68,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":69,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":70,"author":{"gitId":"MarcusTXK"},"content":"exports.previousRoomQuestionId \u003d async function (req, res) {"},{"lineNumber":71,"author":{"gitId":"MarcusTXK"},"content":"  try {"},{"lineNumber":72,"author":{"gitId":"MarcusTXK"},"content":"    const room \u003d await RoomService.findByRoomId(req.params.roomId);"},{"lineNumber":73,"author":{"gitId":"MarcusTXK"},"content":"    // room not found or user does not belong to room"},{"lineNumber":74,"author":{"gitId":"MarcusTXK"},"content":"    const userId \u003d req.user.username;"},{"lineNumber":75,"author":{"gitId":"MarcusTXK"},"content":"    if (!room || (room.userId1 !\u003d\u003d userId \u0026\u0026 room.userId2 !\u003d\u003d userId)) {"},{"lineNumber":76,"author":{"gitId":"MarcusTXK"},"content":"      return res.status(400).json({ message: \"Could not update Room info\" });"},{"lineNumber":77,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"MarcusTXK"},"content":"    await RoomService.updateRoomQuestionIds(req.params.roomId, -1);"},{"lineNumber":79,"author":{"gitId":"MarcusTXK"},"content":"    return res.status(200).json({"},{"lineNumber":80,"author":{"gitId":"MarcusTXK"},"content":"      message: \"Update Room previous questionId successfully\","},{"lineNumber":81,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":82,"author":{"gitId":"MarcusTXK"},"content":"  } catch (err) {"},{"lineNumber":83,"author":{"gitId":"MarcusTXK"},"content":"    console.log(err);"},{"lineNumber":84,"author":{"gitId":"MarcusTXK"},"content":"    return res.status(500).json({ message: err.message });"},{"lineNumber":85,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":86,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":87,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":88,"author":{"gitId":"MarcusTXK"},"content":"exports.createRoom \u003d async function (req, res) {"},{"lineNumber":89,"author":{"gitId":"MarcusTXK"},"content":"  try {"},{"lineNumber":90,"author":{"gitId":"MarcusTXK"},"content":"    console.log(\"body\", req.body);"},{"lineNumber":91,"author":{"gitId":"MarcusTXK"},"content":"    const { value, error } \u003d createRoomDto.validate(req.body);"},{"lineNumber":92,"author":{"gitId":"MarcusTXK"},"content":"    if (error) {"},{"lineNumber":93,"author":{"gitId":"MarcusTXK"},"content":"      throw error;"},{"lineNumber":94,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":95,"author":{"gitId":"MarcusTXK"},"content":"    const { roomId, userId1, userId2, difficulty } \u003d value;"},{"lineNumber":96,"author":{"gitId":"MarcusTXK"},"content":"    await RoomService.createRoom(roomId, userId1, userId2, difficulty);"},{"lineNumber":97,"author":{"gitId":"MarcusTXK"},"content":"    return res.status(200).json({"},{"lineNumber":98,"author":{"gitId":"MarcusTXK"},"content":"      message: \"Created Room successfully\","},{"lineNumber":99,"author":{"gitId":"MarcusTXK"},"content":"      data: {"},{"lineNumber":100,"author":{"gitId":"MarcusTXK"},"content":"        roomId: roomId,"},{"lineNumber":101,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":102,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":103,"author":{"gitId":"MarcusTXK"},"content":"  } catch (err) {"},{"lineNumber":104,"author":{"gitId":"MarcusTXK"},"content":"    console.log(err);"},{"lineNumber":105,"author":{"gitId":"MarcusTXK"},"content":"    return res.status(500).json({ message: err.message });"},{"lineNumber":106,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":107,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":108,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":109,"author":{"gitId":"MarcusTXK"},"content":"exports.deleteRoom \u003d async function (req, res) {"},{"lineNumber":110,"author":{"gitId":"MarcusTXK"},"content":"  try {"},{"lineNumber":111,"author":{"gitId":"MarcusTXK"},"content":"    await RoomService.deleteRoom(req.params.roomId);"},{"lineNumber":112,"author":{"gitId":"MarcusTXK"},"content":"    return res.status(200).json({"},{"lineNumber":113,"author":{"gitId":"MarcusTXK"},"content":"      message: \"Deleted Room successfully\","},{"lineNumber":114,"author":{"gitId":"MarcusTXK"},"content":"      data: {"},{"lineNumber":115,"author":{"gitId":"MarcusTXK"},"content":"        roomId: req.params.roomId,"},{"lineNumber":116,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":117,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":118,"author":{"gitId":"MarcusTXK"},"content":"  } catch (err) {"},{"lineNumber":119,"author":{"gitId":"MarcusTXK"},"content":"    console.log(err);"},{"lineNumber":120,"author":{"gitId":"MarcusTXK"},"content":"    return res.status(500).json({ message: err.message });"},{"lineNumber":121,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":122,"author":{"gitId":"MarcusTXK"},"content":"};"}],"authorContributionMap":{"MarcusTXK":122}},{"path":"room-service/docker-compose.test.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"version: \"3.8\""},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"services:"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"  postgres_db:"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"    image: postgres:latest"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"    restart: always"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"    ports:"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"      - \"5432:5432\""},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"    healthcheck:"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"      test: [\"CMD\", \"pg_isready\", \"-q\", \"-d\", \"postgres_db\", \"-U\", \"postgres\"]"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"      interval: 5s"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"      timeout: 5s"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"      retries: 5"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"    environment:"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_PASSWORD: postgres"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_DB: postgres_db"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_USER: postgres"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_HOST: postgres_db"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_PORT: 5432"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"  nodeserver:"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"    build:"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"      context: ."},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"    ports:"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"      - \"8022:8022\""},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"    depends_on:"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"      postgres_db:"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"        condition: service_healthy"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"    restart: on-failure"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"    links:"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"      - postgres_db"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"    env_file:"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"      - .env.prod"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"    environment:"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"      ENV: test"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"      QUESTION_SERVICE_HOST: host.docker.internal"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_PASSWORD: postgres"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_DB: postgres_db"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_USER: postgres"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_HOST: postgres_db"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_PORT: 5432"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"    command: npm run test:ci"}],"authorContributionMap":{"MarcusTXK":42}},{"path":"room-service/docker-compose.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"version: \"3.8\""},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"services:"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"  peerjs-server:"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"    image: peerjs/peerjs-server"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"    ports:"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"      - \"9000:9000\""},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"  postgres_db:"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"    image: postgres:latest"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"    restart: always"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"    ports:"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"      - \"5432:5432\""},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"    healthcheck:"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"      test: [\"CMD\", \"pg_isready\", \"-q\", \"-d\", \"postgres_db\", \"-U\", \"postgres\"]"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"      interval: 5s"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"      timeout: 5s"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"      retries: 5"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"    environment:"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_PASSWORD: postgres"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_DB: postgres_db"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_USER: postgres"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_HOST: postgres_db"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_PORT: 5432"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"  nodeserver:"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"    build:"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"      context: ."},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"    ports:"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"      - \"8022:8022\""},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"    depends_on:"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"      postgres_db:"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"        condition: service_healthy"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"    restart: on-failure"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"    links:"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"      - postgres_db"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"    env_file:"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"      - .env.prod"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"    environment:"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"      ENV: production"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"      QUESTION_SERVICE_HOST: host.docker.internal"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_PASSWORD: postgres"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_DB: postgres_db"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_USER: postgres"},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_HOST: postgres_db"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"      POSTGRES_PORT: 5432"}],"authorContributionMap":{"MarcusTXK":46}},{"path":"room-service/dto/room-dto.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"const Joi \u003d require(\"joi\");"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const { DIFFICULTY } \u003d require(\"../const/constants\");"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"exports.createRoomDto \u003d Joi.object({"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  roomId: Joi.string().required(),"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"  userId1: Joi.string().required(),"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"  userId2: Joi.string().required(),"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"  difficulty: Joi.string()"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"    .valid(...Object.values(DIFFICULTY))"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"    .error(new Error(\"Invalid/missing difficulty\")),"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"});"}],"authorContributionMap":{"MarcusTXK":11}},{"path":"room-service/index.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"const express \u003d require(\"express\");"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const cors \u003d require(\"cors\");"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"const { createServer } \u003d require(\"http\");"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"const { initSocket } \u003d require(\"./utils/socket-io\");"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"const roomRoutes \u003d require(\"./routes/RoomRoutes\");"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"require(\"dotenv\").config();"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"const app \u003d express();"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"app.use(express.urlencoded({ extended: true }));"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"app.use(express.json());"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"if (process.env.ENV \u003d\u003d\u003d \"production\") {"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"  app.use(cors());"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"  app.options(\"*\", cors());"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"} else {"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"  app.use("},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    cors({"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"      origin: `http://localhost:${process.env.PORT || 3000}`,"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"      credentials: true,"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"    })"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"  );"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"app.get(\"/\", (req, res) \u003d\u003e {"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"  res.send(\"Hello World from room-service\");"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"});"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"const URL_PREFIX \u003d \"/api/v1/room\";"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"app.use(URL_PREFIX, roomRoutes);"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"const httpServer \u003d createServer(app);"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"initSocket(httpServer);"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"httpServer.listen(8022);"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"module.exports \u003d app;"}],"authorContributionMap":{"MarcusTXK":27,"tlylt":10}},{"path":"room-service/migrations/20220915072153-create-room.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"/* eslint-disable no-unused-vars */"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"module.exports \u003d {"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"  async up(queryInterface, Sequelize) {"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"    await queryInterface.createTable(\"Rooms\", {"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"      id: {"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"        allowNull: false,"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"        autoIncrement: true,"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"        primaryKey: true,"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"        type: Sequelize.INTEGER,"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"      room_id: {"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"        type: Sequelize.STRING,"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"        unique: true,"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"        allowNull: false,"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"      question_id: {"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"        type: Sequelize.INTEGER,"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"        allowNull: false,"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"      user_id_1: {"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"        type: Sequelize.STRING,"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"        allowNull: false,"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"        unique: true,"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"      user_id_2: {"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"        type: Sequelize.STRING,"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"        allowNull: false,"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"        unique: true,"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"      difficulty: {"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"        type: Sequelize.STRING,"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"      createdAt: {"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"        allowNull: false,"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"        type: Sequelize.DATE,"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"      updatedAt: {"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"        allowNull: false,"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"        type: Sequelize.DATE,"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"  async down(queryInterface, Sequelize) {"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"    await queryInterface.dropTable(\"Rooms\");"},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"};"}],"authorContributionMap":{"MarcusTXK":46}},{"path":"room-service/migrations/20221105082130-add-question-array.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"/* eslint-disable no-unused-vars */"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"module.exports \u003d {"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"  async up(queryInterface, Sequelize) {"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"    return Promise.all(["},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"      await queryInterface.addColumn(\"Rooms\", \"current\", {"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"        type: Sequelize.INTEGER,"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"        allowNull: false,"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"      }),"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"      await queryInterface.removeColumn(\"Rooms\", \"question_id\"),"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"      await queryInterface.addColumn(\"Rooms\", \"question_ids\", {"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"        type: Sequelize.ARRAY(Sequelize.INTEGER),"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"        allowNull: false,"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"      }),"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"    ]);"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"  async down(queryInterface, Sequelize) {"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"    return Promise.all(["},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"      await queryInterface.removeColumn(\"Rooms\", \"current\"),"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"      await queryInterface.addColumn(\"Rooms\", \"question_id\", {"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"        type: Sequelize.INTEGER,"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"        allowNull: false,"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"      }),"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"      await queryInterface.removeColumn(\"Rooms\", \"question_ids\"),"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"    ]);"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"};"}],"authorContributionMap":{"MarcusTXK":27}},{"path":"room-service/models/index.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"/* eslint-disable import/no-dynamic-require */"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const fs \u003d require(\"fs\");"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"const path \u003d require(\"path\");"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"const Sequelize \u003d require(\"sequelize\");"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"const basename \u003d path.basename(__filename);"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"const env \u003d process.env.ENV || \"development\";"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"const config \u003d require(`${__dirname}/../config/config.js`)[env];"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"const db \u003d {};"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"const sequelize \u003d new Sequelize(config);"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"fs.readdirSync(__dirname)"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"  .filter("},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"    (file) \u003d\u003e"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"      file.indexOf(\".\") !\u003d\u003d 0 \u0026\u0026 file !\u003d\u003d basename \u0026\u0026 file.slice(-3) \u003d\u003d\u003d \".js\""},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"  )"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"  .forEach((file) \u003d\u003e {"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"    // eslint-disable-next-line global-require"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"    const model \u003d require(path.join(__dirname, file))("},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"      sequelize,"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"      Sequelize.DataTypes"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"    );"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"    db[model.name] \u003d model;"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"Object.keys(db).forEach((modelName) \u003d\u003e {"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"  if (db[modelName].associate) {"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"    db[modelName].associate(db);"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"});"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"db.sequelize \u003d sequelize;"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"db.Sequelize \u003d Sequelize;"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"module.exports \u003d db;"}],"authorContributionMap":{"MarcusTXK":36}},{"path":"room-service/models/room.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"/* eslint-disable no-unused-vars */"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const { Model } \u003d require(\"sequelize\");"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"module.exports \u003d (sequelize, DataTypes) \u003d\u003e {"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  class Room extends Model {"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"    /**"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"     * Helper method for defining associations."},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"     * This method is not a part of Sequelize lifecycle."},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"     * The `models/index` file will call this method automatically."},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"     */"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"    static associate(models) {"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"      // define association here"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"  Room.init("},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"    {"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"      roomId: {"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"        type: DataTypes.STRING,"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"        field: \"room_id\","},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"      questionIds: {"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"        type: DataTypes.ARRAY(DataTypes.INTEGER),"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"        field: \"question_ids\","},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"      current: {"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"        type: DataTypes.INTEGER,"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"        field: \"current\","},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"      userId1: {"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"        type: DataTypes.STRING,"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"        field: \"user_id_1\","},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"      userId2: {"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"        type: DataTypes.STRING,"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"        field: \"user_id_2\","},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"      difficulty: {"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"        type: DataTypes.STRING,"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"        field: \"difficulty\","},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"    },"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"    {"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"      sequelize,"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"      modelName: \"Room\","},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"  );"},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":"  return Room;"},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"};"}],"authorContributionMap":{"MarcusTXK":48}},{"path":"room-service/repository/room-repository.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"const Sequelize \u003d require(\"sequelize\");"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const db \u003d require(\"../models/index\");"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"const RoomRepository \u003d {"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  findByRoomId: function (roomId) {"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"    return db.Room.findOne({"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"      where: {"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"        roomId: roomId,"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"  findByUserId: function (userId) {"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"    return db.Room.findOne({"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"      where: {"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"        [Sequelize.Op.or]: [{ userId1: userId }, { userId2: userId }],"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"  update: function (roomId, updatedRoom) {"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"    return db.Room.update(updatedRoom, {"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"      where: {"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"        roomId: roomId,"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"  create: function ("},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"    roomId,"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"    questionIds,"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"    userId1,"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"    userId2,"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"    difficulty,"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"    current"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"  ) {"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"    return db.Room.create({"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"      roomId,"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"      questionIds,"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"      userId1,"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"      userId2,"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"      difficulty,"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"      current,"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"  delete: function (roomId) {"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"    return db.Room.destroy({"},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"      where: {"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"        roomId: roomId,"},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":"      },"},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":49,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":50,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":51,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":52,"author":{"gitId":"MarcusTXK"},"content":"module.exports \u003d RoomRepository;"}],"authorContributionMap":{"MarcusTXK":52}},{"path":"room-service/requests.rest","fileType":"rest","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"### GET ROOM"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"GET http://localhost:8022/api/v1/room/MUdekW1LM87Ouq0SAAAC|Ex7jLTZLxXKGW6wXAAAF"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"### CREATE ROOM"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"POST http://localhost:8022/api/v1/room"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"Content-Type: application/json"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"{\"roomId\":\"WvlfuCkjpslqHdaIAAAB-DHME9NS-fLSzEZX8AAAD\",\"userId1\":\"qwe\",\"userId2\":\"asd\",\"difficulty\":\"easy\"}"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"### DELETE Room"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"DELETE http://localhost:8022/api/v1/room/MUdekW1LM87Ouq0SAAAC|Ex7jLTZLxXKGW6wXAAAF"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"### Get PeerJS server "},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"GET http://localhost:9000/myapp"}],"authorContributionMap":{"MarcusTXK":14}},{"path":"room-service/routes/RoomRoutes.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"const express \u003d require(\"express\");"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const { authenticationMiddleware } \u003d require(\"../utils/authentication\");"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"const {"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"  getRoomById,"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  deleteRoom,"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"  createRoom,"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"  nextRoomQuestionId,"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"  previousRoomQuestionId,"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"  getRoomByUserId,"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"} \u003d require(\"../controller/room-controller\");"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"const router \u003d express.Router();"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"router.get(\"/:roomId\", authenticationMiddleware, getRoomById);"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"router.get(\"/\", authenticationMiddleware, getRoomByUserId);"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"// no authentication for createRoom, since it is used by internally"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"router.post(\"/\", createRoom);"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"router.put(\"/next/:roomId\", authenticationMiddleware, nextRoomQuestionId);"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"router.put(\"/prev/:roomId\", authenticationMiddleware, previousRoomQuestionId);"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"router.delete(\"/:roomId\", authenticationMiddleware, deleteRoom);"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"module.exports \u003d router;"}],"authorContributionMap":{"MarcusTXK":27}},{"path":"room-service/service/room-service.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"const axios \u003d require(\"axios\").default;"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const RoomRepository \u003d require(\"../repository/room-repository\");"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"const { emit } \u003d require(\"../utils/socket-io\");"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"const {"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  EVENT_EMIT,"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"  URL_QUESTION_SERVICE,"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"  URL_QUESTION_SERVICE_NEXT_QUESTION,"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"} \u003d require(\"../const/constants\");"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"const { setBetween } \u003d require(\"../utils/common\");"},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"const RoomService \u003d {"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"  findByRoomId: function (roomId) {"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"    return RoomRepository.findByRoomId(roomId);"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"  findByUserId: function (userId) {"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"    return RoomRepository.findByUserId(userId);"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"  createRoom: async function (roomId, userId1, userId2, difficulty) {"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"    const response \u003d await axios.get(URL_QUESTION_SERVICE, {"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"      params: { difficulty: difficulty },"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"    return RoomRepository.create("},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"      roomId,"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"      [response.data.id],"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"      userId1,"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"      userId2,"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"      difficulty,"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"      0"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"    );"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"  updateRoomQuestionIds: async function (roomId, change) {"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"    const room \u003d await RoomRepository.findByRoomId(roomId);"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"    const updatedCurrent \u003d setBetween("},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"      room.current + change,"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"      room.questionIds.length,"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"      0"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"    );"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"    let updatedQuestionId \u003d room.questionIds;"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"    if (updatedCurrent \u003e\u003d room.questionIds.length) {"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"      const response \u003d await axios.get(URL_QUESTION_SERVICE_NEXT_QUESTION, {"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"        params: { difficulty: room.difficulty, past_id: room.questionIds },"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"      });"},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"      console.log(\"response\", response);"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"      updatedQuestionId \u003d [...room.questionIds, response.data.id];"},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":"      console.log(\"updatedQuestionId\", updatedQuestionId);"},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":49,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":50,"author":{"gitId":"MarcusTXK"},"content":"    console.log(\"Updated room\", {"},{"lineNumber":51,"author":{"gitId":"MarcusTXK"},"content":"      ...room,"},{"lineNumber":52,"author":{"gitId":"MarcusTXK"},"content":"      current: updatedCurrent,"},{"lineNumber":53,"author":{"gitId":"MarcusTXK"},"content":"      questionIds: updatedQuestionId,"},{"lineNumber":54,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":55,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":56,"author":{"gitId":"MarcusTXK"},"content":"    RoomRepository.update(roomId, {"},{"lineNumber":57,"author":{"gitId":"MarcusTXK"},"content":"      ...room,"},{"lineNumber":58,"author":{"gitId":"MarcusTXK"},"content":"      current: updatedCurrent,"},{"lineNumber":59,"author":{"gitId":"MarcusTXK"},"content":"      questionIds: updatedQuestionId,"},{"lineNumber":60,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":61,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":62,"author":{"gitId":"MarcusTXK"},"content":"    emit(`${roomId}-${EVENT_EMIT.ROOM_UPDATE}`, {"},{"lineNumber":63,"author":{"gitId":"MarcusTXK"},"content":"      status: EVENT_EMIT.ROOM_UPDATE,"},{"lineNumber":64,"author":{"gitId":"MarcusTXK"},"content":"      room: roomId,"},{"lineNumber":65,"author":{"gitId":"MarcusTXK"},"content":"      question: updatedQuestionId[updatedCurrent],"},{"lineNumber":66,"author":{"gitId":"MarcusTXK"},"content":"      isFirst: updatedCurrent \u003d\u003d\u003d 0,"},{"lineNumber":67,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":68,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":69,"author":{"gitId":"MarcusTXK"},"content":"  deleteRoom: function (roomId) {"},{"lineNumber":70,"author":{"gitId":"MarcusTXK"},"content":"    emit(`${roomId}-${EVENT_EMIT.ROOM_END}`, {"},{"lineNumber":71,"author":{"gitId":"MarcusTXK"},"content":"      status: EVENT_EMIT.ROOM_END,"},{"lineNumber":72,"author":{"gitId":"MarcusTXK"},"content":"      room: roomId,"},{"lineNumber":73,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":74,"author":{"gitId":"MarcusTXK"},"content":"    return RoomRepository.delete(roomId);"},{"lineNumber":75,"author":{"gitId":"MarcusTXK"},"content":"  },"},{"lineNumber":76,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":77,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":78,"author":{"gitId":"MarcusTXK"},"content":"module.exports \u003d RoomService;"}],"authorContributionMap":{"MarcusTXK":78}},{"path":"room-service/test/index.spec.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"/* eslint-disable no-undef */"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"/* eslint-disable node/no-unpublished-require */"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"const request \u003d require(\"supertest\");"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"const { expect } \u003d require(\"chai\");"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"const sinon \u003d require(\"sinon\");"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"const axios \u003d require(\"axios\");"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"const MockAdapter \u003d require(\"axios-mock-adapter\");"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"const { URL_QUESTION_SERVICE } \u003d require(\"../const/constants\");"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"const URI_PREFIX \u003d \"/api/v1/room\";"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"const roomId \u003d \"1234\";"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"const userId1 \u003d \"qwe\";"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"const userId2 \u003d \"zxc\";"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"const difficulty \u003d \"easy\";"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"const auth \u003d require(\"../utils/authentication\");"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"sinon.stub(auth, \"authenticationMiddleware\").callsFake((req, res, next) \u003d\u003e {"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"  req.user \u003d { username: userId1 };"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"  return next();"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"});"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"const app \u003d require(\"../index\");"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"describe(\"Get service status\", () \u003d\u003e {"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"  it(\"responds Hello World\", (done) \u003d\u003e {"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"    request(app).get(`/`).expect(200, \"Hello World from room-service\", done);"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"});"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"describe(\"POST / (create room)\", () \u003d\u003e {"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"  it(\"creates room successfully\", async () \u003d\u003e {"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"    // Delete existing room if any"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"    await request(app).delete(`${URI_PREFIX}/${roomId}`).send();"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"    const mock \u003d new MockAdapter(axios);"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"    mock.onGet(new RegExp(`^${URL_QUESTION_SERVICE}`)).reply(200, { id: 1 });"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"    const resp \u003d await request(app).post(`${URI_PREFIX}/`).send({"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"      roomId: roomId,"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"      userId1: userId1,"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"      userId2: userId2,"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"      difficulty: difficulty,"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"    expect(resp.statusCode).to.equal(200);"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"    expect(resp.body.message).to.equal(\"Created Room successfully\");"},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":"    expect(resp.body.data).to.deep.equal({"},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"      roomId: roomId,"},{"lineNumber":49,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":50,"author":{"gitId":"MarcusTXK"},"content":"    mock.restore();"},{"lineNumber":51,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":52,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":53,"author":{"gitId":"MarcusTXK"},"content":"  it(\"fails for duplicate roomId\", (done) \u003d\u003e {"},{"lineNumber":54,"author":{"gitId":"MarcusTXK"},"content":"    request(app)"},{"lineNumber":55,"author":{"gitId":"MarcusTXK"},"content":"      .post(`${URI_PREFIX}/`)"},{"lineNumber":56,"author":{"gitId":"MarcusTXK"},"content":"      .send({"},{"lineNumber":57,"author":{"gitId":"MarcusTXK"},"content":"        roomId: roomId,"},{"lineNumber":58,"author":{"gitId":"MarcusTXK"},"content":"        userId1: userId1,"},{"lineNumber":59,"author":{"gitId":"MarcusTXK"},"content":"        userId2: userId2,"},{"lineNumber":60,"author":{"gitId":"MarcusTXK"},"content":"        difficulty: difficulty,"},{"lineNumber":61,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":62,"author":{"gitId":"MarcusTXK"},"content":"      .expect(500);"},{"lineNumber":63,"author":{"gitId":"MarcusTXK"},"content":"    done();"},{"lineNumber":64,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":65,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":66,"author":{"gitId":"MarcusTXK"},"content":"  it(\"fails for missing fields in request body\", (done) \u003d\u003e {"},{"lineNumber":67,"author":{"gitId":"MarcusTXK"},"content":"    request(app)"},{"lineNumber":68,"author":{"gitId":"MarcusTXK"},"content":"      .post(`${URI_PREFIX}/`)"},{"lineNumber":69,"author":{"gitId":"MarcusTXK"},"content":"      .send({"},{"lineNumber":70,"author":{"gitId":"MarcusTXK"},"content":"        userId1: userId1,"},{"lineNumber":71,"author":{"gitId":"MarcusTXK"},"content":"        userId2: userId2,"},{"lineNumber":72,"author":{"gitId":"MarcusTXK"},"content":"        difficulty: difficulty,"},{"lineNumber":73,"author":{"gitId":"MarcusTXK"},"content":"      })"},{"lineNumber":74,"author":{"gitId":"MarcusTXK"},"content":"      .expect(500);"},{"lineNumber":75,"author":{"gitId":"MarcusTXK"},"content":"    done();"},{"lineNumber":76,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":77,"author":{"gitId":"MarcusTXK"},"content":"});"},{"lineNumber":78,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":79,"author":{"gitId":"MarcusTXK"},"content":"describe(\"PUT /next/:roomId (get next question)\", () \u003d\u003e {"},{"lineNumber":80,"author":{"gitId":"MarcusTXK"},"content":"  const mock \u003d new MockAdapter(axios);"},{"lineNumber":81,"author":{"gitId":"MarcusTXK"},"content":"  mock.onGet(new RegExp(`^${URL_QUESTION_SERVICE}`)).reply(200, {"},{"lineNumber":82,"author":{"gitId":"MarcusTXK"},"content":"    data: { id: 2 },"},{"lineNumber":83,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":84,"author":{"gitId":"MarcusTXK"},"content":"  it(\"get next room successfully\", (done) \u003d\u003e {"},{"lineNumber":85,"author":{"gitId":"MarcusTXK"},"content":"    // testRoom is created from previous test"},{"lineNumber":86,"author":{"gitId":"MarcusTXK"},"content":"    request(app)"},{"lineNumber":87,"author":{"gitId":"MarcusTXK"},"content":"      .put(`${URI_PREFIX}/next/${roomId}`)"},{"lineNumber":88,"author":{"gitId":"MarcusTXK"},"content":"      .send()"},{"lineNumber":89,"author":{"gitId":"MarcusTXK"},"content":"      .expect(200)"},{"lineNumber":90,"author":{"gitId":"MarcusTXK"},"content":"      .expect({ message: \"Update Room next questionId successfully\" }, done);"},{"lineNumber":91,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":92,"author":{"gitId":"MarcusTXK"},"content":"});"},{"lineNumber":93,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":94,"author":{"gitId":"MarcusTXK"},"content":"describe(\"PUT /prev/:roomId (get prev question)\", () \u003d\u003e {"},{"lineNumber":95,"author":{"gitId":"MarcusTXK"},"content":"  const mock \u003d new MockAdapter(axios);"},{"lineNumber":96,"author":{"gitId":"MarcusTXK"},"content":"  mock.onGet(new RegExp(`^${URL_QUESTION_SERVICE}`)).reply(200, { id: 2 });"},{"lineNumber":97,"author":{"gitId":"MarcusTXK"},"content":"  it(\"get previous room successfully\", (done) \u003d\u003e {"},{"lineNumber":98,"author":{"gitId":"MarcusTXK"},"content":"    // testRoom is created from previous test"},{"lineNumber":99,"author":{"gitId":"MarcusTXK"},"content":"    request(app)"},{"lineNumber":100,"author":{"gitId":"MarcusTXK"},"content":"      .put(`${URI_PREFIX}/prev/${roomId}`)"},{"lineNumber":101,"author":{"gitId":"MarcusTXK"},"content":"      .send()"},{"lineNumber":102,"author":{"gitId":"MarcusTXK"},"content":"      .expect(200)"},{"lineNumber":103,"author":{"gitId":"MarcusTXK"},"content":"      .expect("},{"lineNumber":104,"author":{"gitId":"MarcusTXK"},"content":"        { message: \"Update Room previous questionId successfully\" },"},{"lineNumber":105,"author":{"gitId":"MarcusTXK"},"content":"        done"},{"lineNumber":106,"author":{"gitId":"MarcusTXK"},"content":"      );"},{"lineNumber":107,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":108,"author":{"gitId":"MarcusTXK"},"content":"});"},{"lineNumber":109,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":110,"author":{"gitId":"MarcusTXK"},"content":"describe(\"GET /:roomId (get room info)\", () \u003d\u003e {"},{"lineNumber":111,"author":{"gitId":"MarcusTXK"},"content":"  it(\"gets successfully for room info\", (done) \u003d\u003e {"},{"lineNumber":112,"author":{"gitId":"MarcusTXK"},"content":"    request(app)"},{"lineNumber":113,"author":{"gitId":"MarcusTXK"},"content":"      .get(`${URI_PREFIX}/${roomId}`)"},{"lineNumber":114,"author":{"gitId":"MarcusTXK"},"content":"      .expect(200)"},{"lineNumber":115,"author":{"gitId":"MarcusTXK"},"content":"      .expect("},{"lineNumber":116,"author":{"gitId":"MarcusTXK"},"content":"        {"},{"lineNumber":117,"author":{"gitId":"MarcusTXK"},"content":"          message: \"Get Room info successfully\","},{"lineNumber":118,"author":{"gitId":"MarcusTXK"},"content":"          data: {"},{"lineNumber":119,"author":{"gitId":"MarcusTXK"},"content":"            roomId: roomId,"},{"lineNumber":120,"author":{"gitId":"MarcusTXK"},"content":"            userId1: userId1,"},{"lineNumber":121,"author":{"gitId":"MarcusTXK"},"content":"            userId2: userId2,"},{"lineNumber":122,"author":{"gitId":"MarcusTXK"},"content":"            questionId: 1,"},{"lineNumber":123,"author":{"gitId":"MarcusTXK"},"content":"            isFirst: true,"},{"lineNumber":124,"author":{"gitId":"MarcusTXK"},"content":"          },"},{"lineNumber":125,"author":{"gitId":"MarcusTXK"},"content":"        },"},{"lineNumber":126,"author":{"gitId":"MarcusTXK"},"content":"        done"},{"lineNumber":127,"author":{"gitId":"MarcusTXK"},"content":"      );"},{"lineNumber":128,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":129,"author":{"gitId":"MarcusTXK"},"content":"});"},{"lineNumber":130,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":131,"author":{"gitId":"MarcusTXK"},"content":"describe(\"GET / (get room info by user id)\", () \u003d\u003e {"},{"lineNumber":132,"author":{"gitId":"MarcusTXK"},"content":"  it(\"gets successfully for room info for user id in room\", (done) \u003d\u003e {"},{"lineNumber":133,"author":{"gitId":"MarcusTXK"},"content":"    request(app)"},{"lineNumber":134,"author":{"gitId":"MarcusTXK"},"content":"      .get(`${URI_PREFIX}/`)"},{"lineNumber":135,"author":{"gitId":"MarcusTXK"},"content":"      .expect(200)"},{"lineNumber":136,"author":{"gitId":"MarcusTXK"},"content":"      .expect("},{"lineNumber":137,"author":{"gitId":"MarcusTXK"},"content":"        {"},{"lineNumber":138,"author":{"gitId":"MarcusTXK"},"content":"          message: \"Get Room info successfully\","},{"lineNumber":139,"author":{"gitId":"MarcusTXK"},"content":"          data: {"},{"lineNumber":140,"author":{"gitId":"MarcusTXK"},"content":"            roomId: roomId,"},{"lineNumber":141,"author":{"gitId":"MarcusTXK"},"content":"            isInRoom: true,"},{"lineNumber":142,"author":{"gitId":"MarcusTXK"},"content":"          },"},{"lineNumber":143,"author":{"gitId":"MarcusTXK"},"content":"        },"},{"lineNumber":144,"author":{"gitId":"MarcusTXK"},"content":"        done"},{"lineNumber":145,"author":{"gitId":"MarcusTXK"},"content":"      );"},{"lineNumber":146,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":147,"author":{"gitId":"MarcusTXK"},"content":"});"},{"lineNumber":148,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":149,"author":{"gitId":"MarcusTXK"},"content":"describe(\"DELETE / (delete room)\", () \u003d\u003e {"},{"lineNumber":150,"author":{"gitId":"MarcusTXK"},"content":"  it(\"deletes successfully for room\", (done) \u003d\u003e {"},{"lineNumber":151,"author":{"gitId":"MarcusTXK"},"content":"    request(app)"},{"lineNumber":152,"author":{"gitId":"MarcusTXK"},"content":"      .delete(`${URI_PREFIX}/${roomId}`)"},{"lineNumber":153,"author":{"gitId":"MarcusTXK"},"content":"      .expect(200)"},{"lineNumber":154,"author":{"gitId":"MarcusTXK"},"content":"      .expect("},{"lineNumber":155,"author":{"gitId":"MarcusTXK"},"content":"        {"},{"lineNumber":156,"author":{"gitId":"MarcusTXK"},"content":"          message: \"Deleted Room successfully\","},{"lineNumber":157,"author":{"gitId":"MarcusTXK"},"content":"          data: {"},{"lineNumber":158,"author":{"gitId":"MarcusTXK"},"content":"            roomId: roomId,"},{"lineNumber":159,"author":{"gitId":"MarcusTXK"},"content":"          },"},{"lineNumber":160,"author":{"gitId":"MarcusTXK"},"content":"        },"},{"lineNumber":161,"author":{"gitId":"MarcusTXK"},"content":"        done"},{"lineNumber":162,"author":{"gitId":"MarcusTXK"},"content":"      );"},{"lineNumber":163,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":164,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":165,"author":{"gitId":"MarcusTXK"},"content":"  it(\"fails for non-existent room\", (done) \u003d\u003e {"},{"lineNumber":166,"author":{"gitId":"MarcusTXK"},"content":"    request(app).delete(`${URI_PREFIX}/${roomId}`).expect(500);"},{"lineNumber":167,"author":{"gitId":"MarcusTXK"},"content":"    done();"},{"lineNumber":168,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":169,"author":{"gitId":"MarcusTXK"},"content":"});"}],"authorContributionMap":{"MarcusTXK":169}},{"path":"room-service/utils/authentication.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"/* eslint-disable consistent-return */"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const jwt \u003d require(\"jsonwebtoken\");"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":"const getAccessToken \u003d (req) \u003d\u003e {"},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"  try {"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"    const authHeader \u003d req.headers.authorization;"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"    const authContent \u003d authHeader \u0026\u0026 authHeader.split(\" \");"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"    console.log(\"req\", req.headers);"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"    if ("},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"      !authHeader ||"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"      authContent.length !\u003d\u003d 2 ||"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"      authContent[0] !\u003d\u003d \"Bearer\" ||"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"      authContent[1] \u003d\u003d\u003d null"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"    ) {"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"      console.log(\"Access token not provided or invalid\");"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"      return null;"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"    return authContent[1];"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"  } catch (err) {"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"    console.log(\"Error: Access token not provided or invalid\");"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"    return null;"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"exports.authenticationMiddleware \u003d (req, res, next) \u003d\u003e {"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"  try {"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"    const token \u003d getAccessToken(req);"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"    console.log(\"token: \", token);"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"    if (token \u003d\u003d\u003d null) {"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"      return res.status(401).json({ message: \"Access token not found\" });"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"    // Skip deny check as the token is only valid for 60 seconds if circumventing the frontend"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":"    // Reasonable risk to tolerate"},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"    jwt.verify(token, process.env.ACCESS_TOKEN_SECRET, (err, user) \u003d\u003e {"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":"      if (err) {"},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"        console.log(err);"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"        return res.status(401).json({ message: \"Invalid access token\" });"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"      }"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"      req.user \u003d user;"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"      req.accessToken \u003d token;"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"      next();"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"  } catch (err) {"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"    console.log(\"Fail to authenticate token in middleware\");"},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":"    console.log(err);"},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"    return res"},{"lineNumber":49,"author":{"gitId":"MarcusTXK"},"content":"      .status(500)"},{"lineNumber":50,"author":{"gitId":"MarcusTXK"},"content":"      .json({ message: \"Problem encountered when validating token\" });"},{"lineNumber":51,"author":{"gitId":"MarcusTXK"},"content":"  }"},{"lineNumber":52,"author":{"gitId":"MarcusTXK"},"content":"};"}],"authorContributionMap":{"MarcusTXK":52}},{"path":"room-service/utils/common.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"// sets number i as lower or upper if it exceeds the bounds"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"exports.setBetween \u003d (i, upper, lower) \u003d\u003e Math.min(upper, Math.max(i, lower));"}],"authorContributionMap":{"MarcusTXK":2}},{"path":"room-service/utils/socket-io.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"MarcusTXK"},"content":"/* eslint-disable no-param-reassign */"},{"lineNumber":2,"author":{"gitId":"MarcusTXK"},"content":"const { Server } \u003d require(\"socket.io\");"},{"lineNumber":3,"author":{"gitId":"MarcusTXK"},"content":"const jwt \u003d require(\"jsonwebtoken\");"},{"lineNumber":4,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":5,"author":{"gitId":"MarcusTXK"},"content":"let io;"},{"lineNumber":6,"author":{"gitId":"MarcusTXK"},"content":"exports.initSocket \u003d (httpServer) \u003d\u003e {"},{"lineNumber":7,"author":{"gitId":"MarcusTXK"},"content":"  io \u003d new Server(httpServer, {"},{"lineNumber":8,"author":{"gitId":"MarcusTXK"},"content":"    cors: {"},{"lineNumber":9,"author":{"gitId":"MarcusTXK"},"content":"      origin: \"*\","},{"lineNumber":10,"author":{"gitId":"MarcusTXK"},"content":"      methods: [\"GET\", \"POST\"],"},{"lineNumber":11,"author":{"gitId":"MarcusTXK"},"content":"    },"},{"lineNumber":12,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":13,"author":{"gitId":"MarcusTXK"},"content":"  io.path(\"/socket.io/room\");"},{"lineNumber":14,"author":{"gitId":"MarcusTXK"},"content":"  io.use((socket, next) \u003d\u003e {"},{"lineNumber":15,"author":{"gitId":"MarcusTXK"},"content":"    try {"},{"lineNumber":16,"author":{"gitId":"MarcusTXK"},"content":"      const { token } \u003d socket.handshake.auth;"},{"lineNumber":17,"author":{"gitId":"MarcusTXK"},"content":"      // TODO update to verify when expired token is fixed"},{"lineNumber":18,"author":{"gitId":"MarcusTXK"},"content":"      const payload \u003d jwt.decode(token, process.env.ACCESS_TOKEN_SECRET);"},{"lineNumber":19,"author":{"gitId":"MarcusTXK"},"content":"      console.log(\"middleware payload\", payload);"},{"lineNumber":20,"author":{"gitId":"MarcusTXK"},"content":"      socket.userId \u003d payload.username;"},{"lineNumber":21,"author":{"gitId":"MarcusTXK"},"content":"      next();"},{"lineNumber":22,"author":{"gitId":"MarcusTXK"},"content":"    } catch (e) {"},{"lineNumber":23,"author":{"gitId":"MarcusTXK"},"content":"      console.log(e);"},{"lineNumber":24,"author":{"gitId":"MarcusTXK"},"content":"      next(e);"},{"lineNumber":25,"author":{"gitId":"MarcusTXK"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":27,"author":{"gitId":"MarcusTXK"},"content":"  io.on(\"connection\", (socket) \u003d\u003e {"},{"lineNumber":28,"author":{"gitId":"MarcusTXK"},"content":"    console.log(\"connection here\");"},{"lineNumber":29,"author":{"gitId":"MarcusTXK"},"content":"    socket.on(\"join-room\", (payload) \u003d\u003e {"},{"lineNumber":30,"author":{"gitId":"MarcusTXK"},"content":"      console.log(\"join-room payload\", payload);"},{"lineNumber":31,"author":{"gitId":"MarcusTXK"},"content":"      // Assuming that I have access to userId"},{"lineNumber":32,"author":{"gitId":"MarcusTXK"},"content":"      console.log(socket.userId);"},{"lineNumber":33,"author":{"gitId":"MarcusTXK"},"content":"      const { roomId, userId } \u003d payload;"},{"lineNumber":34,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":35,"author":{"gitId":"MarcusTXK"},"content":"      socket.join(roomId);"},{"lineNumber":36,"author":{"gitId":"MarcusTXK"},"content":"      socket.to(roomId).emit(\"user-connected\", userId);"},{"lineNumber":37,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":38,"author":{"gitId":"MarcusTXK"},"content":"      socket.on(\"disconnect\", () \u003d\u003e {"},{"lineNumber":39,"author":{"gitId":"MarcusTXK"},"content":"        socket.to(roomId).emit(\"user-disconnected\", userId);"},{"lineNumber":40,"author":{"gitId":"MarcusTXK"},"content":"      });"},{"lineNumber":41,"author":{"gitId":"MarcusTXK"},"content":"    });"},{"lineNumber":42,"author":{"gitId":"MarcusTXK"},"content":"  });"},{"lineNumber":43,"author":{"gitId":"MarcusTXK"},"content":"};"},{"lineNumber":44,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":45,"author":{"gitId":"MarcusTXK"},"content":"exports.sendMessageToBoth \u003d (firstSocket, secondSocket, event, message) \u003d\u003e"},{"lineNumber":46,"author":{"gitId":"MarcusTXK"},"content":"  io.to(firstSocket).to(secondSocket).emit(event, message);"},{"lineNumber":47,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":48,"author":{"gitId":"MarcusTXK"},"content":"exports.sendMessageToOne \u003d (socket, event, message) \u003d\u003e"},{"lineNumber":49,"author":{"gitId":"MarcusTXK"},"content":"  io.to(socket).emit(event, message);"},{"lineNumber":50,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":51,"author":{"gitId":"MarcusTXK"},"content":"exports.emit \u003d (event, message) \u003d\u003e io.emit(event, message);"},{"lineNumber":52,"author":{"gitId":"MarcusTXK"},"content":""},{"lineNumber":53,"author":{"gitId":"MarcusTXK"},"content":"exports.isSocketActive \u003d (socket) \u003d\u003e"},{"lineNumber":54,"author":{"gitId":"MarcusTXK"},"content":"  io.sockets.sockets.get(socket) !\u003d\u003d undefined;"}],"authorContributionMap":{"MarcusTXK":54}},{"path":"user-service/.dockerignore","fileType":"dockerignore","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"node_modules"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"npm-debug.log"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":".env"}],"authorContributionMap":{"tlylt":4}},{"path":"user-service/.env.dev","fileType":"dev","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"NODE_ENV\u003dDEV"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"ENV\u003dDEV"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"DB_LOCAL_URI\u003dmongodb://localhost:27017/peerprep"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"REFRESH_TOKEN_SECRET\u003dd094b5d45a93e9b1f9bc6dee9aff27e26bf7a875333db0df955415e87151c16a49a72b6ee85ce483e6a243a0fbf8b93989dc150cacdd970c29053a650d4fb908"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"REDIS_HOST\u003dlocalhost"}],"authorContributionMap":{"tlylt":5,"uyencfi":1}},{"path":"user-service/.env.sample","fileType":"sample","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"ENV\u003dPROD"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"DB_CLOUD_URI\u003d\u003cyour mongodb connection url\u003e"},{"lineNumber":3,"author":{"gitId":"uyencfi"},"content":"DB_LOCAL_URI\u003dmongodb://\u003cyour host\u003e:27017/peerprep"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"ACCESS_TOKEN_SECRET\u003d\u003cyour token\u003e"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"REFRESH_TOKEN_SECRET\u003d\u003cyour token\u003e"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"REDIS_HOST\u003d\u003cyour host\u003e"}],"authorContributionMap":{"tlylt":5,"uyencfi":1}},{"path":"user-service/.env.test","fileType":"test","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"ENV\u003dTEST"},{"lineNumber":2,"author":{"gitId":"uyencfi"},"content":"DB_LOCAL_URI\u003dmongodb://mongo:27017/peerprep"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"ACCESS_TOKEN_SECRET\u003d7c0dd92cafc2537595f48eca543a45e38e25b0322c558b8cb44907db49726b54a0809709c4491cbc086187009367ac4febfb8d5db310320c16d510818d833ad9"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"REFRESH_TOKEN_SECRET\u003dd094b5d45a93e9b1f9bc6dee9aff27e26bf7a875333db0df955415e87151c16a49a72b6ee85ce483e6a243a0fbf8b93989dc150cacdd970c29053a650d4fb908"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"REDIS_HOST\u003dredis"}],"authorContributionMap":{"tlylt":4,"uyencfi":1}},{"path":"user-service/.eslintignore","fileType":"eslintignore","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"node_modules/*"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"package-lock.json"}],"authorContributionMap":{"tlylt":2}},{"path":"user-service/.gitignore","fileType":"gitignore","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"# See https://help.github.com/articles/ignoring-files/ for more about ignoring files."},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"# dependencies"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"/node_modules"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"/.pnp"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":".pnp.js"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"# testing"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"/coverage"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"# misc"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":".DS_Store"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"*.pem"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"# debug"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"npm-debug.log*"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"yarn-debug.log*"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"yarn-error.log*"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"# local env files"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":".env.local"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":".env.development.local"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":".env.test.local"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":".env.production.local"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":".env"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"# logs"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"logs"}],"authorContributionMap":{"tlylt":28}},{"path":"user-service/Dockerfile","fileType":"Dockerfile","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"FROM node:14.17.0"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"# Create /usr/app directory"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"WORKDIR /usr/app"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"# Install dependencies"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"COPY package.json ."},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"COPY package-lock.json ."},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"RUN npm ci --quiet"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"# Copy source files"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"COPY . ."},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"EXPOSE 8000"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"# Run the app"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"CMD [\"npm\", \"start\"]"}],"authorContributionMap":{"tlylt":17}},{"path":"user-service/README.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"# User service"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"## Prerequisites"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"It is recommended to have redis and mongodb installed locally. If you don\u0027t have them installed, you can use docker-compose to start them."},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"## Development Guide"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"(initial setup)"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"1. Install Node.js 14 and above"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"1. Install dependencies via `npm ci`"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"1. Rename `.env.dev` file to `.env`"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"(for local setup and manual testing)"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"First rename `.env.test` to `.env` and then run the following commands:"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"`docker-compose -f docker-compose.yml up --build`"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"OR"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"(daily development)"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"1. Start the required database services:"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"   1. `docker-compose -f docker-compose.dev.yml up --build`"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"1. Start the express server:"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"   1. `npm run dev`"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"1. Shut down database services:"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"   1. `docker-compose -f docker-compose.yml stop`"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"OR"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"(running automated tests in docker)"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"`docker-compose -f docker-compose.test.yml up --exit-code-from web --build`"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"## Docker Guide"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"(Work in progress, development wise please follow the development guide)"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"Run everything in docker, for production/preview environment:"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"- Either via docker-compose: `docker-compose up --build`,"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"- Or via docker (assuming mongoDB and redis is up and running in the cloud instead):"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"  - `docker build -t user-service .`"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"  - `docker run -p 8000:8000 user-service`"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"Then visit `http://localhost:8000/api/v1/user/status` to see that hello world!"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"## JWT"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"JWT is a JSON Web Token (JWT) is a compact token format used to represent claims to be transferred between two parties."},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"To generate the secret tokens, use the following command:"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"```bash"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"node"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"require(\u0027crypto\u0027).randomBytes(64).toString(\u0027hex\u0027)"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"```"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"## Reference"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"- https://www.youtube.com/watch?v\u003dT0k-3Ze4NLo"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"- https://softwareengineering.stackexchange.com/questions/387243/best-practice-to-confirm-unique-username-for-user-creation-in-jsp-and-jdbc"}],"authorContributionMap":{"tlylt":64}},{"path":"user-service/auth/index.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import jwt from \"jsonwebtoken\""},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import bcrypt from \"bcryptjs\""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import logger from \"../logger.js\""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import { redisClient } from \"../index.js\""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"const ACCESS_TOKEN_EXPIRATION \u003d 60; // 1 minute"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"export function hashPassword(password) {"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    return bcrypt.hashSync(password, 10)"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"export function validatePassword(password, hashedPassword) {"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    return bcrypt.compareSync(password, hashedPassword)"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"export function validateToken(token, secret) {"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"        const result \u003d jwt.verify(token, secret)"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"        return {"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"            username: result.username,"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"            email: result.email,"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"            school: result.school,"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"        logger.error(err)"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"        return null"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"export function generateAccessToken(user) {"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"    return jwt.sign("},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"        {"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"            username: user.username,"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"            email: user.email,"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"            school: user.school,"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"        }, process.env.ACCESS_TOKEN_SECRET, {"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"        expiresIn: \"60s\","},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"    })"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"export function generateRefreshToken(user) {"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"    return jwt.sign({"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"        username: user.username,"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"        email: user.email,"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"        school: user.school,"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"    }, process.env.REFRESH_TOKEN_SECRET, {"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"        expiresIn: \"7d\", // to be safe, we set it to 7 days instead of no expiration"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"    })"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"export async function denyAccessToken(accessToken, username) {"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"        if (!accessToken) {"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"            return"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"        // Revoke access token immediately"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"        await redisClient.set(accessToken, username, \"EX\", ACCESS_TOKEN_EXPIRATION)"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"        logger.info(\"Access token is denied\")"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"        logger.error(err)"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"        logger.error(`Could not deny access token ${accessToken} for user ${username}`)"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"export async function isAccessTokenDenied(accessToken) {"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"        const username \u003d await redisClient.get(accessToken);"},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"        if (username !\u003d null) {"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"            logger.warn(\"Token has been revoked\");"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"            return true"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"        return false"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"        logger.error(err)"},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"        return true"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":77}},{"path":"user-service/controller/user-controller.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import {"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"    validatePassword,"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"    generateAccessToken,"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"    generateRefreshToken,"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"    validateToken,"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    denyAccessToken,"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"    hashPassword"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"} from \"../auth/index.js\""},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"import {"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    ormCreateUser,"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    ormDeleteUser,"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"    ormDeleteUserRefreshToken,"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    ormDoesUserExist,"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    ormGetUser,"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"    ormSaveUserRefreshToken,"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"} from \"../model/user-orm.js\""},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"import logger from \"../logger.js\""},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"import { updateCookieToken } from \"../middleware.js\";"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"const REFRESH_TOKEN_EXPIRATION \u003d 60 * 60 * 24 * 7 * 1000; // 1 week"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"export async function getUser(req, res) {"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"        const { username } \u003d req.user"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"        const resp \u003d await ormGetUser(username)"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"        if (resp.err) {"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"            logger.error(resp.err)"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"            return res.status(400).json({ message: \"Could not get user info\" })"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"        return res.status(200).json({"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"            message: \"Get user info successfully\","},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"            data: {"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"                username: resp.username,"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"                email: resp.email,"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"                school: resp.school,"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"                createdAt: resp.createdAt,"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"                updatedAt: resp.updatedAt,"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"            }"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"        })"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"        logger.error(err)"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"        return res.status(500).json({ message: \"Database failure when querying user\" })"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"export async function updateUser(req, res) {"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"        const { username } \u003d req.user"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"        const resp \u003d await ormGetUser(username)"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"        if (resp.err) {"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"            logger.error(resp.err)"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"            return res.status(400).json({ message: \"Could not get user info\" })"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"        const user \u003d resp"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"        if (req.body?.email) {"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"            user.email \u003d req.body.email"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"        if (req.body?.school) {"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"            user.school \u003d req.body.school"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"        if ((req.body?.previousPassword \u0026\u0026 !req.body?.updatedPassword) || (!req.body?.previousPassword \u0026\u0026 req.body?.updatedPassword)) {"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"            return res.status(400).json({ message: \"Previous password and updated password must be provided together\" })"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"        let passwordUpdated \u003d false"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"        if (req.body?.previousPassword \u0026\u0026 req.body?.updatedPassword) {"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"            if (req.body.previousPassword \u003d\u003d\u003d req.body.updatedPassword) {"},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"                return res.status(400).json({ message: \"Previous password and updated password cannot be the same\" })"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"            }"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"            if (!validatePassword(req.body.previousPassword, user.password)) {"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"                return res.status(400).json({ message: \"Invalid password\" })"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"            }"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"            user.password \u003d hashPassword(req.body.updatedPassword)"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"            passwordUpdated \u003d true"},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"        user.save()"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"        if (passwordUpdated) {"},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"            updateCookieToken(res, \"\", 0)"},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"            return res.status(200)"},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":"                .json({"},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"                    message: \"Update user info successfully\","},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":"                    data: {"},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"                        username: resp.username,"},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":"                        email: resp.email,"},{"lineNumber":85,"author":{"gitId":"tlylt"},"content":"                        school: resp.school,"},{"lineNumber":86,"author":{"gitId":"tlylt"},"content":"                        createdAt: resp.createdAt,"},{"lineNumber":87,"author":{"gitId":"tlylt"},"content":"                        updatedAt: resp.updatedAt,"},{"lineNumber":88,"author":{"gitId":"tlylt"},"content":"                    }"},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"                })"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":"        return res.status(200).json({"},{"lineNumber":92,"author":{"gitId":"tlylt"},"content":"            message: \"Update user info successfully\","},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":"            data: {"},{"lineNumber":94,"author":{"gitId":"tlylt"},"content":"                username: resp.username,"},{"lineNumber":95,"author":{"gitId":"tlylt"},"content":"                email: resp.email,"},{"lineNumber":96,"author":{"gitId":"tlylt"},"content":"                school: resp.school,"},{"lineNumber":97,"author":{"gitId":"tlylt"},"content":"                createdAt: resp.createdAt,"},{"lineNumber":98,"author":{"gitId":"tlylt"},"content":"                updatedAt: resp.updatedAt,"},{"lineNumber":99,"author":{"gitId":"tlylt"},"content":"            }"},{"lineNumber":100,"author":{"gitId":"tlylt"},"content":"        })"},{"lineNumber":101,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":102,"author":{"gitId":"tlylt"},"content":"        logger.error(err)"},{"lineNumber":103,"author":{"gitId":"tlylt"},"content":"        return res.status(500).json({ message: \"Database failure when updating user\" })"},{"lineNumber":104,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":105,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":106,"author":{"gitId":"-"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"export async function createUser(req, res) {"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    try {"},{"lineNumber":109,"author":{"gitId":"tlylt"},"content":"        const { username, password } \u003d req.body"},{"lineNumber":110,"author":{"gitId":"tlylt"},"content":"        if (!(username \u0026\u0026 password)) {"},{"lineNumber":111,"author":{"gitId":"tlylt"},"content":"            return res.status(400).json({ message: \"Username and/or Password are missing\" })"},{"lineNumber":112,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":113,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":114,"author":{"gitId":"tlylt"},"content":"        const exist \u003d await ormDoesUserExist(username)"},{"lineNumber":115,"author":{"gitId":"tlylt"},"content":"        if (exist?.err) {"},{"lineNumber":116,"author":{"gitId":"tlylt"},"content":"            logger.error(exist.err)"},{"lineNumber":117,"author":{"gitId":"tlylt"},"content":"            return res.status(500).json({ message: \"Database failure when checking user existence\" })"},{"lineNumber":118,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":119,"author":{"gitId":"tlylt"},"content":"        if (exist) {"},{"lineNumber":120,"author":{"gitId":"tlylt"},"content":"            return res.status(409).json({ message: \"Username has been taken\" })"},{"lineNumber":121,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":122,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":123,"author":{"gitId":"tlylt"},"content":"        const resp \u003d await ormCreateUser(username, password)"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        if (resp.err) {"},{"lineNumber":125,"author":{"gitId":"tlylt"},"content":"            logger.error(resp.err)"},{"lineNumber":126,"author":{"gitId":"tlylt"},"content":"            return res.status(400).json({ message: \"Could not create a new user\" })"},{"lineNumber":127,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":128,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":129,"author":{"gitId":"tlylt"},"content":"        const msg \u003d `Created new user ${username} successfully`"},{"lineNumber":130,"author":{"gitId":"tlylt"},"content":"        logger.info(msg)"},{"lineNumber":131,"author":{"gitId":"tlylt"},"content":"        return res.status(201).json({ message: msg })"},{"lineNumber":132,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":133,"author":{"gitId":"tlylt"},"content":"        logger.error(err)"},{"lineNumber":134,"author":{"gitId":"tlylt"},"content":"        return res.status(500).json({ message: \"Database failure when creating new user\" })"},{"lineNumber":135,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":136,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":137,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":138,"author":{"gitId":"tlylt"},"content":"export async function deleteUser(req, res) {"},{"lineNumber":139,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":140,"author":{"gitId":"tlylt"},"content":"        const { username } \u003d req.user"},{"lineNumber":141,"author":{"gitId":"tlylt"},"content":"        const resp \u003d await ormDeleteUser(username)"},{"lineNumber":142,"author":{"gitId":"tlylt"},"content":"        if (resp.err) {"},{"lineNumber":143,"author":{"gitId":"tlylt"},"content":"            logger.error(resp.err)"},{"lineNumber":144,"author":{"gitId":"tlylt"},"content":"            return res.status(400).json({ message: \"Could not delete user\" })"},{"lineNumber":145,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":146,"author":{"gitId":"tlylt"},"content":"        const msg \u003d `Deleted user ${username} successfully`"},{"lineNumber":147,"author":{"gitId":"tlylt"},"content":"        logger.info(msg)"},{"lineNumber":148,"author":{"gitId":"tlylt"},"content":"        await denyAccessToken(req.accessToken, req.user.username)"},{"lineNumber":149,"author":{"gitId":"tlylt"},"content":"        updateCookieToken(res, \"\", 0)"},{"lineNumber":150,"author":{"gitId":"tlylt"},"content":"        return res.status(200)"},{"lineNumber":151,"author":{"gitId":"tlylt"},"content":"            .json({ message: msg })"},{"lineNumber":152,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":153,"author":{"gitId":"tlylt"},"content":"        logger.error(err)"},{"lineNumber":154,"author":{"gitId":"tlylt"},"content":"        return res.status(500).json({ message: \"Database failure when deleting user\" })"},{"lineNumber":155,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":156,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":157,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":158,"author":{"gitId":"tlylt"},"content":"export async function login(req, res) {"},{"lineNumber":159,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":160,"author":{"gitId":"tlylt"},"content":"        const { username, password } \u003d req.body"},{"lineNumber":161,"author":{"gitId":"tlylt"},"content":"        if (!(username \u0026\u0026 password)) {"},{"lineNumber":162,"author":{"gitId":"tlylt"},"content":"            return res.status(400).json({ message: \"Username and/or Password are missing\" })"},{"lineNumber":163,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":164,"author":{"gitId":"tlylt"},"content":"        const exist \u003d await ormDoesUserExist(username)"},{"lineNumber":165,"author":{"gitId":"tlylt"},"content":"        if (!exist) {"},{"lineNumber":166,"author":{"gitId":"tlylt"},"content":"            return res.status(400).json({ message: \"User does not exist\" })"},{"lineNumber":167,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":168,"author":{"gitId":"tlylt"},"content":"        const user \u003d await ormGetUser(username)"},{"lineNumber":169,"author":{"gitId":"tlylt"},"content":"        const accessToken \u003d generateAccessToken(user)"},{"lineNumber":170,"author":{"gitId":"tlylt"},"content":"        const refreshToken \u003d generateRefreshToken(user)"},{"lineNumber":171,"author":{"gitId":"tlylt"},"content":"        if (!ormSaveUserRefreshToken(user, refreshToken)) {"},{"lineNumber":172,"author":{"gitId":"tlylt"},"content":"            return res.status(500).json({ message: \"Could not save user refresh token\" })"},{"lineNumber":173,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":174,"author":{"gitId":"tlylt"},"content":"        if (validatePassword(password, user.password)) {"},{"lineNumber":175,"author":{"gitId":"tlylt"},"content":"            updateCookieToken(res, refreshToken, REFRESH_TOKEN_EXPIRATION)"},{"lineNumber":176,"author":{"gitId":"tlylt"},"content":"            return res"},{"lineNumber":177,"author":{"gitId":"tlylt"},"content":"                .status(200)"},{"lineNumber":178,"author":{"gitId":"tlylt"},"content":"                .json({"},{"lineNumber":179,"author":{"gitId":"tlylt"},"content":"                    message: \"User login is successful\","},{"lineNumber":180,"author":{"gitId":"tlylt"},"content":"                    data: {"},{"lineNumber":181,"author":{"gitId":"tlylt"},"content":"                        username: user.username,"},{"lineNumber":182,"author":{"gitId":"tlylt"},"content":"                        email: user.email,"},{"lineNumber":183,"author":{"gitId":"tlylt"},"content":"                        school: user.school,"},{"lineNumber":184,"author":{"gitId":"tlylt"},"content":"                        accessToken: accessToken,"},{"lineNumber":185,"author":{"gitId":"tlylt"},"content":"                    },"},{"lineNumber":186,"author":{"gitId":"tlylt"},"content":"                })"},{"lineNumber":187,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":188,"author":{"gitId":"tlylt"},"content":"        return res.status(400).json({ message: `Username and/or Password are incorrect` })"},{"lineNumber":189,"author":{"gitId":"-"},"content":"    } catch (err) {"},{"lineNumber":190,"author":{"gitId":"tlylt"},"content":"        logger.error(err)"},{"lineNumber":191,"author":{"gitId":"tlylt"},"content":"        return res.status(500).json({ message: \"Login failed\" })"},{"lineNumber":192,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":193,"author":{"gitId":"-"},"content":"}"},{"lineNumber":194,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":195,"author":{"gitId":"tlylt"},"content":"export async function logout(req, res) {"},{"lineNumber":196,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":197,"author":{"gitId":"tlylt"},"content":"        if (ormDeleteUserRefreshToken(req.user.username)) {"},{"lineNumber":198,"author":{"gitId":"tlylt"},"content":"            await denyAccessToken(req.accessToken, req.user.username)"},{"lineNumber":199,"author":{"gitId":"tlylt"},"content":"            updateCookieToken(res, \"\", 0)"},{"lineNumber":200,"author":{"gitId":"tlylt"},"content":"            return res"},{"lineNumber":201,"author":{"gitId":"tlylt"},"content":"                .status(200)"},{"lineNumber":202,"author":{"gitId":"tlylt"},"content":"                .json({ message: \"User logout is successful\" })"},{"lineNumber":203,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":204,"author":{"gitId":"tlylt"},"content":"        return res.status(500).json({ message: \"Could not logout user\" })"},{"lineNumber":205,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":206,"author":{"gitId":"tlylt"},"content":"        logger.error(err)"},{"lineNumber":207,"author":{"gitId":"tlylt"},"content":"        return res.status(500).json({ message: \"Could not logout user\" })"},{"lineNumber":208,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":209,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":210,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":211,"author":{"gitId":"tlylt"},"content":"// Handle refresh token"},{"lineNumber":212,"author":{"gitId":"tlylt"},"content":"export async function token(req, res) {"},{"lineNumber":213,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":214,"author":{"gitId":"tlylt"},"content":"        const refreshToken \u003d req.cookies.jwt_refresh_token"},{"lineNumber":215,"author":{"gitId":"tlylt"},"content":"        if (!refreshToken) {"},{"lineNumber":216,"author":{"gitId":"tlylt"},"content":"            return res.status(400).json({ message: \"Refresh token is missing\" })"},{"lineNumber":217,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":218,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":219,"author":{"gitId":"tlylt"},"content":"        const userInfo \u003d validateToken(refreshToken, process.env.REFRESH_TOKEN_SECRET)"},{"lineNumber":220,"author":{"gitId":"tlylt"},"content":"        if (!userInfo) {"},{"lineNumber":221,"author":{"gitId":"tlylt"},"content":"            return res.status(400).json({ message: \"Invalid refresh token\" })"},{"lineNumber":222,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":223,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":224,"author":{"gitId":"tlylt"},"content":"        const resp \u003d await ormGetUser(userInfo.username)"},{"lineNumber":225,"author":{"gitId":"tlylt"},"content":"        if (resp.err) {"},{"lineNumber":226,"author":{"gitId":"tlylt"},"content":"            return res.status(400).json({ message: \"Could not get user\" })"},{"lineNumber":227,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":228,"author":{"gitId":"tlylt"},"content":"        if (resp.refreshToken !\u003d\u003d refreshToken) {"},{"lineNumber":229,"author":{"gitId":"tlylt"},"content":"            return res.status(400).json({ message: \"Refresh token does not match the user\u0027s token record\" })"},{"lineNumber":230,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":231,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":232,"author":{"gitId":"tlylt"},"content":"        const accessToken \u003d generateAccessToken(resp)"},{"lineNumber":233,"author":{"gitId":"tlylt"},"content":"        const newRefreshToken \u003d generateRefreshToken(userInfo)"},{"lineNumber":234,"author":{"gitId":"tlylt"},"content":"        resp.refreshToken \u003d newRefreshToken"},{"lineNumber":235,"author":{"gitId":"tlylt"},"content":"        await resp.save()"},{"lineNumber":236,"author":{"gitId":"tlylt"},"content":"        updateCookieToken(res, newRefreshToken, REFRESH_TOKEN_EXPIRATION)"},{"lineNumber":237,"author":{"gitId":"tlylt"},"content":"        return res"},{"lineNumber":238,"author":{"gitId":"tlylt"},"content":"            .status(200)"},{"lineNumber":239,"author":{"gitId":"tlylt"},"content":"            .json({"},{"lineNumber":240,"author":{"gitId":"tlylt"},"content":"                message: \"Token refreshed successfully\","},{"lineNumber":241,"author":{"gitId":"tlylt"},"content":"                data: {"},{"lineNumber":242,"author":{"gitId":"tlylt"},"content":"                    username: userInfo.username,"},{"lineNumber":243,"author":{"gitId":"tlylt"},"content":"                    email: resp.email,"},{"lineNumber":244,"author":{"gitId":"tlylt"},"content":"                    school: resp.school,"},{"lineNumber":245,"author":{"gitId":"tlylt"},"content":"                    accessToken: accessToken,"},{"lineNumber":246,"author":{"gitId":"tlylt"},"content":"                }"},{"lineNumber":247,"author":{"gitId":"tlylt"},"content":"            })"},{"lineNumber":248,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":249,"author":{"gitId":"tlylt"},"content":"        logger.error(err)"},{"lineNumber":250,"author":{"gitId":"tlylt"},"content":"        return res.status(500).json({ message: \"Database failure when refreshing token\" })"},{"lineNumber":251,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":252,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":253,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":254,"author":{"gitId":"tlylt"},"content":"export async function deleteUserViaPassword(req, res) {"},{"lineNumber":255,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":256,"author":{"gitId":"tlylt"},"content":"        const { username, password } \u003d req.body"},{"lineNumber":257,"author":{"gitId":"tlylt"},"content":"        if (!(username \u0026\u0026 password)) {"},{"lineNumber":258,"author":{"gitId":"tlylt"},"content":"            return res.status(400).json({ message: \"Username and/or Password are missing\" })"},{"lineNumber":259,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":260,"author":{"gitId":"tlylt"},"content":"        const exist \u003d await ormDoesUserExist(username)"},{"lineNumber":261,"author":{"gitId":"tlylt"},"content":"        if (!exist) {"},{"lineNumber":262,"author":{"gitId":"tlylt"},"content":"            return res.status(400).json({ message: \"User does not exist\" })"},{"lineNumber":263,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":264,"author":{"gitId":"tlylt"},"content":"        const user \u003d await ormGetUser(username)"},{"lineNumber":265,"author":{"gitId":"tlylt"},"content":"        if (validatePassword(password, user.password)) {"},{"lineNumber":266,"author":{"gitId":"tlylt"},"content":"            const resp \u003d await ormDeleteUser(username)"},{"lineNumber":267,"author":{"gitId":"tlylt"},"content":"            if (resp.err) {"},{"lineNumber":268,"author":{"gitId":"tlylt"},"content":"                logger.error(resp.err)"},{"lineNumber":269,"author":{"gitId":"tlylt"},"content":"                return res.status(400).json({ message: \"Could not delete user\" })"},{"lineNumber":270,"author":{"gitId":"tlylt"},"content":"            }"},{"lineNumber":271,"author":{"gitId":"tlylt"},"content":"            const msg \u003d `Deleted user ${username} successfully`"},{"lineNumber":272,"author":{"gitId":"tlylt"},"content":"            return res.status(200).json({ message: msg })"},{"lineNumber":273,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":274,"author":{"gitId":"tlylt"},"content":"        return res.status(400).json({ message: `Username and/or Password are incorrect` })"},{"lineNumber":275,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":276,"author":{"gitId":"tlylt"},"content":"        logger.error(err)"},{"lineNumber":277,"author":{"gitId":"tlylt"},"content":"        return res.status(500).json({ message: \"Test delete user failed\" })"},{"lineNumber":278,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":279,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":270,"-":9}},{"path":"user-service/docker-compose.dev.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"version: \"3.3\""},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"services:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"    mongo:"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"        image: mongo"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"        ports:"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"            - \"27017:27017\""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"        command:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"            - \"--logpath\""},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"            - \"/dev/null\""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    redis:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"        image: redis:alpine"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        ports:"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"            - \"6379:6379\""}],"authorContributionMap":{"tlylt":14}},{"path":"user-service/docker-compose.test.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"version: \"3.3\""},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"services:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"    web:"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"        build:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"            context: ."},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"            dockerfile: Dockerfile"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"        ports:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"            - \"8000:8000\""},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"        links:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"            - mongo"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"            - redis"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        env_file:"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"            - .env.test"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"        depends_on:"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"            - mongo"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"            - redis"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"        command: npm run test:ci"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"    mongo:"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"        image: mongo"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"        command:"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"            - \"--logpath\""},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"            - \"/dev/null\""},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"        ports:"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"            - \"27017:27017\""},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"    redis:"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"        image: redis:alpine"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"        ports:"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"            - \"6379:6379\""}],"authorContributionMap":{"tlylt":29}},{"path":"user-service/docker-compose.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"version: \"3.3\""},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"services:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"    web:"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"        build:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"            context: ."},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"            dockerfile: Dockerfile"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"        ports:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"            - \"8000:8000\""},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"        links:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"            - mongo"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"            - redis"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        env_file:"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"            - .env"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"    mongo:"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        image: mongo"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"        ports:"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"            - \"27017:27017\""},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"    redis:"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"        image: redis:alpine"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"        ports:"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"            - \"6379:6379\""}],"authorContributionMap":{"tlylt":22}},{"path":"user-service/index.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import express from \"express\""},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import cors from \"cors\""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import cookieParser from \"cookie-parser\""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import morgan from \"morgan\""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"import helmet from \"helmet\""},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"import compression from \"compression\""},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"import redis from \"redis\""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"import \"dotenv/config\""},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"import {"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"    createUser,"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"    deleteUser,"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    getUser,"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    login,"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"    logout,"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"    token,"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    updateUser,"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"    deleteUserViaPassword"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"} from \"./controller/user-controller.js\""},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"import { authenticateToken } from \u0027./middleware.js\u0027"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"import logger from \u0027./logger.js\u0027"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"import { seedUsers } from \"./model/repository.js\""},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"const API_PREFIX \u003d \"/api/v1/user\""},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"const app \u003d express()"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"const router \u003d express.Router()"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"let redisClient"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"(async () \u003d\u003e {"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"    redisClient \u003d redis.createClient({ url: `redis://${process.env.REDIS_HOST}:6379` });"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"    redisClient.on(\"error\", (error) \u003d\u003e logger.error(`${error}`))"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"    redisClient.on(\"connect\", () \u003d\u003e logger.info(\"Connected to Redis\"))"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"    await redisClient.connect()"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"})()"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"app.use(express.urlencoded({ extended: true }))"},{"lineNumber":39,"author":{"gitId":"-"},"content":"app.use(express.json())"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"if (process.env.ENV \u003d\u003d\u003d \"production\") {"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"    app.use(cors())"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"    app.options(\"*\", cors());"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"} else {"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"    app.use("},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"        cors({"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"            origin: `http://localhost:${process.env.PORT || 3000}`,"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"            credentials: true,"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"        })"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"    )"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"app.use(cookieParser())"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"app.use(morgan(\"dev\"))"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"app.use(helmet())"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"app.use(compression())"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"app.use(API_PREFIX, router).all((_, res) \u003d\u003e {"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"    res.setHeader(\"content-type\", \"application/json\")"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"    res.setHeader(\"Access-Control-Allow-Origin\", \"*\")"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"})"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"// CHECK SERVER ALIVE"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"router.get(\"/status\", (_, res) \u003d\u003e {"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"    res.status(200).send({ message: \"Hello World from user-service\" })"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"})"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"// CREATE USER"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"router.post(\"/\", createUser)"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"// LOGIN"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"router.post(\"/login\", login)"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"// REFRESH TOKEN"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"router.post(\u0027/token\u0027, token)"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"// UPDATE USER"},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"router.put(\"/\", authenticateToken, updateUser)"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"// GET USER"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"router.get(\"/\", authenticateToken, getUser)"},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"// DELETE USER"},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"router.delete(\"/\", authenticateToken, deleteUser)"},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":"// LOGOUT"},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"router.post(\u0027/logout\u0027, authenticateToken, logout)"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"// TEST TOKEN"},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":"router.post(\"/testToken\", authenticateToken, (req, res) \u003d\u003e {"},{"lineNumber":85,"author":{"gitId":"tlylt"},"content":"    console.log(req)"},{"lineNumber":86,"author":{"gitId":"tlylt"},"content":"    res.status(200).send(\"Hello World from user-service token test\")"},{"lineNumber":87,"author":{"gitId":"-"},"content":"})"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"// TEST DELETE USER"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"router.delete(\"/testDelete\", deleteUserViaPassword)"},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":92,"author":{"gitId":"tlylt"},"content":"// Error handling"},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":"app.use((err, _, res, next) \u003d\u003e {"},{"lineNumber":94,"author":{"gitId":"tlylt"},"content":"    logger.error(err)"},{"lineNumber":95,"author":{"gitId":"tlylt"},"content":"    res.status(500).send({ message: \"Server error\" })"},{"lineNumber":96,"author":{"gitId":"tlylt"},"content":"    next(err);"},{"lineNumber":97,"author":{"gitId":"tlylt"},"content":"})"},{"lineNumber":98,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":99,"author":{"gitId":"tlylt"},"content":"app.listen(8000, async () \u003d\u003e {"},{"lineNumber":100,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":101,"author":{"gitId":"tlylt"},"content":"        await seedUsers()"},{"lineNumber":102,"author":{"gitId":"tlylt"},"content":"    } catch {"},{"lineNumber":103,"author":{"gitId":"tlylt"},"content":"        logger.info(\"Seeded in the past\")"},{"lineNumber":104,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":105,"author":{"gitId":"tlylt"},"content":"    logger.info(\"user-service listening on port 8000\")"},{"lineNumber":106,"author":{"gitId":"tlylt"},"content":"})"},{"lineNumber":107,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":108,"author":{"gitId":"tlylt"},"content":"export { redisClient, app }"}],"authorContributionMap":{"tlylt":101,"-":7}},{"path":"user-service/logger.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { createLogger, format, transports } from \u0027winston\u0027"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import \u0027winston-daily-rotate-file\u0027;"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"const errorTransport \u003d new transports.DailyRotateFile({"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"    filename: \u0027logs/user-service-error-%DATE%.log\u0027,"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"    level: \u0027error\u0027,"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"    datePattern: \u0027YYYY-MM-DD-HH\u0027,"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    zippedArchive: true,"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    maxSize: \u002720m\u0027,"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    maxFiles: \u00272d\u0027"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"});"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"const combinedTransport \u003d new transports.DailyRotateFile({"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    filename: \u0027logs/user-service-combined-%DATE%.log\u0027,"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"    datePattern: \u0027YYYY-MM-DD-HH\u0027,"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"    zippedArchive: true,"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    maxSize: \u002720m\u0027,"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"    maxFiles: \u00272d\u0027"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"});"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"const logger \u003d createLogger({"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"    level: \u0027info\u0027,"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"    format: format.combine("},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"        format.timestamp({"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"            format: \u0027YYYY-MM-DD HH:mm:ss\u0027"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"        }),"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"        format.errors({ stack: true }),"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"        format.splat(),"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"        format.json(),"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"    ),"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"    defaultMeta: { service: \u0027user-service\u0027 },"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"    transports: ["},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"        // - Write to all logs with level `info` and below to `user-service-combined.log`."},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"        // - Write all logs error (and below) to `user-service-error.log`."},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"        errorTransport,"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"        combinedTransport"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"    ]"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"});"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"const alignedWithColorsAndTime \u003d format.combine("},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"    format.colorize(),"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"    format.timestamp(),"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"    format.align(),"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"    format.printf(info \u003d\u003e `${info.timestamp} ${info.level}: ${info.message}`)"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":");"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"if (process.env.NODE_ENV !\u003d\u003d \u0027PROD\u0027) {"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"    logger.add(new transports.Console({"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"        format: alignedWithColorsAndTime"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"    }));"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"export default logger;"}],"authorContributionMap":{"tlylt":53}},{"path":"user-service/middleware.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"// With reference to JWT Authentication Tutorial - Node.js"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"// https://www.youtube.com/watch?v\u003dmbsmsi7l3r4"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import jwt from \"jsonwebtoken\";"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import { isAccessTokenDenied } from \"./auth/index.js\";"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"import logger from \"./logger.js\";"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"function getAccessToken(req) {"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"        const authHeader \u003d req.headers[\u0027authorization\u0027];"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"        const authContent \u003d authHeader \u0026\u0026 authHeader.split(\u0027 \u0027);"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"        if (!authHeader || authContent.length !\u003d\u003d 2 || authContent[0] !\u003d\u003d \"Bearer\" || authContent[1] \u003d\u003d\u003d null) {"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"            logger.info(\"Access token not provided or invalid\");"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"            return null;"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"        return authContent[1];"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"        logger.info(\"Access token not provided or invalid\");"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"        return null;"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"// Modifies the response object to configure the cookie"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"export async function updateCookieToken(res, token, maxAge) {"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"    res.cookie(\"jwt_refresh_token\", token, {"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"        httpOnly: true,"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"        overwrite: true,"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"        maxAge: maxAge,"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"    })"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"export async function authenticateToken(req, res, next) {"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"        const token \u003d getAccessToken(req);"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"        if (token \u003d\u003d\u003d null) {"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"            return res.status(401).json({ message: \"Access token not found\" });"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"        const denied \u003d await isAccessTokenDenied(token);"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"        if (denied) {"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"            return res.status(401).json({ message: \"Token has been revoked\" });"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"        }"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"        jwt.verify(token, process.env.ACCESS_TOKEN_SECRET, (err, user) \u003d\u003e {"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"            if (err) {"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"                logger.error(err)"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"                return res.status(401).json({ message: \"Invalid access token\" });"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"            }"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"            req.user \u003d user;"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"            req.accessToken \u003d token;"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"            next();"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"        })"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"        logger.error(\"Fail to authenticate token in middleware\");"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"        logger.error(err);"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"        return res.status(500).json({ message: \"Problem encountered when validating token\" });"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":56}},{"path":"user-service/model/repository.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import UserModel from \"./user-model.js\""},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import mongoose from \"mongoose\""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import logger from \"../logger.js\""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import { hashPassword } from \"../auth/index.js\""},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"const mongoDB \u003d process.env.ENV \u003d\u003d \"PROD\""},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"    ? process.env.DB_CLOUD_URI"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    : process.env.DB_LOCAL_URI // Either via docker-compose, or local mongo db needed"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"mongoose.connect(mongoDB, { useNewUrlParser: true, useUnifiedTopology: true })"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"const db \u003d mongoose.connection"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"db.on(\"error\", () \u003d\u003e logger.error(\"MongoDB connection error:\"))"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"db.on(\"connected\", () \u003d\u003e logger.info(\"Connected to MongoDB\"))"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"export async function createUser(params) {"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    return new UserModel(params)"},{"lineNumber":18,"author":{"gitId":"-"},"content":"}"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"export async function doesUserExist(username) {"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"    return UserModel.exists({ username: username })"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"export async function getUser(username) {"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"    return UserModel.findOne({ username: username })"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"export async function deleteUser(username) {"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"    return UserModel.deleteOne({ username: username })"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"export async function seedUsers() {"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"    const users \u003d ["},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"        { username: \"qwe\", password: hashPassword(\"qwe\") },"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"        { username: \"asd\", password: hashPassword(\"asd\") },"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"        { username: \"zxc\", password: hashPassword(\"zxc\") },"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"    ]"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"    await UserModel.insertMany(users)"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":31,"-":8}},{"path":"user-service/model/user-model.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import mongoose from \"mongoose\""},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"var Schema \u003d mongoose.Schema"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"const UserModelSchema \u003d new Schema({"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"    username: { // Identifier for the user, since it is unique"},{"lineNumber":6,"author":{"gitId":"-"},"content":"        type: String,"},{"lineNumber":7,"author":{"gitId":"-"},"content":"        required: true,"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"        minLength: 1,"},{"lineNumber":9,"author":{"gitId":"-"},"content":"        unique: true,"},{"lineNumber":10,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":11,"author":{"gitId":"-"},"content":"    password: {"},{"lineNumber":12,"author":{"gitId":"-"},"content":"        type: String,"},{"lineNumber":13,"author":{"gitId":"-"},"content":"        required: true,"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"    email: { // For communication purposes"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        type: String,"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"    school: {"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"        type: String,"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"    role: { // For future proofing, we can add roles to users"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"        type: String,"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"        default: \"user\","},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"    refreshToken: {"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"        type: String,"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"    createdAt: {"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"        type: Date,"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"        immutable: true,"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"        default: () \u003d\u003e Date.now(),"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"    updatedAt: {"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"        type: Date,"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"        default: () \u003d\u003e Date.now(),"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"    },"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"})"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"UserModelSchema.pre(\"save\", function (next) {"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"    this.updatedAt \u003d Date.now()"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"    next()"},{"lineNumber":42,"author":{"gitId":"-"},"content":"})"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"export default mongoose.model(\"UserModel\", UserModelSchema)"}],"authorContributionMap":{"tlylt":34,"-":10}},{"path":"user-service/model/user-orm.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import { createUser, doesUserExist, getUser, deleteUser } from \"./repository.js\""},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { hashPassword } from \"../auth/index.js\""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import logger from \"../logger.js\""},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"// need to separate orm functions from repository to decouple business logic from persistence"},{"lineNumber":6,"author":{"gitId":"-"},"content":"export async function ormCreateUser(username, password) {"},{"lineNumber":7,"author":{"gitId":"-"},"content":"    try {"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"        const newUser \u003d await createUser({"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"            username,"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"            password: hashPassword(password),"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"        })"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"        newUser.save()"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"        return true"},{"lineNumber":14,"author":{"gitId":"-"},"content":"    } catch (err) {"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"        logger.error(\"Could not create new user\")"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"        logger.error(err)"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"        return false"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":19,"author":{"gitId":"-"},"content":"}"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"export async function ormDoesUserExist(username) {"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"        return await doesUserExist(username)"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"        logger.error(\"Could not check user existence\")"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"        return { err }"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"export async function ormGetUser(username) {"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"        return await getUser(username)"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"        logger.error(\"Could not get user\")"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"        return { err }"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"export async function ormGetUserRefreshToken(username) {"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"        return await getUser(username).refreshToken"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"        logger.error(\"Could not get user refresh token\")"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"        return { err }"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"export async function ormSaveUserRefreshToken(user, refreshToken) {"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"        user.refreshToken \u003d refreshToken"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"        await user.save()"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"        return true"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"        logger.error(\"Could not save user refresh token\")"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"        return { err }"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"export async function ormDeleteUserRefreshToken(username) {"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"        const user \u003d await getUser(username)"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"        user.refreshToken \u003d undefined"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"        await user.save()"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"        return true"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"        logger.error(\"Could not delete user refresh token\")"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"        return { err }"},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"export async function ormDeleteUser(username) {"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"    try {"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"        await deleteUser(username)"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"        return true"},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"    } catch (err) {"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"        logger.error(\"Could not delete user\")"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"        return { err }"},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":71,"-":8}},{"path":"user-service/requests.rest","fileType":"rest","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"### CHECK SERVER ALIVE"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"GET http://localhost:8000/api/v1/user/status"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"### CREATE USER"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"POST http://localhost:8000/api/v1/user"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"Content-Type: application/json"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"{"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    \"username\": \"test\","},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    \"password\": \"test\""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"### GET USER"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"GET http://localhost:8000/api/v1/user"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InRlc3QiLCJpYXQiOjE2NjI1NjY0MTksImV4cCI6MTY2MjU2NzMxOX0.QYeoCA_qNSWfnY9wyJjWEvmT6p8T0XO6Oz7iadSwbyE"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"### UPDATE USER"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"PUT http://localhost:8000/api/v1/user"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"Content-Type: application/json"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InRlc3QiLCJpYXQiOjE2NjI1NjY0MTksImV4cCI6MTY2MjU2NzMxOX0.QYeoCA_qNSWfnY9wyJjWEvmT6p8T0XO6Oz7iadSwbyE"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"{"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"    \"email\": \"test\","},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"    \"previousPassword\": \"test\","},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"    \"updatedPassword\": \"test1\""},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"### DELETE USER"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"DELETE http://localhost:8000/api/v1/user"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InRlc3QiLCJpYXQiOjE2NjI1NjYxMTgsImV4cCI6MTY2MjU2NzAxOH0.7u4he3mncLOWH-o9EYFFpSd_-DT822X1FONZ4WFeZOk"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"### LOGIN"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"POST http://localhost:8000/api/v1/user/login"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"Content-Type: application/json"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"{"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"    \"username\": \"test\","},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"    \"password\": \"test\""},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"### LOGOUT (Need to login to get the access token from response object)"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"POST http://localhost:8000/api/v1/user/logout"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InRlc3QiLCJpYXQiOjE2NjIzMDYzMzksImV4cCI6MTY2MjMwNzIzOX0.5r4boZMBQxnPlpCMrjl-v0FoR3gJwTKgWGRqa-SJKpQ"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"### TOKEN REFRESH"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"POST http://localhost:8000/api/v1/user/token"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"Content-Type: application/json"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"Cookie: jwt_refresh_token \u003d \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InRlc3QiLCJpYXQiOjE2NjIzMDYzNjAsImV4cCI6MTY2MjkxMTE2MH0.biena8VzR0shF4Q84qIi2aNzd3yWi87DQ0Vn4rQojRk\""},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"### TEST TOKEN"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"POST http://localhost:8000/api/v1/user/testToken"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InRlc3QiLCJpYXQiOjE2NjI1NjU5MzQsImV4cCI6MTY2MjU2NTk5NH0.UlW3Vw7RCkK_k-9Ky3WQA3pSLNXaBznSx-y32ChjHhg"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"Content-Type: application/json"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"{"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"    \"username\": \"test\","},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"    \"password\": \"test\""},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"}"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"### DELETE USER"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"DELETE http://localhost:8000/api/v1/testDelete"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"Content-Type: application/json"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"{"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"    \"username\": \"test\","},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"    \"password\": \"test\""},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"}"}],"authorContributionMap":{"tlylt":69}},{"path":"user-service/test/index.spec.js","fileType":"js","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"import request from \u0027supertest\u0027;"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"import { app } from \u0027../index.js\u0027;"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import { expect } from \u0027chai\u0027;"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"const BASE_URL_PREFIX \u003d \u0027/api/v1/user\u0027;"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"let accessToken \u003d \u0027\u0027;"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"describe(\u0027GET /status\u0027, function () {"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    it(\u0027responds successfully\u0027, function (done) {"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"        request(app)"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"            .get(`${BASE_URL_PREFIX}/status`)"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"            .set(\u0027Accept\u0027, \u0027application/json\u0027)"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"            .expect(\u0027Content-Type\u0027, /json/)"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"            .expect(200, {"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"                message: \u0027Hello World from user-service\u0027"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"            }, done);"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    });"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"});"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"describe(\u0027POST /user\u0027, function () {"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"    it(\u0027responds successfully for creating user\u0027, async function () {"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"        // Clear user if any"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"        await request(app)"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"            .delete(`${BASE_URL_PREFIX}/testDelete`)"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"            .set(\u0027Accept\u0027, \u0027application/json\u0027)"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"            .send({"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"                username: \u0027testuser\u0027,"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"                password: \u0027testuser\u0027"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"            })"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"        const response \u003d await request(app)"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"            .post(`${BASE_URL_PREFIX}`)"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"            .set(\u0027Accept\u0027, \u0027application/json\u0027)"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"            .send({"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"                username: \u0027testuser\u0027,"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"                password: \u0027testuser\u0027"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"            })"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"        expect(\u0027Content-Type\u0027, /json/)"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"        expect(201)"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"        expect(response.body.message).equal(\u0027Created new user testuser successfully\u0027);"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"    });"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"    it(\u0027responds unsuccessfully for creating duplicate user\u0027, async function () {"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"        const response \u003d await request(app)"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"            .post(`${BASE_URL_PREFIX}`)"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"            .set(\u0027Accept\u0027, \u0027application/json\u0027)"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"            .send({"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"                username: \u0027testuser\u0027,"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"                password: \u0027testuser\u0027"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"            })"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"        expect(\u0027Content-Type\u0027, /json/)"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"        expect(409)"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"        expect(response.body.message).equal(\u0027Username has been taken\u0027);"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"    });"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"});"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"describe(\u0027Login/Logout user\u0027, function () {"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"    it(\u0027responds successfully for login\u0027, async function () {"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"        const response \u003d await request(app)"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"            .post(`${BASE_URL_PREFIX}/login`)"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"            .set(\u0027Accept\u0027, \u0027application/json\u0027)"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"            .send({"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"                username: \u0027testuser\u0027,"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"                password: \u0027testuser\u0027"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"            })"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"        expect(\u0027Content-Type\u0027, /json/)"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"        expect(200)"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"        expect(response.body.message).equal(\u0027User login is successful\u0027);"},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"        expect(response.body.data).to.be.a(\u0027object\u0027);"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"        expect(response.body.data).to.have.property(\u0027username\u0027);"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"        expect(response.body.data).to.have.property(\u0027accessToken\u0027);"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"        expect(response.body.data.username).equal(\u0027testuser\u0027);"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"        accessToken \u003d response.body.data.accessToken;"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"    });"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"    it(\u0027responds successfully for logout\u0027, async function () {"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"        const response \u003d await request(app)"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"            .post(`${BASE_URL_PREFIX}/logout`)"},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"            .set(\u0027Accept\u0027, \u0027application/json\u0027)"},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"            .set(\u0027Authorization\u0027, `Bearer ${accessToken}`)"},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":"        expect(\u0027Content-Type\u0027, /json/)"},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"        expect(200)"},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":"        expect(response.body.message).equal(\u0027User logout is successful\u0027);"},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"    });"},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":"});"},{"lineNumber":85,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":86,"author":{"gitId":"tlylt"},"content":"describe(\u0027Delete user\u0027, function () {"},{"lineNumber":87,"author":{"gitId":"tlylt"},"content":"    it(\u0027responds successfully for delete\u0027, async function () {"},{"lineNumber":88,"author":{"gitId":"tlylt"},"content":"        // await some time to allow for token change"},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"        // https://github.com/auth0/node-jsonwebtoken/issues/570"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"        await new Promise(resolve \u003d\u003e setTimeout(resolve, 1000));"},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":"        // Update access token"},{"lineNumber":92,"author":{"gitId":"tlylt"},"content":"        const res \u003d await request(app)"},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":"            .post(`${BASE_URL_PREFIX}/login`)"},{"lineNumber":94,"author":{"gitId":"tlylt"},"content":"            .set(\u0027Accept\u0027, \u0027application/json\u0027)"},{"lineNumber":95,"author":{"gitId":"tlylt"},"content":"            .send({"},{"lineNumber":96,"author":{"gitId":"tlylt"},"content":"                username: \u0027testuser\u0027,"},{"lineNumber":97,"author":{"gitId":"tlylt"},"content":"                password: \u0027testuser\u0027"},{"lineNumber":98,"author":{"gitId":"tlylt"},"content":"            })"},{"lineNumber":99,"author":{"gitId":"tlylt"},"content":"        accessToken \u003d res.body.data.accessToken;"},{"lineNumber":100,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":101,"author":{"gitId":"tlylt"},"content":"        const response \u003d await request(app)"},{"lineNumber":102,"author":{"gitId":"tlylt"},"content":"            .delete(`${BASE_URL_PREFIX}`)"},{"lineNumber":103,"author":{"gitId":"tlylt"},"content":"            .set(\u0027Accept\u0027, \u0027application/json\u0027)"},{"lineNumber":104,"author":{"gitId":"tlylt"},"content":"            .set(\u0027Authorization\u0027, `Bearer ${accessToken}`)"},{"lineNumber":105,"author":{"gitId":"tlylt"},"content":"        expect(\u0027Content-Type\u0027, /json/)"},{"lineNumber":106,"author":{"gitId":"tlylt"},"content":"        expect(200)"},{"lineNumber":107,"author":{"gitId":"tlylt"},"content":"        expect(response.body.message).equal(\u0027Deleted user testuser successfully\u0027);"},{"lineNumber":108,"author":{"gitId":"tlylt"},"content":"    });"},{"lineNumber":109,"author":{"gitId":"tlylt"},"content":"});"}],"authorContributionMap":{"tlylt":109}},{"path":"frontend/public/android-chrome-192x192.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"tlylt":0}},{"path":"frontend/public/android-chrome-512x512.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"tlylt":0}},{"path":"frontend/public/apple-touch-icon.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"tlylt":0}},{"path":"frontend/public/favicon.ico","fileType":"ico","isBinary":true,"lines":[],"authorContributionMap":{"tlylt":0,"-":0}},{"path":"frontend/src/images/collaboration.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"tlylt":0}},{"path":"frontend/src/images/video.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"tlylt":0}}]
